!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.ol=n():t.ol=n()}(self,(function(){return function(){var t={72:function(t,n,i){var r,s,o;function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(){"use strict";function t(t,r,s,o,u){!function t(i,r,s,o,u){for(;o>s;){if(o-s>600){var e=o-s+1,h=r-s+1,f=Math.log(e),c=.5*Math.exp(2*f/3),a=.5*Math.sqrt(f*c*(e-c)/e)*(h-e/2<0?-1:1);t(i,r,Math.max(s,Math.floor(r-h*c/e+a)),Math.min(o,Math.floor(r+(e-h)*c/e+a)),u)}var v=i[r],l=s,d=o;for(n(i,s,r),u(i[o],v)>0&&n(i,s,o);l<d;){for(n(i,l,d),l++,d--;u(i[l],v)<0;)l++;for(;u(i[d],v)>0;)d--}0===u(i[s],v)?n(i,s,d):n(i,++d,o),d<=r&&(s=d+1),r<=d&&(o=d-1)}}(t,r,s||0,o||t.length-1,u||i)}function n(t,n,i){var r=t[n];t[n]=t[i],t[i]=r}function i(t,n){return t<n?-1:t>n?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(t,n,i){if(!i)return n.indexOf(t);for(var r=0;r<n.length;r++)if(i(t,n[r]))return r;return-1}function o(t,n){u(t,0,t.children.length,n,t)}function u(t,n,i,r,s){s||(s=d(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var o=n;o<i;o++){var u=t.children[o];e(s,t.leaf?r(u):u)}return s}function e(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function h(t,n){return t.minX-n.minX}function f(t,n){return t.minY-n.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function a(t){return t.maxX-t.minX+(t.maxY-t.minY)}function v(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function l(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w(n,i,r,s,o){for(var u=[i,r];u.length;)if(!((r=u.pop())-(i=u.pop())<=s)){var e=i+Math.ceil((r-i)/s/2)*s;t(n,e,i,r,o),u.push(i,e,e,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var n=this.data,i=[];if(!l(t,n))return i;for(var r=this.toBBox,s=[];n;){for(var o=0;o<n.children.length;o++){var u=n.children[o],e=n.leaf?r(u):u;l(t,e)&&(n.leaf?i.push(u):v(t,e)?this._all(u,i):s.push(u))}n=s.pop()}return i},r.prototype.collides=function(t){var n=this.data;if(!l(t,n))return!1;for(var i=[];n;){for(var r=0;r<n.children.length;r++){var s=n.children[r],o=n.leaf?this.toBBox(s):s;if(l(t,o)){if(n.leaf||v(t,o))return!0;i.push(s)}}n=i.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0;n<t.length;n++)this.insert(t[n]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,n){if(!t)return this;for(var i,r,o,u=this.data,e=this.toBBox(t),h=[],f=[];u||h.length;){if(u||(u=h.pop(),r=h[h.length-1],i=f.pop(),o=!0),u.leaf){var c=s(t,u.children,n);if(-1!==c)return u.children.splice(c,1),h.push(u),this._condense(h),this}o||u.leaf||!v(u,e)?r?(i++,u=r.children[i],o=!1):u=null:(h.push(u),f.push(i),i=0,r=u,u=u.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,n){return t.minX-n.minX},r.prototype.compareMinY=function(t,n){return t.minY-n.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,n){for(var i=[];t;)t.leaf?n.push.apply(n,t.children):i.push.apply(i,t.children),t=i.pop();return n},r.prototype._build=function(t,n,i,r){var s,u=i-n+1,e=this._maxEntries;if(u<=e)return o(s=d(t.slice(n,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(u)/Math.log(e)),e=Math.ceil(u/Math.pow(e,r-1))),(s=d([])).leaf=!1,s.height=r;var h=Math.ceil(u/e),f=h*Math.ceil(Math.sqrt(e));w(t,n,i,f,this.compareMinX);for(var c=n;c<=i;c+=f){var a=Math.min(c+f-1,i);w(t,c,a,h,this.compareMinY);for(var v=c;v<=a;v+=h){var l=Math.min(v+h-1,a);s.children.push(this._build(t,v,l,r-1))}}return o(s,this.toBBox),s},r.prototype._chooseSubtree=function(t,n,i,r){for(;r.push(n),!n.leaf&&r.length-1!==i;){for(var s=1/0,o=1/0,u=void 0,e=0;e<n.children.length;e++){var h=n.children[e],f=c(h),a=(v=t,l=h,(Math.max(l.maxX,v.maxX)-Math.min(l.minX,v.minX))*(Math.max(l.maxY,v.maxY)-Math.min(l.minY,v.minY))-f);a<o?(o=a,s=f<s?f:s,u=h):a===o&&f<s&&(s=f,u=h)}n=u||n.children[0]}var v,l;return n},r.prototype._insert=function(t,n,i){var r=i?t:this.toBBox(t),s=[],o=this._chooseSubtree(r,this.data,n,s);for(o.children.push(t),e(o,r);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(r,s,n)},r.prototype._split=function(t,n){var i=t[n],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var u=this._chooseSplitIndex(i,s,r),e=d(i.children.splice(u,i.children.length-u));e.height=i.height,e.leaf=i.leaf,o(i,this.toBBox),o(e,this.toBBox),n?t[n-1].children.push(e):this._splitRoot(i,e)},r.prototype._splitRoot=function(t,n){this.data=d([t,n]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,n,i){for(var r,s,o,e,h,f,a,v=1/0,l=1/0,d=n;d<=i-n;d++){var w=u(t,0,d,this.toBBox),p=u(t,d,i,this.toBBox),y=(s=w,o=p,e=Math.max(s.minX,o.minX),h=Math.max(s.minY,o.minY),f=Math.min(s.maxX,o.maxX),a=Math.min(s.maxY,o.maxY),Math.max(0,f-e)*Math.max(0,a-h)),b=c(w)+c(p);y<v?(v=y,r=d,l=b<l?b:l):y===v&&b<l&&(l=b,r=d)}return r||i-n},r.prototype._chooseSplitAxis=function(t,n,i){var r=t.leaf?this.compareMinX:h,s=t.leaf?this.compareMinY:f;this._allDistMargin(t,n,i,r)<this._allDistMargin(t,n,i,s)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,n,i,r){t.children.sort(r);for(var s=this.toBBox,o=u(t,0,n,s),h=u(t,i-n,i,s),f=a(o)+a(h),c=n;c<i-n;c++){var v=t.children[c];e(o,t.leaf?s(v):v),f+=a(o)}for(var l=i-n-1;l>=n;l--){var d=t.children[l];e(h,t.leaf?s(d):d),f+=a(h)}return f},r.prototype._adjustParentBBoxes=function(t,n,i){for(var r=i;r>=0;r--)e(n[r],t)},r.prototype._condense=function(t){for(var n=t.length-1,i=void 0;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():o(t[n],this.toBBox)},r},"object"==u(n)?t.exports=o():void 0===(s="function"==typeof(r=o)?r.call(n,i,n,t):r)||(t.exports=s)},760:function(t,n,i){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=function(t){"use strict";var n,i=Object.prototype,s=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",e=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function f(t,n,i){return Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{f({},"")}catch(t){f=function(t,n,i){return t[n]=i}}function c(t,n,i,r){var s=n&&n.prototype instanceof y?n:y,o=Object.create(s.prototype),u=new A(r||[]);return o._invoke=function(t,n,i){var r=v;return function(s,o){if(r===d)throw new Error("Generator is already running");if(r===w){if("throw"===s)throw o;return N()}for(i.method=s,i.arg=o;;){var u=i.delegate;if(u){var e=S(u,i);if(e){if(e===p)continue;return e}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===v)throw r=w,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=d;var h=a(t,n,i);if("normal"===h.type){if(r=i.done?w:l,h.arg===p)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(r=w,i.method="throw",i.arg=h.arg)}}}(t,i,u),o}function a(t,n,i){try{return{type:"normal",arg:t.call(n,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var v="suspendedStart",l="suspendedYield",d="executing",w="completed",p={};function y(){}function b(){}function _(){}var g={};f(g,u,(function(){return this}));var m=Object.getPrototypeOf,O=m&&m(m(C([])));O&&O!==i&&s.call(O,u)&&(g=O);var M=_.prototype=y.prototype=Object.create(g);function j(t){["next","throw","return"].forEach((function(n){f(t,n,(function(t){return this._invoke(n,t)}))}))}function x(t,n){function i(o,u,e,h){var f=a(t[o],t,u);if("throw"!==f.type){var c=f.arg,v=c.value;return v&&"object"===r(v)&&s.call(v,"__await")?n.resolve(v.__await).then((function(t){i("next",t,e,h)}),(function(t){i("throw",t,e,h)})):n.resolve(v).then((function(t){c.value=t,e(c)}),(function(t){return i("throw",t,e,h)}))}h(f.arg)}var o;this._invoke=function(t,r){function s(){return new n((function(n,s){i(t,r,n,s)}))}return o=o?o.then(s,s):s()}}function S(t,i){var r=t.iterator[i.method];if(r===n){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=n,S(t,i),"throw"===i.method))return p;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var s=a(r,t.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,p;var o=s.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=n),i.delegate=null,p):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,p)}function E(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function T(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function C(t){if(t){var i=t[u];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function i(){for(;++r<t.length;)if(s.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=n,i.done=!0,i};return o.next=o}}return{next:N}}function N(){return{value:n,done:!0}}return b.prototype=_,f(M,"constructor",_),f(_,"constructor",b),b.displayName=f(_,h,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===b||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,f(t,h,"GeneratorFunction")),t.prototype=Object.create(M),t},t.awrap=function(t){return{__await:t}},j(x.prototype),f(x.prototype,e,(function(){return this})),t.AsyncIterator=x,t.async=function(n,i,r,s,o){void 0===o&&(o=Promise);var u=new x(c(n,i,r,s),o);return t.isGeneratorFunction(i)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},j(M),f(M,h,"Generator"),f(M,u,(function(){return this})),f(M,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var i in t)n.push(i);return n.reverse(),function i(){for(;n.length;){var r=n.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=C,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!t)for(var i in this)"t"===i.charAt(0)&&s.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(r,s){return e.type="throw",e.arg=t,i.next=r,s&&(i.method="next",i.arg=n),!!s}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],e=u.completion;if("root"===u.tryLoc)return r("end");if(u.tryLoc<=this.prev){var h=s.call(u,"catchLoc"),f=s.call(u,"finallyLoc");if(h&&f){if(this.prev<u.catchLoc)return r(u.catchLoc,!0);if(this.prev<u.finallyLoc)return r(u.finallyLoc)}else if(h){if(this.prev<u.catchLoc)return r(u.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return r(u.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),T(i),p}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var s=r.arg;T(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:C(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=n),p}},t}("object"===r(t=i.nmd(t))?t.exports:{});try{regeneratorRuntime=s}catch(t){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}},164:function(t,n,i){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}i.d(n,{default:function(){return Fg}});var s=0;function o(t){return t.ol_uid||(t.ol_uid=String(++s))}var u,e="6.9.0",h=(u=function(t,n){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}u(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),f=function(t){function n(n){var i=this,r="Assertion failed. See https://openlayers.org/en/"+("v"+e.split("-")[0])+"/doc/errors/#"+n+" for details.";return(i=t.call(this,r)||this).code=n,i.name="AssertionError",i.message=r,i}return h(n,t),n}(Error);function c(t){t.stopPropagation()}var a=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),v="propertychange",l=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function d(t,n,i){for(var r,s,o=i||w,u=0,e=t.length,h=!1;u<e;)(s=+o(t[r=u+(e-u>>1)],n))<0?u=r+1:(e=r,h=!s);return h?u:~u}function w(t,n){return t>n?1:t<n?-1:0}function p(t,n){return t.indexOf(n)>=0}function y(t,n,i){var r=t.length;if(t[0]<=n)return 0;if(n<=t[r-1])return r-1;var s=void 0;if(i>0){for(s=1;s<r;++s)if(t[s]<n)return s-1}else if(i<0){for(s=1;s<r;++s)if(t[s]<=n)return s}else for(s=1;s<r;++s){if(t[s]==n)return s;if(t[s]<n)return"function"==typeof i?i(n,t[s-1],t[s])>0?s-1:s:t[s-1]-n<n-t[s]?s-1:s}return r-1}function b(t,n,i){for(;n<i;){var r=t[n];t[n]=t[i],t[i]=r,++n,--i}}function _(t,n){for(var i=Array.isArray(n)?n:[n],r=i.length,s=0;s<r;s++)t[t.length]=i[s]}function g(t,n){var i=t.length;if(i!==n.length)return!1;for(var r=0;r<i;r++)if(t[r]!==n[r])return!1;return!0}function m(t,n,i){var r=n||w;return t.every((function(n,s){if(0===s)return!0;var o=r(t[s-1],n);return!(o>0||i&&0===o)}))}function O(){return!0}function M(){return!1}function j(){}function x(t){var n,i,r,s=!1;return function(){var o=Array.prototype.slice.call(arguments);return s&&this===r&&g(o,i)||(s=!0,r=this,i=o,n=t.apply(this,arguments)),n}}var S="function"==typeof Object.assign?Object.assign:function(t,n){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=1,s=arguments.length;r<s;++r){var o=arguments[r];if(null!=o)for(var u in o)o.hasOwnProperty(u)&&(i[u]=o[u])}return i};function E(t){for(var n in t)delete t[n]}var T="function"==typeof Object.values?Object.values:function(t){var n=[];for(var i in t)n.push(t[i]);return n};function A(t){var n;for(n in t)return!1;return!n}var C=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),N=function(t){function n(n){var i=t.call(this)||this;return i.t=n,i.i=null,i.u=null,i.h=null,i}return C(n,t),n.prototype.addEventListener=function(t,n){if(t&&n){var i=this.h||(this.h={}),r=i[t]||(i[t]=[]);-1===r.indexOf(n)&&r.push(n)}},n.prototype.dispatchEvent=function(t){var n="string"==typeof t?new a(t):t,i=n.type;n.target||(n.target=this.t||this);var r,s=this.h&&this.h[i];if(s){var o=this.u||(this.u={}),u=this.i||(this.i={});i in o||(o[i]=0,u[i]=0),++o[i];for(var e=0,h=s.length;e<h;++e)if(!1===(r="handleEvent"in s[e]?s[e].handleEvent(n):s[e].call(this,n))||n.propagationStopped){r=!1;break}if(--o[i],0===o[i]){var f=u[i];for(delete u[i];f--;)this.removeEventListener(i,j);delete o[i]}return r}},n.prototype.disposeInternal=function(){this.h&&E(this.h)},n.prototype.getListeners=function(t){return this.h&&this.h[t]||void 0},n.prototype.hasListener=function(t){return!!this.h&&(t?t in this.h:Object.keys(this.h).length>0)},n.prototype.removeEventListener=function(t,n){var i=this.h&&this.h[t];if(i){var r=i.indexOf(n);-1!==r&&(this.i&&t in this.i?(i[r]=j,++this.i[t]):(i.splice(r,1),0===i.length&&delete this.h[t]))}},n}(l),k="change",P="error",I="contextmenu",G="click",R="dblclick",L="dragenter",F="dragover",D="drop",z="keydown",U="keypress",X="load",Y="resize",W="touchmove",B="wheel";function q(t,n,i,r,s){if(r&&r!==t&&(i=i.bind(r)),s){var o=i;i=function(){t.removeEventListener(n,i),o.apply(this,arguments)}}var u={target:t,type:n,listener:i};return t.addEventListener(n,i),u}function Z(t,n,i,r){return q(t,n,i,r,!0)}function J(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),E(t))}var V=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),H=function(t){function n(){var n=t.call(this)||this;return n.on=n.onInternal,n.once=n.onceInternal,n.un=n.unInternal,n.v=0,n}return V(n,t),n.prototype.changed=function(){++this.v,this.dispatchEvent(k)},n.prototype.getRevision=function(){return this.v},n.prototype.onInternal=function(t,n){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),s=0;s<i;++s)r[s]=q(this,t[s],n);return r}return q(this,t,n)},n.prototype.onceInternal=function(t,n){var i;if(Array.isArray(t)){var r=t.length;i=new Array(r);for(var s=0;s<r;++s)i[s]=Z(this,t[s],n)}else i=Z(this,t,n);return n.ol_key=i,i},n.prototype.unInternal=function(t,n){var i=n.ol_key;if(i)$(i);else if(Array.isArray(t))for(var r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],n);else this.removeEventListener(t,n)},n}(N);function $(t){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)J(t[n]);else J(t)}H.prototype.on,H.prototype.once,H.prototype.un;var K=H,Q=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tt=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.key=i,s.oldValue=r,s}return Q(n,t),n}(a),nt=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,o(i),i.l=null,void 0!==n&&i.setProperties(n),i}return Q(n,t),n.prototype.get=function(t){var n;return this.l&&this.l.hasOwnProperty(t)&&(n=this.l[t]),n},n.prototype.getKeys=function(){return this.l&&Object.keys(this.l)||[]},n.prototype.getProperties=function(){return this.l&&S({},this.l)||{}},n.prototype.hasProperties=function(){return!!this.l},n.prototype.notify=function(t,n){var i;i="change:"+t,this.dispatchEvent(new tt(i,t,n)),i=v,this.dispatchEvent(new tt(i,t,n))},n.prototype.addChangeListener=function(t,n){this.addEventListener("change:"+t,n)},n.prototype.removeChangeListener=function(t,n){this.removeEventListener("change:"+t,n)},n.prototype.set=function(t,n,i){var r=this.l||(this.l={});if(i)r[t]=n;else{var s=r[t];r[t]=n,s!==n&&this.notify(t,s)}},n.prototype.setProperties=function(t,n){for(var i in t)this.set(i,t[i],n)},n.prototype.applyProperties=function(t){t.l&&S(this.l||(this.l={}),t.l)},n.prototype.unset=function(t,n){if(this.l&&t in this.l){var i=this.l[t];delete this.l[t],A(this.l)&&(this.l=null),n||this.notify(t,i)}},n}(K),it="add",rt="remove",st=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ot="length",ut=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.element=i,s.index=r,s}return st(n,t),n}(a),et=function(t){function n(n,i){var r=t.call(this)||this;r.on,r.once,r.un;var s=i||{};if(r.p=!!s.unique,r._=n||[],r.p)for(var o=0,u=r._.length;o<u;++o)r.g(r._[o],o);return r.m(),r}return st(n,t),n.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},n.prototype.extend=function(t){for(var n=0,i=t.length;n<i;++n)this.push(t[n]);return this},n.prototype.forEach=function(t){for(var n=this._,i=0,r=n.length;i<r;++i)t(n[i],i,n)},n.prototype.getArray=function(){return this._},n.prototype.item=function(t){return this._[t]},n.prototype.getLength=function(){return this.get(ot)},n.prototype.insertAt=function(t,n){this.p&&this.g(n),this._.splice(t,0,n),this.m(),this.dispatchEvent(new ut(it,n,t))},n.prototype.pop=function(){return this.removeAt(this.getLength()-1)},n.prototype.push=function(t){this.p&&this.g(t);var n=this.getLength();return this.insertAt(n,t),this.getLength()},n.prototype.remove=function(t){for(var n=this._,i=0,r=n.length;i<r;++i)if(n[i]===t)return this.removeAt(i)},n.prototype.removeAt=function(t){var n=this._[t];return this._.splice(t,1),this.m(),this.dispatchEvent(new ut(rt,n,t)),n},n.prototype.setAt=function(t,n){var i=this.getLength();if(t<i){this.p&&this.g(n,t);var r=this._[t];this._[t]=n,this.dispatchEvent(new ut(rt,r,t)),this.dispatchEvent(new ut(it,n,t))}else{for(var s=i;s<t;++s)this.insertAt(s,void 0);this.insertAt(t,n)}},n.prototype.m=function(){this.set(ot,this._.length)},n.prototype.g=function(t,n){for(var i=0,r=this._.length;i<r;++i)if(this._[i]===t&&i!==n)throw new f(58)},n}(nt),ht=0,ft=1,ct=2,at=3,vt=4;function lt(t){return Math.pow(t,3)}function dt(t){return 1-lt(1-t)}function wt(t){return 3*t*t-2*t*t*t}function pt(t){return t}var yt=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bt=function(t){function n(n,i,r){var s=t.call(this)||this,o=r||{};return s.tileCoord=n,s.state=i,s.interimTile=null,s.key="",s.O=void 0===o.transition?250:o.transition,s.j={},s}return yt(n,t),n.prototype.changed=function(){this.dispatchEvent(k)},n.prototype.release=function(){},n.prototype.getKey=function(){return this.key+"/"+this.tileCoord},n.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==ct)return this.O=0,t;t=t.interimTile}while(t);return this},n.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,n=this;do{if(t.getState()==ct){t.interimTile=null;break}t.getState()==ft?n=t:t.getState()==ht?n.interimTile=t.interimTile:n=t,t=n.interimTile}while(t)}},n.prototype.getTileCoord=function(){return this.tileCoord},n.prototype.getState=function(){return this.state},n.prototype.setState=function(t){if(this.state!==at&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},n.prototype.load=function(){r()},n.prototype.getAlpha=function(t,n){if(!this.O)return 1;var i=this.j[t];if(i){if(-1===i)return 1}else i=n,this.j[t]=i;var r=n-i+1e3/60;return r>=this.O?1:lt(r/this.O)},n.prototype.inTransition=function(t){return!!this.O&&-1!==this.j[t]},n.prototype.endTransition=function(t){this.O&&(this.j[t]=-1)},n}(N),_t=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gt=function(t){function n(n){var i=this,r=ht;return(i=t.call(this,n.tileCoord,r,{transition:n.transition})||this).S=n.loader,i.T=null,i.A=null,i}return _t(n,t),n.prototype.getData=function(){return this.T},n.prototype.getError=function(){return this.A},n.prototype.load=function(){this.state=ft,this.changed();var t=this;this.S().then((function(n){t.T=n,t.state=ct,t.changed()})).catch((function(n){t.A=n,t.state=at,t.changed()}))},n}(bt);function mt(t,n){if(!t)throw new f(n)}var Ot=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Mt(t){return"function"==typeof t?t:(Array.isArray(t)?n=t:(mt("function"==typeof t.getZIndex,41),n=[t]),function(){return n});var n}var jt=function(t){function n(n){var i=t.call(this)||this;if(i.on,i.once,i.un,i.C=void 0,i.N="geometry",i.k=null,i.P=void 0,i.I=null,i.addChangeListener(i.N,i.G),n)if("function"==typeof n.getSimplifiedGeometry){var r=n;i.setGeometry(r)}else{var s=n;i.setProperties(s)}return i}return Ot(n,t),n.prototype.clone=function(){var t=new n(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},n.prototype.getGeometry=function(){return this.get(this.N)},n.prototype.getId=function(){return this.C},n.prototype.getGeometryName=function(){return this.N},n.prototype.getStyle=function(){return this.k},n.prototype.getStyleFunction=function(){return this.P},n.prototype.R=function(){this.changed()},n.prototype.G=function(){this.I&&(J(this.I),this.I=null);var t=this.getGeometry();t&&(this.I=q(t,k,this.R,this)),this.changed()},n.prototype.setGeometry=function(t){this.set(this.N,t)},n.prototype.setStyle=function(t){this.k=t,this.P=t?Mt(t):void 0,this.changed()},n.prototype.setId=function(t){this.C=t,this.changed()},n.prototype.setGeometryName=function(t){this.removeChangeListener(this.N,this.G),this.N=t,this.addChangeListener(this.N,this.G),this.G()},n}(nt),xt="XY",St="XYZ",Et="XYM",Tt="XYZM",At={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Ct={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Nt={9001:Ct.METERS,9002:Ct.FEET,9003:Ct.USFEET,9101:Ct.RADIANS,9102:Ct.DEGREES};var kt={};kt[Ct.RADIANS]=6370997/(2*Math.PI),kt[Ct.DEGREES]=2*Math.PI*6370997/360,kt[Ct.FEET]=.3048,kt[Ct.METERS]=1,kt[Ct.USFEET]=1200/3937;var Pt,It=Ct,Gt="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Rt=-1!==Gt.indexOf("firefox"),Lt=-1!==Gt.indexOf("safari")&&-1==Gt.indexOf("chrom"),Ft=-1!==Gt.indexOf("webkit")&&-1==Gt.indexOf("edge"),Dt=-1!==Gt.indexOf("macintosh"),zt="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Ut="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Xt="undefined"!=typeof Image&&Image.prototype.decode,Yt=function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch(t){}return t}(),Wt=new Array(6);function Bt(){return[1,0,0,1,0,0]}function qt(t){return Jt(t,1,0,0,1,0,0)}function Zt(t,n){var i=t[0],r=t[1],s=t[2],o=t[3],u=t[4],e=t[5],h=n[0],f=n[1],c=n[2],a=n[3],v=n[4],l=n[5];return t[0]=i*h+s*f,t[1]=r*h+o*f,t[2]=i*c+s*a,t[3]=r*c+o*a,t[4]=i*v+s*l+u,t[5]=r*v+o*l+e,t}function Jt(t,n,i,r,s,o,u){return t[0]=n,t[1]=i,t[2]=r,t[3]=s,t[4]=o,t[5]=u,t}function Vt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function Ht(t,n){var i=n[0],r=n[1];return n[0]=t[0]*i+t[2]*r+t[4],n[1]=t[1]*i+t[3]*r+t[5],n}function $t(t,n){var i=Math.cos(n),r=Math.sin(n);return Zt(t,Jt(Wt,i,r,-r,i,0,0))}function Kt(t,n,i){return Zt(t,Jt(Wt,n,0,0,i,0,0))}function Qt(t,n,i){return Jt(t,n,0,0,i,0,0)}function tn(t,n,i,r,s,o,u,e){var h=Math.sin(o),f=Math.cos(o);return t[0]=r*f,t[1]=s*h,t[2]=-r*h,t[3]=s*f,t[4]=u*r*f-e*r*h+n,t[5]=u*s*h+e*s*f+i,t}function nn(t,n){var i=rn(n);mt(0!==i,32);var r=n[0],s=n[1],o=n[2],u=n[3],e=n[4],h=n[5];return t[0]=u/i,t[1]=-s/i,t[2]=-o/i,t[3]=r/i,t[4]=(o*h-u*e)/i,t[5]=-(r*h-s*e)/i,t}function rn(t){return t[0]*t[3]-t[1]*t[2]}function sn(t){var n="matrix("+t.join(", ")+")";if(Ut)return n;var i=Pt||(Pt=document.createElement("div"));return i.style.transform=n,i.style.transform}var on="bottom-left",un="bottom-right",en="top-left",hn="top-right",fn=0,cn=1,an=2,vn=4,ln=8,dn=16;function wn(t){for(var n=Mn(),i=0,r=t.length;i<r;++i)Nn(n,t[i]);return n}function pn(t,n,i){return i?(i[0]=t[0]-n,i[1]=t[1]-n,i[2]=t[2]+n,i[3]=t[3]+n,i):[t[0]-n,t[1]-n,t[2]+n,t[3]+n]}function yn(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t.slice()}function bn(t,n,i){var r,s;return(r=n<t[0]?t[0]-n:t[2]<n?n-t[2]:0)*r+(s=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*s}function _n(t,n){return mn(t,n[0],n[1])}function gn(t,n){return t[0]<=n[0]&&n[2]<=t[2]&&t[1]<=n[1]&&n[3]<=t[3]}function mn(t,n,i){return t[0]<=n&&n<=t[2]&&t[1]<=i&&i<=t[3]}function On(t,n){var i=t[0],r=t[1],s=t[2],o=t[3],u=n[0],e=n[1],h=fn;return u<i?h|=dn:u>s&&(h|=vn),e<r?h|=ln:e>o&&(h|=an),h===fn&&(h=cn),h}function Mn(){return[1/0,1/0,-1/0,-1/0]}function jn(t,n,i,r,s){return s?(s[0]=t,s[1]=n,s[2]=i,s[3]=r,s):[t,n,i,r]}function xn(t){return jn(1/0,1/0,-1/0,-1/0,t)}function Sn(t,n){var i=t[0],r=t[1];return jn(i,r,i,r,n)}function En(t,n,i,r,s){return Pn(xn(s),t,n,i,r)}function Tn(t,n){return t[0]==n[0]&&t[2]==n[2]&&t[1]==n[1]&&t[3]==n[3]}function An(t,n,i){return Math.abs(t[0]-n[0])<i&&Math.abs(t[2]-n[2])<i&&Math.abs(t[1]-n[1])<i&&Math.abs(t[3]-n[3])<i}function Cn(t,n){return n[0]<t[0]&&(t[0]=n[0]),n[2]>t[2]&&(t[2]=n[2]),n[1]<t[1]&&(t[1]=n[1]),n[3]>t[3]&&(t[3]=n[3]),t}function Nn(t,n){n[0]<t[0]&&(t[0]=n[0]),n[0]>t[2]&&(t[2]=n[0]),n[1]<t[1]&&(t[1]=n[1]),n[1]>t[3]&&(t[3]=n[1])}function kn(t,n){for(var i=0,r=n.length;i<r;++i)Nn(t,n[i]);return t}function Pn(t,n,i,r,s){for(;i<r;i+=s)Gn(t,n[i],n[i+1]);return t}function In(t,n){for(var i=0,r=n.length;i<r;++i)kn(t,n[i]);return t}function Gn(t,n,i){t[0]=Math.min(t[0],n),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],n),t[3]=Math.max(t[3],i)}function Rn(t,n){var i;return(i=n(Fn(t)))||(i=n(Dn(t)))||(i=n(qn(t)))?i:(i=n(Bn(t)))||!1}function Ln(t){var n=0;return Vn(t)||(n=Zn(t)*Yn(t)),n}function Fn(t){return[t[0],t[1]]}function Dn(t){return[t[2],t[1]]}function zn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Un(t,n){var i;return n===on?i=Fn(t):n===un?i=Dn(t):n===en?i=Bn(t):n===hn?i=qn(t):mt(!1,13),i}function Xn(t,n,i,r,s){var o=n*r[0]/2,u=n*r[1]/2,e=Math.cos(i),h=Math.sin(i),f=o*e,c=o*h,a=u*e,v=u*h,l=t[0],d=t[1],w=l-f+v,p=l-f-v,y=l+f-v,b=l+f+v,_=d-c-a,g=d-c+a,m=d+c+a,O=d+c-a;return jn(Math.min(w,p,y,b),Math.min(_,g,m,O),Math.max(w,p,y,b),Math.max(_,g,m,O),s)}function Yn(t){return t[3]-t[1]}function Wn(t,n,i){var r=i||[1/0,1/0,-1/0,-1/0];return Jn(t,n)?(t[0]>n[0]?r[0]=t[0]:r[0]=n[0],t[1]>n[1]?r[1]=t[1]:r[1]=n[1],t[2]<n[2]?r[2]=t[2]:r[2]=n[2],t[3]<n[3]?r[3]=t[3]:r[3]=n[3]):xn(r),r}function Bn(t){return[t[0],t[3]]}function qn(t){return[t[2],t[3]]}function Zn(t){return t[2]-t[0]}function Jn(t,n){return t[0]<=n[2]&&t[2]>=n[0]&&t[1]<=n[3]&&t[3]>=n[1]}function Vn(t){return t[2]<t[0]||t[3]<t[1]}function Hn(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t}function $n(t,n){var i=(t[2]-t[0])/2*(n-1),r=(t[3]-t[1])/2*(n-1);t[0]-=i,t[2]+=i,t[1]-=r,t[3]+=r}function Kn(t,n,i){var r=!1,s=On(t,n),o=On(t,i);if(s===cn||o===cn)r=!0;else{var u=t[0],e=t[1],h=t[2],f=t[3],c=n[0],a=n[1],v=i[0],l=i[1],d=(l-a)/(v-c),w=void 0,p=void 0;o&an&&!(s&an)&&(r=(w=v-(l-f)/d)>=u&&w<=h),r||!(o&vn)||s&vn||(r=(p=l-(v-h)*d)>=e&&p<=f),r||!(o&ln)||s&ln||(r=(w=v-(l-e)/d)>=u&&w<=h),r||!(o&dn)||s&dn||(r=(p=l-(v-u)*d)>=e&&p<=f)}return r}function Qn(t,n,i,r){var s=[];if(r>1)for(var o=t[2]-t[0],u=t[3]-t[1],e=0;e<r;++e)s.push(t[0]+o*e/r,t[1],t[2],t[1]+u*e/r,t[2]-o*e/r,t[3],t[0],t[3]-u*e/r);else s=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];n(s,s,2);for(var h=[],f=[],c=(e=0,s.length);e<c;e+=2)h.push(s[e]),f.push(s[e+1]);return function(t,n,i){return jn(Math.min.apply(null,t),Math.min.apply(null,n),Math.max.apply(null,t),Math.max.apply(null,n),i)}(h,f,i)}function ti(t,n){var i=n.getExtent(),r=zn(t);if(n.canWrapX()&&(r[0]<i[0]||r[0]>=i[2])){var s=Zn(i),o=Math.floor((r[0]-i[0])/s)*s;t[0]-=o,t[2]-=o}return t}var ni=function(){function t(t){this.L=t.code,this.F=t.units,this.D=void 0!==t.extent?t.extent:null,this.U=void 0!==t.worldExtent?t.worldExtent:null,this.W=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.B=void 0!==t.global&&t.global,this.q=!(!this.B||!this.D),this.J=t.getPointResolution,this.V=null,this.H=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.q},t.prototype.getCode=function(){return this.L},t.prototype.getExtent=function(){return this.D},t.prototype.getUnits=function(){return this.F},t.prototype.getMetersPerUnit=function(){return this.H||kt[this.F]},t.prototype.getWorldExtent=function(){return this.U},t.prototype.getAxisOrientation=function(){return this.W},t.prototype.isGlobal=function(){return this.B},t.prototype.setGlobal=function(t){this.B=t,this.q=!(!t||!this.D)},t.prototype.getDefaultTileGrid=function(){return this.V},t.prototype.setDefaultTileGrid=function(t){this.V=t},t.prototype.setExtent=function(t){this.D=t,this.q=!(!this.B||!t)},t.prototype.setWorldExtent=function(t){this.U=t},t.prototype.setGetPointResolution=function(t){this.J=t},t.prototype.getPointResolutionFunc=function(){return this.J},t}();function ii(t,n,i){return Math.min(Math.max(t,n),i)}var ri="cosh"in Math?Math.cosh:function(t){var n=Math.exp(t);return(n+1/n)/2},si="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function oi(t,n,i,r,s,o){var u=s-i,e=o-r;if(0!==u||0!==e){var h=((t-i)*u+(n-r)*e)/(u*u+e*e);h>1?(i=s,r=o):h>0&&(i+=u*h,r+=e*h)}return ui(t,n,i,r)}function ui(t,n,i,r){var s=i-t,o=r-n;return s*s+o*o}function ei(t){for(var n=t.length,i=0;i<n;i++){for(var r=i,s=Math.abs(t[i][i]),o=i+1;o<n;o++){var u=Math.abs(t[o][i]);u>s&&(s=u,r=o)}if(0===s)return null;var e=t[r];t[r]=t[i],t[i]=e;for(var h=i+1;h<n;h++)for(var f=-t[h][i]/t[i][i],c=i;c<n+1;c++)i==c?t[h][c]=0:t[h][c]+=f*t[i][c]}for(var a=new Array(n),v=n-1;v>=0;v--){a[v]=t[v][n]/t[v][v];for(var l=v-1;l>=0;l--)t[l][n]-=t[l][v]*a[v]}return a}function hi(t){return 180*t/Math.PI}function fi(t){return t*Math.PI/180}function ci(t,n){var i=t%n;return i*n<0?i+n:i}function ai(t,n,i){return t+i*(n-t)}var vi=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),li=6378137,di=Math.PI*li,wi=[-di,-di,di,di],pi=[-180,-85,180,85],yi=li*Math.log(Math.tan(Math.PI/2)),bi=function(t){function n(n){return t.call(this,{code:n,units:It.METERS,extent:wi,global:!0,worldExtent:pi,getPointResolution:function(t,n){return t/ri(n[1]/li)}})||this}return vi(n,t),n}(ni),_i=[new bi("EPSG:3857"),new bi("EPSG:102100"),new bi("EPSG:102113"),new bi("EPSG:900913"),new bi("http://www.opengis.net/def/crs/EPSG/0/3857"),new bi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function gi(t,n,i){var r=t.length,s=i>1?i:2,o=n;void 0===o&&(o=s>2?t.slice():new Array(r));for(var u=0;u<r;u+=s){o[u]=di*t[u]/180;var e=li*Math.log(Math.tan(Math.PI*(+t[u+1]+90)/360));e>yi?e=yi:e<-yi&&(e=-yi),o[u+1]=e}return o}function mi(t,n,i){var r=t.length,s=i>1?i:2,o=n;void 0===o&&(o=s>2?t.slice():new Array(r));for(var u=0;u<r;u+=s)o[u]=180*t[u]/di,o[u+1]=360*Math.atan(Math.exp(t[u+1]/li))/Math.PI-90;return o}var Oi=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mi=6378137,ji=[-180,-90,180,90],xi=Math.PI*Mi/180,Si=function(t){function n(n,i){return t.call(this,{code:n,units:It.DEGREES,extent:ji,axisOrientation:i,global:!0,metersPerUnit:xi,worldExtent:ji})||this}return Oi(n,t),n}(ni),Ei=[new Si("CRS:84"),new Si("EPSG:4326","neu"),new Si("urn:ogc:def:crs:OGC:1.3:CRS84"),new Si("urn:ogc:def:crs:OGC:2:84"),new Si("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new Si("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Si("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Ti={};function Ai(){Ti={}}function Ci(t){return Ti[t]||Ti[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Ni(t,n){Ti[t]=n}var ki={};function Pi(){ki={}}function Ii(t,n,i){var r=t.getCode(),s=n.getCode();r in ki||(ki[r]={}),ki[r][s]=i}function Gi(t,n){var i;return t in ki&&n in ki[t]&&(i=ki[t][n]),i}var Ri=6371008.8;function Li(t,n,i){var r=i||Ri,s=fi(t[1]),o=fi(n[1]),u=(o-s)/2,e=fi(n[0]-t[0])/2,h=Math.sin(u)*Math.sin(u)+Math.sin(e)*Math.sin(e)*Math.cos(s)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function Fi(t,n){for(var i=0,r=0,s=t.length;r<s-1;++r)i+=Li(t[r],t[r+1],n);return i}function Di(t,n){for(var i=0,r=t.length,s=t[r-1][0],o=t[r-1][1],u=0;u<r;u++){var e=t[u][0],h=t[u][1];i+=fi(e-s)*(2+Math.sin(fi(o))+Math.sin(fi(h))),s=e,o=h}return i*n*n/2}function zi(t,n,i,r){var s=r||Ri,o=fi(t[1]),u=fi(t[0]),e=n/s,h=Math.asin(Math.sin(o)*Math.cos(e)+Math.cos(o)*Math.sin(e)*Math.cos(i));return[hi(u+Math.atan2(Math.sin(i)*Math.sin(e)*Math.cos(o),Math.cos(e)-Math.sin(o)*Math.sin(h))),hi(h)]}function Ui(t,n,i){var r=void 0!==i?t.toFixed(i):""+t,s=r.indexOf(".");return(s=-1===s?r.length:s)>n?r:new Array(1+n-s).join("0")+r}function Xi(t,n){return t[0]+=+n[0],t[1]+=+n[1],t}function Yi(t,n){var i=n.getRadius(),r=n.getCenter(),s=r[0],o=r[1],u=t[0]-s,e=t[1]-o;0===u&&0===e&&(u=1);var h=Math.sqrt(u*u+e*e);return[s+i*u/h,o+i*e/h]}function Wi(t,n){var i,r,s=t[0],o=t[1],u=n[0],e=n[1],h=u[0],f=u[1],c=e[0],a=e[1],v=c-h,l=a-f,d=0===v&&0===l?0:(v*(s-h)+l*(o-f))/(v*v+l*l||0);return d<=0?(i=h,r=f):d>=1?(i=c,r=a):(i=h+d*v,r=f+d*l),[i,r]}function Bi(t,n,i){var r=ci(n+180,360)-180,s=Math.abs(3600*r),o=i||0,u=Math.pow(10,o),e=Math.floor(s/3600),h=Math.floor((s-3600*e)/60),f=s-3600*e-60*h;return(f=Math.ceil(f*u)/u)>=60&&(f=0,h+=1),h>=60&&(h=0,e+=1),e+"° "+Ui(h,2)+"′ "+Ui(f,2,o)+"″"+(0==r?"":" "+t.charAt(r<0?1:0))}function qi(t,n,i){return t?n.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function Zi(t,n){for(var i=!0,r=t.length-1;r>=0;--r)if(t[r]!=n[r]){i=!1;break}return i}function Ji(t,n){var i=Math.cos(n),r=Math.sin(n),s=t[0]*i-t[1]*r,o=t[1]*i+t[0]*r;return t[0]=s,t[1]=o,t}function Vi(t,n){return t[0]*=n,t[1]*=n,t}function Hi(t,n){var i=t[0]-n[0],r=t[1]-n[1];return i*i+r*r}function $i(t,n){return Math.sqrt(Hi(t,n))}function Ki(t,n){return Hi(t,Wi(t,n))}function Qi(t,n){return qi(t,"{x}, {y}",n)}function tr(t,n){if(n.canWrapX()){var i=Zn(n.getExtent()),r=nr(t,n,i);r&&(t[0]-=r*i)}return t}function nr(t,n,i){var r=n.getExtent(),s=0;if(n.canWrapX()&&(t[0]<r[0]||t[0]>r[2])){var o=i||Zn(r);s=Math.floor((t[0]-r[0])/o)}return s}function ir(t,n,i){var r;if(void 0!==n){for(var s=0,o=t.length;s<o;++s)n[s]=t[s];r=n}else r=t.slice();return r}function rr(t,n,i){if(void 0!==n&&t!==n){for(var r=0,s=t.length;r<s;++r)n[r]=t[r];t=n}return t}function sr(t){Ni(t.getCode(),t),Ii(t,t,ir)}function or(t){t.forEach(sr)}function ur(t){return"string"==typeof t?Ci(t):t||null}function er(t,n,i,r){var s,o=(t=ur(t)).getPointResolutionFunc();if(o){if(s=o(n,i),r&&r!==t.getUnits())(e=t.getMetersPerUnit())&&(s=s*e/kt[r])}else{var u=t.getUnits();if(u==It.DEGREES&&!r||r==It.DEGREES)s=n;else{var e,h=dr(t,ur("EPSG:4326"));if(h===rr&&u!==It.DEGREES)s=n*t.getMetersPerUnit();else{var f=[i[0]-n/2,i[1],i[0]+n/2,i[1],i[0],i[1]-n/2,i[0],i[1]+n/2];s=(Li((f=h(f,f,2)).slice(0,2),f.slice(2,4))+Li(f.slice(4,6),f.slice(6,8)))/2}void 0!==(e=r?kt[r]:t.getMetersPerUnit())&&(s/=e)}}return s}function hr(t){or(t),t.forEach((function(n){t.forEach((function(t){n!==t&&Ii(n,t,ir)}))}))}function fr(t,n,i,r){t.forEach((function(t){n.forEach((function(n){Ii(t,n,i),Ii(n,t,r)}))}))}function cr(t,n){return t?"string"==typeof t?ur(t):t:ur(n)}function ar(t){return function(n,i,r){for(var s=n.length,o=void 0!==r?r:2,u=void 0!==i?i:new Array(s),e=0;e<s;e+=o){var h=t([n[e],n[e+1]]);u[e]=h[0],u[e+1]=h[1];for(var f=o-1;f>=2;--f)u[e+f]=n[e+f]}return u}}function vr(t,n,i,r){var s=ur(t),o=ur(n);Ii(s,o,ar(i)),Ii(o,s,ar(r))}function lr(t,n){if(t===n)return!0;var i=t.getUnits()===n.getUnits();return(t.getCode()===n.getCode()||dr(t,n)===ir)&&i}function dr(t,n){var i=Gi(t.getCode(),n.getCode());return i||(i=rr),i}function wr(t,n){return dr(ur(t),ur(n))}function pr(t,n,i){return wr(n,i)(t,void 0,t.length)}function yr(t,n,i,r){return Qn(t,wr(n,i),void 0,r)}var br=null;function _r(t){br=ur(t)}function gr(){return br}function mr(t,n){return br?pr(t,n,br):t}function Or(t,n){return br?pr(t,br,n):t}function Mr(t,n){return br?yr(t,n,br):t}function jr(t,n){return br?yr(t,br,n):t}function xr(t,n){if(!br)return t;var i=ur(n).getUnits(),r=br.getUnits();return i&&r?t*kt[i]/kt[r]:t}function Sr(t,n){if(!br)return t;var i=ur(n).getUnits(),r=br.getUnits();return i&&r?t*kt[r]/kt[i]:t}function Er(t,n,i){return function(r){var s,o,u=r[0],e=r[1];if(t.canWrapX()){var h=t.getExtent(),f=Zn(h);(o=nr(r,t,f))&&(u-=o*f),u=ii(u,h[0],h[2]),e=ii(e,h[1],h[3]),s=i([u,e])}else s=i(r);return o&&n.canWrapX()&&(s[0]+=o*Zn(n.getExtent())),s}}function Tr(){hr(_i),hr(Ei),fr(Ei,_i,gi,mi)}function Ar(t,n,i,r,s,o){for(var u=o||[],e=0,h=n;h<i;h+=r){var f=t[h],c=t[h+1];u[e++]=s[0]*f+s[2]*c+s[4],u[e++]=s[1]*f+s[3]*c+s[5]}return o&&u.length!=e&&(u.length=e),u}function Cr(t,n,i,r,s,o,u){for(var e=u||[],h=Math.cos(s),f=Math.sin(s),c=o[0],a=o[1],v=0,l=n;l<i;l+=r){var d=t[l]-c,w=t[l+1]-a;e[v++]=c+d*h-w*f,e[v++]=a+d*f+w*h;for(var p=l+2;p<l+r;++p)e[v++]=t[p]}return u&&e.length!=v&&(e.length=v),e}function Nr(t,n,i,r,s,o,u,e){for(var h=e||[],f=u[0],c=u[1],a=0,v=n;v<i;v+=r){var l=t[v]-f,d=t[v+1]-c;h[a++]=f+s*l,h[a++]=c+o*d;for(var w=v+2;w<v+r;++w)h[a++]=t[w]}return e&&h.length!=a&&(h.length=a),h}function kr(t,n,i,r,s,o,u){for(var e=u||[],h=0,f=n;f<i;f+=r){e[h++]=t[f]+s,e[h++]=t[f+1]+o;for(var c=f+2;c<f+r;++c)e[h++]=t[c]}return u&&e.length!=h&&(e.length=h),e}Tr();var Pr=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ir=[1,0,0,1,0,0],Gr=function(t){function n(){var n=t.call(this)||this;return n.D=[1/0,1/0,-1/0,-1/0],n.$=-1,n.simplifiedGeometryMaxMinSquaredTolerance=0,n.simplifiedGeometryRevision=0,n.simplifyTransformedInternal=x((function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);var r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})),n}return Pr(n,t),n.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)},n.prototype.clone=function(){return r()},n.prototype.closestPointXY=function(t,n,i,s){return r()},n.prototype.containsXY=function(t,n){var i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n},n.prototype.getClosestPoint=function(t,n){var i=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},n.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},n.prototype.computeExtent=function(t){return r()},n.prototype.getExtent=function(t){if(this.$!=this.getRevision()){var n=this.computeExtent(this.D);(isNaN(n[0])||isNaN(n[1]))&&xn(n),this.$=this.getRevision()}return Hn(this.D,t)},n.prototype.rotate=function(t,n){r()},n.prototype.scale=function(t,n,i){r()},n.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},n.prototype.getSimplifiedGeometry=function(t){return r()},n.prototype.getType=function(){return r()},n.prototype.applyTransform=function(t){r()},n.prototype.intersectsExtent=function(t){return r()},n.prototype.translate=function(t,n){r()},n.prototype.transform=function(t,n){var i=ur(t),r=i.getUnits()==It.TILE_PIXELS?function(t,r,s){var o=i.getExtent(),u=i.getWorldExtent(),e=Yn(u)/Yn(o);return tn(Ir,u[0],u[3],e,-e,0,0,0),Ar(t,0,t.length,s,Ir,r),wr(i,n)(t,r,s)}:wr(i,n);return this.applyTransform(r),this},n}(nt),Rr=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Lr(t){var n;return t==xt?n=2:t==St||t==Et?n=3:t==Tt&&(n=4),n}function Fr(t,n,i){var r=t.getFlatCoordinates();if(r){var s=t.getStride();return Ar(r,0,r.length,s,n,i)}return null}var Dr=function(t){function n(){var n=t.call(this)||this;return n.layout=xt,n.stride=2,n.flatCoordinates=null,n}return Rr(n,t),n.prototype.computeExtent=function(t){return En(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinates=function(){return r()},n.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.getFlatCoordinates=function(){return this.flatCoordinates},n.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},n.prototype.getLayout=function(){return this.layout},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},n.prototype.getSimplifiedGeometryInternal=function(t){return this},n.prototype.getStride=function(){return this.stride},n.prototype.setFlatCoordinates=function(t,n){this.stride=Lr(t),this.layout=t,this.flatCoordinates=n},n.prototype.setCoordinates=function(t,n){r()},n.prototype.setLayout=function(t,n,i){var r;if(t)r=Lr(t);else{for(var s=0;s<i;++s){if(0===n.length)return this.layout=xt,void(this.stride=2);n=n[0]}t=function(t){var n;2==t?n=xt:3==t?n=St:4==t&&(n=Tt);return n}(r=n.length)}this.layout=t,this.stride=r},n.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},n.prototype.rotate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Cr(i,0,i.length,r,t,n,i),this.changed()}},n.prototype.scale=function(t,n,i){var r=n;void 0===r&&(r=t);var s=i;s||(s=zn(this.getExtent()));var o=this.getFlatCoordinates();if(o){var u=this.getStride();Nr(o,0,o.length,u,t,r,s,o),this.changed()}},n.prototype.translate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();kr(i,0,i.length,r,t,n,i),this.changed()}},n}(Gr);function zr(t,n,i,r,s,o,u){var e,h=t[n],f=t[n+1],c=t[i]-h,a=t[i+1]-f;if(0===c&&0===a)e=n;else{var v=((s-h)*c+(o-f)*a)/(c*c+a*a);if(v>1)e=i;else{if(v>0){for(var l=0;l<r;++l)u[l]=ai(t[n+l],t[i+l],v);return void(u.length=r)}e=n}}for(l=0;l<r;++l)u[l]=t[e+l];u.length=r}function Ur(t,n,i,r,s){var o=t[n],u=t[n+1];for(n+=r;n<i;n+=r){var e=t[n],h=t[n+1],f=ui(o,u,e,h);f>s&&(s=f),o=e,u=h}return s}function Xr(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o];s=Ur(t,n,e,r,s),n=e}return s}function Yr(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o];s=Xr(t,n,e,r,s),n=e[e.length-1]}return s}function Wr(t,n,i,r,s,o,u,e,h,f,c){if(n==i)return f;var a,v;if(0===s){if((v=ui(u,e,t[n],t[n+1]))<f){for(a=0;a<r;++a)h[a]=t[n+a];return h.length=r,v}return f}for(var l=c||[NaN,NaN],d=n+r;d<i;)if(zr(t,d-r,d,r,u,e,l),(v=ui(u,e,l[0],l[1]))<f){for(f=v,a=0;a<r;++a)h[a]=l[a];h.length=r,d+=r}else d+=r*Math.max((Math.sqrt(v)-Math.sqrt(f))/s|0,1);if(o&&(zr(t,i-r,n,r,u,e,l),(v=ui(u,e,l[0],l[1]))<f)){for(f=v,a=0;a<r;++a)h[a]=l[a];h.length=r}return f}function Br(t,n,i,r,s,o,u,e,h,f,c){for(var a=c||[NaN,NaN],v=0,l=i.length;v<l;++v){var d=i[v];f=Wr(t,n,d,r,s,o,u,e,h,f,a),n=d}return f}function qr(t,n,i,r,s,o,u,e,h,f,c){for(var a=c||[NaN,NaN],v=0,l=i.length;v<l;++v){var d=i[v];f=Br(t,n,d,r,s,o,u,e,h,f,a),n=d[d.length-1]}return f}function Zr(t,n,i,r){for(var s=0,o=i.length;s<o;++s)t[n++]=i[s];return n}function Jr(t,n,i,r){for(var s=0,o=i.length;s<o;++s)for(var u=i[s],e=0;e<r;++e)t[n++]=u[e];return n}function Vr(t,n,i,r,s){for(var o=s||[],u=0,e=0,h=i.length;e<h;++e){var f=Jr(t,n,i[e],r);o[u++]=f,n=f}return o.length=u,o}function Hr(t,n,i,r,s){for(var o=s||[],u=0,e=0,h=i.length;e<h;++e){var f=Vr(t,n,i[e],r,o[u]);o[u++]=f,n=f[f.length-1]}return o.length=u,o}function $r(t,n,i,r,s,o,u){var e=(i-n)/r;if(e<3){for(;n<i;n+=r)o[u++]=t[n],o[u++]=t[n+1];return u}var h=new Array(e);h[0]=1,h[e-1]=1;for(var f=[n,i-r],c=0;f.length>0;){for(var a=f.pop(),v=f.pop(),l=0,d=t[v],w=t[v+1],p=t[a],y=t[a+1],b=v+r;b<a;b+=r){var _=oi(t[b],t[b+1],d,w,p,y);_>l&&(c=b,l=_)}l>s&&(h[(c-n)/r]=1,v+r<c&&f.push(v,c),c+r<a&&f.push(c,a))}for(b=0;b<e;++b)h[b]&&(o[u++]=t[n+b*r],o[u++]=t[n+b*r+1]);return u}function Kr(t,n,i,r,s,o,u,e){for(var h=0,f=i.length;h<f;++h){var c=i[h];u=$r(t,n,c,r,s,o,u),e.push(u),n=c}return u}function Qr(t,n,i,r,s,o,u){if(i<=n+r){for(;n<i;n+=r)o[u++]=t[n],o[u++]=t[n+1];return u}var e=t[n],h=t[n+1];o[u++]=e,o[u++]=h;var f=e,c=h;for(n+=r;n<i;n+=r)ui(e,h,f=t[n],c=t[n+1])>s&&(o[u++]=f,o[u++]=c,e=f,h=c);return f==e&&c==h||(o[u++]=f,o[u++]=c),u}function ts(t,n){return n*Math.round(t/n)}function ns(t,n,i,r,s,o,u){if(n==i)return u;var e,h,f=ts(t[n],s),c=ts(t[n+1],s);n+=r,o[u++]=f,o[u++]=c;do{if(e=ts(t[n],s),h=ts(t[n+1],s),(n+=r)==i)return o[u++]=e,o[u++]=h,u}while(e==f&&h==c);for(;n<i;){var a=ts(t[n],s),v=ts(t[n+1],s);if(n+=r,a!=e||v!=h){var l=e-f,d=h-c,w=a-f,p=v-c;l*p==d*w&&(l<0&&w<l||l==w||l>0&&w>l)&&(d<0&&p<d||d==p||d>0&&p>d)?(e=a,h=v):(o[u++]=e,o[u++]=h,f=e,c=h,e=a,h=v)}}return o[u++]=e,o[u++]=h,u}function is(t,n,i,r,s,o,u,e){for(var h=0,f=i.length;h<f;++h){var c=i[h];u=ns(t,n,c,r,s,o,u),e.push(u),n=c}return u}function rs(t,n,i,r,s,o,u,e){for(var h=0,f=i.length;h<f;++h){var c=i[h],a=[];u=is(t,n,c,r,s,o,u,a),e.push(a),n=c[c.length-1]}return u}function ss(t,n,i,r,s){for(var o=void 0!==s?s:[],u=0,e=n;e<i;e+=r)o[u++]=t.slice(e,e+r);return o.length=u,o}function os(t,n,i,r,s){for(var o=void 0!==s?s:[],u=0,e=0,h=i.length;e<h;++e){var f=i[e];o[u++]=ss(t,n,f,r,o[u]),n=f}return o.length=u,o}function us(t,n,i,r,s){for(var o=void 0!==s?s:[],u=0,e=0,h=i.length;e<h;++e){var f=i[e];o[u++]=os(t,n,f,r,o[u]),n=f[f.length-1]}return o.length=u,o}function es(t,n,i,r){for(var s=0,o=t[i-r],u=t[i-r+1];n<i;n+=r){var e=t[n],h=t[n+1];s+=u*e-o*h,o=e,u=h}return s/2}function hs(t,n,i,r){for(var s=0,o=0,u=i.length;o<u;++o){var e=i[o];s+=es(t,n,e,r),n=e}return s}function fs(t,n,i,r){for(var s=0,o=0,u=i.length;o<u;++o){var e=i[o];s+=hs(t,n,e,r),n=e[e.length-1]}return s}var cs=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),as=function(t){function n(n,i){var r=t.call(this)||this;return r.K=-1,r.tt=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r}return cs(n,t),n.prototype.clone=function(){return new n(this.flatCoordinates.slice(),this.layout)},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.tt!=this.getRevision()&&(this.K=Math.sqrt(Ur(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.tt=this.getRevision()),Wr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.K,!0,t,n,i,r))},n.prototype.getArea=function(){return es(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinates=function(){return ss(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=$r(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,xt)},n.prototype.getType=function(){return At.LINEAR_RING},n.prototype.intersectsExtent=function(t){return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jr(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Dr),vs=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ls=function(t){function n(n,i){var r=t.call(this)||this;return r.setCoordinates(n,i),r}return vs(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){var s=this.flatCoordinates,o=ui(t,n,s[0],s[1]);if(o<r){for(var u=this.stride,e=0;e<u;++e)i[e]=s[e];return i.length=u,o}return r},n.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},n.prototype.computeExtent=function(t){return Sn(this.flatCoordinates,t)},n.prototype.getType=function(){return At.POINT},n.prototype.intersectsExtent=function(t){return mn(t,this.flatCoordinates[0],this.flatCoordinates[1])},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Zr(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Dr);function ds(t,n,i,r,s){return!Rn(s,(function(s){return!ws(t,n,i,r,s[0],s[1])}))}function ws(t,n,i,r,s,o){for(var u=0,e=t[i-r],h=t[i-r+1];n<i;n+=r){var f=t[n],c=t[n+1];h<=o?c>o&&(f-e)*(o-h)-(s-e)*(c-h)>0&&u++:c<=o&&(f-e)*(o-h)-(s-e)*(c-h)<0&&u--,e=f,h=c}return 0!==u}function ps(t,n,i,r,s,o){if(0===i.length)return!1;if(!ws(t,n,i[0],r,s,o))return!1;for(var u=1,e=i.length;u<e;++u)if(ws(t,i[u-1],i[u],r,s,o))return!1;return!0}function ys(t,n,i,r,s,o){if(0===i.length)return!1;for(var u=0,e=i.length;u<e;++u){var h=i[u];if(ps(t,n,h,r,s,o))return!0;n=h[h.length-1]}return!1}function bs(t,n,i,r,s,o,u){for(var e,h,f,c,a,v,l,d=s[o+1],p=[],y=0,b=i.length;y<b;++y){var _=i[y];for(c=t[_-r],v=t[_-r+1],e=n;e<_;e+=r)a=t[e],l=t[e+1],(d<=v&&l<=d||v<=d&&d<=l)&&(f=(d-v)/(l-v)*(a-c)+c,p.push(f)),c=a,v=l}var g=NaN,m=-1/0;for(p.sort(w),c=p[0],e=1,h=p.length;e<h;++e){a=p[e];var O=Math.abs(a-c);O>m&&ps(t,n,i,r,f=(c+a)/2,d)&&(g=f,m=O),c=a}return isNaN(g)&&(g=s[o]),u?(u.push(g,d,m),u):[g,d,m]}function _s(t,n,i,r,s){for(var o=[],u=0,e=i.length;u<e;++u){var h=i[u];o=bs(t,n,h,r,s,2*u,o),n=h[h.length-1]}return o}function gs(t,n,i,r,s){var o;for(n+=r;n<i;n+=r)if(o=s(t.slice(n-r,n),t.slice(n,n+r)))return o;return!1}function ms(t,n,i,r,s){var o=Pn([1/0,1/0,-1/0,-1/0],t,n,i,r);return!!Jn(s,o)&&(!!gn(s,o)||(o[0]>=s[0]&&o[2]<=s[2]||(o[1]>=s[1]&&o[3]<=s[3]||gs(t,n,i,r,(function(t,n){return Kn(s,t,n)})))))}function Os(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){if(ms(t,n,i[o],r,s))return!0;n=i[o]}return!1}function Ms(t,n,i,r,s){return!!ms(t,n,i,r,s)||(!!ws(t,n,i,r,s[0],s[1])||(!!ws(t,n,i,r,s[0],s[3])||(!!ws(t,n,i,r,s[2],s[1])||!!ws(t,n,i,r,s[2],s[3]))))}function js(t,n,i,r,s){if(!Ms(t,n,i[0],r,s))return!1;if(1===i.length)return!0;for(var o=1,u=i.length;o<u;++o)if(ds(t,i[o-1],i[o],r,s)&&!ms(t,i[o-1],i[o],r,s))return!1;return!0}function xs(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o];if(js(t,n,e,r,s))return!0;n=e[e.length-1]}return!1}function Ss(t,n,i,r){for(;n<i-r;){for(var s=0;s<r;++s){var o=t[n+s];t[n+s]=t[i-r+s],t[i-r+s]=o}n+=r,i-=r}}function Es(t,n,i,r){for(var s=0,o=t[i-r],u=t[i-r+1];n<i;n+=r){var e=t[n],h=t[n+1];s+=(e-o)*(h+u),o=e,u=h}return 0===s?void 0:s>0}function Ts(t,n,i,r,s){for(var o=void 0!==s&&s,u=0,e=i.length;u<e;++u){var h=i[u],f=Es(t,n,h,r);if(0===u){if(o&&f||!o&&!f)return!1}else if(o&&!f||!o&&f)return!1;n=h}return!0}function As(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o];if(!Ts(t,n,e,r,s))return!1;e.length&&(n=e[e.length-1])}return!0}function Cs(t,n,i,r,s){for(var o=void 0!==s&&s,u=0,e=i.length;u<e;++u){var h=i[u],f=Es(t,n,h,r);(0===u?o&&f||!o&&!f:o&&!f||!o&&f)&&Ss(t,n,h,r),n=h}return n}function Ns(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o)n=Cs(t,n,i[o],r,s);return n}var ks=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ps=function(t){function n(n,i,r){var s=t.call(this)||this;return s.nt=[],s.it=-1,s.rt=null,s.K=-1,s.tt=-1,s.st=-1,s.ot=null,void 0!==i&&r?(s.setFlatCoordinates(i,n),s.nt=r):s.setCoordinates(n,i),s}return ks(n,t),n.prototype.appendLinearRing=function(t){this.flatCoordinates?_(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.nt.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.nt.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.tt!=this.getRevision()&&(this.K=Math.sqrt(Xr(this.flatCoordinates,0,this.nt,this.stride,0)),this.tt=this.getRevision()),Br(this.flatCoordinates,0,this.nt,this.stride,this.K,!0,t,n,i,r))},n.prototype.containsXY=function(t,n){return ps(this.getOrientedFlatCoordinates(),0,this.nt,this.stride,t,n)},n.prototype.getArea=function(){return hs(this.getOrientedFlatCoordinates(),0,this.nt,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?Cs(n=this.getOrientedFlatCoordinates().slice(),0,this.nt,this.stride,t):n=this.flatCoordinates,os(n,0,this.nt,this.stride)},n.prototype.getEnds=function(){return this.nt},n.prototype.getFlatInteriorPoint=function(){if(this.it!=this.getRevision()){var t=zn(this.getExtent());this.rt=bs(this.getOrientedFlatCoordinates(),0,this.nt,this.stride,t,0),this.it=this.getRevision()}return this.rt},n.prototype.getInteriorPoint=function(){return new ls(this.getFlatInteriorPoint(),Et)},n.prototype.getLinearRingCount=function(){return this.nt.length},n.prototype.getLinearRing=function(t){return t<0||this.nt.length<=t?null:new as(this.flatCoordinates.slice(0===t?0:this.nt[t-1],this.nt[t]),this.layout)},n.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.nt,r=[],s=0,o=0,u=i.length;o<u;++o){var e=i[o],h=new as(n.slice(s,e),t);r.push(h),s=e}return r},n.prototype.getOrientedFlatCoordinates=function(){if(this.st!=this.getRevision()){var t=this.flatCoordinates;Ts(t,0,this.nt,this.stride)?this.ot=t:(this.ot=t.slice(),this.ot.length=Cs(this.ot,0,this.nt,this.stride)),this.st=this.getRevision()}return this.ot},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=is(this.flatCoordinates,0,this.nt,this.stride,Math.sqrt(t),i,0,r),new n(i,xt,r)},n.prototype.getType=function(){return At.POLYGON},n.prototype.intersectsExtent=function(t){return js(this.getOrientedFlatCoordinates(),0,this.nt,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Vr(this.flatCoordinates,0,t,this.stride,this.nt);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(Dr),Is=Ps;function Gs(t,n,i,r){for(var s=i||32,o=[],u=0;u<s;++u)_(o,zi(t,n,2*Math.PI*u/s,r));return o.push(o[0],o[1]),new Ps(o,xt,[o.length])}function Rs(t){var n=t[0],i=t[1],r=t[2],s=t[3],o=[n,i,n,s,r,s,r,i,n,i];return new Ps(o,xt,[o.length])}function Ls(t,n,i){for(var r=n||32,s=t.getStride(),o=t.getLayout(),u=t.getCenter(),e=s*(r+1),h=new Array(e),f=0;f<e;f+=s){h[f]=0,h[f+1]=0;for(var c=2;c<s;c++)h[f+c]=u[c]}var a=[h.length],v=new Ps(h,o,a);return Fs(v,u,t.getRadius(),i),v}function Fs(t,n,i,r){for(var s=t.getFlatCoordinates(),o=t.getStride(),u=s.length/o-1,e=r||0,h=0;h<=u;++h){var f=h*o,c=e+2*ci(h,u)*Math.PI/u;s[f]=n[0]+i*Math.cos(c),s[f+1]=n[1]+i*Math.sin(c)}t.changed()}var Ds=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),zs="accuracy",Us="accuracyGeometry",Xs="altitude",Ys="altitudeAccuracy",Ws="heading",Bs="position",qs="projection",Zs="speed",Js="tracking",Vs="trackingOptions",Hs=function(t){function n(n){var i=t.call(this,P)||this;return i.code=n.code,i.message=n.message,i}return Ds(n,t),n}(a),$s=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.ut=null,i.et=rr,i.ht=void 0,i.addChangeListener(qs,i.ft),i.addChangeListener(Js,i.ct),void 0!==r.projection&&i.setProjection(r.projection),void 0!==r.trackingOptions&&i.setTrackingOptions(r.trackingOptions),i.setTracking(void 0!==r.tracking&&r.tracking),i}return Ds(n,t),n.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},n.prototype.ft=function(){var t=this.getProjection();t&&(this.et=dr(ur("EPSG:4326"),t),this.ut&&this.set(Bs,this.et(this.ut)))},n.prototype.ct=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.ht?this.ht=navigator.geolocation.watchPosition(this.at.bind(this),this.vt.bind(this),this.getTrackingOptions()):t||void 0===this.ht||(navigator.geolocation.clearWatch(this.ht),this.ht=void 0)}},n.prototype.at=function(t){var n=t.coords;this.set(zs,n.accuracy),this.set(Xs,null===n.altitude?void 0:n.altitude),this.set(Ys,null===n.altitudeAccuracy?void 0:n.altitudeAccuracy),this.set(Ws,null===n.heading?void 0:fi(n.heading)),this.ut?(this.ut[0]=n.longitude,this.ut[1]=n.latitude):this.ut=[n.longitude,n.latitude];var i=this.et(this.ut);this.set(Bs,i),this.set(Zs,null===n.speed?void 0:n.speed);var r=Gs(this.ut,n.accuracy);r.applyTransform(this.et),this.set(Us,r),this.changed()},n.prototype.vt=function(t){this.dispatchEvent(new Hs(t))},n.prototype.getAccuracy=function(){return this.get(zs)},n.prototype.getAccuracyGeometry=function(){return this.get(Us)||null},n.prototype.getAltitude=function(){return this.get(Xs)},n.prototype.getAltitudeAccuracy=function(){return this.get(Ys)},n.prototype.getHeading=function(){return this.get(Ws)},n.prototype.getPosition=function(){return this.get(Bs)},n.prototype.getProjection=function(){return this.get(qs)},n.prototype.getSpeed=function(){return this.get(Zs)},n.prototype.getTracking=function(){return this.get(Js)},n.prototype.getTrackingOptions=function(){return this.get(Vs)},n.prototype.setProjection=function(t){this.set(qs,ur(t))},n.prototype.setTracking=function(t){this.set(Js,t)},n.prototype.setTrackingOptions=function(t){this.set(Vs,t)},n}(nt),Ks=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qs=function(t){function n(n,i,r,s){var o=t.call(this)||this;return o.extent=n,o.lt=r,o.resolution=i,o.state=s,o}return Ks(n,t),n.prototype.changed=function(){this.dispatchEvent(k)},n.prototype.getExtent=function(){return this.extent},n.prototype.getImage=function(){return r()},n.prototype.getPixelRatio=function(){return this.lt},n.prototype.getResolution=function(){return this.resolution},n.prototype.getState=function(){return this.state},n.prototype.load=function(){r()},n}(N),to=0,no=1,io=2,ro=3,so=4,oo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function uo(t,n,i){var r=t;if(r.src&&Xt){var s=r.decode(),o=!0;return s.then((function(){o&&n()})).catch((function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?n():i())})),function(){o=!1}}var u=[Z(r,X,n),Z(r,P,i)];return function(){u.forEach(J)}}var eo=function(t){function n(n,i,r,s,o,u){var e=t.call(this,n,i,r,to)||this;return e.dt=s,e.wt=new Image,null!==o&&(e.wt.crossOrigin=o),e.yt=null,e.state=to,e.bt=u,e}return oo(n,t),n.prototype.getImage=function(){return this.wt},n.prototype._t=function(){this.state=ro,this.gt(),this.changed()},n.prototype.Ot=function(){void 0===this.resolution&&(this.resolution=Yn(this.extent)/this.wt.height),this.state=io,this.gt(),this.changed()},n.prototype.load=function(){this.state!=to&&this.state!=ro||(this.state=no,this.changed(),this.bt(this,this.dt),this.yt=uo(this.wt,this.Ot.bind(this),this._t.bind(this)))},n.prototype.setImage=function(t){this.wt=t,this.resolution=Yn(this.extent)/this.wt.height},n.prototype.gt=function(){this.yt&&(this.yt(),this.yt=null)},n}(Qs),ho=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fo=function(t){function n(n,i,r,s,o){var u=this,e=void 0!==o?to:io;return(u=t.call(this,n,i,r,e)||this).S=void 0!==o?o:null,u.Mt=s,u.A=null,u}return ho(n,t),n.prototype.getError=function(){return this.A},n.prototype.jt=function(t){t?(this.A=t,this.state=ro):this.state=io,this.changed()},n.prototype.load=function(){this.state==to&&(this.state=no,this.changed(),this.S(this.jt.bind(this)))},n.prototype.getImage=function(){return this.Mt},n}(Qs);function co(t,n,i,r){var s;return i&&i.length?s=i.shift():Ut?s=new OffscreenCanvas(t||300,n||300):(s=document.createElement("canvas")).style.all="unset",t&&(s.width=t),n&&(s.height=n),s.getContext("2d",r)}function ao(t){var n=t.offsetWidth,i=getComputedStyle(t);return n+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)}function vo(t){var n=t.offsetHeight,i=getComputedStyle(t);return n+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)}function lo(t,n){var i=n.parentNode;i&&i.replaceChild(t,n)}function wo(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function po(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function yo(t,n){for(var i=t.childNodes,r=0;;++r){var s=i[r],o=n[r];if(!s&&!o)break;s!==o&&(s?o?t.insertBefore(o,s):(t.removeChild(s),--r):t.appendChild(o))}}var bo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var _o=function(t){function n(n,i,r,s,o,u){var e=t.call(this,n,i,u)||this;return e.xt=s,e.dt=r,e.key=r,e.wt=new Image,null!==s&&(e.wt.crossOrigin=s),e.yt=null,e.St=o,e}return bo(n,t),n.prototype.getImage=function(){return this.wt},n.prototype.setImage=function(t){this.wt=t,this.state=ct,this.gt(),this.changed()},n.prototype._t=function(){var t;this.state=at,this.gt(),this.wt=((t=co(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},n.prototype.Ot=function(){var t=this.wt;t.naturalWidth&&t.naturalHeight?this.state=ct:this.state=vt,this.gt(),this.changed()},n.prototype.load=function(){this.state==at&&(this.state=ht,this.wt=new Image,null!==this.xt&&(this.wt.crossOrigin=this.xt)),this.state==ht&&(this.state=ft,this.changed(),this.St(this,this.dt),this.yt=uo(this.wt,this.Ot.bind(this),this._t.bind(this)))},n.prototype.gt=function(){this.yt&&(this.yt(),this.yt=null)},n}(bt),go=function(){function t(t,n,i){this.Et=t,this.Tt=n,this.At=i,this.Ct=[],this.Nt=0,this.kt=0}return t.prototype.begin=function(){this.Ct.length=0,this.Nt=0,this.kt=0},t.prototype.update=function(t,n){this.Ct.push(t,n,Date.now())},t.prototype.end=function(){if(this.Ct.length<6)return!1;var t=Date.now()-this.At,n=this.Ct.length-3;if(this.Ct[n+2]<t)return!1;for(var i=n-3;i>0&&this.Ct[i+2]>t;)i-=3;var r=this.Ct[n+2]-this.Ct[i+2];if(r<1e3/60)return!1;var s=this.Ct[n]-this.Ct[i],o=this.Ct[n+1]-this.Ct[i+1];return this.Nt=Math.atan2(o,s),this.kt=Math.sqrt(s*s+o*o)/r,this.kt>this.Tt},t.prototype.getDistance=function(){return(this.Tt-this.kt)/this.Et},t.prototype.getAngle=function(){return this.Nt},t}(),mo=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Oo=/^([a-z]*)$|^hsla?\(.*\)$/i;function Mo(t){return"string"==typeof t?t:To(t)}function jo(t){var n=document.createElement("div");if(n.style.color=t,""!==n.style.color){document.body.appendChild(n);var i=getComputedStyle(n).color;return document.body.removeChild(n),i}return""}var xo=function(){var t={},n=0;return function(i){var r;if(t.hasOwnProperty(i))r=t[i];else{if(n>=1024){var s=0;for(var o in t)0==(3&s++)&&(delete t[o],--n)}r=function(t){var n,i,r,s,o;Oo.exec(t)&&(t=jo(t));if(mo.exec(t)){var u=t.length-1,e=void 0;e=u<=4?1:2;var h=4===u||8===u;n=parseInt(t.substr(1+0*e,e),16),i=parseInt(t.substr(1+1*e,e),16),r=parseInt(t.substr(1+2*e,e),16),s=h?parseInt(t.substr(1+3*e,e),16):255,1==e&&(n=(n<<4)+n,i=(i<<4)+i,r=(r<<4)+r,h&&(s=(s<<4)+s)),o=[n,i,r,s/255]}else 0==t.indexOf("rgba(")?Eo(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Eo(o)):mt(!1,14);return o}(i),t[i]=r,++n}return r}}();function So(t){return Array.isArray(t)?t:xo(t)}function Eo(t){return t[0]=ii(t[0]+.5|0,0,255),t[1]=ii(t[1]+.5|0,0,255),t[2]=ii(t[2]+.5|0,0,255),t[3]=ii(t[3],0,1),t}function To(t){var n=t[0];n!=(0|n)&&(n=n+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+n+","+i+","+r+","+(void 0===t[3]?1:t[3])+")"}function Ao(t){return Oo.test(t)&&(t=jo(t)),mo.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")}var Co=function(){function t(){this.Pt={},this.It=0,this.Gt=32}return t.prototype.clear=function(){this.Pt={},this.It=0},t.prototype.canExpireCache=function(){return this.It>this.Gt},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var n in this.Pt){var i=this.Pt[n];0!=(3&t++)||i.hasListener()||(delete this.Pt[n],--this.It)}}},t.prototype.get=function(t,n,i){var r=No(t,n,i);return r in this.Pt?this.Pt[r]:null},t.prototype.set=function(t,n,i,r){var s=No(t,n,i);this.Pt[s]=r,++this.It},t.prototype.setSize=function(t){this.Gt=t,this.expire()},t}();function No(t,n,i){return n+":"+t+":"+(i?Mo(i):"null")}var ko=Co,Po=new Co,Io="opacity",Go="visible",Ro="extent",Lo="zIndex",Fo="maxResolution",Do="minResolution",zo="maxZoom",Uo="minZoom",Xo="source";function Yo(t){return(Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Wo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bo=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=S({},n);return"object"===Yo(n.properties)&&(delete r.properties,S(r,n.properties)),r[Io]=void 0!==n.opacity?n.opacity:1,mt("number"==typeof r[Io],64),r[Go]=void 0===n.visible||n.visible,r[Lo]=n.zIndex,r[Fo]=void 0!==n.maxResolution?n.maxResolution:1/0,r[Do]=void 0!==n.minResolution?n.minResolution:0,r[Uo]=void 0!==n.minZoom?n.minZoom:-1/0,r[zo]=void 0!==n.maxZoom?n.maxZoom:1/0,i.Rt=void 0!==r.className?n.className:"ol-layer",delete r.className,i.setProperties(r),i.Lt=null,i}return Wo(n,t),n.prototype.getClassName=function(){return this.Rt},n.prototype.getLayerState=function(t){var n=this.Lt||{layer:this,managed:void 0===t||t},i=this.getZIndex();return n.opacity=ii(Math.round(100*this.getOpacity())/100,0,1),n.sourceState=this.getSourceState(),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=void 0!==i||n.managed?i:1/0,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.Lt=n,n},n.prototype.getLayersArray=function(t){return r()},n.prototype.getLayerStatesArray=function(t){return r()},n.prototype.getExtent=function(){return this.get(Ro)},n.prototype.getMaxResolution=function(){return this.get(Fo)},n.prototype.getMinResolution=function(){return this.get(Do)},n.prototype.getMinZoom=function(){return this.get(Uo)},n.prototype.getMaxZoom=function(){return this.get(zo)},n.prototype.getOpacity=function(){return this.get(Io)},n.prototype.getSourceState=function(){return r()},n.prototype.getVisible=function(){return this.get(Go)},n.prototype.getZIndex=function(){return this.get(Lo)},n.prototype.setExtent=function(t){this.set(Ro,t)},n.prototype.setMaxResolution=function(t){this.set(Fo,t)},n.prototype.setMinResolution=function(t){this.set(Do,t)},n.prototype.setMaxZoom=function(t){this.set(zo,t)},n.prototype.setMinZoom=function(t){this.set(Uo,t)},n.prototype.setOpacity=function(t){mt("number"==typeof t,64),this.set(Io,t)},n.prototype.setVisible=function(t){this.set(Go,t)},n.prototype.setZIndex=function(t){this.set(Lo,t)},n.prototype.disposeInternal=function(){this.Lt&&(this.Lt.layer=null,this.Lt=null),t.prototype.disposeInternal.call(this)},n}(nt),qo="prerender",Zo="postrender",Jo="precompose",Vo="postcompose",Ho="rendercomplete",$o="undefined",Ko="ready",Qo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function tu(t,n){if(!t.visible)return!1;var i=n.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;var r=n.zoom;return r>t.minZoom&&r<=t.maxZoom}var nu=function(t){function n(n){var i=this,r=S({},n);delete r.source,(i=t.call(this,r)||this).on,i.once,i.un,i.Ft=null,i.Dt=null,i.zt=null,i.Ut=null,n.render&&(i.render=n.render),n.map&&i.setMap(n.map),i.addChangeListener(Xo,i.Xt);var s=n.source?n.source:null;return i.setSource(s),i}return Qo(n,t),n.prototype.getLayersArray=function(t){var n=t||[];return n.push(this),n},n.prototype.getLayerStatesArray=function(t){var n=t||[];return n.push(this.getLayerState()),n},n.prototype.getSource=function(){return this.get(Xo)||null},n.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():$o},n.prototype.Yt=function(){this.changed()},n.prototype.Xt=function(){this.zt&&(J(this.zt),this.zt=null);var t=this.getSource();t&&(this.zt=q(t,k,this.Yt,this)),this.changed()},n.prototype.getFeatures=function(t){return this.Ut?this.Ut.getFeatures(t):new Promise((function(t){return t([])}))},n.prototype.render=function(t,n){var i=this.getRenderer();if(i.prepareFrame(t))return i.renderFrame(t,n)},n.prototype.setMap=function(t){this.Ft&&(J(this.Ft),this.Ft=null),t||this.changed(),this.Dt&&(J(this.Dt),this.Dt=null),t&&(this.Ft=q(t,Jo,(function(t){var n=t.frameState.layerStatesArray,i=this.getLayerState(!1);mt(!n.some((function(t){return t.layer===i.layer})),67),n.push(i)}),this),this.Dt=q(this,k,t.render,t),this.changed())},n.prototype.setSource=function(t){this.set(Xo,t)},n.prototype.getRenderer=function(){return this.Ut||(this.Ut=this.createRenderer()),this.Ut},n.prototype.hasRenderer=function(){return!!this.Ut},n.prototype.createRenderer=function(){return null},n.prototype.disposeInternal=function(){this.Ut&&(this.Ut.dispose(),delete this.Ut),this.setSource(null),t.prototype.disposeInternal.call(this)},n}(Bo),iu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function ru(t,n){Po.expire()}var su=function(t){function n(n){var i=t.call(this)||this;return i.Wt=n,i}return iu(n,t),n.prototype.dispatchRenderEvent=function(t,n){r()},n.prototype.calculateMatrices2D=function(t){var n=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;tn(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),nn(r,i)},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s,o,u,e){var h,f=n.viewState;function c(t,n,i,r){return s.call(o,n,t?i:null,r)}var a=f.projection,v=tr(t.slice(),a),l=[[0,0]];if(a.canWrapX()&&r){var d=Zn(a.getExtent());l.push([-d,0],[d,0])}for(var w=n.layerStatesArray,p=w.length,y=[],b=[],_=0;_<l.length;_++)for(var g=p-1;g>=0;--g){var m=w[g],O=m.layer;if(O.hasRenderer()&&tu(m,f)&&u.call(e,O)){var M=O.getRenderer(),j=O.getSource();if(M&&j){var x=j.getWrapX()?v:t,S=c.bind(null,m.managed);b[0]=x[0]+l[_][0],b[1]=x[1]+l[_][1],h=M.forEachFeatureAtCoordinate(b,n,i,S,y)}if(h)return h}}if(0!==y.length){var E=1/y.length;return y.forEach((function(t,n){return t.distanceSq+=n*E})),y.sort((function(t,n){return t.distanceSq-n.distanceSq})),y.some((function(t){return h=t.callback(t.feature,t.layer,t.geometry)})),h}},n.prototype.forEachLayerAtPixel=function(t,n,i,s,o){return r()},n.prototype.hasFeatureAtCoordinate=function(t,n,i,r,s,o){return void 0!==this.forEachFeatureAtCoordinate(t,n,i,r,O,this,s,o)},n.prototype.getMap=function(){return this.Wt},n.prototype.renderFrame=function(t){r()},n.prototype.scheduleExpireIconCache=function(t){Po.canExpireCache()&&t.postRenderFunctions.push(ru)},n}(l),ou=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),uu=function(t){function n(n,i,r,s){var o=t.call(this,n)||this;return o.inversePixelTransform=i,o.frameState=r,o.context=s,o}return ou(n,t),n}(a),eu="ol-hidden",hu="ol-selectable",fu="ol-unselectable",cu="ol-unsupported",au="ol-control",vu="ol-collapsed",lu=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),du=["style","variant","weight","size","lineHeight","family"],wu=function(t){var n=t.match(lu);if(!n)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,s=du.length;r<s;++r){var o=n[r+1];void 0!==o&&(i[du[r]]=o)}return i.families=i.family.split(/,\s?/),i};function pu(t){return 1===t?"":String(Math.round(100*t)/100)}var yu="10px sans-serif",bu="#000",_u="round",gu=[],mu="round",Ou=10,Mu="#000",ju="center",xu="middle",Su=[0,0,0,0],Eu=new nt,Tu=new N;Tu.setSize=function(){console.warn("labelCache is deprecated.")};var Au,Cu,Nu=null,ku={},Pu=function(){var t,n,i="32px ",r=["monospace","serif"],s=r.length,o="wmytzilWMYTZIL@#/&?$%10";function u(t,u,e){for(var h=!0,f=0;f<s;++f){var c=r[f];if(n=Ru(t+" "+u+" "+i+c,o),e!=c){var a=Ru(t+" "+u+" "+i+e+","+c,o);h=h&&a!=n}}return!!h}function e(){for(var n=!0,i=Eu.getKeys(),r=0,s=i.length;r<s;++r){var o=i[r];Eu.get(o)<100&&(u.apply(this,o.split("\n"))?(E(ku),Nu=null,Au=void 0,Eu.set(o,100)):(Eu.set(o,Eu.get(o)+1,!0),n=!1))}n&&(clearInterval(t),t=void 0)}return function(n){var i=wu(n);if(i)for(var r=i.families,s=0,o=r.length;s<o;++s){var h=r[s],f=i.style+"\n"+i.weight+"\n"+h;void 0===Eu.get(f)&&(Eu.set(f,100,!0),u(i.style,i.weight,h)||(Eu.set(f,0,!0),void 0===t&&(t=setInterval(e,32))))}}}(),Iu=function(t){var n=ku[t];if(null==n){if(Ut){var i=wu(t),r=Gu(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else Cu||((Cu=document.createElement("div")).innerHTML="M",Cu.style.minHeight="0",Cu.style.maxHeight="none",Cu.style.height="auto",Cu.style.padding="0",Cu.style.border="none",Cu.style.position="absolute",Cu.style.display="block",Cu.style.left="-99999px"),Cu.style.font=t,document.body.appendChild(Cu),n=Cu.offsetHeight,document.body.removeChild(Cu);ku[t]=n}return n};function Gu(t,n){return Nu||(Nu=co(1,1)),t!=Au&&(Nu.font=t,Au=Nu.font),Nu.measureText(n)}function Ru(t,n){return Gu(t,n).width}function Lu(t,n,i){if(n in i)return i[n];var r=Ru(t,n);return i[n]=r,r}function Fu(t,n,i){for(var r=n.length,s=0,o=0;o<r;++o){var u=Ru(t,n[o]);s=Math.max(s,u),i.push(u)}return s}function Du(t,n,i,r,s,o,u,e,h,f,c){t.save(),1!==i&&(t.globalAlpha*=i),n&&t.setTransform.apply(t,n),r.contextInstructions?(t.translate(h,f),t.scale(c[0],c[1]),function(t,n){for(var i=t.contextInstructions,r=0,s=i.length;r<s;r+=2)Array.isArray(i[r+1])?n[i[r]].apply(n,i[r+1]):n[i[r]]=i[r+1]}(r,t)):c[0]<0||c[1]<0?(t.translate(h,f),t.scale(c[0],c[1]),t.drawImage(r,s,o,u,e,0,0,u,e)):t.drawImage(r,s,o,u,e,h,f,u*c[0],e*c[1]),t.restore()}var zu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Uu=function(t){function n(n){var i=t.call(this,n)||this;i.Bt=q(Eu,v,n.redrawText.bind(n)),i.qt=document.createElement("div");var r=i.qt.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",i.qt.className="ol-unselectable ol-layers";var s=n.getViewport();return s.insertBefore(i.qt,s.firstChild||null),i.Zt=[],i.Jt=!0,i}return zu(n,t),n.prototype.dispatchRenderEvent=function(t,n){var i=this.getMap();if(i.hasListener(t)){var r=new uu(t,void 0,n);i.dispatchEvent(r)}},n.prototype.disposeInternal=function(){J(this.Bt),this.qt.parentNode.removeChild(this.qt),t.prototype.disposeInternal.call(this)},n.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(Jo,t);var n=t.layerStatesArray.sort((function(t,n){return t.zIndex-n.zIndex})),i=t.viewState;this.Zt.length=0;for(var r=[],s=null,o=0,u=n.length;o<u;++o){var e=n[o];if(t.layerIndex=o,tu(e,i)&&(e.sourceState==Ko||e.sourceState==$o)){var h=e.layer,f=h.render(t,s);f&&(f!==s&&(this.Zt.push(f),s=f),"getDeclutter"in h&&r.push(h))}}for(o=r.length-1;o>=0;--o)r[o].renderDeclutter(t);yo(this.qt,this.Zt),this.dispatchRenderEvent(Vo,t),this.Jt||(this.qt.style.display="",this.Jt=!0),this.scheduleExpireIconCache(t)}else this.Jt&&(this.qt.style.display="none",this.Jt=!1)},n.prototype.forEachLayerAtPixel=function(t,n,i,r,s){for(var o=n.viewState,u=n.layerStatesArray,e=u.length-1;e>=0;--e){var h=u[e],f=h.layer;if(f.hasRenderer()&&tu(h,o)&&s(f)){var c=f.getRenderer().getDataAtPixel(t,n,i);if(c){var a=r(f,c);if(a)return a}}}},n}(su),Xu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yu="layers",Wu=function(t){function n(n){var i=this,r=n||{},s=S({},r);delete s.layers;var o=r.layers;return(i=t.call(this,s)||this).on,i.once,i.un,i.Vt=[],i.Ht={},i.addChangeListener(Yu,i.$t),o?Array.isArray(o)?o=new et(o.slice(),{unique:!0}):mt("function"==typeof o.getArray,43):o=new et(void 0,{unique:!0}),i.setLayers(o),i}return Xu(n,t),n.prototype.Kt=function(){this.changed()},n.prototype.$t=function(){this.Vt.forEach(J),this.Vt.length=0;var t=this.getLayers();for(var n in this.Vt.push(q(t,it,this.Qt,this),q(t,rt,this.tn,this)),this.Ht)this.Ht[n].forEach(J);E(this.Ht);for(var i=t.getArray(),r=0,s=i.length;r<s;r++){var u=i[r];this.Ht[o(u)]=[q(u,v,this.Kt,this),q(u,k,this.Kt,this)]}this.changed()},n.prototype.Qt=function(t){var n=t.element;this.Ht[o(n)]=[q(n,v,this.Kt,this),q(n,k,this.Kt,this)],this.changed()},n.prototype.tn=function(t){var n=o(t.element);this.Ht[n].forEach(J),delete this.Ht[n],this.changed()},n.prototype.getLayers=function(){return this.get(Yu)},n.prototype.setLayers=function(t){this.set(Yu,t)},n.prototype.getLayersArray=function(t){var n=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(n)})),n},n.prototype.getLayerStatesArray=function(t){var n=void 0!==t?t:[],i=n.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(n)}));var r=this.getLayerState(),s=r.zIndex;t||void 0!==r.zIndex||(s=0);for(var o=i,u=n.length;o<u;o++){var e=n[o];e.opacity*=r.opacity,e.visible=e.visible&&r.visible,e.maxResolution=Math.min(e.maxResolution,r.maxResolution),e.minResolution=Math.max(e.minResolution,r.minResolution),e.minZoom=Math.max(e.minZoom,r.minZoom),e.maxZoom=Math.min(e.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==e.extent?e.extent=Wn(e.extent,r.extent):e.extent=r.extent),void 0===e.zIndex&&(e.zIndex=s)}return n},n.prototype.getSourceState=function(){return Ko},n}(Bo),Bu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qu=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.map=i,s.frameState=void 0!==r?r:null,s}return Bu(n,t),n}(a),Zu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ju=function(t){function n(n,i,r,s,o){var u=t.call(this,n,i,o)||this;return u.originalEvent=r,u.nn=null,u.rn=null,u.dragging=void 0!==s&&s,u}return Zu(n,t),Object.defineProperty(n.prototype,"pixel",{get:function(){return this.nn||(this.nn=this.map.getEventPixel(this.originalEvent)),this.nn},set:function(t){this.nn=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.rn||(this.rn=this.map.getCoordinateFromPixel(this.pixel)),this.rn},set:function(t){this.rn=t},enumerable:!1,configurable:!0}),n.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},n.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},n}(qu),Vu={SINGLECLICK:"singleclick",CLICK:G,DBLCLICK:R,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Hu="pointermove",$u="pointerdown",Ku="pointerup",Qu="pointerout",te=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ne=function(t){function n(n,i){var r=t.call(this,n)||this;r.Wt=n,r.sn,r.en=!1,r.hn=!1,r.fn=[],r.cn=void 0===i?1:i,r.an=null;var s=r.Wt.getViewport();return r.vn=0,r.ln={},r.qt=s,r.dn=q(s,$u,r.wn,r),r.pn,r.yn=q(s,Hu,r.bn,r),r._n=r.gn.bind(r),r.qt.addEventListener(W,r._n,!!Yt&&{passive:!1}),r}return te(n,t),n.prototype.mn=function(t){var n=new Ju(Vu.CLICK,this.Wt,t);this.dispatchEvent(n),void 0!==this.sn?(clearTimeout(this.sn),this.sn=void 0,n=new Ju(Vu.DBLCLICK,this.Wt,t),this.dispatchEvent(n)):this.sn=setTimeout(function(){this.sn=void 0;var n=new Ju(Vu.SINGLECLICK,this.Wt,t);this.dispatchEvent(n)}.bind(this),250)},n.prototype.On=function(t){var n=t;n.type==Vu.POINTERUP||n.type==Vu.POINTERCANCEL?delete this.ln[n.pointerId]:n.type==Vu.POINTERDOWN&&(this.ln[n.pointerId]=!0),this.vn=Object.keys(this.ln).length},n.prototype.Mn=function(t){this.On(t);var n=new Ju(Vu.POINTERUP,this.Wt,t);this.dispatchEvent(n),this.en&&!n.defaultPrevented&&!this.hn&&this.jn(t)&&this.mn(this.an),0===this.vn&&(this.fn.forEach(J),this.fn.length=0,this.hn=!1,this.an=null)},n.prototype.jn=function(t){return 0===t.button},n.prototype.wn=function(t){this.en=0===this.vn,this.On(t);var n=new Ju(Vu.POINTERDOWN,this.Wt,t);for(var i in this.dispatchEvent(n),this.an={},t){var r=t[i];this.an[i]="function"==typeof r?j:r}if(0===this.fn.length){var s=this.Wt.getOwnerDocument();this.fn.push(q(s,Vu.POINTERMOVE,this.xn,this),q(s,Vu.POINTERUP,this.Mn,this),q(this.qt,Vu.POINTERCANCEL,this.Mn,this)),this.qt.getRootNode&&this.qt.getRootNode()!==s&&this.fn.push(q(this.qt.getRootNode(),Vu.POINTERUP,this.Mn,this))}},n.prototype.xn=function(t){if(this.Sn(t)){this.hn=!0;var n=new Ju(Vu.POINTERDRAG,this.Wt,t,this.hn);this.dispatchEvent(n)}},n.prototype.bn=function(t){this.pn=t;var n=!(!this.an||!this.Sn(t));this.dispatchEvent(new Ju(t.type,this.Wt,t,n))},n.prototype.gn=function(t){var n=this.pn;n&&!n.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},n.prototype.Sn=function(t){return this.hn||Math.abs(t.clientX-this.an.clientX)>this.cn||Math.abs(t.clientY-this.an.clientY)>this.cn},n.prototype.disposeInternal=function(){this.yn&&(J(this.yn),this.yn=null),this.qt.removeEventListener(W,this._n),this.dn&&(J(this.dn),this.dn=null),this.fn.forEach(J),this.fn.length=0,this.qt=null,t.prototype.disposeInternal.call(this)},n}(N),ie="postrender",re="movestart",se="moveend",oe="layergroup",ue="size",ee="target",he="view",fe=1/0,ce=function(){function t(t,n){this.En=t,this.Tn=n,this.An=[],this.Cn=[],this.Nn={}}return t.prototype.clear=function(){this.An.length=0,this.Cn.length=0,E(this.Nn)},t.prototype.dequeue=function(){var t=this.An,n=this.Cn,i=t[0];1==t.length?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.kn(0));var r=this.Tn(i);return delete this.Nn[r],i},t.prototype.enqueue=function(t){mt(!(this.Tn(t)in this.Nn),31);var n=this.En(t);return n!=fe&&(this.An.push(t),this.Cn.push(n),this.Nn[this.Tn(t)]=!0,this.Pn(0,this.An.length-1),!0)},t.prototype.getCount=function(){return this.An.length},t.prototype.In=function(t){return 2*t+1},t.prototype.Gn=function(t){return 2*t+2},t.prototype.Rn=function(t){return t-1>>1},t.prototype.Ln=function(){var t;for(t=(this.An.length>>1)-1;t>=0;t--)this.kn(t)},t.prototype.isEmpty=function(){return 0===this.An.length},t.prototype.isKeyQueued=function(t){return t in this.Nn},t.prototype.isQueued=function(t){return this.isKeyQueued(this.Tn(t))},t.prototype.kn=function(t){for(var n=this.An,i=this.Cn,r=n.length,s=n[t],o=i[t],u=t;t<r>>1;){var e=this.In(t),h=this.Gn(t),f=h<r&&i[h]<i[e]?h:e;n[t]=n[f],i[t]=i[f],t=f}n[t]=s,i[t]=o,this.Pn(u,t)},t.prototype.Pn=function(t,n){for(var i=this.An,r=this.Cn,s=i[n],o=r[n];n>t;){var u=this.Rn(n);if(!(r[u]>o))break;i[n]=i[u],r[n]=r[u],n=u}i[n]=s,r[n]=o},t.prototype.reprioritize=function(){var t,n,i,r=this.En,s=this.An,o=this.Cn,u=0,e=s.length;for(n=0;n<e;++n)(i=r(t=s[n]))==fe?delete this.Nn[this.Tn(t)]:(o[u]=i,s[u++]=t);s.length=u,o.length=u,this.Ln()},t}(),ae=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ve=function(t){function n(n,i){var r=t.call(this,(function(t){return n.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return r.Fn=r.handleTileChange.bind(r),r.Dn=i,r.zn=0,r.Un={},r}return ae(n,t),n.prototype.enqueue=function(n){var i=t.prototype.enqueue.call(this,n);i&&n[0].addEventListener(k,this.Fn);return i},n.prototype.getTilesLoading=function(){return this.zn},n.prototype.handleTileChange=function(t){var n=t.target,i=n.getState();if(i===ct||i===at||i===vt){n.removeEventListener(k,this.Fn);var r=n.getKey();r in this.Un&&(delete this.Un[r],--this.zn),this.Dn()}},n.prototype.loadMoreTiles=function(t,n){for(var i,r,s=0;this.zn<t&&s<n&&this.getCount()>0;)r=(i=this.dequeue()[0]).getKey(),i.getState()!==ht||r in this.Un||(this.Un[r]=!0,++this.zn,++s,i.load())},n}(ce);function le(t,n,i,r,s){if(!t||!(i in t.wantedTiles))return fe;if(!t.wantedTiles[i][n.getKey()])return fe;var o=t.viewState.center,u=r[0]-o[0],e=r[1]-o[1];return 65536*Math.log(s)+Math.sqrt(u*u+e*e)/s}var de=0,we=1,pe="center",ye="resolution",be="rotation",_e=256;function ge(t,n,i){return function(r,s,o,u,e){if(r){var h=n?0:o[0]*s,f=n?0:o[1]*s,c=e?e[0]:0,a=e?e[1]:0,v=t[0]+h/2+c,l=t[2]-h/2+c,d=t[1]+f/2+a,w=t[3]-f/2+a;v>l&&(l=v=(l+v)/2),d>w&&(w=d=(w+d)/2);var p=ii(r[0],v,l),y=ii(r[1],d,w),b=30*s;return u&&i&&(p+=-b*Math.log(1+Math.max(0,v-r[0])/b)+b*Math.log(1+Math.max(0,r[0]-l)/b),y+=-b*Math.log(1+Math.max(0,d-r[1])/b)+b*Math.log(1+Math.max(0,r[1]-w)/b)),[p,y]}}}function me(t){return t}function Oe(t,n,i,r){var s=Zn(n)/i[0],o=Yn(n)/i[1];return r?Math.min(t,Math.max(s,o)):Math.min(t,Math.min(s,o))}function Me(t,n,i){var r=Math.min(t,n);return r*=Math.log(1+50*Math.max(0,t/n-1))/50+1,i&&(r=Math.max(r,i),r/=Math.log(1+50*Math.max(0,i/t-1))/50+1),ii(r,i/2,2*n)}function je(t,n,i,r){return function(s,o,u,e){if(void 0!==s){var h=t[0],f=t[t.length-1],c=i?Oe(h,i,u,r):h;if(e)return void 0===n||n?Me(s,c,f):ii(s,f,c);var a=Math.min(c,s),v=Math.floor(y(t,a,o));return t[v]>c&&v<t.length-1?t[v+1]:t[v]}}}function xe(t,n,i,r,s,o){return function(u,e,h,f){if(void 0!==u){var c=s?Oe(n,s,h,o):n,a=void 0!==i?i:0;if(f)return void 0===r||r?Me(u,c,a):ii(u,a,c);var v=Math.ceil(Math.log(n/c)/Math.log(t)-1e-9),l=-e*(.5-1e-9)+.5,d=Math.min(c,u),w=Math.floor(Math.log(n/d)/Math.log(t)+l),p=Math.max(v,w);return ii(n/Math.pow(t,p),a,c)}}}function Se(t,n,i,r,s){return function(o,u,e,h){if(void 0!==o){var f=r?Oe(t,r,e,s):t;return(void 0===i||i)&&h?Me(o,f,n):ii(o,n,f)}}}function Ee(t){return void 0!==t?0:void 0}function Te(t){return void 0!==t?t:void 0}function Ae(t){var n=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}}function Ce(t){var n=t||fi(5);return function(t,i){return i?t:void 0!==t?Math.abs(t)<=n?0:t:void 0}}var Ne=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function ke(t,n){setTimeout((function(){t(n)}),0)}function Pe(t){if(void 0!==t.extent){var n=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return ge(t.extent,t.constrainOnlyCenter,n)}var i=cr(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&i.isGlobal()){var r=i.getExtent().slice();return r[0]=-1/0,r[2]=1/0,ge(r,!1,!1)}return me}function Ie(t){var n,i,r,s=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,u=void 0!==t.zoomFactor?t.zoomFactor:2,e=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,f=void 0!==t.showFullExtent&&t.showFullExtent,c=cr(t.projection,"EPSG:3857"),a=c.getExtent(),v=t.constrainOnlyCenter,l=t.extent;if(e||l||!c.isGlobal()||(v=!1,l=a),void 0!==t.resolutions){var d=t.resolutions;i=d[s],r=void 0!==d[o]?d[o]:d[d.length-1],n=t.constrainResolution?je(d,h,!v&&l,f):Se(i,r,h,!v&&l,f)}else{var w=(a?Math.max(Zn(a),Yn(a)):360*kt[It.DEGREES]/c.getMetersPerUnit())/_e/Math.pow(2,0),p=w/Math.pow(2,28);void 0!==(i=t.maxResolution)?s=0:i=w/Math.pow(u,s),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(u,o):w/Math.pow(u,o):p),o=s+Math.floor(Math.log(i/r)/Math.log(u)),r=i/Math.pow(u,o-s),n=t.constrainResolution?xe(u,i,r,h,!v&&l,f):Se(i,r,h,!v&&l,f)}return{constraint:n,maxResolution:i,minResolution:r,minZoom:s,zoomFactor:u}}function Ge(t){if(void 0===t.enableRotation||t.enableRotation){var n=t.constrainRotation;return void 0===n||!0===n?Ce():!1===n?Te:"number"==typeof n?Ae(n):Te}return Ee}function Re(t){return!(t.sourceCenter&&t.targetCenter&&!Zi(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function Le(t,n,i,r,s){var o=Math.cos(-s),u=Math.sin(-s),e=t[0]*o-t[1]*u,h=t[1]*o+t[0]*u;return[(e+=(n[0]/2-i[0])*r)*o-(h+=(i[1]-n[1]/2)*r)*(u=-u),h*o+e*u]}var Fe=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=S({},n);return i.Xn=[0,0],i.Yn=[],i.Wn,i.Bn=cr(r.projection,"EPSG:3857"),i.qn=[100,100],i.Zn=null,i.Jn,i.Vn,i.Hn=null,i.$n,i.Kn,i.Qn=void 0,r.center&&(r.center=Or(r.center,i.Bn)),r.extent&&(r.extent=jr(r.extent,i.Bn)),i.ti(r),i}return Ne(n,t),n.prototype.ti=function(t){var n=Ie(t);this.ni=n.maxResolution,this.ii=n.minResolution,this.ri=n.zoomFactor,this.si=t.resolutions,this.oi=t.padding,this.ui=n.minZoom;var i=Pe(t),r=n.constraint,s=Ge(t);this.ei={center:i,resolution:r,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.hi=t},Object.defineProperty(n.prototype,"padding",{get:function(){return this.oi},set:function(t){var n=this.oi;this.oi=t;var i=this.getCenter();if(i){var r=t||[0,0,0,0];n=n||[0,0,0,0];var s=this.getResolution(),o=s/2*(r[3]-n[3]+n[1]-r[1]),u=s/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-u])}},enumerable:!1,configurable:!0}),n.prototype.fi=function(t){var n=S({},this.hi);return void 0!==n.resolution?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),S({},n,t)},n.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var r=arguments[i];r.center&&((r=S({},r)).center=Or(r.center,this.getProjection())),r.anchor&&((r=S({},r)).anchor=Or(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)},n.prototype.animateInternal=function(t){var n,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(n=arguments[i-1],--i);for(var r=0;r<i&&!this.isDef();++r){var s=arguments[r];s.center&&this.setCenterInternal(s.center),void 0!==s.zoom?this.setZoom(s.zoom):s.resolution&&this.setResolution(s.resolution),void 0!==s.rotation&&this.setRotation(s.rotation)}if(r!==i){for(var o=Date.now(),u=this.Zn.slice(),e=this.Jn,h=this.Vn,f=[];r<i;++r){var c=arguments[r],a={start:o,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||wt,callback:n};if(c.center&&(a.sourceCenter=u,a.targetCenter=c.center.slice(),u=a.targetCenter),void 0!==c.zoom?(a.sourceResolution=e,a.targetResolution=this.getResolutionForZoom(c.zoom),e=a.targetResolution):c.resolution&&(a.sourceResolution=e,a.targetResolution=c.resolution,e=a.targetResolution),void 0!==c.rotation){a.sourceRotation=h;var v=ci(c.rotation-h+Math.PI,2*Math.PI)-Math.PI;a.targetRotation=h+v,h=a.targetRotation}Re(a)?a.complete=!0:o+=a.duration,f.push(a)}this.Yn.push(f),this.setHint(de,1),this.ci()}else n&&ke(n,!0)},n.prototype.getAnimating=function(){return this.Xn[de]>0},n.prototype.getInteracting=function(){return this.Xn[we]>0},n.prototype.cancelAnimations=function(){var t;this.setHint(de,-this.Xn[de]);for(var n=0,i=this.Yn.length;n<i;++n){var r=this.Yn[n];if(r[0].callback&&ke(r[0].callback,!1),!t)for(var s=0,o=r.length;s<o;++s){var u=r[s];if(!u.complete){t=u.anchor;break}}}this.Yn.length=0,this.Qn=t,this.Hn=null,this.$n=NaN,this.Kn=NaN},n.prototype.ci=function(){if(void 0!==this.Wn&&(cancelAnimationFrame(this.Wn),this.Wn=void 0),this.getAnimating()){for(var t=Date.now(),n=!1,i=this.Yn.length-1;i>=0;--i){for(var r=this.Yn[i],s=!0,o=0,u=r.length;o<u;++o){var e=r[o];if(!e.complete){var h=t-e.start,f=e.duration>0?h/e.duration:1;f>=1?(e.complete=!0,f=1):s=!1;var c=e.easing(f);if(e.sourceCenter){var a=e.sourceCenter[0],v=e.sourceCenter[1],l=e.targetCenter[0],d=e.targetCenter[1];this.Hn=e.targetCenter;var w=a+c*(l-a),p=v+c*(d-v);this.Zn=[w,p]}if(e.sourceResolution&&e.targetResolution){var y=1===c?e.targetResolution:e.sourceResolution+c*(e.targetResolution-e.sourceResolution);if(e.anchor){var b=this.ai(this.getRotation()),_=this.ei.resolution(y,0,b,!0);this.Zn=this.calculateCenterZoom(_,e.anchor)}this.$n=e.targetResolution,this.Jn=y,this.vi(!0)}if(void 0!==e.sourceRotation&&void 0!==e.targetRotation){var g=1===c?ci(e.targetRotation+Math.PI,2*Math.PI)-Math.PI:e.sourceRotation+c*(e.targetRotation-e.sourceRotation);if(e.anchor){var m=this.ei.rotation(g,!0);this.Zn=this.calculateCenterRotate(m,e.anchor)}this.Kn=e.targetRotation,this.Vn=g}if(this.vi(!0),n=!0,!e.complete)break}}if(s){this.Yn[i]=null,this.setHint(de,-1),this.Hn=null,this.$n=NaN,this.Kn=NaN;var O=r[0].callback;O&&ke(O,!0)}}this.Yn=this.Yn.filter(Boolean),n&&void 0===this.Wn&&(this.Wn=requestAnimationFrame(this.ci.bind(this)))}},n.prototype.calculateCenterRotate=function(t,n){var i,r=this.getCenterInternal();return void 0!==r&&(Ji(i=[r[0]-n[0],r[1]-n[1]],t-this.getRotation()),Xi(i,n)),i},n.prototype.calculateCenterZoom=function(t,n){var i,r=this.getCenterInternal(),s=this.getResolution();void 0!==r&&void 0!==s&&(i=[n[0]-t*(n[0]-r[0])/s,n[1]-t*(n[1]-r[1])/s]);return i},n.prototype.ai=function(t){var n=this.qn;if(t){var i=n[0],r=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}return n},n.prototype.setViewportSize=function(t){this.qn=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},n.prototype.getCenter=function(){var t=this.getCenterInternal();return t?mr(t,this.getProjection()):t},n.prototype.getCenterInternal=function(){return this.get(pe)},n.prototype.getConstraints=function(){return this.ei},n.prototype.getConstrainResolution=function(){return this.hi.constrainResolution},n.prototype.getHints=function(t){return void 0!==t?(t[0]=this.Xn[0],t[1]=this.Xn[1],t):this.Xn.slice()},n.prototype.calculateExtent=function(t){return Mr(this.calculateExtentInternal(t),this.getProjection())},n.prototype.calculateExtentInternal=function(t){var n=t||this.li(),i=this.getCenterInternal();mt(i,1);var r=this.getResolution();mt(void 0!==r,2);var s=this.getRotation();return mt(void 0!==s,3),Xn(i,r,s,n)},n.prototype.getMaxResolution=function(){return this.ni},n.prototype.getMinResolution=function(){return this.ii},n.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.ii)},n.prototype.setMaxZoom=function(t){this.ti(this.fi({maxZoom:t}))},n.prototype.getMinZoom=function(){return this.getZoomForResolution(this.ni)},n.prototype.setMinZoom=function(t){this.ti(this.fi({minZoom:t}))},n.prototype.setConstrainResolution=function(t){this.ti(this.fi({constrainResolution:t}))},n.prototype.getProjection=function(){return this.Bn},n.prototype.getResolution=function(){return this.get(ye)},n.prototype.getResolutions=function(){return this.si},n.prototype.getResolutionForExtent=function(t,n){return this.getResolutionForExtentInternal(jr(t,this.getProjection()),n)},n.prototype.getResolutionForExtentInternal=function(t,n){var i=n||this.li(),r=Zn(t)/i[0],s=Yn(t)/i[1];return Math.max(r,s)},n.prototype.getResolutionForValueFunction=function(t){var n=t||2,i=this.getConstrainedResolution(this.ni),r=this.ii,s=Math.log(i/r)/Math.log(n);return function(t){return i/Math.pow(n,t*s)}},n.prototype.getRotation=function(){return this.get(be)},n.prototype.getValueForResolutionFunction=function(t){var n=Math.log(t||2),i=this.getConstrainedResolution(this.ni),r=this.ii,s=Math.log(i/r)/n;return function(t){return Math.log(i/t)/n/s}},n.prototype.li=function(t){var n=this.ai(t),i=this.oi;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},n.prototype.getState=function(){var t=this.getProjection(),n=this.getResolution(),i=this.getRotation(),r=this.getCenterInternal(),s=this.oi;if(s){var o=this.li();r=Le(r,this.ai(),[o[0]/2+s[3],o[1]/2+s[0]],n,i)}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:n,nextCenter:this.Hn,nextResolution:this.$n,nextRotation:this.Kn,rotation:i,zoom:this.getZoom()}},n.prototype.getZoom=function(){var t,n=this.getResolution();return void 0!==n&&(t=this.getZoomForResolution(n)),t},n.prototype.getZoomForResolution=function(t){var n,i,r=this.ui||0;if(this.si){var s=y(this.si,t,1);r=s,n=this.si[s],i=s==this.si.length-1?2:n/this.si[s+1]}else n=this.ni,i=this.ri;return r+Math.log(n/t)/Math.log(i)},n.prototype.getResolutionForZoom=function(t){if(this.si){if(this.si.length<=1)return 0;var n=ii(Math.floor(t),0,this.si.length-2),i=this.si[n]/this.si[n+1];return this.si[n]/Math.pow(i,ii(t-n,0,1))}return this.ni/Math.pow(this.ri,t-this.ui)},n.prototype.fit=function(t,n){var i;if(mt(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))mt(!Vn(t),25),i=Rs(r=jr(t,this.getProjection()));else if(t.getType()===At.CIRCLE){var r;(i=Rs(r=jr(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),zn(r))}else{var s=gr();i=s?t.clone().transform(s,this.getProjection()):t}this.fitInternal(i,n)},n.prototype.rotatedExtentForGeometry=function(t){for(var n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),s=t.getFlatCoordinates(),o=t.getStride(),u=1/0,e=1/0,h=-1/0,f=-1/0,c=0,a=s.length;c<a;c+=o){var v=s[c]*i-s[c+1]*r,l=s[c]*r+s[c+1]*i;u=Math.min(u,v),e=Math.min(e,l),h=Math.max(h,v),f=Math.max(f,l)}return[u,e,h,f]},n.prototype.fitInternal=function(t,n){var i=n||{},r=i.size;r||(r=this.li());var s,o=void 0!==i.padding?i.padding:[0,0,0,0],u=void 0!==i.nearest&&i.nearest;s=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;var e=this.rotatedExtentForGeometry(t),h=this.getResolutionForExtentInternal(e,[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);h=isNaN(h)?s:Math.max(h,s),h=this.getConstrainedResolution(h,u?0:1);var f=this.getRotation(),c=Math.sin(f),a=Math.cos(f),v=zn(e);v[0]+=(o[1]-o[3])/2*h,v[1]+=(o[0]-o[2])/2*h;var l=v[0]*a-v[1]*c,d=v[1]*a+v[0]*c,w=this.getConstrainedCenter([l,d],h),p=i.callback?i.callback:j;void 0!==i.duration?this.animateInternal({resolution:h,center:w,duration:i.duration,easing:i.easing},p):(this.Jn=h,this.Zn=w,this.vi(!1,!0),ke(p,!0))},n.prototype.centerOn=function(t,n,i){this.centerOnInternal(Or(t,this.getProjection()),n,i)},n.prototype.centerOnInternal=function(t,n,i){this.setCenterInternal(Le(t,n,i,this.getResolution(),this.getRotation()))},n.prototype.calculateCenterShift=function(t,n,i,r){var s,o=this.oi;if(o&&t){var u=this.li(-i),e=Le(t,r,[u[0]/2+o[3],u[1]/2+o[0]],n,i);s=[t[0]-e[0],t[1]-e[1]]}return s},n.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},n.prototype.adjustCenter=function(t){var n=mr(this.Zn,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustCenterInternal=function(t){var n=this.Zn;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustResolution=function(t,n){var i=n&&Or(n,this.getProjection());this.adjustResolutionInternal(t,i)},n.prototype.adjustResolutionInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.ai(this.getRotation()),s=this.ei.resolution(this.Jn*t,0,r,i);n&&(this.Zn=this.calculateCenterZoom(s,n)),this.Jn*=t,this.vi()},n.prototype.adjustZoom=function(t,n){this.adjustResolution(Math.pow(this.ri,-t),n)},n.prototype.adjustRotation=function(t,n){n&&(n=Or(n,this.getProjection())),this.adjustRotationInternal(t,n)},n.prototype.adjustRotationInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.ei.rotation(this.Vn+t,i);n&&(this.Zn=this.calculateCenterRotate(r,n)),this.Vn+=t,this.vi()},n.prototype.setCenter=function(t){this.setCenterInternal(Or(t,this.getProjection()))},n.prototype.setCenterInternal=function(t){this.Zn=t,this.vi()},n.prototype.setHint=function(t,n){return this.Xn[t]+=n,this.changed(),this.Xn[t]},n.prototype.setResolution=function(t){this.Jn=t,this.vi()},n.prototype.setRotation=function(t){this.Vn=t,this.vi()},n.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},n.prototype.vi=function(t,n){var i=this.getAnimating()||this.getInteracting()||n,r=this.ei.rotation(this.Vn,i),s=this.ai(r),o=this.ei.resolution(this.Jn,0,s,i),u=this.ei.center(this.Zn,o,s,i,this.calculateCenterShift(this.Zn,o,r,s));this.get(be)!==r&&this.set(be,r),this.get(ye)!==o&&this.set(ye,o),this.get(pe)&&Zi(this.get(pe),u)||this.set(pe,u),this.getAnimating()&&!t&&this.cancelAnimations(),this.Qn=void 0},n.prototype.resolveConstraints=function(t,n,i){var r=void 0!==t?t:200,s=n||0,o=this.ei.rotation(this.Vn),u=this.ai(o),e=this.ei.resolution(this.Jn,s,u),h=this.ei.center(this.Zn,e,u,!1,this.calculateCenterShift(this.Zn,e,o,u));if(0===r&&!this.Qn)return this.Jn=e,this.Vn=o,this.Zn=h,void this.vi();var f=i||(0===r?this.Qn:void 0);this.Qn=void 0,this.getResolution()===e&&this.getRotation()===o&&this.getCenterInternal()&&Zi(this.getCenterInternal(),h)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:h,resolution:e,duration:r,easing:dt,anchor:f}))},n.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(we,1)},n.prototype.endInteraction=function(t,n,i){var r=i&&Or(i,this.getProjection());this.endInteractionInternal(t,n,r)},n.prototype.endInteractionInternal=function(t,n,i){this.setHint(we,-1),this.resolveConstraints(t,n,i)},n.prototype.getConstrainedCenter=function(t,n){var i=this.ai(this.getRotation());return this.ei.center(t,n||this.getResolution(),i)},n.prototype.getConstrainedZoom=function(t,n){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},n.prototype.getConstrainedResolution=function(t,n){var i=n||0,r=this.ai(this.getRotation());return this.ei.resolution(t,i,r)},n}(nt);function De(t){return t[0]>0&&t[1]>0}function ze(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*n+.5|0,i[1]=t[1]*n+.5|0,i}function Ue(t,n){return Array.isArray(t)?t:(void 0===n?n=[t,t]:(n[0]=t,n[1]=t),n)}var Xe=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var Ye=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=function(t){var n=null;void 0!==t.keyboardEventTarget&&(n="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,r,s,o={},u=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Wu({layers:t.layers});o[oe]=u,o[ee]=t.target,o[he]=t.view instanceof Fe?t.view:new Fe,void 0!==t.controls&&(Array.isArray(t.controls)?i=new et(t.controls.slice()):(mt("function"==typeof t.controls.getArray,47),i=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new et(t.interactions.slice()):(mt("function"==typeof t.interactions.getArray,48),r=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?s=new et(t.overlays.slice()):(mt("function"==typeof t.overlays.getArray,49),s=t.overlays):s=new et;return{controls:i,interactions:r,keyboardEventTarget:n,overlays:s,values:o}}(n);i.di=i.handleBrowserEvent.bind(i),i.wi=void 0!==n.maxTilesLoading?n.maxTilesLoading:16,i.lt=void 0!==n.pixelRatio?n.pixelRatio:zt,i.pi,i.yi,i.bi=function(){this.yi=void 0,this._i(Date.now())}.bind(i),i.gi=[1,0,0,1,0,0],i.mi=[1,0,0,1,0,0],i.Oi=0,i.Mi=null,i.ji=null,i.xi=null,i.Si=null,i.Ei=null,i.Ti=document.createElement("div"),i.Ti.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.Ti.style.position="relative",i.Ti.style.overflow="hidden",i.Ti.style.width="100%",i.Ti.style.height="100%",i.Ai=document.createElement("div"),i.Ai.style.position="absolute",i.Ai.style.zIndex="0",i.Ai.style.width="100%",i.Ai.style.height="100%",i.Ai.style.pointerEvents="none",i.Ai.className="ol-overlaycontainer",i.Ti.appendChild(i.Ai),i.Ci=document.createElement("div"),i.Ci.style.position="absolute",i.Ci.style.zIndex="0",i.Ci.style.width="100%",i.Ci.style.height="100%",i.Ci.style.pointerEvents="none",i.Ci.className="ol-overlaycontainer-stopevent",i.Ti.appendChild(i.Ci),i.Ni=null,i.cn=n.moveTolerance,i.ki=r.keyboardEventTarget,i.Pi=null,i.controls=r.controls||new et,i.interactions=r.interactions||new et,i.Ii=r.overlays,i.Gi={},i.Ut=null,i.Ri,i.Li=[],i.Fi=new ve(i.getTilePriority.bind(i),i.Di.bind(i)),i.addChangeListener(oe,i.zi),i.addChangeListener(he,i.Ui),i.addChangeListener(ue,i.Xi),i.addChangeListener(ee,i.Yi),i.setProperties(r.values);var s=i;return!n.view||n.view instanceof Fe||n.view.then((function(t){s.setView(new Fe(t))})),i.controls.addEventListener(it,function(t){t.element.setMap(this)}.bind(i)),i.controls.addEventListener(rt,function(t){t.element.setMap(null)}.bind(i)),i.interactions.addEventListener(it,function(t){t.element.setMap(this)}.bind(i)),i.interactions.addEventListener(rt,function(t){t.element.setMap(null)}.bind(i)),i.Ii.addEventListener(it,function(t){this.Wi(t.element)}.bind(i)),i.Ii.addEventListener(rt,function(t){var n=t.element.getId();void 0!==n&&delete this.Gi[n.toString()],t.element.setMap(null)}.bind(i)),i.controls.forEach(function(t){t.setMap(this)}.bind(i)),i.interactions.forEach(function(t){t.setMap(this)}.bind(i)),i.Ii.forEach(i.Wi.bind(i)),i}return Xe(n,t),n.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},n.prototype.addControl=function(t){this.getControls().push(t)},n.prototype.addInteraction=function(t){this.getInteractions().push(t)},n.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},n.prototype.addOverlay=function(t){this.getOverlays().push(t)},n.prototype.Wi=function(t){var n=t.getId();void 0!==n&&(this.Gi[n.toString()]=t),t.setMap(this)},n.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},n.prototype.forEachFeatureAtPixel=function(t,n,i){if(this.Mi){var r=this.getCoordinateFromPixelInternal(t),s=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,o=void 0!==i.layerFilter?i.layerFilter:O,u=!1!==i.checkWrapped;return this.Ut.forEachFeatureAtCoordinate(r,this.Mi,s,u,n,null,o,null)}},n.prototype.getFeaturesAtPixel=function(t,n){var i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),n),i},n.prototype.forEachLayerAtPixel=function(t,n,i){if(this.Mi){var r=i||{},s=void 0!==r.hitTolerance?r.hitTolerance:0,o=r.layerFilter||O;return this.Ut.forEachLayerAtPixel(t,this.Mi,s,n,o)}},n.prototype.hasFeatureAtPixel=function(t,n){if(!this.Mi)return!1;var i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).layerFilter?n.layerFilter:O,s=void 0!==n.hitTolerance?n.hitTolerance:0,o=!1!==n.checkWrapped;return this.Ut.hasFeatureAtCoordinate(i,this.Mi,s,o,r,null)},n.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},n.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},n.prototype.getEventPixel=function(t){var n=this.Ti.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-n.left,i.clientY-n.top]},n.prototype.getTarget=function(){return this.get(ee)},n.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},n.prototype.getCoordinateFromPixel=function(t){return mr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},n.prototype.getCoordinateFromPixelInternal=function(t){var n=this.Mi;return n?Ht(n.pixelToCoordinateTransform,t.slice()):null},n.prototype.getControls=function(){return this.controls},n.prototype.getOverlays=function(){return this.Ii},n.prototype.getOverlayById=function(t){var n=this.Gi[t.toString()];return void 0!==n?n:null},n.prototype.getInteractions=function(){return this.interactions},n.prototype.getLayerGroup=function(){return this.get(oe)},n.prototype.setLayers=function(t){var n=this.getLayerGroup();if(t instanceof et)n.setLayers(t);else{var i=n.getLayers();i.clear(),i.extend(t)}},n.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},n.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n].layer.getSource();if(r&&r.loading)return!0}return!1},n.prototype.getPixelFromCoordinate=function(t){var n=Or(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},n.prototype.getPixelFromCoordinateInternal=function(t){var n=this.Mi;return n?Ht(n.coordinateToPixelTransform,t.slice(0,2)):null},n.prototype.getRenderer=function(){return this.Ut},n.prototype.getSize=function(){return this.get(ue)},n.prototype.getView=function(){return this.get(he)},n.prototype.getViewport=function(){return this.Ti},n.prototype.getOverlayContainer=function(){return this.Ai},n.prototype.getOverlayContainerStopEvent=function(){return this.Ci},n.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},n.prototype.getTilePriority=function(t,n,i,r){return le(this.Mi,t,n,i,r)},n.prototype.handleBrowserEvent=function(t,n){var i=n||t.type,r=new Ju(i,this,t);this.handleMapBrowserEvent(r)},n.prototype.handleMapBrowserEvent=function(t){if(this.Mi){var n=t.originalEvent,i=n.type;if(i===$u||i===B||i===z){var r=this.getOwnerDocument(),s=this.Ti.getRootNode?this.Ti.getRootNode():r,o=n.target;if(this.Ci.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(t.frameState=this.Mi,!1!==this.dispatchEvent(t))for(var u=this.getInteractions().getArray().slice(),e=u.length-1;e>=0;e--){var h=u[e];if(h.getMap()===this&&h.getActive()&&this.getTargetElement())if(!h.handleEvent(t)||t.propagationStopped)break}}},n.prototype.handlePostRender=function(){var t=this.Mi,n=this.Fi;if(!n.isEmpty()){var i=this.wi,r=i;if(t){var s=t.viewHints;if(s[de]||s[we]){var o=Date.now()-t.time>8;i=o?0:8,r=o?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,r))}!t||!this.hasListener(Ho)||t.animate||this.Fi.getTilesLoading()||this.getLoading()||this.Ut.dispatchRenderEvent(Ho,t);for(var u=this.Li,e=0,h=u.length;e<h;++e)u[e](this,t);u.length=0},n.prototype.Xi=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},n.prototype.Yi=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.Ni){for(var n=0,i=this.Pi.length;n<i;++n)J(this.Pi[n]);this.Pi=null,this.Ti.removeEventListener(I,this.di),this.Ti.removeEventListener(B,this.di),void 0!==this.Ri&&(removeEventListener(Y,this.Ri,!1),this.Ri=void 0),this.Ni.dispose(),this.Ni=null,wo(this.Ti)}if(t){for(var r in t.appendChild(this.Ti),this.Ut||(this.Ut=this.createRenderer()),this.Ni=new ne(this,this.cn),Vu)this.Ni.addEventListener(Vu[r],this.handleMapBrowserEvent.bind(this));this.Ti.addEventListener(I,this.di,!1),this.Ti.addEventListener(B,this.di,!!Yt&&{passive:!1});var s=this.ki?this.ki:t;this.Pi=[q(s,z,this.handleBrowserEvent,this),q(s,U,this.handleBrowserEvent,this)],this.Ri||(this.Ri=this.updateSize.bind(this),window.addEventListener(Y,this.Ri,!1))}else this.Ut&&(clearTimeout(this.pi),this.pi=void 0,this.Li.length=0,this.Ut.dispose(),this.Ut=null),this.yi&&(cancelAnimationFrame(this.yi),this.yi=void 0);this.updateSize()},n.prototype.Di=function(){this.render()},n.prototype.Bi=function(){this.render()},n.prototype.Ui=function(){this.xi&&(J(this.xi),this.xi=null),this.Si&&(J(this.Si),this.Si=null);var t=this.getView();t&&(this.qi(),this.xi=q(t,v,this.Bi,this),this.Si=q(t,k,this.Bi,this),t.resolveConstraints(0)),this.render()},n.prototype.zi=function(){this.Ei&&(this.Ei.forEach(J),this.Ei=null);var t=this.getLayerGroup();t&&(this.Ei=[q(t,v,this.render,this),q(t,k,this.render,this)]),this.render()},n.prototype.isRendered=function(){return!!this.Mi},n.prototype.renderSync=function(){this.yi&&cancelAnimationFrame(this.yi),this.bi()},n.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}},n.prototype.render=function(){this.Ut&&void 0===this.yi&&(this.yi=requestAnimationFrame(this.bi))},n.prototype.removeControl=function(t){return this.getControls().remove(t)},n.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},n.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},n.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},n.prototype._i=function(t){var n=this,i=this.getSize(),r=this.getView(),s=this.Mi,o=null;if(void 0!==i&&De(i)&&r&&r.isDef()){var u=r.getHints(this.Mi?this.Mi.viewHints:void 0),e=r.getState();if(o={animate:!1,coordinateToPixelTransform:this.gi,declutterTree:null,extent:Xn(e.center,e.resolution,e.rotation,i),index:this.Oi++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.lt,pixelToCoordinateTransform:this.mi,postRenderFunctions:[],size:i,tileQueue:this.Fi,time:t,usedTiles:{},viewState:e,viewHints:u,wantedTiles:{}},e.nextCenter&&e.nextResolution){var h=isNaN(e.nextRotation)?e.rotation:e.nextRotation;o.nextExtent=Xn(e.nextCenter,e.nextResolution,h,i)}}if(this.Mi=o,this.Ut.renderFrame(o),o){if(o.animate&&this.render(),Array.prototype.push.apply(this.Li,o.postRenderFunctions),s)(!this.ji||!Vn(this.ji)&&!Tn(o.extent,this.ji))&&(this.dispatchEvent(new qu(re,this,s)),this.ji=xn(this.ji));this.ji&&!o.viewHints[de]&&!o.viewHints[we]&&!Tn(o.extent,this.ji)&&(this.dispatchEvent(new qu(se,this,o)),yn(o.extent,this.ji))}this.dispatchEvent(new qu(ie,this,o)),this.pi||(this.pi=setTimeout((function(){n.pi=void 0,n.handlePostRender()}),0))},n.prototype.setLayerGroup=function(t){this.set(oe,t)},n.prototype.setSize=function(t){this.set(ue,t)},n.prototype.setTarget=function(t){this.set(ee,t)},n.prototype.setView=function(t){if(!t||t instanceof Fe)this.set(he,t);else{this.set(he,new Fe);var n=this;t.then((function(t){n.setView(new Fe(t))}))}},n.prototype.updateSize=function(){var t=this.getTargetElement(),n=void 0;if(t){var i=getComputedStyle(t),r=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);isNaN(r)||isNaN(s)||!De(n=[r,s])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(n),this.qi()},n.prototype.qi=function(){var t=this.getView();if(t){var n=void 0,i=getComputedStyle(this.Ti);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}},n}(nt),We=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Be=function(t){function n(n){var i=t.call(this)||this,r=n.element;return!r||n.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),i.element=r||null,i.Zi=null,i.Wt=null,i.listenerKeys=[],n.render&&(i.render=n.render),n.target&&i.setTarget(n.target),i}return We(n,t),n.prototype.disposeInternal=function(){wo(this.element),t.prototype.disposeInternal.call(this)},n.prototype.getMap=function(){return this.Wt},n.prototype.setMap=function(t){this.Wt&&wo(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)J(this.listenerKeys[n]);(this.listenerKeys.length=0,this.Wt=t,this.Wt)&&((this.Zi?this.Zi:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==j&&this.listenerKeys.push(q(t,ie,this.render,this)),t.render())},n.prototype.render=function(t){},n.prototype.setTarget=function(t){this.Zi="string"==typeof t?document.getElementById(t):t},n}(nt),qe=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ze=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).Ji=document.createElement("ul"),i.Vi=void 0===r.collapsed||r.collapsed,i.Hi=i.Vi,i.$i=void 0!==r.collapsible,i.Ki=void 0===r.collapsible||r.collapsible,i.Ki||(i.Vi=!1);var s=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",u=void 0!==r.expandClassName?r.expandClassName:s+"-expand",e=void 0!==r.collapseLabel?r.collapseLabel:"›",h=void 0!==r.collapseClassName?r.collapseClassName:s+"-collpase";"string"==typeof e?(i.Qi=document.createElement("span"),i.Qi.textContent=e,i.Qi.className=h):i.Qi=e;var f=void 0!==r.label?r.label:"i";"string"==typeof f?(i.tr=document.createElement("span"),i.tr.textContent=f,i.tr.className=u):i.tr=f;var c=i.Ki&&!i.Vi?i.Qi:i.tr;i.nr=document.createElement("button"),i.nr.setAttribute("type","button"),i.nr.setAttribute("aria-expanded",String(!i.Vi)),i.nr.title=o,i.nr.appendChild(c),i.nr.addEventListener(G,i.ir.bind(i),!1);var a=s+" "+"ol-unselectable "+au+(i.Vi&&i.Ki?" ol-collapsed":"")+(i.Ki?"":" ol-uncollapsible"),v=i.element;return v.className=a,v.appendChild(i.nr),v.appendChild(i.Ji),i.rr=[],i.Jt=!0,i}return qe(n,t),n.prototype.sr=function(t){for(var n={},i=[],r=!0,s=t.layerStatesArray,o=0,u=s.length;o<u;++o){var e=s[o];if(tu(e,t.viewState)){var h=e.layer.getSource();if(h){var f=h.getAttributions();if(f){var c=f(t);if(c)if(r=r&&!1!==h.getAttributionsCollapsible(),Array.isArray(c))for(var a=0,v=c.length;a<v;++a)c[a]in n||(i.push(c[a]),n[c[a]]=!0);else c in n||(i.push(c),n[c]=!0)}}}}return this.$i||this.setCollapsible(r),i},n.prototype.ur=function(t){if(t){var n=this.sr(t),i=n.length>0;if(this.Jt!=i&&(this.element.style.display=i?"":"none",this.Jt=i),!g(n,this.rr)){po(this.Ji);for(var r=0,s=n.length;r<s;++r){var o=document.createElement("li");o.innerHTML=n[r],this.Ji.appendChild(o)}this.rr=n}}else this.Jt&&(this.element.style.display="none",this.Jt=!1)},n.prototype.ir=function(t){t.preventDefault(),this.er(),this.Hi=this.Vi},n.prototype.er=function(){this.element.classList.toggle(vu),this.Vi?lo(this.Qi,this.tr):lo(this.tr,this.Qi),this.Vi=!this.Vi,this.nr.setAttribute("aria-expanded",String(!this.Vi))},n.prototype.getCollapsible=function(){return this.Ki},n.prototype.setCollapsible=function(t){this.Ki!==t&&(this.Ki=t,this.element.classList.toggle("ol-uncollapsible"),this.Hi&&this.er())},n.prototype.setCollapsed=function(t){this.Hi=t,this.Ki&&this.Vi!==t&&this.er()},n.prototype.getCollapsed=function(){return this.Vi},n.prototype.render=function(t){this.ur(t.frameState)},n}(Be),Je=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ve=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var s=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"⇧",u=void 0!==r.compassClassName?r.compassClassName:"ol-compass";i.tr=null,"string"==typeof o?(i.tr=document.createElement("span"),i.tr.className=u,i.tr.textContent=o):(i.tr=o,i.tr.classList.add(u));var e=r.tipLabel?r.tipLabel:"Reset rotation",h=document.createElement("button");h.className=s+"-reset",h.setAttribute("type","button"),h.title=e,h.appendChild(i.tr),h.addEventListener(G,i.ir.bind(i),!1);var f=s+" "+"ol-unselectable "+au,c=i.element;return c.className=f,c.appendChild(h),i.hr=r.resetNorth?r.resetNorth:void 0,i.cr=void 0!==r.duration?r.duration:250,i.ar=void 0===r.autoHide||r.autoHide,i.vr=void 0,i.ar&&i.element.classList.add(eu),i}return Je(n,t),n.prototype.ir=function(t){t.preventDefault(),void 0!==this.hr?this.hr():this.lr()},n.prototype.lr=function(){var t=this.getMap().getView();if(t){var n=t.getRotation();void 0!==n&&(this.cr>0&&n%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.cr,easing:dt}):t.setRotation(0))}},n.prototype.render=function(t){var n=t.frameState;if(n){var i=n.viewState.rotation;if(i!=this.vr){var r="rotate("+i+"rad)";if(this.ar){var s=this.element.classList.contains(eu);s||0!==i?s&&0!==i&&this.element.classList.remove(eu):this.element.classList.add(eu)}this.tr.style.transform=r}this.vr=i}},n}(Be),He=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$e=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),target:r.target})||this;var s=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,u=void 0!==r.zoomInClassName?r.zoomInClassName:s+"-in",e=void 0!==r.zoomOutClassName?r.zoomOutClassName:s+"-out",h=void 0!==r.zoomInLabel?r.zoomInLabel:"+",f=void 0!==r.zoomOutLabel?r.zoomOutLabel:"–",c=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",a=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",v=document.createElement("button");v.className=u,v.setAttribute("type","button"),v.title=c,v.appendChild("string"==typeof h?document.createTextNode(h):h),v.addEventListener(G,i.ir.bind(i,o),!1);var l=document.createElement("button");l.className=e,l.setAttribute("type","button"),l.title=a,l.appendChild("string"==typeof f?document.createTextNode(f):f),l.addEventListener(G,i.ir.bind(i,-o),!1);var d=s+" "+"ol-unselectable "+au,w=i.element;return w.className=d,w.appendChild(v),w.appendChild(l),i.cr=void 0!==r.duration?r.duration:250,i}return He(n,t),n.prototype.ir=function(t,n){n.preventDefault(),this.dr(t)},n.prototype.dr=function(t){var n=this.getMap().getView();if(n){var i=n.getZoom();if(void 0!==i){var r=n.getConstrainedZoom(i+t);this.cr>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.cr,easing:dt})):n.setZoom(r)}}},n}(Be);function Ke(t){var n=t||{},i=new et;return(void 0===n.zoom||n.zoom)&&i.push(new $e(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&i.push(new Ve(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&i.push(new Ze(n.attributionOptions)),i}var Qe="active",th=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function nh(t,n,i){var r=t.getCenterInternal();if(r){var s=[r[0]+n[0],r[1]+n[1]];t.animateInternal({duration:void 0!==i?i:250,easing:pt,center:t.getConstrainedCenter(s)})}}function ih(t,n,i,r){var s=t.getZoom();if(void 0!==s){var o=t.getConstrainedZoom(s+n),u=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:u,anchor:i,duration:void 0!==r?r:250,easing:dt})}}var rh=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,n&&n.handleEvent&&(i.handleEvent=n.handleEvent),i.Wt=null,i.setActive(!0),i}return th(n,t),n.prototype.getActive=function(){return this.get(Qe)},n.prototype.getMap=function(){return this.Wt},n.prototype.handleEvent=function(t){return!0},n.prototype.setActive=function(t){this.set(Qe,t)},n.prototype.setMap=function(t){this.Wt=t},n}(nt),sh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),oh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.wr=r.delta?r.delta:1,i.cr=void 0!==r.duration?r.duration:250,i}return sh(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==Vu.DBLCLICK){var i=t.originalEvent,r=t.map,s=t.coordinate,o=i.shiftKey?-this.wr:this.wr;ih(r.getView(),o,s,this.cr),i.preventDefault(),n=!0}return!n},n}(rh),uh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function eh(t){for(var n=t.length,i=0,r=0,s=0;s<n;s++)i+=t[s].clientX,r+=t[s].clientY;return[i/n,r/n]}var hh=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,r)||this,r.handleDownEvent&&(i.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(i.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(i.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(i.handleUpEvent=r.handleUpEvent),r.stopDown&&(i.stopDown=r.stopDown),i.handlingDownUpSequence=!1,i.pr={},i.targetPointers=[],i}return uh(n,t),n.prototype.getPointerCount=function(){return this.targetPointers.length},n.prototype.handleDownEvent=function(t){return!1},n.prototype.handleDragEvent=function(t){},n.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.yr(t),this.handlingDownUpSequence){if(t.type==Vu.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Vu.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Vu.POINTERDOWN){var r=this.handleDownEvent(t);this.handlingDownUpSequence=r,n=this.stopDown(r)}else t.type==Vu.POINTERMOVE&&this.handleMoveEvent(t);return!n},n.prototype.handleMoveEvent=function(t){},n.prototype.handleUpEvent=function(t){return!1},n.prototype.stopDown=function(t){return t},n.prototype.yr=function(t){if(function(t){var n=t.type;return n===Vu.POINTERDOWN||n===Vu.POINTERDRAG||n===Vu.POINTERUP}(t)){var n=t.originalEvent,i=n.pointerId.toString();t.type==Vu.POINTERUP?delete this.pr[i]:(t.type==Vu.POINTERDOWN||i in this.pr)&&(this.pr[i]=n),this.targetPointers=T(this.pr)}},n}(rh);function fh(t){var n=arguments;return function(t){for(var i=!0,r=0,s=n.length;r<s&&(i=i&&n[r](t));++r);return i}}var ch=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},ah=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},vh=function(t){return t.target.getTargetElement().contains(document.activeElement)},lh=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||vh(t)},dh=O,wh=function(t){var n=t.originalEvent;return 0==n.button&&!(Ft&&Dt&&n.ctrlKey)},ph=M,yh=function(t){return t.type==Vu.SINGLECLICK},bh=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},_h=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},gh=function(t){var n=t.originalEvent.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n},mh=function(t){var n=t.originalEvent;return mt(void 0!==n,56),"mouse"==n.pointerType},Oh=function(t){var n=t.originalEvent;return mt(void 0!==n,56),n.isPrimary&&0===n.button},Mh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jh=function(t){function n(n){var i=t.call(this,{stopDown:M})||this,r=n||{};i.br=r.kinetic,i.lastCentroid=null,i._r,i.gr=!1;var s=r.condition?r.condition:fh(bh,Oh);return i.mr=r.onFocusOnly?fh(lh,s):s,i.Mr=!1,i}return Mh(n,t),n.prototype.handleDragEvent=function(t){this.gr||(this.gr=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=eh(n);if(n.length==this._r){if(this.br&&this.br.update(i[0],i[1]),this.lastCentroid){var r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=t.map.getView();Vi(r,s.getResolution()),Ji(r,s.getRotation()),s.adjustCenterInternal(r)}}else this.br&&this.br.begin();this.lastCentroid=i,this._r=n.length,t.originalEvent.preventDefault()},n.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(0===this.targetPointers.length){if(!this.Mr&&this.br&&this.br.end()){var r=this.br.getDistance(),s=this.br.getAngle(),o=i.getCenterInternal(),u=n.getPixelFromCoordinateInternal(o),e=n.getCoordinateFromPixelInternal([u[0]-r*Math.cos(s),u[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(e),duration:500,easing:dt})}return this.gr&&(this.gr=!1,i.endInteraction()),!1}return this.br&&this.br.begin(),this.lastCentroid=null,!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.mr(t)){var n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.br&&this.br.begin(),this.Mr=this.targetPointers.length>1,!0}return!1},n}(hh),xh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Sh=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,{stopDown:M})||this).mr=r.condition?r.condition:ah,i.jr=void 0,i.cr=void 0!==r.duration?r.duration:250,i}return xh(n,t),n.prototype.handleDragEvent=function(t){if(mh(t)){var n=t.map,i=n.getView();if(i.getConstraints().rotation!==Ee){var r=n.getSize(),s=t.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(void 0!==this.jr){var u=o-this.jr;i.adjustRotationInternal(-u)}this.jr=o}}},n.prototype.handleUpEvent=function(t){return!mh(t)||(t.map.getView().endInteraction(this.cr),!1)},n.prototype.handleDownEvent=function(t){return!!mh(t)&&(!(!wh(t)||!this.mr(t))&&(t.map.getView().beginInteraction(),this.jr=void 0,!0))},n}(hh),Eh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Th=function(t){function n(n){var i=t.call(this)||this;return i.Sr=null,i.qt=document.createElement("div"),i.qt.style.position="absolute",i.qt.style.pointerEvents="auto",i.qt.className="ol-box "+n,i.Wt=null,i.Er=null,i.Tr=null,i}return Eh(n,t),n.prototype.disposeInternal=function(){this.setMap(null)},n.prototype.Ar=function(){var t=this.Er,n=this.Tr,i="px",r=this.qt.style;r.left=Math.min(t[0],n[0])+i,r.top=Math.min(t[1],n[1])+i,r.width=Math.abs(n[0]-t[0])+i,r.height=Math.abs(n[1]-t[1])+i},n.prototype.setMap=function(t){if(this.Wt){this.Wt.getOverlayContainer().removeChild(this.qt);var n=this.qt.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.Wt=t,this.Wt&&this.Wt.getOverlayContainer().appendChild(this.qt)},n.prototype.setPixels=function(t,n){this.Er=t,this.Tr=n,this.createOrUpdateGeometry(),this.Ar()},n.prototype.createOrUpdateGeometry=function(){var t=this.Er,n=this.Tr,i=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.Wt.getCoordinateFromPixelInternal,this.Wt);i[4]=i[0].slice(),this.Sr?this.Sr.setCoordinates([i]):this.Sr=new Is([i])},n.prototype.getGeometry=function(){return this.Sr},n}(l),Ah=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ch="boxstart",Nh="boxdrag",kh="boxend",Ph="boxcancel",Ih=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.coordinate=i,s.mapBrowserEvent=r,s}return Ah(n,t),n}(a),Gh=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.Cr=new Th(r.className||"ol-dragbox"),i.Nr=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(i.onBoxEnd=r.onBoxEnd),i.Er=null,i.mr=r.condition?r.condition:wh,i.kr=r.boxEndCondition?r.boxEndCondition:i.defaultBoxEndCondition,i}return Ah(n,t),n.prototype.defaultBoxEndCondition=function(t,n,i){var r=i[0]-n[0],s=i[1]-n[1];return r*r+s*s>=this.Nr},n.prototype.getGeometry=function(){return this.Cr.getGeometry()},n.prototype.handleDragEvent=function(t){this.Cr.setPixels(this.Er,t.pixel),this.dispatchEvent(new Ih(Nh,t.coordinate,t))},n.prototype.handleUpEvent=function(t){this.Cr.setMap(null);var n=this.kr(t,this.Er,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new Ih(n?kh:Ph,t.coordinate,t)),!1},n.prototype.handleDownEvent=function(t){return!!this.mr(t)&&(this.Er=t.pixel,this.Cr.setMap(t.map),this.Cr.setPixels(this.Er,this.Er),this.dispatchEvent(new Ih(Ch,t.coordinate,t)),!0)},n.prototype.onBoxEnd=function(t){},n}(hh),Rh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Lh=function(t){function n(n){var i=this,r=n||{},s=r.condition?r.condition:_h;return(i=t.call(this,{condition:s,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).cr=void 0!==r.duration?r.duration:200,i.Pr=void 0!==r.out&&r.out,i}return Rh(n,t),n.prototype.onBoxEnd=function(t){var n=this.getMap().getView(),i=this.getGeometry();if(this.Pr){var r=n.rotatedExtentForGeometry(i),s=n.getResolutionForExtentInternal(r),o=n.getResolution()/s;(i=i.clone()).scale(o*o)}n.fitInternal(i,{duration:this.cr,easing:dt})},n}(Gh),Fh=37,Dh=38,zh=39,Uh=40,Xh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Ir=function(t){return bh(t)&&gh(t)},i.mr=void 0!==r.condition?r.condition:i.Ir,i.cr=void 0!==r.duration?r.duration:100,i.Gr=void 0!==r.pixelDelta?r.pixelDelta:128,i}return Xh(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==z){var i=t.originalEvent,r=i.keyCode;if(this.mr(t)&&(r==Uh||r==Fh||r==zh||r==Dh)){var s=t.map.getView(),o=s.getResolution()*this.Gr,u=0,e=0;r==Uh?e=-o:r==Fh?u=-o:r==zh?u=o:e=o;var h=[u,e];Ji(h,s.getRotation()),nh(s,h,this.cr),i.preventDefault(),n=!0}}return!n},n}(rh),Wh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.mr=r.condition?r.condition:gh,i.wr=r.delta?r.delta:1,i.cr=void 0!==r.duration?r.duration:100,i}return Wh(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==z||t.type==U){var i=t.originalEvent,r=i.charCode;if(this.mr(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var s=t.map,o=r=="+".charCodeAt(0)?this.wr:-this.wr;ih(s.getView(),o,void 0,this.cr),i.preventDefault(),n=!0}}return!n},n}(rh),qh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Zh="trackpad",Jh="wheel",Vh=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,r)||this).Rr=0,i.Lr=0,i.K=void 0!==r.maxDelta?r.maxDelta:1,i.cr=void 0!==r.duration?r.duration:250,i.Fr=void 0!==r.timeout?r.timeout:80,i.Dr=void 0===r.useAnchor||r.useAnchor,i.zr=void 0!==r.constrainResolution&&r.constrainResolution;var s=r.condition?r.condition:dh;return i.mr=r.onFocusOnly?fh(lh,s):s,i.Ur=null,i.Xr=void 0,i.Yr,i.Wr=void 0,i.Br=400,i.qr,i.Zr=300,i}return qh(n,t),n.prototype.Jr=function(){this.qr=void 0,this.getMap().getView().endInteraction(void 0,this.Lr?this.Lr>0?1:-1:0,this.Ur)},n.prototype.handleEvent=function(t){if(!this.mr(t))return!0;if(t.type!==B)return!0;var n,i=t.map,r=t.originalEvent;if(r.preventDefault(),this.Dr&&(this.Ur=t.coordinate),t.type==B&&(n=r.deltaY,Rt&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=zt),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.Lr=n;var s=Date.now();void 0===this.Xr&&(this.Xr=s),(!this.Wr||s-this.Xr>this.Br)&&(this.Wr=Math.abs(n)<4?Zh:Jh);var o=i.getView();if(this.Wr===Zh&&!o.getConstrainResolution()&&!this.zr)return this.qr?clearTimeout(this.qr):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.qr=setTimeout(this.Jr.bind(this),this.Fr),o.adjustZoom(-n/this.Zr,this.Ur),this.Xr=s,!1;this.Rr+=n;var u=Math.max(this.Fr-(s-this.Xr),0);return clearTimeout(this.Yr),this.Yr=setTimeout(this.Vr.bind(this,i),u),!1},n.prototype.Vr=function(t){var n=t.getView();n.getAnimating()&&n.cancelAnimations();var i=-ii(this.Rr,-this.K*this.Zr,this.K*this.Zr)/this.Zr;(n.getConstrainResolution()||this.zr)&&(i=i?i>0?1:-1:0),ih(n,i,this.Ur,this.cr),this.Wr=void 0,this.Rr=0,this.Ur=null,this.Xr=void 0,this.Yr=void 0},n.prototype.setMouseAnchor=function(t){this.Dr=t,t||(this.Ur=null)},n}(rh),Hh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$h=function(t){function n(n){var i=this,r=n||{},s=r;return s.stopDown||(s.stopDown=M),(i=t.call(this,s)||this).Hr=null,i.jr=void 0,i.$r=!1,i.Kr=0,i.Qr=void 0!==r.threshold?r.threshold:.3,i.cr=void 0!==r.duration?r.duration:250,i}return Hh(n,t),n.prototype.handleDragEvent=function(t){var n=0,i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.jr){var o=s-this.jr;this.Kr+=o,!this.$r&&Math.abs(this.Kr)>this.Qr&&(this.$r=!0),n=o}this.jr=s;var u=t.map,e=u.getView();if(e.getConstraints().rotation!==Ee){var h=u.getViewport().getBoundingClientRect(),f=eh(this.targetPointers);f[0]-=h.left,f[1]-=h.top,this.Hr=u.getCoordinateFromPixelInternal(f),this.$r&&(u.render(),e.adjustRotationInternal(n,this.Hr))}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.cr),!1)},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.Hr=null,this.jr=void 0,this.$r=!1,this.Kr=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(hh),Kh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qh=function(t){function n(n){var i=this,r=n||{},s=r;return s.stopDown||(s.stopDown=M),(i=t.call(this,s)||this).Hr=null,i.cr=void 0!==r.duration?r.duration:400,i.ts=void 0,i.ns=1,i}return Kh(n,t),n.prototype.handleDragEvent=function(t){var n=1,i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,u=Math.sqrt(s*s+o*o);void 0!==this.ts&&(n=this.ts/u),this.ts=u;var e=t.map,h=e.getView();1!=n&&(this.ns=n);var f=e.getViewport().getBoundingClientRect(),c=eh(this.targetPointers);c[0]-=f.left,c[1]-=f.top,this.Hr=e.getCoordinateFromPixelInternal(c),e.render(),h.adjustResolutionInternal(n,this.Hr)},n.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map.getView(),i=this.ns>1?1:-1;return n.endInteraction(this.cr,i),!1}return!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.Hr=null,this.ts=void 0,this.ns=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(hh);function tf(t){var n=t||{},i=new et,r=new go(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&i.push(new Sh),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&i.push(new oh({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&i.push(new jh({onFocusOnly:n.onFocusOnly,kinetic:r})),(void 0===n.pinchRotate||n.pinchRotate)&&i.push(new $h),(void 0===n.pinchZoom||n.pinchZoom)&&i.push(new Qh({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(i.push(new Yh),i.push(new Bh({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&i.push(new Vh({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&i.push(new Lh({duration:n.zoomDuration})),i}var nf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rf=function(t){function n(n){return(n=S({},n)).controls||(n.controls=Ke()),n.interactions||(n.interactions=tf({onFocusOnly:!0})),t.call(this,n)||this}return nf(n,t),n.prototype.createRenderer=function(){return new Uu(this)},n}(Ye),sf="bottom-left",of="bottom-center",uf="bottom-right",ef="center-left",hf="center-center",ff="center-right",cf="top-left",af="top-center",vf="top-right";function lf(t){return(lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var df=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wf="element",pf="map",yf="offset",bf="position",_f="positioning",gf=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un,i.options=n,i.id=n.id,i.insertFirst=void 0===n.insertFirst||n.insertFirst,i.stopEvent=void 0===n.stopEvent||n.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==n.className?n.className:"ol-overlay-container ol-selectable",i.element.style.position="absolute",i.element.style.pointerEvents="auto";var r=n.autoPan;return r&&"object"!==lf(r)&&(r={animation:n.autoPanAnimation,margin:n.autoPanMargin}),i.autoPan=r||!1,i.rendered={et:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(wf,i.handleElementChanged),i.addChangeListener(pf,i.handleMapChanged),i.addChangeListener(yf,i.handleOffsetChanged),i.addChangeListener(bf,i.handlePositionChanged),i.addChangeListener(_f,i.handlePositioningChanged),void 0!==n.element&&i.setElement(n.element),i.setOffset(void 0!==n.offset?n.offset:[0,0]),i.setPositioning(void 0!==n.positioning?n.positioning:cf),void 0!==n.position&&i.setPosition(n.position),i}return df(n,t),n.prototype.getElement=function(){return this.get(wf)},n.prototype.getId=function(){return this.id},n.prototype.getMap=function(){return this.get(pf)},n.prototype.getOffset=function(){return this.get(yf)},n.prototype.getPosition=function(){return this.get(bf)},n.prototype.getPositioning=function(){return this.get(_f)},n.prototype.handleElementChanged=function(){po(this.element);var t=this.getElement();t&&this.element.appendChild(t)},n.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(wo(this.element),J(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=q(t,ie,this.render,this),this.updatePixelPosition();var n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}},n.prototype.render=function(){this.updatePixelPosition()},n.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},n.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},n.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},n.prototype.setElement=function(t){this.set(wf,t)},n.prototype.setMap=function(t){this.set(pf,t)},n.prototype.setOffset=function(t){this.set(yf,t)},n.prototype.setPosition=function(t){this.set(bf,t)},n.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},n.prototype.panIntoView=function(t){var n=this.getMap();if(n&&n.getTargetElement()&&this.get(bf)){var i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),s=this.getRect(r,[ao(r),vo(r)]),o=t||{},u=void 0===o.margin?20:o.margin;if(!gn(i,s)){var e=s[0]-i[0],h=i[2]-s[2],f=s[1]-i[1],c=i[3]-s[3],a=[0,0];if(e<0?a[0]=e-u:h<0&&(a[0]=Math.abs(h)+u),f<0?a[1]=f-u:c<0&&(a[1]=Math.abs(c)+u),0!==a[0]||0!==a[1]){var v=n.getView().getCenterInternal(),l=n.getPixelFromCoordinateInternal(v);if(!l)return;var d=[l[0]+a[0],l[1]+a[1]],w=o.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(d),duration:w.duration,easing:w.easing})}}}},n.prototype.getRect=function(t,n){var i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+n[0],s+n[1]]},n.prototype.setPositioning=function(t){this.set(_f,t)},n.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},n.prototype.updatePixelPosition=function(){var t=this.getMap(),n=this.getPosition();if(t&&t.isRendered()&&n){var i=t.getPixelFromCoordinate(n),r=t.getSize();this.updateRenderedPosition(i,r)}else this.setVisible(!1)},n.prototype.updateRenderedPosition=function(t,n){var i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+r[0])+"px",u=Math.round(t[1]+r[1])+"px",e="0%",h="0%";s==uf||s==ff||s==vf?e="-100%":s!=of&&s!=hf&&s!=af||(e="-50%"),s==sf||s==of||s==uf?h="-100%":s!=ef&&s!=hf&&s!=ff||(h="-50%");var f="translate("+e+", "+h+") translate("+o+", "+u+")";this.rendered.et!=f&&(this.rendered.et=f,i.transform=f,i.msTransform=f)},n.prototype.getOptions=function(){return this.options},n}(nt),mf=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.rs=0,this.ss={},this.os=null,this.us=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.rs=0,this.ss={},this.os=null,this.us=null},t.prototype.containsKey=function(t){return this.ss.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var n=this.os;n;)t(n.es,n.hs,this),n=n.newer},t.prototype.get=function(t,n){var i=this.ss[t];return mt(void 0!==i,15),i===this.us||(i===this.os?(this.os=this.os.newer,this.os.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.us,this.us.newer=i,this.us=i),i.es},t.prototype.remove=function(t){var n=this.ss[t];return mt(void 0!==n,15),n===this.us?(this.us=n.older,this.us&&(this.us.newer=null)):n===this.os?(this.os=n.newer,this.os&&(this.os.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.ss[t],--this.rs,n.es},t.prototype.getCount=function(){return this.rs},t.prototype.getKeys=function(){var t,n=new Array(this.rs),i=0;for(t=this.us;t;t=t.older)n[i++]=t.hs;return n},t.prototype.getValues=function(){var t,n=new Array(this.rs),i=0;for(t=this.us;t;t=t.older)n[i++]=t.es;return n},t.prototype.peekLast=function(){return this.os.es},t.prototype.peekLastKey=function(){return this.os.hs},t.prototype.peekFirstKey=function(){return this.us.hs},t.prototype.pop=function(){var t=this.os;return delete this.ss[t.hs],t.newer&&(t.newer.older=null),this.os=t.newer,this.os||(this.us=null),--this.rs,t.es},t.prototype.replace=function(t,n){this.get(t),this.ss[t].es=n},t.prototype.set=function(t,n){mt(!(t in this.ss),16);var i={hs:t,newer:null,older:this.us,es:n};this.us?this.us.newer=i:this.os=i,this.us=i,this.ss[t]=i,++this.rs},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function Of(t,n,i,r){return void 0!==r?(r[0]=t,r[1]=n,r[2]=i,r):[t,n,i]}function Mf(t,n,i){return t+"/"+n+"/"+i}function jf(t){return Mf(t[0],t[1],t[2])}function xf(t){return t.split("/").map(Number)}function Sf(t){return(t[1]<<t[0])+t[2]}function Ef(t,n){var i=t[0],r=t[1],s=t[2];if(n.getMinZoom()>i||i>n.getMaxZoom())return!1;var o=n.getFullTileRange(i);return!o||o.containsXY(r,s)}var Tf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Af=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Tf(n,t),n.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},n.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=xf(this.peekFirstKey())[0];this.forEach(function(n){n.tileCoord[0]!==t&&(this.remove(jf(n.tileCoord)),n.release())}.bind(this))}},n}(mf),Cf=function(){function t(t,n,i,r){this.minX=t,this.maxX=n,this.minY=i,this.maxY=r}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function Nf(t,n,i,r,s){return void 0!==s?(s.minX=t,s.maxX=n,s.minY=i,s.maxY=r,s):new Cf(t,n,i,r)}var kf=Cf,Pf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),If=[],Gf=function(t){function n(n,i,r,s){var o=t.call(this,n,i,{transition:0})||this;return o.fs={},o.executorGroups={},o.declutterExecutorGroups={},o.loadingSourceTiles=0,o.hitDetectionImageData={},o.cs={},o.sourceTiles=[],o.errorTileKeys={},o.wantedResolution,o.getSourceTiles=s.bind(void 0,o),o.wrappedTileCoord=r,o}return Pf(n,t),n.prototype.getContext=function(t){var n=o(t);return n in this.fs||(this.fs[n]=co(1,1,If)),this.fs[n]},n.prototype.hasContext=function(t){return o(t)in this.fs},n.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},n.prototype.getReplayState=function(t){var n=o(t);return n in this.cs||(this.cs[n]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.cs[n]},n.prototype.load=function(){this.getSourceTiles()},n.prototype.release=function(){for(var n in this.fs)If.push(this.fs[n].canvas),delete this.fs[n];t.prototype.release.call(this)},n}(bt);function Rf(t){return Array.isArray(t)?To(t):t}var Lf="arraybuffer",Ff="json",Df="text",zf="xml",Uf=!1;function Xf(t,n,i,r,s,o,u){var e=new XMLHttpRequest;e.open("GET","function"==typeof t?t(i,r,s):t,!0),n.getType()==Lf&&(e.responseType="arraybuffer"),e.withCredentials=Uf,e.onload=function(t){if(!e.status||e.status>=200&&e.status<300){var r=n.getType(),h=void 0;r==Ff||r==Df?h=e.responseText:r==zf?(h=e.responseXML)||(h=(new DOMParser).parseFromString(e.responseText,"application/xml")):r==Lf&&(h=e.response),h?o(n.readFeatures(h,{extent:i,featureProjection:s}),n.readProjection(h)):u()}else u()},e.onerror=u,e.send()}function Yf(t,n){return function(i,r,s,o,u){var e=this;Xf(t,n,i,r,s,(function(t,n){e.addFeatures(t),void 0!==o&&o(t)}),u||j)}}function Wf(t,n){return[[-1/0,-1/0,1/0,1/0]]}var Bf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var qf,Zf=function(t){function n(n){var i=this,r="Unexpected response status: "+n.status;return(i=t.call(this,r)||this).name="ResponseError",i.response=n,i}return Bf(n,t),n}(Error),Jf=function(t){function n(n){var i=t.call(this,"Failed to issue request")||this;return i.name="ClientError",i.client=n,i}return Bf(n,t),n}(Error);var Vf=function(){function t(){}return t.prototype.drawCustom=function(t,n,i,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,n){},t.prototype.drawFeature=function(t,n){},t.prototype.drawGeometryCollection=function(t,n){},t.prototype.drawLineString=function(t,n){},t.prototype.drawMultiLineString=function(t,n){},t.prototype.drawMultiPoint=function(t,n){},t.prototype.drawMultiPolygon=function(t,n){},t.prototype.drawPoint=function(t,n){},t.prototype.drawPolygon=function(t,n){},t.prototype.drawText=function(t,n){},t.prototype.setFillStrokeStyle=function(t,n){},t.prototype.setImageStyle=function(t,n){},t.prototype.setTextStyle=function(t,n){},t}(),Hf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$f=function(t){function n(n,i,r,s,o,u,e){var h=t.call(this)||this;return h.fs=n,h.lt=i,h.D=r,h.et=s,h.vs=o,h.ls=u,h.ds=e,h.ws=null,h.ps=null,h.ys=null,h.bs=null,h._s=null,h.wt=null,h.gs=0,h.Os=0,h.Ms=0,h.js=0,h.xs=0,h.Ss=0,h.Es=!1,h.Ts=0,h.As=[0,0],h.Cs=0,h.Ns="",h.ks=0,h.Ps=0,h.Is=!1,h.Gs=0,h.Rs=[0,0],h.Ls=null,h.Fs=null,h.Ds=null,h.zs=[],h.Us=[1,0,0,1,0,0],h}return Hf(n,t),n.prototype.Xs=function(t,n,i,r){if(this.wt){var s=Ar(t,n,i,r,this.et,this.zs),o=this.fs,u=this.Us,e=o.globalAlpha;1!=this.js&&(o.globalAlpha=e*this.js);var h=this.Ts;this.Es&&(h+=this.vs);for(var f=0,c=s.length;f<c;f+=2){var a=s[f]-this.gs,v=s[f+1]-this.Os;if(0!==h||1!=this.As[0]||1!=this.As[1]){var l=a+this.gs,d=v+this.Os;tn(u,l,d,1,1,h,-l,-d),o.setTransform.apply(o,u),o.translate(l,d),o.scale(this.As[0],this.As[1]),o.drawImage(this.wt,this.xs,this.Ss,this.Cs,this.Ms,-this.gs,-this.Os,this.Cs,this.Ms),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.wt,this.xs,this.Ss,this.Cs,this.Ms,a,v,this.Cs,this.Ms)}1!=this.js&&(o.globalAlpha=e)}},n.prototype.Ys=function(t,n,i,r){if(this.Ds&&""!==this.Ns){this.Ls&&this.Ws(this.Ls),this.Fs&&this.Bs(this.Fs),this.qs(this.Ds);var s=Ar(t,n,i,r,this.et,this.zs),o=this.fs,u=this.Gs;for(this.Is&&(u+=this.vs);n<i;n+=r){var e=s[n]+this.ks,h=s[n+1]+this.Ps;if(0!==u||1!=this.Rs[0]||1!=this.Rs[1]){var f=tn(this.Us,e,h,1,1,u,-e,-h);o.setTransform.apply(o,f),o.translate(e,h),o.scale(this.Rs[0],this.Rs[1]),this.Fs&&o.strokeText(this.Ns,0,0),this.Ls&&o.fillText(this.Ns,0,0),o.setTransform(1,0,0,1,0,0)}else this.Fs&&o.strokeText(this.Ns,e,h),this.Ls&&o.fillText(this.Ns,e,h)}}},n.prototype.Zs=function(t,n,i,r,s){var o=this.fs,u=Ar(t,n,i,r,this.et,this.zs);o.moveTo(u[0],u[1]);var e=u.length;s&&(e-=2);for(var h=2;h<e;h+=2)o.lineTo(u[h],u[h+1]);return s&&o.closePath(),i},n.prototype.Js=function(t,n,i,r){for(var s=0,o=i.length;s<o;++s)n=this.Zs(t,n,i[s],r,!0);return n},n.prototype.drawCircle=function(t){if(Jn(this.D,t.getExtent())){if(this.bs||this._s){this.bs&&this.Ws(this.bs),this._s&&this.Bs(this._s);var n=Fr(t,this.et,this.zs),i=n[2]-n[0],r=n[3]-n[1],s=Math.sqrt(i*i+r*r),o=this.fs;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.bs&&o.fill(),this._s&&o.stroke()}""!==this.Ns&&this.Ys(t.getCenter(),0,2,2)}},n.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},n.prototype.setTransform=function(t){this.et=t},n.prototype.drawGeometry=function(t){switch(t.getType()){case At.POINT:this.drawPoint(t);break;case At.LINE_STRING:this.drawLineString(t);break;case At.POLYGON:this.drawPolygon(t);break;case At.MULTI_POINT:this.drawMultiPoint(t);break;case At.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case At.MULTI_POLYGON:this.drawMultiPolygon(t);break;case At.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case At.CIRCLE:this.drawCircle(t)}},n.prototype.drawFeature=function(t,n){var i=n.getGeometryFunction()(t);i&&Jn(this.D,i.getExtent())&&(this.setStyle(n),this.drawGeometry(i))},n.prototype.drawGeometryCollection=function(t){for(var n=t.getGeometriesArray(),i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])},n.prototype.drawPoint=function(t){this.ls&&(t=t.simplifyTransformed(this.ls,this.ds));var n=t.getFlatCoordinates(),i=t.getStride();this.wt&&this.Xs(n,0,n.length,i),""!==this.Ns&&this.Ys(n,0,n.length,i)},n.prototype.drawMultiPoint=function(t){this.ls&&(t=t.simplifyTransformed(this.ls,this.ds));var n=t.getFlatCoordinates(),i=t.getStride();this.wt&&this.Xs(n,0,n.length,i),""!==this.Ns&&this.Ys(n,0,n.length,i)},n.prototype.drawLineString=function(t){if(this.ls&&(t=t.simplifyTransformed(this.ls,this.ds)),Jn(this.D,t.getExtent())){if(this._s){this.Bs(this._s);var n=this.fs,i=t.getFlatCoordinates();n.beginPath(),this.Zs(i,0,i.length,t.getStride(),!1),n.stroke()}if(""!==this.Ns){var r=t.getFlatMidpoint();this.Ys(r,0,2,2)}}},n.prototype.drawMultiLineString=function(t){this.ls&&(t=t.simplifyTransformed(this.ls,this.ds));var n=t.getExtent();if(Jn(this.D,n)){if(this._s){this.Bs(this._s);var i=this.fs,r=t.getFlatCoordinates(),s=0,o=t.getEnds(),u=t.getStride();i.beginPath();for(var e=0,h=o.length;e<h;++e)s=this.Zs(r,s,o[e],u,!1);i.stroke()}if(""!==this.Ns){var f=t.getFlatMidpoints();this.Ys(f,0,f.length,2)}}},n.prototype.drawPolygon=function(t){if(this.ls&&(t=t.simplifyTransformed(this.ls,this.ds)),Jn(this.D,t.getExtent())){if(this._s||this.bs){this.bs&&this.Ws(this.bs),this._s&&this.Bs(this._s);var n=this.fs;n.beginPath(),this.Js(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.bs&&n.fill(),this._s&&n.stroke()}if(""!==this.Ns){var i=t.getFlatInteriorPoint();this.Ys(i,0,2,2)}}},n.prototype.drawMultiPolygon=function(t){if(this.ls&&(t=t.simplifyTransformed(this.ls,this.ds)),Jn(this.D,t.getExtent())){if(this._s||this.bs){this.bs&&this.Ws(this.bs),this._s&&this.Bs(this._s);var n=this.fs,i=t.getOrientedFlatCoordinates(),r=0,s=t.getEndss(),o=t.getStride();n.beginPath();for(var u=0,e=s.length;u<e;++u){var h=s[u];r=this.Js(i,r,h,o)}this.bs&&n.fill(),this._s&&n.stroke()}if(""!==this.Ns){var f=t.getFlatInteriorPoints();this.Ys(f,0,f.length,2)}}},n.prototype.Ws=function(t){var n=this.fs,i=this.ws;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.ws={fillStyle:t.fillStyle})},n.prototype.Bs=function(t){var n=this.fs,i=this.ps;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),n.setLineDash&&(g(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.ps={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},n.prototype.qs=function(t){var n=this.fs,i=this.ys,r=t.textAlign?t.textAlign:ju;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=r,n.textBaseline=t.textBaseline,this.ys={font:t.font,textAlign:r,textBaseline:t.textBaseline})},n.prototype.setFillStrokeStyle=function(t,n){var i=this;if(t){var r=t.getColor();this.bs={fillStyle:Rf(r||bu)}}else this.bs=null;if(n){var s=n.getColor(),o=n.getLineCap(),u=n.getLineDash(),e=n.getLineDashOffset(),h=n.getLineJoin(),f=n.getWidth(),c=n.getMiterLimit(),a=u||gu;this._s={lineCap:void 0!==o?o:_u,lineDash:1===this.lt?a:a.map((function(t){return t*i.lt})),lineDashOffset:(e||0)*this.lt,lineJoin:void 0!==h?h:mu,lineWidth:(void 0!==f?f:1)*this.lt,miterLimit:void 0!==c?c:Ou,strokeStyle:Rf(s||Mu)}}else this._s=null},n.prototype.setImageStyle=function(t){var n;if(t&&(n=t.getSize())){var i=t.getAnchor(),r=t.getOrigin();this.wt=t.getImage(this.lt),this.gs=i[0]*this.lt,this.Os=i[1]*this.lt,this.Ms=n[1]*this.lt,this.js=t.getOpacity(),this.xs=r[0],this.Ss=r[1],this.Es=t.getRotateWithView(),this.Ts=t.getRotation(),this.As=t.getScaleArray(),this.Cs=n[0]*this.lt}else this.wt=null},n.prototype.setTextStyle=function(t){if(t){var n=t.getFill();if(n){var i=n.getColor();this.Ls={fillStyle:Rf(i||bu)}}else this.Ls=null;var r=t.getStroke();if(r){var s=r.getColor(),o=r.getLineCap(),u=r.getLineDash(),e=r.getLineDashOffset(),h=r.getLineJoin(),f=r.getWidth(),c=r.getMiterLimit();this.Fs={lineCap:void 0!==o?o:_u,lineDash:u||gu,lineDashOffset:e||0,lineJoin:void 0!==h?h:mu,lineWidth:void 0!==f?f:1,miterLimit:void 0!==c?c:Ou,strokeStyle:Rf(s||Mu)}}else this.Fs=null;var a=t.getFont(),v=t.getOffsetX(),l=t.getOffsetY(),d=t.getRotateWithView(),w=t.getRotation(),p=t.getScaleArray(),y=t.getText(),b=t.getTextAlign(),_=t.getTextBaseline();this.Ds={font:void 0!==a?a:yu,textAlign:void 0!==b?b:ju,textBaseline:void 0!==_?_:xu},this.Ns=void 0!==y?y:"",this.ks=void 0!==v?this.lt*v:0,this.Ps=void 0!==l?this.lt*l:0,this.Is=void 0!==d&&d,this.Gs=void 0!==w?w:0,this.Rs=[this.lt*p[0],this.lt*p[1]]}else this.Ns=""},n}(Vf),Kf="Circle",Qf="Default",tc="Image",nc="LineString",ic="Polygon",rc="Text",sc={Point:function(t,n,i,r,s){var o,u=i.getImage(),e=i.getText();s&&(t=s,o=u&&e&&e.getText()?{}:void 0);if(u){if(u.getImageState()!=io)return;var h=t.getBuilder(i.getZIndex(),tc);h.setImageStyle(u,o),h.drawPoint(n,r)}if(e&&e.getText()){var f=t.getBuilder(i.getZIndex(),rc);f.setTextStyle(e,o),f.drawText(n,r)}},LineString:function(t,n,i,r,s){var o=i.getStroke();if(o){var u=t.getBuilder(i.getZIndex(),nc);u.setFillStrokeStyle(null,o),u.drawLineString(n,r)}var e=i.getText();if(e&&e.getText()){var h=(s||t).getBuilder(i.getZIndex(),rc);h.setTextStyle(e),h.drawText(n,r)}},Polygon:function(t,n,i,r,s){var o=i.getFill(),u=i.getStroke();if(o||u){var e=t.getBuilder(i.getZIndex(),ic);e.setFillStrokeStyle(o,u),e.drawPolygon(n,r)}var h=i.getText();if(h&&h.getText()){var f=(s||t).getBuilder(i.getZIndex(),rc);f.setTextStyle(h),f.drawText(n,r)}},MultiPoint:function(t,n,i,r,s){var o,u=i.getImage(),e=i.getText();s&&(t=s,o=u&&e&&e.getText()?{}:void 0);if(u){if(u.getImageState()!=io)return;var h=t.getBuilder(i.getZIndex(),tc);h.setImageStyle(u,o),h.drawMultiPoint(n,r)}if(e&&e.getText()){var f=(s||t).getBuilder(i.getZIndex(),rc);f.setTextStyle(e,o),f.drawText(n,r)}},MultiLineString:function(t,n,i,r,s){var o=i.getStroke();if(o){var u=t.getBuilder(i.getZIndex(),nc);u.setFillStrokeStyle(null,o),u.drawMultiLineString(n,r)}var e=i.getText();if(e&&e.getText()){var h=(s||t).getBuilder(i.getZIndex(),rc);h.setTextStyle(e),h.drawText(n,r)}},MultiPolygon:function(t,n,i,r,s){var o=i.getFill(),u=i.getStroke();if(u||o){var e=t.getBuilder(i.getZIndex(),ic);e.setFillStrokeStyle(o,u),e.drawMultiPolygon(n,r)}var h=i.getText();if(h&&h.getText()){var f=(s||t).getBuilder(i.getZIndex(),rc);f.setTextStyle(h),f.drawText(n,r)}},GeometryCollection:function(t,n,i,r,s){var o,u,e=n.getGeometriesArray();for(o=0,u=e.length;o<u;++o){(0,sc[e[o].getType()])(t,e[o],i,r,s)}},Circle:function(t,n,i,r,s){var o=i.getFill(),u=i.getStroke();if(o||u){var e=t.getBuilder(i.getZIndex(),Kf);e.setFillStrokeStyle(o,u),e.drawCircle(n,r)}var h=i.getText();if(h&&h.getText()){var f=(s||t).getBuilder(i.getZIndex(),rc);f.setTextStyle(h),f.drawText(n,r)}}};function oc(t,n){return parseInt(o(t),10)-parseInt(o(n),10)}function uc(t,n){var i=ec(t,n);return i*i}function ec(t,n){return.5*t/n}function hc(t,n,i,r,s,o,u){var e=!1,h=i.getImage();if(h){var f=h.getImageState();f==io||f==ro?h.unlistenImageChange(s):(f==to&&h.load(),f=h.getImageState(),h.listenImageChange(s),e=!0)}return function(t,n,i,r,s,o){var u=i.getGeometryFunction()(n);if(!u)return;var e=u.simplifyTransformed(r,s);if(i.getRenderer())fc(t,e,i,n);else{(0,sc[e.getType()])(t,e,i,n,o)}}(t,n,i,r,o,u),e}function fc(t,n,i,r){if(n.getType()!=At.GEOMETRY_COLLECTION)t.getBuilder(i.getZIndex(),Qf).drawCustom(n,r,i.getRenderer(),i.getHitDetectionRenderer());else for(var s=n.getGeometries(),o=0,u=s.length;o<u;++o)fc(t,s[o],i,r)}function cc(t){var n,i=t.inversePixelTransform[0],r=t.frameState,s=Zt(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),o=uc(r.viewState.resolution,i),u=gr();return u&&(n=dr(u,r.viewState.projection)),new $f(t.context,i,r.extent,s,r.viewState.rotation,o,n)}var ac,vc={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};function lc(t,n,i,r,s){t.beginPath(),t.moveTo(0,0),t.lineTo(n,i),t.lineTo(r,s),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(n,r)+1,Math.max(i,s)),t.restore()}function dc(t,n){return Math.abs(t[4*n]-210)>2||Math.abs(t[4*n+3]-191.25)>2}function wc(t,n,i,r){var s=pr(i,n,t),o=er(n,r,i),u=n.getMetersPerUnit();void 0!==u&&(o*=u);var e=t.getMetersPerUnit();void 0!==e&&(o/=e);var h=t.getExtent();if(!h||_n(h,s)){var f=er(t,o,s)/o;isFinite(f)&&f>0&&(o/=f)}return o}function pc(t,n,i,r){var s=zn(i),o=wc(t,n,s,r);return(!isFinite(o)||o<=0)&&Rn(i,(function(i){return o=wc(t,n,i,r),isFinite(o)&&o>0})),o}function yc(t,n,i,r,s,o,u,e,h,f,c,a){var v=co(Math.round(i*t),Math.round(i*n));if(S(v,a),0===h.length)return v.canvas;function l(t){return Math.round(t*i)/i}v.scale(i,i),v.globalCompositeOperation="lighter";var d=[1/0,1/0,-1/0,-1/0];h.forEach((function(t,n,i){Cn(d,t.extent)}));var w=Zn(d),p=Yn(d),y=co(Math.round(i*w/r),Math.round(i*p/r));S(y,a);var b=i/r;h.forEach((function(t,n,i){var r=t.extent[0]-d[0],s=-(t.extent[3]-d[3]),o=Zn(t.extent),u=Yn(t.extent);t.image.width>0&&t.image.height>0&&y.drawImage(t.image,f,f,t.image.width-2*f,t.image.height-2*f,r*b,s*b,o*b,u*b)}));var _=Bn(u);return e.getTriangles().forEach((function(t,n,s){var u=t.source,e=t.target,h=u[0][0],f=u[0][1],c=u[1][0],w=u[1][1],p=u[2][0],b=u[2][1],g=l((e[0][0]-_[0])/o),m=l(-(e[0][1]-_[1])/o),O=l((e[1][0]-_[0])/o),M=l(-(e[1][1]-_[1])/o),j=l((e[2][0]-_[0])/o),x=l(-(e[2][1]-_[1])/o),S=h,E=f;h=0,f=0;var T=ei([[c-=S,w-=E,0,0,O-g],[p-=S,b-=E,0,0,j-g],[0,0,c,w,M-m],[0,0,p,b,x-m]]);if(T){if(v.save(),v.beginPath(),function(){if(void 0===ac){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",lc(t,4,5,4,0),lc(t,4,5,0,5);var n=t.getImageData(0,0,3,3).data;ac=dc(n,0)||dc(n,4)||dc(n,8)}return ac}()||a===vc){v.moveTo(O,M);for(var A=g-O,C=m-M,N=0;N<4;N++)v.lineTo(O+l((N+1)*A/4),M+l(N*C/3)),3!=N&&v.lineTo(O+l((N+1)*A/4),M+l((N+1)*C/3));v.lineTo(j,x)}else v.moveTo(O,M),v.lineTo(g,m),v.lineTo(j,x);v.clip(),v.transform(T[0],T[2],T[1],T[3],g,m),v.translate(d[0]-S,d[3]-E),v.scale(r/i,-r/i),v.drawImage(y.canvas,0,0),v.restore()}})),c&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,e.getTriangles().forEach((function(t,n,i){var r=t.target,s=(r[0][0]-_[0])/o,u=-(r[0][1]-_[1])/o,e=(r[1][0]-_[0])/o,h=-(r[1][1]-_[1])/o,f=(r[2][0]-_[0])/o,c=-(r[2][1]-_[1])/o;v.beginPath(),v.moveTo(e,h),v.lineTo(s,u),v.lineTo(f,c),v.closePath(),v.stroke()})),v.restore()),v.canvas}var bc=[0,0,0],_c=function(){function t(t){var n;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.si=t.resolutions,mt(m(this.si,(function(t,n){return n-t}),!0),17),!t.origins)for(var i=0,r=this.si.length-1;i<r;++i)if(n){if(this.si[i]/this.si[i+1]!==n){n=void 0;break}}else n=this.si[i]/this.si[i+1];this.ri=n,this.maxZoom=this.si.length-1,this.Vs=void 0!==t.origin?t.origin:null,this.Hs=null,void 0!==t.origins&&(this.Hs=t.origins,mt(this.Hs.length==this.si.length,20));var s=t.extent;void 0===s||this.Vs||this.Hs||(this.Vs=Bn(s)),mt(!this.Vs&&this.Hs||this.Vs&&!this.Hs,18),this.$s=null,void 0!==t.tileSizes&&(this.$s=t.tileSizes,mt(this.$s.length==this.si.length,19)),this.Ks=void 0!==t.tileSize?t.tileSize:this.$s?null:_e,mt(!this.Ks&&this.$s||this.Ks&&!this.$s,22),this.D=void 0!==s?s:null,this.Qs=null,this.no=[0,0],this.io=[0,0,0,0],void 0!==t.sizes?this.Qs=t.sizes.map((function(t,n){var i=new kf(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(s){var r=this.getTileRangeForExtentAndZ(s,n);i.minX=Math.max(r.minX,i.minX),i.maxX=Math.min(r.maxX,i.maxX),i.minY=Math.max(r.minY,i.minY),i.maxY=Math.min(r.maxY,i.maxY)}return i}),this):s&&this.ro(s)}return t.prototype.forEachTileCoord=function(t,n,i){for(var r=this.getTileRangeForExtentAndZ(t,n),s=r.minX,o=r.maxX;s<=o;++s)for(var u=r.minY,e=r.maxY;u<=e;++u)i([n,s,u])},t.prototype.forEachTileCoordParentTileRange=function(t,n,i,r){var s,o,u=null,e=t[0]-1;for(2===this.ri?(s=t[1],o=t[2]):u=this.getTileCoordExtent(t,r);e>=this.minZoom;){if(n(e,2===this.ri?Nf(s=Math.floor(s/2),s,o=Math.floor(o/2),o,i):this.getTileRangeForExtentAndZ(u,e,i)))return!0;--e}return!1},t.prototype.getExtent=function(){return this.D},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.Vs?this.Vs:this.Hs[t]},t.prototype.getResolution=function(t){return this.si[t]},t.prototype.getResolutions=function(){return this.si},t.prototype.getTileCoordChildTileRange=function(t,n,i){if(t[0]<this.maxZoom){if(2===this.ri){var r=2*t[1],s=2*t[2];return Nf(r,r+1,s,s+1,n)}var o=this.getTileCoordExtent(t,i||this.io);return this.getTileRangeForExtentAndZ(o,t[0]+1,n)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;var r=t[0],s=t[1],o=t[2];if(n===r)return Nf(s,o,s,o,i);if(this.ri){var u=Math.pow(this.ri,n-r),e=Math.floor(s*u),h=Math.floor(o*u);return n<r?Nf(e,e,h,h,i):Nf(e,Math.floor(u*(s+1))-1,h,Math.floor(u*(o+1))-1,i)}var f=this.getTileCoordExtent(t,this.io);return this.getTileRangeForExtentAndZ(f,n,i)},t.prototype.getTileRangeExtent=function(t,n,i){var r=this.getOrigin(t),s=this.getResolution(t),o=Ue(this.getTileSize(t),this.no),u=r[0]+n.minX*o[0]*s,e=r[0]+(n.maxX+1)*o[0]*s;return jn(u,r[1]+n.minY*o[1]*s,e,r[1]+(n.maxY+1)*o[1]*s,i)},t.prototype.getTileRangeForExtentAndZ=function(t,n,i){var r=bc;this.so(t[0],t[3],n,!1,r);var s=r[1],o=r[2];return this.so(t[2],t[1],n,!0,r),Nf(s,r[1],o,r[2],i)},t.prototype.getTileCoordCenter=function(t){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Ue(this.getTileSize(t[0]),this.no);return[n[0]+(t[1]+.5)*r[0]*i,n[1]-(t[2]+.5)*r[1]*i]},t.prototype.getTileCoordExtent=function(t,n){var i=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=Ue(this.getTileSize(t[0]),this.no),o=i[0]+t[1]*s[0]*r,u=i[1]-(t[2]+1)*s[1]*r;return jn(o,u,o+s[0]*r,u+s[1]*r,n)},t.prototype.getTileCoordForCoordAndResolution=function(t,n,i){return this.oo(t[0],t[1],n,!1,i)},t.prototype.oo=function(t,n,i,r,s){var o=this.getZForResolution(i),u=i/this.getResolution(o),e=this.getOrigin(o),h=Ue(this.getTileSize(o),this.no),f=r?.5:0,c=r?.5:0,a=Math.floor((t-e[0])/i+f),v=Math.floor((e[1]-n)/i+c),l=u*a/h[0],d=u*v/h[1];return r?(l=Math.ceil(l)-1,d=Math.ceil(d)-1):(l=Math.floor(l),d=Math.floor(d)),Of(o,l,d,s)},t.prototype.so=function(t,n,i,r,s){var o=this.getOrigin(i),u=this.getResolution(i),e=Ue(this.getTileSize(i),this.no),h=r?.5:0,f=r?.5:0,c=Math.floor((t-o[0])/u+h),a=Math.floor((o[1]-n)/u+f),v=c/e[0],l=a/e[1];return r?(v=Math.ceil(v)-1,l=Math.ceil(l)-1):(v=Math.floor(v),l=Math.floor(l)),Of(i,v,l,s)},t.prototype.getTileCoordForCoordAndZ=function(t,n,i){return this.so(t[0],t[1],n,!1,i)},t.prototype.getTileCoordResolution=function(t){return this.si[t[0]]},t.prototype.getTileSize=function(t){return this.Ks?this.Ks:this.$s[t]},t.prototype.getFullTileRange=function(t){return this.Qs?this.Qs[t]:this.D?this.getTileRangeForExtentAndZ(this.D,t):null},t.prototype.getZForResolution=function(t,n){return ii(y(this.si,t,n||0),this.minZoom,this.maxZoom)},t.prototype.ro=function(t){for(var n=this.si.length,i=new Array(n),r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.Qs=i},t}();function gc(t){var n=t.getDefaultTileGrid();return n||(n=xc(t),t.setDefaultTileGrid(n)),n}function mc(t,n,i){var r=n[0],s=t.getTileCoordCenter(n),o=Sc(i);if(_n(o,s))return n;var u=Zn(o),e=Math.ceil((o[0]-s[0])/u);return s[0]+=u*e,t.getTileCoordForCoordAndZ(s,r)}function Oc(t,n,i,r){var s=void 0!==r?r:en,o=jc(t,n,i);return new _c({extent:t,origin:Un(t,s),resolutions:o,tileSize:i})}function Mc(t){var n=t||{},i=n.extent||ur("EPSG:3857").getExtent(),r={extent:i,minZoom:n.minZoom,tileSize:n.tileSize,resolutions:jc(i,n.maxZoom,n.tileSize,n.maxResolution)};return new _c(r)}function jc(t,n,i,r){for(var s=void 0!==n?n:42,o=Yn(t),u=Zn(t),e=Ue(void 0!==i?i:_e),h=r>0?r:Math.max(u/e[0],o/e[1]),f=s+1,c=new Array(f),a=0;a<f;++a)c[a]=h/Math.pow(2,a);return c}function xc(t,n,i,r){return Oc(Sc(t),n,i,r)}function Sc(t){var n=(t=ur(t)).getExtent();if(!n){var i=180*kt[It.DEGREES]/t.getMetersPerUnit();n=jn(-i,-i,i,i)}return n}function Ec(t,n){var i=/\{z\}/g,r=/\{x\}/g,s=/\{y\}/g,o=/\{-y\}/g;return function(u,e,h){return u?t.replace(i,u[0].toString()).replace(r,u[1].toString()).replace(s,u[2].toString()).replace(o,(function(){var t=u[0],i=n.getFullTileRange(t);return mt(i,55),(i.getHeight()-u[2]-1).toString()})):void 0}}function Tc(t,n){for(var i=t.length,r=new Array(i),s=0;s<i;++s)r[s]=Ec(t[s],n);return Ac(r)}function Ac(t){return 1===t.length?t[0]:function(n,i,r){if(n){var s=ci(Sf(n),t.length);return t[s](n,i,r)}}}function Cc(t){var n=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var r=i[1].charCodeAt(0),s=i[2].charCodeAt(0),o=void 0;for(o=r;o<=s;++o)n.push(t.replace(i[0],String.fromCharCode(o)));return n}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var u=parseInt(i[2],10),e=parseInt(i[1],10);e<=u;e++)n.push(t.replace(i[0],e.toString()));return n}return n.push(t),n}function Nc(t,n){var i=[];Object.keys(n).forEach((function(t){null!==n[t]&&void 0!==n[t]&&i.push(t+"="+encodeURIComponent(n[t]))}));var r=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}var kc="http://www.w3.org/2001/XMLSchema-instance";function Pc(t,n){return Qc().createElementNS(t,n)}function Ic(t,n){return Gc(t,n,[]).join("")}function Gc(t,n,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else{var r=void 0;for(r=t.firstChild;r;r=r.nextSibling)Gc(r,n,i)}return i}function Rc(t){return"documentElement"in t}function Lc(t){return(new DOMParser).parseFromString(t,"application/xml")}function Fc(t,n){return function(i,r){var s=t.call(void 0!==n?n:this,i,r);void 0!==s&&r[r.length-1].push(s)}}function Dc(t,n,i){return function(r,s){var o=t.call(void 0!==i?i:this,r,s);void 0!==o&&(s[s.length-1][void 0!==n?n:r.localName]=o)}}function zc(t,n){return function(i,r,s){t.call(void 0!==n?n:this,i,r,s),s[s.length-1].node.appendChild(i)}}function Uc(t,n){var i,r;return function(n,s,o){if(void 0===i){i={};var u={};u[n.localName]=t,i[n.namespaceURI]=u,r=Xc(n.localName)}Jc(i,r,s,o)}}function Xc(t,n){var i=t;return function(t,r,s){var o=r[r.length-1].node,u=i;return void 0===u&&(u=s),Pc(void 0!==n?n:o.namespaceURI,u)}}var Yc=Xc();function Wc(t,n){for(var i=n.length,r=new Array(i),s=0;s<i;++s)r[s]=t[n[s]];return r}function Bc(t,n,i){var r,s,o=void 0!==i?i:{};for(r=0,s=t.length;r<s;++r)o[t[r]]=n;return o}function qc(t,n,i,r){var s;for(s=n.firstElementChild;s;s=s.nextElementSibling){var o=t[s.namespaceURI];if(void 0!==o){var u=o[s.localName];void 0!==u&&u.call(r,s,i)}}}function Zc(t,n,i,r,s){return r.push(t),qc(n,i,r,s),r.pop()}function Jc(t,n,i,r,s,o){for(var u,e,h=(void 0!==s?s:i).length,f=0;f<h;++f)void 0!==(u=i[f])&&void 0!==(e=n.call(void 0!==o?o:this,u,r,void 0!==s?s[f]:void 0))&&t[e.namespaceURI][e.localName].call(o,e,u,r)}function Vc(t,n,i,r,s,o,u){return s.push(t),Jc(n,i,r,s,o,u),s.pop()}var Hc=void 0;function $c(){return void 0===Hc&&"undefined"!=typeof XMLSerializer&&(Hc=new XMLSerializer),Hc}var Kc=void 0;function Qc(){return void 0===Kc&&"undefined"!=typeof document&&(Kc=document.implementation.createDocument("","",null)),Kc}function ta(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function na(t,n){return t[0]=n[0],t[1]=n[1],t[4]=n[2],t[5]=n[3],t[12]=n[4],t[13]=n[5],t}var ia=function(){function t(t){this.uo=t.opacity,this.eo=t.rotateWithView,this.vr=t.rotation,this.ho=t.scale,this.fo=Ue(t.scale),this.co=t.displacement}return t.prototype.clone=function(){var n=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(n)?n.slice():n,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.uo},t.prototype.getRotateWithView=function(){return this.eo},t.prototype.getRotation=function(){return this.vr},t.prototype.getScale=function(){return this.ho},t.prototype.getScaleArray=function(){return this.fo},t.prototype.getDisplacement=function(){return this.co},t.prototype.getAnchor=function(){return r()},t.prototype.getImage=function(t){return r()},t.prototype.getHitDetectionImage=function(){return r()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return r()},t.prototype.getImageSize=function(){return r()},t.prototype.getOrigin=function(){return r()},t.prototype.getSize=function(){return r()},t.prototype.setOpacity=function(t){this.uo=t},t.prototype.setRotateWithView=function(t){this.eo=t},t.prototype.setRotation=function(t){this.vr=t},t.prototype.setScale=function(t){this.ho=t,this.fo=Ue(t)},t.prototype.listenImageChange=function(t){r()},t.prototype.load=function(){r()},t.prototype.unlistenImageChange=function(t){r()},t}(),ra=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sa=function(t){function n(n){var i=this,r=void 0!==n.rotateWithView&&n.rotateWithView;return(i=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==n.rotation?n.rotation:0,scale:void 0!==n.scale?n.scale:1,displacement:void 0!==n.displacement?n.displacement:[0,0]})||this).Mt=void 0,i.ao=null,i.vo=void 0!==n.fill?n.fill:null,i.Vs=[0,0],i.Ct=n.points,i.lo=void 0!==n.radius?n.radius:n.radius1,i.do=n.radius2,i.Nt=void 0!==n.angle?n.angle:0,i.wo=void 0!==n.stroke?n.stroke:null,i.Hr=null,i.po=null,i.yo=null,i.render(),i}return ra(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},n.prototype.getAnchor=function(){return this.Hr},n.prototype.getAngle=function(){return this.Nt},n.prototype.getFill=function(){return this.vo},n.prototype.getHitDetectionImage=function(){return this.ao||this.bo(this.yo),this.ao},n.prototype.getImage=function(t){var n=this.Mt[t];if(!n){var i=this.yo,r=co(i.size*t,i.size*t);this._o(i,r,t),n=r.canvas,this.Mt[t]=n}return n},n.prototype.getPixelRatio=function(t){return t},n.prototype.getImageSize=function(){return this.po},n.prototype.getImageState=function(){return io},n.prototype.getOrigin=function(){return this.Vs},n.prototype.getPoints=function(){return this.Ct},n.prototype.getRadius=function(){return this.lo},n.prototype.getRadius2=function(){return this.do},n.prototype.getSize=function(){return this.po},n.prototype.getStroke=function(){return this.wo},n.prototype.listenImageChange=function(t){},n.prototype.load=function(){},n.prototype.unlistenImageChange=function(t){},n.prototype.mo=function(t,n,i){if(0===n||this.Ct===1/0||"bevel"!==t&&"miter"!==t)return n;var r=this.lo,s=void 0===this.do?r:this.do;if(r<s){var o=r;r=s,s=o}var u=void 0===this.do?this.Ct:2*this.Ct,e=2*Math.PI/u,h=s*Math.sin(e),f=r-Math.sqrt(s*s-h*h),c=Math.sqrt(h*h+f*f),a=c/h;if("miter"===t&&a<=i)return a*n;var v=n/2/a,l=n/2*(f/c),d=Math.sqrt((r+v)*(r+v)+l*l)-r;if(void 0===this.do||"bevel"===t)return 2*d;var w=r*Math.sin(e),p=s-Math.sqrt(r*r-w*w),y=Math.sqrt(w*w+p*p)/w;if(y<=i){var b=y*n/2-s-r;return 2*Math.max(d,b)}return 2*d},n.prototype.createRenderOptions=function(){var t,n=mu,i=0,r=null,s=0,o=0;this.wo&&(null===(t=this.wo.getColor())&&(t=Mu),t=Rf(t),void 0===(o=this.wo.getWidth())&&(o=1),r=this.wo.getLineDash(),s=this.wo.getLineDashOffset(),void 0===(n=this.wo.getLineJoin())&&(n=mu),void 0===(i=this.wo.getMiterLimit())&&(i=Ou));var u=this.mo(n,o,i),e=Math.max(this.lo,this.do||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*e+u),lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}},n.prototype.render=function(){this.yo=this.createRenderOptions();var t=this.yo.size,n=this.getDisplacement();this.Mt={},this.Hr=[t/2-n[0],t/2+n[1]],this.po=[t,t]},n.prototype._o=function(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.Oo(n),this.vo){var r=this.vo.getColor();null===r&&(r=bu),n.fillStyle=Rf(r),n.fill()}this.wo&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,n.setLineDash&&t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n.prototype.bo=function(t){if(this.vo){var n=this.vo.getColor(),i=0;if("string"==typeof n&&(n=So(n)),null===n?i=1:Array.isArray(n)&&(i=4===n.length?n[3]:1),0===i){var r=co(t.size,t.size);this.ao=r.canvas,this.Mo(t,r)}}this.ao||(this.ao=this.getImage(1))},n.prototype.Oo=function(t){var n=this.Ct,i=this.lo;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{var r=void 0===this.do?i:this.do;void 0!==this.do&&(n*=2);for(var s=this.Nt-Math.PI/2,o=2*Math.PI/n,u=0;u<n;u++){var e=s+u*o,h=u%2==0?i:r;t.lineTo(h*Math.cos(e),h*Math.sin(e))}t.closePath()}},n.prototype.Mo=function(t,n){n.translate(t.size/2,t.size/2),this.Oo(n),n.fillStyle=bu,n.fill(),this.wo&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n}(ia),oa=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ua=function(t){function n(n){var i=n||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return oa(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},n.prototype.setRadius=function(t){this.lo=t,this.render()},n}(sa),ea=function(){function t(t){var n=t||{};this.jo=void 0!==n.color?n.color:null}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0})},t.prototype.getColor=function(){return this.jo},t.prototype.setColor=function(t){this.jo=t},t}(),ha="fraction",fa="pixels",ca="bottom-left",aa="bottom-right",va="top-left",la="top-right",da=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wa=null,pa=function(t){function n(n,i,r,s,o,u){var e=t.call(this)||this;return e.xo=null,e.wt=n||new Image,null!==s&&(e.wt.crossOrigin=s),e.Mt={},e.jo=u,e.yt=null,e.So=o,e.po=r,e.dt=i,e.Eo,e}return da(n,t),n.prototype.To=function(){if(void 0===this.Eo&&this.So===io){wa||(wa=co(1,1)),wa.drawImage(this.wt,0,0);try{wa.getImageData(0,0,1,1),this.Eo=!1}catch(t){wa=null,this.Eo=!0}}return!0===this.Eo},n.prototype.Ao=function(){this.dispatchEvent(k)},n.prototype._t=function(){this.So=ro,this.gt(),this.Ao()},n.prototype.Ot=function(){this.So=io,this.po?(this.wt.width=this.po[0],this.wt.height=this.po[1]):this.po=[this.wt.width,this.wt.height],this.gt(),this.Ao()},n.prototype.getImage=function(t){return this.Co(t),this.Mt[t]?this.Mt[t]:this.wt},n.prototype.getPixelRatio=function(t){return this.Co(t),this.Mt[t]?t:1},n.prototype.getImageState=function(){return this.So},n.prototype.getHitDetectionImage=function(){if(!this.xo)if(this.To()){var t=this.po[0],n=this.po[1],i=co(t,n);i.fillRect(0,0,t,n),this.xo=i.canvas}else this.xo=this.wt;return this.xo},n.prototype.getSize=function(){return this.po},n.prototype.getSrc=function(){return this.dt},n.prototype.load=function(){if(this.So==to){this.So=no;try{this.wt.src=this.dt}catch(t){this._t()}this.yt=uo(this.wt,this.Ot.bind(this),this._t.bind(this))}},n.prototype.Co=function(t){if(this.jo&&!this.Mt[t]&&this.So===io){var n=document.createElement("canvas");this.Mt[t]=n,n.width=Math.ceil(this.wt.width*t),n.height=Math.ceil(this.wt.height*t);var i=n.getContext("2d");if(i.scale(t,t),i.drawImage(this.wt,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.To())i.fillStyle=Mo(this.jo),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this.wt,0,0);else{for(var r=i.getImageData(0,0,n.width,n.height),s=r.data,o=this.jo[0]/255,u=this.jo[1]/255,e=this.jo[2]/255,h=this.jo[3],f=0,c=s.length;f<c;f+=4)s[f]*=o,s[f+1]*=u,s[f+2]*=e,s[f+3]*=h;i.putImageData(r,0,0)}}},n.prototype.gt=function(){this.yt&&(this.yt(),this.yt=null)},n}(N);function ya(t,n,i,r,s,o){var u=Po.get(n,r,o);return u||(u=new pa(t,n,i,r,s,o),Po.set(n,r,o,u)),u}var ba=pa,_a=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ga=function(t){function n(n){var i=this,r=n||{},s=void 0!==r.opacity?r.opacity:1,u=void 0!==r.rotation?r.rotation:0,e=void 0!==r.scale?r.scale:1,h=void 0!==r.rotateWithView&&r.rotateWithView;(i=t.call(this,{opacity:s,rotation:u,scale:e,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:h})||this).Hr=void 0!==r.anchor?r.anchor:[.5,.5],i.No=null,i.ko=void 0!==r.anchorOrigin?r.anchorOrigin:va,i.Po=void 0!==r.anchorXUnits?r.anchorXUnits:ha,i.Io=void 0!==r.anchorYUnits?r.anchorYUnits:ha,i.xt=void 0!==r.crossOrigin?r.crossOrigin:null;var f=void 0!==r.img?r.img:null,c=void 0!==r.imgSize?r.imgSize:null,a=r.src;mt(!(void 0!==a&&f),4),mt(!f||f&&c,5),void 0!==a&&0!==a.length||!f||(a=f.src||o(f)),mt(void 0!==a&&a.length>0,6);var v=void 0!==r.src?to:io;return i.jo=void 0!==r.color?So(r.color):null,i.Go=ya(f,a,c,i.xt,v,i.jo),i.Ro=void 0!==r.offset?r.offset:[0,0],i.Lo=void 0!==r.offsetOrigin?r.offsetOrigin:va,i.Vs=null,i.po=void 0!==r.size?r.size:null,i}return _a(n,t),n.prototype.clone=function(){var t=this.getScale();return new n({anchor:this.Hr.slice(),anchorOrigin:this.ko,anchorXUnits:this.Po,anchorYUnits:this.Io,crossOrigin:this.xt,color:this.jo&&this.jo.slice?this.jo.slice():this.jo||void 0,src:this.getSrc(),offset:this.Ro.slice(),offsetOrigin:this.Lo,size:null!==this.po?this.po.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},n.prototype.getAnchor=function(){if(this.No)return this.No;var t=this.Hr,n=this.getSize();if(this.Po==ha||this.Io==ha){if(!n)return null;t=this.Hr.slice(),this.Po==ha&&(t[0]*=n[0]),this.Io==ha&&(t[1]*=n[1])}if(this.ko!=va){if(!n)return null;t===this.Hr&&(t=this.Hr.slice()),this.ko!=la&&this.ko!=aa||(t[0]=-t[0]+n[0]),this.ko!=ca&&this.ko!=aa||(t[1]=-t[1]+n[1])}var i=this.getDisplacement();return t[0]-=i[0],t[1]+=i[1],this.No=t,this.No},n.prototype.setAnchor=function(t){this.Hr=t,this.No=null},n.prototype.getColor=function(){return this.jo},n.prototype.getImage=function(t){return this.Go.getImage(t)},n.prototype.getPixelRatio=function(t){return this.Go.getPixelRatio(t)},n.prototype.getImageSize=function(){return this.Go.getSize()},n.prototype.getImageState=function(){return this.Go.getImageState()},n.prototype.getHitDetectionImage=function(){return this.Go.getHitDetectionImage()},n.prototype.getOrigin=function(){if(this.Vs)return this.Vs;var t=this.Ro;if(this.Lo!=va){var n=this.getSize(),i=this.Go.getSize();if(!n||!i)return null;t=t.slice(),this.Lo!=la&&this.Lo!=aa||(t[0]=i[0]-n[0]-t[0]),this.Lo!=ca&&this.Lo!=aa||(t[1]=i[1]-n[1]-t[1])}return this.Vs=t,this.Vs},n.prototype.getSrc=function(){return this.Go.getSrc()},n.prototype.getSize=function(){return this.po?this.po:this.Go.getSize()},n.prototype.listenImageChange=function(t){this.Go.addEventListener(k,t)},n.prototype.load=function(){this.Go.load()},n.prototype.unlistenImageChange=function(t){this.Go.removeEventListener(k,t)},n}(ia),ma=function(){function t(t){var n=t||{};this.jo=void 0!==n.color?n.color:null,this.Fo=n.lineCap,this.Do=void 0!==n.lineDash?n.lineDash:null,this.zo=n.lineDashOffset,this.Uo=n.lineJoin,this.Xo=n.miterLimit,this.Yo=n.width}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.jo},t.prototype.getLineCap=function(){return this.Fo},t.prototype.getLineDash=function(){return this.Do},t.prototype.getLineDashOffset=function(){return this.zo},t.prototype.getLineJoin=function(){return this.Uo},t.prototype.getMiterLimit=function(){return this.Xo},t.prototype.getWidth=function(){return this.Yo},t.prototype.setColor=function(t){this.jo=t},t.prototype.setLineCap=function(t){this.Fo=t},t.prototype.setLineDash=function(t){this.Do=t},t.prototype.setLineDashOffset=function(t){this.zo=t},t.prototype.setLineJoin=function(t){this.Uo=t},t.prototype.setMiterLimit=function(t){this.Xo=t},t.prototype.setWidth=function(t){this.Yo=t},t}();function Oa(t){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ma=function(){function t(t){var n=t||{};this.Sr=null,this.Wo=Ta,void 0!==n.geometry&&this.setGeometry(n.geometry),this.vo=void 0!==n.fill?n.fill:null,this.wt=void 0!==n.image?n.image:null,this.Ut=void 0!==n.renderer?n.renderer:null,this.Bo=void 0!==n.hitDetectionRenderer?n.hitDetectionRenderer:null,this.wo=void 0!==n.stroke?n.stroke:null,this.Ns=void 0!==n.text?n.text:null,this.qo=n.zIndex}return t.prototype.clone=function(){var n=this.getGeometry();return n&&"object"===Oa(n)&&(n=n.clone()),new t({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.Ut},t.prototype.setRenderer=function(t){this.Ut=t},t.prototype.setHitDetectionRenderer=function(t){this.Bo=t},t.prototype.getHitDetectionRenderer=function(){return this.Bo},t.prototype.getGeometry=function(){return this.Sr},t.prototype.getGeometryFunction=function(){return this.Wo},t.prototype.getFill=function(){return this.vo},t.prototype.setFill=function(t){this.vo=t},t.prototype.getImage=function(){return this.wt},t.prototype.setImage=function(t){this.wt=t},t.prototype.getStroke=function(){return this.wo},t.prototype.setStroke=function(t){this.wo=t},t.prototype.getText=function(){return this.Ns},t.prototype.setText=function(t){this.Ns=t},t.prototype.getZIndex=function(){return this.qo},t.prototype.setGeometry=function(t){"function"==typeof t?this.Wo=t:"string"==typeof t?this.Wo=function(n){return n.get(t)}:t?void 0!==t&&(this.Wo=function(){return t}):this.Wo=Ta,this.Sr=t},t.prototype.setZIndex=function(t){this.qo=t},t}();function ja(t){var n;if("function"==typeof t)n=t;else{var i;if(Array.isArray(t))i=t;else mt("function"==typeof t.getZIndex,41),i=[t];n=function(){return i}}return n}var xa=null;function Sa(t,n){if(!xa){var i=new ea({color:"rgba(255,255,255,0.4)"}),r=new ma({color:"#3399CC",width:1.25});xa=[new Ma({image:new ua({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return xa}function Ea(){var t={},n=[255,255,255,1],i=[0,153,255,1];return t[At.POLYGON]=[new Ma({fill:new ea({color:[255,255,255,.5]})})],t[At.MULTI_POLYGON]=t[At.POLYGON],t[At.LINE_STRING]=[new Ma({stroke:new ma({color:n,width:5})}),new Ma({stroke:new ma({color:i,width:3})})],t[At.MULTI_LINE_STRING]=t[At.LINE_STRING],t[At.CIRCLE]=t[At.POLYGON].concat(t[At.LINE_STRING]),t[At.POINT]=[new Ma({image:new ua({radius:6,fill:new ea({color:i}),stroke:new ma({color:n,width:1.5})}),zIndex:1/0})],t[At.MULTI_POINT]=t[At.POINT],t[At.GEOMETRY_COLLECTION]=t[At.POLYGON].concat(t[At.LINE_STRING],t[At.POINT]),t}function Ta(t){return t.getGeometry()}var Aa=Ma,Ca="point",Na="line",ka=function(){function t(t){var n=t||{};this.Zo=n.font,this.vr=n.rotation,this.eo=n.rotateWithView,this.ho=n.scale,this.fo=Ue(void 0!==n.scale?n.scale:1),this.Ns=n.text,this.Jo=n.textAlign,this.Vo=n.textBaseline,this.vo=void 0!==n.fill?n.fill:new ea({color:"#333"}),this.Ho=void 0!==n.maxAngle?n.maxAngle:Math.PI/4,this.$o=void 0!==n.placement?n.placement:Ca,this.Ko=!!n.overflow,this.wo=void 0!==n.stroke?n.stroke:null,this.Qo=void 0!==n.offsetX?n.offsetX:0,this.tu=void 0!==n.offsetY?n.offsetY:0,this.nu=n.backgroundFill?n.backgroundFill:null,this.iu=n.backgroundStroke?n.backgroundStroke:null,this.oi=void 0===n.padding?null:n.padding}return t.prototype.clone=function(){var n=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(n)?n.slice():n,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.Ko},t.prototype.getFont=function(){return this.Zo},t.prototype.getMaxAngle=function(){return this.Ho},t.prototype.getPlacement=function(){return this.$o},t.prototype.getOffsetX=function(){return this.Qo},t.prototype.getOffsetY=function(){return this.tu},t.prototype.getFill=function(){return this.vo},t.prototype.getRotateWithView=function(){return this.eo},t.prototype.getRotation=function(){return this.vr},t.prototype.getScale=function(){return this.ho},t.prototype.getScaleArray=function(){return this.fo},t.prototype.getStroke=function(){return this.wo},t.prototype.getText=function(){return this.Ns},t.prototype.getTextAlign=function(){return this.Jo},t.prototype.getTextBaseline=function(){return this.Vo},t.prototype.getBackgroundFill=function(){return this.nu},t.prototype.getBackgroundStroke=function(){return this.iu},t.prototype.getPadding=function(){return this.oi},t.prototype.setOverflow=function(t){this.Ko=t},t.prototype.setFont=function(t){this.Zo=t},t.prototype.setMaxAngle=function(t){this.Ho=t},t.prototype.setOffsetX=function(t){this.Qo=t},t.prototype.setOffsetY=function(t){this.tu=t},t.prototype.setPlacement=function(t){this.$o=t},t.prototype.setRotateWithView=function(t){this.eo=t},t.prototype.setFill=function(t){this.vo=t},t.prototype.setRotation=function(t){this.vr=t},t.prototype.setScale=function(t){this.ho=t,this.fo=Ue(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.wo=t},t.prototype.setText=function(t){this.Ns=t},t.prototype.setTextAlign=function(t){this.Jo=t},t.prototype.setTextBaseline=function(t){this.Vo=t},t.prototype.setBackgroundFill=function(t){this.nu=t},t.prototype.setBackgroundStroke=function(t){this.iu=t},t.prototype.setPadding=function(t){this.oi=t},t}(),Pa=34962,Ia=34963,Ga=35044,Ra=35048,La=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Fa(t,n){for(var i=La.length,r=0;r<i;++r)try{var s=t.getContext(La[r],n);if(s)return s}catch(t){}return null}var Da=Ga;function za(t){switch(t){case Pa:return Float32Array;case Ia:return Uint32Array;default:return Float32Array}}var Ua=function(){function t(t,n){this.array=null,this.type=t,mt(t===Pa||t===Ia,62),this.usage=void 0!==n?n:Da}return t.prototype.ofSize=function(t){this.array=new(za(this.type))(t)},t.prototype.fromArray=function(t){var n=za(this.type);this.array=n.from?n.from(t):new n(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(za(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),Xa=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Ya(t,n){t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)}function Wa(t,n,i,r,s){var o,u,e=t.getGL();switch(Ya(e,n),s){case 1:o=e.LUMINANCE;break;case 2:o=e.LUMINANCE_ALPHA;break;case 3:o=e.RGB;break;case 4:o=e.RGBA;break;default:throw new Error("Unsupported number of bands: "+s)}i instanceof Float32Array?(u=e.FLOAT,t.getExtension("OES_texture_float"),t.getExtension("OES_texture_float_linear")):u=e.UNSIGNED_BYTE,e.texImage2D(e.TEXTURE_2D,0,o,r[0],r[1],0,o,u,i)}var Ba=function(t){function n(n,i,r){var s=t.call(this)||this;s.tile,s.textures=[],s.Di=s.Di.bind(s),s.size=Ue(i.getTileSize(n.tileCoord[0])),s.bandCount=NaN,s.ru=r;var o=new Ua(Pa,Ga);return o.fromArray([0,1,1,1,1,0,0,0]),r.flushBufferData(o),s.coords=o,s.setTile(n),s}return Xa(n,t),n.prototype.setTile=function(t){t!==this.tile&&(this.tile&&this.tile.removeEventListener(k,this.Di),this.tile=t,this.textures.length=0,this.loaded=t.getState()===ct,this.loaded?this.su():t.addEventListener(k,this.Di))},n.prototype.su=function(){var t=this.ru,n=t.getGL(),i=this.tile;if(i instanceof _o){var r=n.createTexture();return this.textures.push(r),this.bandCount=4,void function(t,n,i){Ya(t,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)}(n,r,i.getImage())}var s=i.getData(),o=s instanceof Float32Array,u=this.size[0]*this.size[1];this.bandCount=s.byteLength/(o?4:1)/u;var e=Math.ceil(this.bandCount/4);if(1===e){r=n.createTexture();return this.textures.push(r),void Wa(t,r,s,this.size,this.bandCount)}for(var h=o?Float32Array:Uint8Array,f=new Array(e),c=0;c<e;++c){r=n.createTexture();this.textures.push(r);var a=c<e-1?4:this.bandCount%4;f[c]=new h(u*a)}for(var v=u*this.bandCount,l=0;l<v;++l){var d=l%this.bandCount,w=d%4,p=(a=(c=Math.floor(d/4))<e-1?4:this.bandCount%4,Math.floor(l/this.bandCount));f[c][p*a+w]=s[l]}for(c=0;c<e;++c){a=c<e-1?4:this.bandCount%4;Wa(t,r=this.textures[c],f[c],this.size,a)}},n.prototype.Di=function(){this.tile.getState()===ct&&(this.loaded=!0,this.su(),this.dispatchEvent(k))},n.prototype.disposeInternal=function(){var t=this.ru.getGL();this.ru.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)t.deleteTexture(this.textures[n]);this.tile.removeEventListener(k,this.Di)},n}(N),qa=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Za=function(t){function n(n){var i=t.call(this)||this;return i.ou=i.uu.bind(i),i.eu=n,i.declutterExecutorGroup=null,i}return qa(n,t),n.prototype.getFeatures=function(t){return r()},n.prototype.prepareFrame=function(t){return r()},n.prototype.renderFrame=function(t,n){return r()},n.prototype.loadedTileCallback=function(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i},n.prototype.createLoadedTileFinder=function(t,n,i){return function(r,s){var o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(n,r,s,o)}.bind(this)},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s){},n.prototype.getDataAtPixel=function(t,n,i){return null},n.prototype.getLayer=function(){return this.eu},n.prototype.handleFontsChanged=function(){},n.prototype.uu=function(t){t.target.getState()===io&&this.renderIfReadyAndVisible()},n.prototype.loadImage=function(t){var n=t.getState();return n!=io&&n!=ro&&t.addEventListener(k,this.ou),n==to&&(t.load(),n=t.getState()),n==io},n.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Ko&&t.changed()},n}(K),Ja="webglcontextlost",Va="webglcontextrestored",Ha=function(){function t(t){this.hu=t.webGlContext;var n=this.hu;this.fu=t.scaleRatio||1,this.cu=n.createTexture(),this.au=null,this.vu=n.createFramebuffer();var i=n.createShader(n.VERTEX_SHADER);n.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),n.compileShader(i);var r=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(r,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n"),n.compileShader(r),this.lu=n.createProgram(),n.attachShader(this.lu,i),n.attachShader(this.lu,r),n.linkProgram(this.lu),this.du=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,this.du),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),n.STATIC_DRAW),this.wu=n.getAttribLocation(this.lu,"a_position"),this.pu=n.getUniformLocation(this.lu,"u_screenSize"),this.yu=n.getUniformLocation(this.lu,"u_image"),this.bu=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(i){this.bu.push({value:t.uniforms[i],location:n.getUniformLocation(this.lu,i)})}.bind(this))}return t.prototype.getGL=function(){return this.hu},t.prototype.init=function(t){var n=this.getGL(),i=[n.drawingBufferWidth*this.fu,n.drawingBufferHeight*this.fu];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.viewport(0,0,i[0],i[1]),!this.au||this.au[0]!==i[0]||this.au[1]!==i[1]){this.au=i;var r=n.RGBA,s=n.RGBA,o=n.UNSIGNED_BYTE;n.bindTexture(n.TEXTURE_2D,this.cu),n.texImage2D(n.TEXTURE_2D,0,r,i[0],i[1],0,s,o,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.cu,0)}},t.prototype.apply=function(t,n){var i=this.getGL(),r=t.size;i.bindFramebuffer(i.FRAMEBUFFER,n?n.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.cu),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.du),i.useProgram(this.lu),i.enableVertexAttribArray(this.wu),i.vertexAttribPointer(this.wu,2,i.FLOAT,!1,0,0),i.uniform2f(this.pu,r[0],r[1]),i.uniform1i(this.yu,0),this.applyUniforms(t),i.drawArrays(i.TRIANGLES,0,6)},t.prototype.getFrameBuffer=function(){return this.vu},t.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=1;this.bu.forEach((function(s){if((n="function"==typeof s.value?s.value(t):s.value)instanceof HTMLCanvasElement||n instanceof ImageData)s.texture||(s.texture=i.createTexture()),i.activeTexture(i["TEXTURE"+r]),i.bindTexture(i.TEXTURE_2D,s.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),n instanceof ImageData?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,n.width,n.height,0,i.UNSIGNED_BYTE,new Uint8Array(n.data)):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),i.uniform1i(s.location,r++);else if(Array.isArray(n))switch(n.length){case 2:return void i.uniform2f(s.location,n[0],n[1]);case 3:return void i.uniform3f(s.location,n[0],n[1],n[2]);case 4:return void i.uniform4f(s.location,n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&i.uniform1f(s.location,n)}))},t}(),$a=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ka="u_projectionMatrix",Qa="u_offsetScaleMatrix",tv="u_offsetRotateMatrix",nv="u_time",iv="u_zoom",rv="u_resolution",sv={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function ov(t){switch(t){case sv.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case sv.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case sv.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case sv.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var uv=function(t){function n(n){var i=t.call(this)||this,r=n||{};i._u=i.handleWebGLContextLost.bind(i),i.gu=i.handleWebGLContextRestored.bind(i),i.Mt=document.createElement("canvas"),i.Mt.style.position="absolute",i.Mt.style.left="0",i.hu=Fa(i.Mt);var s=i.getGL();if(i.mu={},i.Ou={},i.Mu=null,i.Mt.addEventListener(Ja,i._u),i.Mt.addEventListener(Va,i.gu),i.ju=[1,0,0,1,0,0],i.xu=[1,0,0,1,0,0],i.Su=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i.Eu={},i.Tu={},i.bu=[],r.uniforms)for(var o in r.uniforms)i.bu.push({name:o,value:r.uniforms[o]});return i.Au=r.postProcesses?r.postProcesses.map((function(t){return new Ha({webGlContext:s,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new Ha({webGlContext:s})],i.Cu=null,i.Xr=Date.now(),i}return $a(n,t),n.prototype.getExtension=function(t){if(t in this.Ou)return this.Ou[t];var n=this.hu.getExtension(t);return this.Ou[t]=n,n},n.prototype.bindBuffer=function(t){var n=this.getGL(),i=o(t),r=this.mu[i];r||(r={buffer:t,webGlBuffer:n.createBuffer()},this.mu[i]=r);n.bindBuffer(t.getType(),r.webGlBuffer)},n.prototype.flushBufferData=function(t){var n=this.getGL();this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())},n.prototype.deleteBuffer=function(t){var n=this.getGL(),i=o(t),r=this.mu[i];r&&!n.isContextLost()&&n.deleteBuffer(r.webGlBuffer),delete this.mu[i]},n.prototype.disposeInternal=function(){this.Mt.removeEventListener(Ja,this._u),this.Mt.removeEventListener(Va,this.gu);var t=this.hu.getExtension("WEBGL_lose_context");t&&t.loseContext(),delete this.hu,delete this.Mt},n.prototype.prepareDraw=function(t,n){var i=this.getGL(),r=this.getCanvas(),s=t.size,o=t.pixelRatio;r.width=s[0]*o,r.height=s[1]*o,r.style.width=s[0]+"px",r.style.height=s[1]+"px",i.useProgram(this.Mu);for(var u=this.Au.length-1;u>=0;u--)this.Au[u].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.Mu),this.applyFrameState(t),this.applyUniforms(t)},n.prototype.prepareDrawToRenderTarget=function(t,n,i){var r=this.getGL(),s=n.getSize();r.bindFramebuffer(r.FRAMEBUFFER,n.getFramebuffer()),r.viewport(0,0,s[0],s[1]),r.bindTexture(r.TEXTURE_2D,n.getTexture()),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,i?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.Mu),this.applyFrameState(t),this.applyUniforms(t)},n.prototype.drawElements=function(t,n){var i=this.getGL();this.getExtension("OES_element_index_uint");var r=i.UNSIGNED_INT,s=n-t,o=4*t;i.drawElements(i.TRIANGLES,s,r,o)},n.prototype.finalizeDraw=function(t){for(var n=0;n<this.Au.length;n++)this.Au[n].apply(t,this.Au[n+1]||null)},n.prototype.getCanvas=function(){return this.Mt},n.prototype.getGL=function(){return this.hu},n.prototype.applyFrameState=function(t){var n=t.size,i=t.viewState.rotation,r=qt(this.xu);Kt(r,2/n[0],2/n[1]);var s=qt(this.ju);0!==i&&$t(s,-i),this.setUniformMatrixValue(Qa,na(this.Su,r)),this.setUniformMatrixValue(tv,na(this.Su,s)),this.setUniformFloatValue(nv,.001*(Date.now()-this.Xr)),this.setUniformFloatValue(iv,t.viewState.zoom),this.setUniformFloatValue(rv,t.viewState.resolution)},n.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=0;this.bu.forEach(function(s){if((n="function"==typeof s.value?s.value(t):s.value)instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData)s.texture||(s.prevValue=void 0,s.texture=i.createTexture()),i.activeTexture(i["TEXTURE"+r]),i.bindTexture(i.TEXTURE_2D,s.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(!(n instanceof HTMLImageElement)||n.complete)&&s.prevValue!==n&&(s.prevValue=n,i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n)),i.uniform1i(this.getUniformLocation(s.name),r++);else if(Array.isArray(n)&&6===n.length)this.setUniformMatrixValue(s.name,na(this.Su,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:return void i.uniform2f(this.getUniformLocation(s.name),n[0],n[1]);case 3:return void i.uniform3f(this.getUniformLocation(s.name),n[0],n[1],n[2]);case 4:return void i.uniform4f(this.getUniformLocation(s.name),n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&i.uniform1f(this.getUniformLocation(s.name),n)}.bind(this))},n.prototype.useProgram=function(t){return t!=this.Mu&&(this.getGL().useProgram(t),this.Mu=t,this.Eu={},this.Tu={},!0)},n.prototype.compileShader=function(t,n){var i=this.getGL(),r=i.createShader(n);return i.shaderSource(r,t),i.compileShader(r),r},n.prototype.getProgram=function(t,n){var i=this.getGL(),r=this.compileShader(t,i.FRAGMENT_SHADER),s=this.compileShader(n,i.VERTEX_SHADER),o=i.createProgram();if(i.attachShader(o,r),i.attachShader(o,s),i.linkProgram(o),!i.getShaderParameter(r,i.COMPILE_STATUS)){var u="Fragment shader compliation failed: "+i.getShaderInfoLog(r);throw new Error(u)}if(i.deleteShader(r),!i.getShaderParameter(s,i.COMPILE_STATUS)){u="Vertex shader compilation failed: "+i.getShaderInfoLog(s);throw new Error(u)}if(i.deleteShader(s),!i.getProgramParameter(o,i.LINK_STATUS)){u="GL program linking failed: "+i.getShaderInfoLog(s);throw new Error(u)}return o},n.prototype.getUniformLocation=function(t){return void 0===this.Eu[t]&&(this.Eu[t]=this.getGL().getUniformLocation(this.Mu,t)),this.Eu[t]},n.prototype.getAttributeLocation=function(t){return void 0===this.Tu[t]&&(this.Tu[t]=this.getGL().getAttribLocation(this.Mu,t)),this.Tu[t]},n.prototype.makeProjectionTransform=function(t,n){var i=t.size,r=t.viewState.rotation,s=t.viewState.resolution,o=t.viewState.center;return qt(n),tn(n,0,0,2/(s*i[0]),2/(s*i[1]),-r,-o[0],-o[1]),n},n.prototype.setUniformFloatValue=function(t,n){this.getGL().uniform1f(this.getUniformLocation(t),n)},n.prototype.setUniformMatrixValue=function(t,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,n)},n.prototype.Nu=function(t,n,i,r,s){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,n,i,!1,r,s))},n.prototype.enableAttributes=function(t){for(var n=function(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];n+=r.size*ov(r.type)}return n}(t),i=0,r=0;r<t.length;r++){var s=t[r];this.Nu(s.name,s.size,s.type||5126,n,i),i+=s.size*ov(s.type)}},n.prototype.handleWebGLContextLost=function(){E(this.mu),this.Mu=null},n.prototype.handleWebGLContextRestored=function(){},n.prototype.createTexture=function(t,n,i){var r=this.getGL(),s=i||r.createTexture(),o=r.RGBA,u=r.RGBA,e=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,s),n?r.texImage2D(r.TEXTURE_2D,0,o,u,e,n):r.texImage2D(r.TEXTURE_2D,0,o,t[0],t[1],0,u,e,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),s},n}(l),ev=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hv="GENERATE_BUFFERS",fv=function(t){function n(n,i){var r=t.call(this,n)||this,s=i||{};return r.helper=new uv({postProcesses:s.postProcesses,uniforms:s.uniforms}),void 0!==s.className&&(r.helper.getCanvas().className=s.className),r}return ev(n,t),n.prototype.disposeInternal=function(){this.helper.dispose(),delete this.helper,t.prototype.disposeInternal.call(this)},n.prototype.ku=function(t,n){var i=this.getLayer();if(i.hasListener(t)){var r=new uu(t,null,n,null);i.dispatchEvent(r)}},n.prototype.preRender=function(t){this.ku(qo,t)},n.prototype.postRender=function(t){this.ku(Zo,t)},n}(Za);var cv=fv,av=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vv="u_tileTexture",lv="u_tileTransform",dv="u_transitionAlpha",wv="u_depth",pv="u_texturePixelWidth",yv="u_texturePixelHeight",bv="u_resolution",_v="u_zoom",gv=[{name:"a_textureCoord",size:2,type:sv.FLOAT}],mv={};function Ov(t){return 2*(1-1/(t+1))-1}function Mv(t,n,i){i in t||(t[i]=[]),t[i].push(n)}function jv(t,n){var i=t.layerStatesArray[t.layerIndex];return i.extent&&(n=Wn(n,jr(i.extent,t.viewState.projection))),n}var xv=function(t){function n(n,i){var r=t.call(this,n,{uniforms:i.uniforms,className:i.className})||this;r.Pu=[1,0,0,1,0,0],r.Iu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.Gu=new kf(0,0,0,0),r.Ru=Of(0,0,0),r.Lu=[0,0],r.Fu=r.helper.getProgram(i.fragmentShader,i.vertexShader);var s=new Ua(Ia,Ga);s.fromArray([0,1,3,1,2,3]),r.helper.flushBufferData(s),r.Du=s;var o=void 0!==i.cacheSize?i.cacheSize:512;return r.zu=new mf(o),r.Uu=NaN,r}return av(n,t),n.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==ct||i==vt||i==at&&!r},n.prototype.prepareFrame=function(t){if(Vn(jv(t,t.extent)))return!1;var n=this.getLayer().getSource();return!!n&&n.getState()===Ko},n.prototype.enqueueTiles=function(t,n,i,r){var s=t.viewState,u=this.getLayer().getSource(),e=u.getTileGridForProjection(s.projection),h=this.zu,f=e.getTileRangeForExtentAndZ(n,i),c=o(u);c in t.wantedTiles||(t.wantedTiles[c]={});for(var a=t.wantedTiles[c],v=e.getResolution(i),l=f.minX;l<=f.maxX;++l)for(var d=f.minY;d<=f.maxY;++d){var w=Of(i,l,d,this.Ru),p=jf(w),y=void 0,b=void 0;h.containsKey(p)&&(b=(y=h.get(p)).tile),y&&y.tile.key===u.getKey()||(b=u.getTile(i,l,d,t.pixelRatio,s.projection),y?y.setTile(this.isDrawableTile(b)?b:b.getInterimTile()):(y=new Ba(b,e,this.helper),h.set(p,y))),Mv(r,y,i);var _=b.getKey();a[_]=!0,b.getState()===ht&&(t.tileQueue.isKeyQueued(_)||t.tileQueue.enqueue([b,c,e.getTileCoordCenter(w),v]))}},n.prototype.renderFrame=function(t){this.preRender(t);var n=t.viewState,i=t.layerStatesArray[t.layerIndex],r=jv(t,t.extent),s=this.getLayer().getSource(),u=s.getTileGridForProjection(n.projection),e=u.getZForResolution(n.resolution,s.zDirection),h={};if(t.nextExtent){var f=u.getZForResolution(n.nextResolution,s.zDirection),c=jv(t,t.nextExtent);this.enqueueTiles(t,c,f,h)}this.enqueueTiles(t,r,e,h);for(var a={},v=o(this),l=t.time,d=!1,p=h[e],y=0,b=p.length;y<b;++y){var _=(R=(Z=p[y]).tile).tileCoord;if(Z.loaded){if(1===(L=R.getAlpha(v,l))){R.endTransition(v);continue}d=!0,a[F=jf(_)]=L}if(!this.Xu(u,_,e+1,h))for(var g=e-1;g>=u.minZoom;--g){if(this.Xu(u,_,g,h))break}}this.helper.useProgram(this.Fu),this.helper.prepareDraw(t,!d);for(var m=Object.keys(h).map(Number).sort(w),O=this.helper.getGL(),M=n.center[0],j=n.center[1],x=0,S=m.length;x<S;++x){var E=m[x],T=u.getResolution(E),A=Ue(u.getTileSize(E),this.Lu),C=u.getOrigin(E),N=(M-C[0])/(A[0]*T),k=(C[1]-j)/(A[1]*T),P=n.resolution/T,I=Ov(E),G=h[E];for(y=0,b=G.length;y<b;++y){if((Z=G[y]).loaded){var R,L,F=jf(_=(R=Z.tile).tileCoord),D=_[1],z=_[2];tn(this.Pu,0,0,2/(t.size[0]*P/A[0]),-2/(t.size[1]*P/A[1]),n.rotation,-(N-D),-(k-z)),this.helper.setUniformMatrixValue(lv,na(this.Iu,this.Pu)),this.helper.bindBuffer(Z.coords),this.helper.bindBuffer(this.Du),this.helper.enableAttributes(gv);for(var U=0;U<Z.textures.length;++U){var X="TEXTURE"+U,Y=vv+U;O.activeTexture(O[X]),O.bindTexture(O.TEXTURE_2D,Z.textures[U]),O.uniform1i(this.helper.getUniformLocation(Y),U)}(L=F in a?a[F]:1)<1&&(t.animate=!0),this.helper.setUniformFloatValue(dv,L),this.helper.setUniformFloatValue(wv,I),this.helper.setUniformFloatValue(pv,A[0]),this.helper.setUniformFloatValue(yv,A[1]),this.helper.setUniformFloatValue(bv,n.resolution),this.helper.setUniformFloatValue(_v,n.zoom),this.helper.drawElements(0,this.Du.getSize())}}}this.helper.finalizeDraw(t);var W=this.helper.getCanvas(),B=i.opacity;this.Uu!==B&&(W.style.opacity=String(B),this.Uu=B);for(var q=this.zu;q.canExpireCache();){var Z;(Z=q.pop()).dispose()}return t.postRenderFunctions.push((function(t,n){s.expireCache(s.getProjection(),mv)})),this.postRender(t),W},n.prototype.Xu=function(t,n,i,r){var s=t.getTileRangeForTileCoordAndZ(n,i,this.Gu);if(!s)return!1;for(var o=!0,u=this.zu,e=s.minX;e<=s.maxX;++e)for(var h=s.minY;h<=s.maxY;++h){var f=Mf(i,e,h),c=!1;if(u.containsKey(f)){var a=u.get(f);a.loaded&&(Mv(r,a,i),c=!0)}c||(o=!1)}return o},n.prototype.disposeInternal=function(){var n=this.helper,i=n.getGL();n.deleteBuffer(this.Du),delete this.Du,i.deleteProgram(this.Fu),delete this.Fu;var r=this.zu;r.forEach((function(t){t.dispose()})),r.clear(),delete this.zu,t.prototype.disposeInternal.call(this)},n}(cv);xv.prototype.getLayer;var Sv=1,Ev=2,Tv=4,Av=8,Cv=16,Nv=31,kv=0,Pv={};function Iv(t){if("number"==typeof t)return Sv;if("boolean"==typeof t)return Av;if("string"==typeof t)return Ao(t)?Tv|Ev:Ev;if(!Array.isArray(t))throw new Error("Unhandled value type: "+JSON.stringify(t));var n=t;if(n.every((function(t){return"number"==typeof t})))return 3===n.length||4===n.length?Tv|Cv:Cv;if("string"!=typeof n[0])throw new Error("Expected an expression operator but received: "+JSON.stringify(n));var i=Pv[n[0]];if(void 0===i)throw new Error("Unrecognized expression operator: "+JSON.stringify(n));return i.getReturnType(n.slice(1))}function Gv(t){return si(t)%1==0}function Rv(t){var n=t.toString();return-1===n.indexOf(".")?n+".0":n}function Lv(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec"+t.length+"("+t.map(Rv).join(", ")+")"}function Fv(t){var n=So(t).slice();return n.length<4&&n.push(1),Lv(n.map((function(t,n){return n<3?t/255:t})))}function Dv(t,n){return void 0===t.stringLiteralsMap[n]&&(t.stringLiteralsMap[n]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[n]}function zv(t,n){return Rv(Dv(t,n))}function Uv(t,n,i){if(Array.isArray(n)&&"string"==typeof n[0]){var r=Pv[n[0]];if(void 0===r)throw new Error("Unrecognized expression operator: "+JSON.stringify(n));return r.toGlsl(t,n.slice(1),i)}var s=Iv(n);if((s&Sv)>0)return Rv(n);if((s&Av)>0)return n.toString();if((s&Ev)>0&&(void 0===i||i==Ev))return zv(t,n.toString());if((s&Tv)>0&&(void 0===i||i==Tv))return Fv(n);if((s&Cv)>0)return Lv(n);throw new Error("Unexpected expression "+n+" (expected type "+i+")")}function Xv(t){if(!(Iv(t)&Sv))throw new Error("A numeric value was expected, got "+JSON.stringify(t)+" instead")}function Yv(t){for(var n=0;n<t.length;n++)Xv(t[n])}function Wv(t){if(!(Iv(t)&Ev))throw new Error("A string value was expected, got "+JSON.stringify(t)+" instead")}function Bv(t){if(!(Iv(t)&Av))throw new Error("A boolean value was expected, got "+JSON.stringify(t)+" instead")}function qv(t,n){if(t.length!==n)throw new Error("Exactly "+n+" arguments were expected, got "+t.length+" instead")}function Zv(t,n){if(t.length<n)throw new Error("At least "+n+" arguments were expected, got "+t.length+" instead")}function Jv(t,n){if(t.length>n)throw new Error("At most "+n+" arguments were expected, got "+t.length+" instead")}function Vv(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got "+t+" instead")}function Hv(t,n){if(!Gv(n))throw new Error("Could not infer only one type from the following expression: "+JSON.stringify(t))}function $v(t){return"u_var_"+t}function Kv(t){return{getReturnType:function(t){return Av},toGlsl:function(n,i){qv(i,2);for(var r=Nv,s=0;s<i.length;s++)r&=Iv(i[s]);if(r===kv)throw new Error("All arguments should be of compatible type, got "+JSON.stringify(i)+" instead");return r&=~Tv,"("+Uv(n,i[0],r)+" "+t+" "+Uv(n,i[1],r)+")"}}}function Qv(t){return{getReturnType:function(t){return Av},toGlsl:function(n,i){Zv(i,2);for(var r=0;r<i.length;r++)Bv(i[r]);return"("+i.map((function(t){return Uv(n,t)})).join(" "+t+" ")+")"}}}Pv.get={getReturnType:function(t){return Nv},toGlsl:function(t,n){qv(n,1),Wv(n[0]);var i=n[0].toString();return-1===t.attributes.indexOf(i)&&t.attributes.push(i),(t.inFragmentShader?"v_":"a_")+i}},Pv.var={getReturnType:function(t){return Nv},toGlsl:function(t,n){qv(n,1),Wv(n[0]);var i=n[0].toString();return-1===t.variables.indexOf(i)&&t.variables.push(i),$v(i)}},Pv.band={getReturnType:function(t){return Sv},toGlsl:function(t,n){Zv(n,1),Jv(n,3);var i=n[0];if("number"!=typeof i)throw new Error("Band index must be a number");var r=i-1,s=Math.floor(r/4),o=r%4;if(i===t.bandCount&&1===o&&(o=3),1===n.length)return"color"+s+"["+o+"]";var u=n[1],e=n[2]||0;return Xv(u),Xv(e),"texture2D("+(vv+s)+", v_textureCoord + vec2("+Uv(t,u)+" / "+pv+", "+Uv(t,e)+" / "+yv+"))["+o+"]"}},Pv.time={getReturnType:function(t){return Sv},toGlsl:function(t,n){return qv(n,0),"u_time"}},Pv.zoom={getReturnType:function(t){return Sv},toGlsl:function(t,n){return qv(n,0),"u_zoom"}},Pv.resolution={getReturnType:function(t){return Sv},toGlsl:function(t,n){return qv(n,0),"u_resolution"}},Pv["*"]={getReturnType:function(t){return Sv},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" * "+Uv(t,n[1])+")"}},Pv["/"]={getReturnType:function(t){return Sv},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" / "+Uv(t,n[1])+")"}},Pv["+"]={getReturnType:function(t){return Sv},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" + "+Uv(t,n[1])+")"}},Pv["-"]={getReturnType:function(t){return Sv},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" - "+Uv(t,n[1])+")"}},Pv.clamp={getReturnType:function(t){return Sv},toGlsl:function(t,n){qv(n,3),Yv(n);var i=Uv(t,n[1]),r=Uv(t,n[2]);return"clamp("+Uv(t,n[0])+", "+i+", "+r+")"}},Pv["%"]={getReturnType:function(t){return Sv},toGlsl:function(t,n){return qv(n,2),Yv(n),"mod("+Uv(t,n[0])+", "+Uv(t,n[1])+")"}},Pv["^"]={getReturnType:function(t){return Sv},toGlsl:function(t,n){return qv(n,2),Yv(n),"pow("+Uv(t,n[0])+", "+Uv(t,n[1])+")"}},Pv.abs={getReturnType:function(t){return Sv},toGlsl:function(t,n){return qv(n,1),Yv(n),"abs("+Uv(t,n[0])+")"}},Pv.sin={getReturnType:function(t){return Sv},toGlsl:function(t,n){return qv(n,1),Yv(n),"sin("+Uv(t,n[0])+")"}},Pv.cos={getReturnType:function(t){return Sv},toGlsl:function(t,n){return qv(n,1),Yv(n),"cos("+Uv(t,n[0])+")"}},Pv.atan={getReturnType:function(t){return Sv},toGlsl:function(t,n){return Zv(n,1),Jv(n,2),Yv(n),2===n.length?"atan("+Uv(t,n[0])+", "+Uv(t,n[1])+")":"atan("+Uv(t,n[0])+")"}},Pv[">"]={getReturnType:function(t){return Av},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" > "+Uv(t,n[1])+")"}},Pv[">="]={getReturnType:function(t){return Av},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" >= "+Uv(t,n[1])+")"}},Pv["<"]={getReturnType:function(t){return Av},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" < "+Uv(t,n[1])+")"}},Pv["<="]={getReturnType:function(t){return Av},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" <= "+Uv(t,n[1])+")"}},Pv["=="]=Kv("=="),Pv["!="]=Kv("!="),Pv["!"]={getReturnType:function(t){return Av},toGlsl:function(t,n){return qv(n,1),Bv(n[0]),"(!"+Uv(t,n[0])+")"}},Pv.all=Qv("&&"),Pv.any=Qv("||"),Pv.between={getReturnType:function(t){return Av},toGlsl:function(t,n){qv(n,3),Yv(n);var i=Uv(t,n[1]),r=Uv(t,n[2]),s=Uv(t,n[0]);return"("+s+" >= "+i+" && "+s+" <= "+r+")"}},Pv.array={getReturnType:function(t){return Cv},toGlsl:function(t,n){Zv(n,2),Jv(n,4),Yv(n);var i=n.map((function(n){return Uv(t,n,Sv)}));return"vec"+n.length+"("+i.join(", ")+")"}},Pv.color={getReturnType:function(t){return Tv},toGlsl:function(t,n){Zv(n,3),Jv(n,4),Yv(n);var i=n;3===n.length&&i.push(1);var r=n.map((function(n,i){return Uv(t,n,Sv)+(i<3?" / 255.0":"")}));return"vec"+n.length+"("+r.join(", ")+")"}},Pv.interpolate={getReturnType:function(t){for(var n=Tv|Sv,i=3;i<t.length;i+=2)n&=Iv(t[i]);return n},toGlsl:function(t,n,i){Vv(n),Zv(n,6);var r,s=n[0];switch(s[0]){case"linear":r=1;break;case"exponential":r=s[1];break;default:r=null}if(!r)throw new Error('Invalid interpolation type for "interpolate" operator, received: '+JSON.stringify(s));var o=void 0!==i?i:Nv,u=Pv.interpolate.getReturnType(n)&o;Hv(n,u);for(var e=Uv(t,n[1]),h=Rv(r),f="",c=2;c<n.length-2;c+=2){var a=Uv(t,n[c]),v=f||Uv(t,n[c+1],u),l=Uv(t,n[c+2]);f="mix("+v+", "+Uv(t,n[c+3],u)+", pow(clamp(("+e+" - "+a+") / ("+l+" - "+a+"), 0.0, 1.0), "+h+"))"}return f}},Pv.match={getReturnType:function(t){for(var n=Nv,i=2;i<t.length;i+=2)n&=Iv(t[i]);return n&=Iv(t[t.length-1])},toGlsl:function(t,n,i){Vv(n),Zv(n,4);var r=void 0!==i?i:Nv,s=Pv.match.getReturnType(n)&r;Hv(n,s);for(var o=Uv(t,n[0]),u=Uv(t,n[n.length-1],s),e=null,h=n.length-3;h>=1;h-=2){e="("+o+" == "+Uv(t,n[h])+" ? "+Uv(t,n[h+1],s)+" : "+(e||u)+")"}return e}},Pv.case={getReturnType:function(t){for(var n=Nv,i=1;i<t.length;i+=2)n&=Iv(t[i]);return n&=Iv(t[t.length-1])},toGlsl:function(t,n,i){!function(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got "+t+" instead")}(n),Zv(n,3);var r=void 0!==i?i:Nv,s=Pv.case.getReturnType(n)&r;Hv(n,s);for(var o=0;o<n.length-1;o+=2)Bv(n[o]);var u=Uv(t,n[n.length-1],s),e=null;for(o=n.length-3;o>=0;o-=2){e="("+Uv(t,n[o])+" ? "+Uv(t,n[o+1],s)+" : "+(e||u)+")"}return e}};var tl=function(){function t(t){this.Yu,this.Wu,this.Bu,this.qu=void 0===t||t,this.Zu=0}return t.prototype.insertItem=function(t){var n={prev:void 0,next:void 0,data:t},i=this.Bu;if(i){var r=i.next;n.prev=i,n.next=r,i.next=n,r&&(r.prev=n),i===this.Wu&&(this.Wu=n)}else this.Yu=n,this.Wu=n,this.qu&&(n.next=n,n.prev=n);this.Bu=n,this.Zu++},t.prototype.removeItem=function(){var t=this.Bu;if(t){var n=t.next,i=t.prev;n&&(n.prev=i),i&&(i.next=n),this.Bu=n||i,this.Yu===this.Wu?(this.Bu=void 0,this.Yu=void 0,this.Wu=void 0):this.Yu===t?this.Yu=this.Bu:this.Wu===t&&(this.Wu=i?this.Bu.prev:this.Bu),this.Zu--}},t.prototype.firstItem=function(){if(this.Bu=this.Yu,this.Bu)return this.Bu.data},t.prototype.lastItem=function(){if(this.Bu=this.Wu,this.Bu)return this.Bu.data},t.prototype.nextItem=function(){if(this.Bu&&this.Bu.next)return this.Bu=this.Bu.next,this.Bu.data},t.prototype.getNextItem=function(){if(this.Bu&&this.Bu.next)return this.Bu.next.data},t.prototype.prevItem=function(){if(this.Bu&&this.Bu.prev)return this.Bu=this.Bu.prev,this.Bu.data},t.prototype.getPrevItem=function(){if(this.Bu&&this.Bu.prev)return this.Bu.prev.data},t.prototype.getCurrItem=function(){if(this.Bu)return this.Bu.data},t.prototype.setFirstItem=function(){this.qu&&this.Bu&&(this.Yu=this.Bu,this.Wu=this.Bu.prev)},t.prototype.concat=function(t){if(t.Bu){if(this.Bu){var n=this.Bu.next;this.Bu.next=t.Yu,t.Yu.prev=this.Bu,n.prev=t.Wu,t.Wu.next=n,this.Zu+=t.Zu}else this.Bu=t.Bu,this.Yu=t.Yu,this.Wu=t.Wu,this.Zu=t.Zu;t.Bu=void 0,t.Yu=void 0,t.Wu=void 0,t.Zu=0}},t.prototype.getLength=function(){return this.Zu},t}(),nl=i(72),il=function(){function t(t){this.Ju=new nl(t),this.Vu={}}return t.prototype.insert=function(t,n){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.Ju.insert(i),this.Vu[o(n)]=i},t.prototype.load=function(t,n){for(var i=new Array(n.length),r=0,s=n.length;r<s;r++){var u=t[r],e=n[r],h={minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:e};i[r]=h,this.Vu[o(e)]=h}this.Ju.load(i)},t.prototype.remove=function(t){var n=o(t),i=this.Vu[n];return delete this.Vu[n],null!==this.Ju.remove(i)},t.prototype.update=function(t,n){var i=this.Vu[o(n)];Tn([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(n),this.insert(t,n))},t.prototype.getAll=function(){return this.Ju.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.Ju.search(n).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.Hu(this.getAll(),t)},t.prototype.forEachInExtent=function(t,n){return this.Hu(this.getInExtent(t),n)},t.prototype.Hu=function(t,n){for(var i,r=0,s=t.length;r<s;r++)if(i=n(t[r]))return i;return i},t.prototype.isEmpty=function(){return A(this.Vu)},t.prototype.clear=function(){this.Ju.clear(),this.Vu={}},t.prototype.getExtent=function(t){var n=this.Ju.toJSON();return jn(n.minX,n.minY,n.maxX,n.maxY,t)},t.prototype.concat=function(t){for(var n in this.Ju.load(t.Ju.all()),t.Vu)this.Vu[n]=t.Vu[n]},t}(),rl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function sl(t){return t?Array.isArray(t)?function(n){return t}:"function"==typeof t?t:function(n){return[t]}:null}var ol=function(t){function n(n){var i=t.call(this)||this;i.projection=ur(n.projection),i.$u=sl(n.attributions),i.Ku=void 0===n.attributionsCollapsible||n.attributionsCollapsible,i.loading=!1,i.Lt=void 0!==n.state?n.state:Ko,i.Qu=void 0!==n.wrapX&&n.wrapX,i.viewResolver=null,i.viewRejector=null;var r=i;return i.te=new Promise((function(t,n){r.viewResolver=t,r.viewRejector=n})),i}return rl(n,t),n.prototype.getAttributions=function(){return this.$u},n.prototype.getAttributionsCollapsible=function(){return this.Ku},n.prototype.getProjection=function(){return this.projection},n.prototype.getResolutions=function(){return r()},n.prototype.getView=function(){return this.te},n.prototype.getState=function(){return this.Lt},n.prototype.getWrapX=function(){return this.Qu},n.prototype.getContextOptions=function(){},n.prototype.refresh=function(){this.changed()},n.prototype.setAttributions=function(t){this.$u=sl(t),this.changed()},n.prototype.setState=function(t){this.Lt=t,this.changed()},n}(nt),ul="addfeature",el="changefeature",hl="clear",fl="removefeature",cl="featuresloadstart",al="featuresloadend",vl="featuresloaderror",ll=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dl=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.feature=i,s.features=r,s}return ll(n,t),n}(a),wl=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{attributions:r.attributions,projection:void 0,state:Ko,wrapX:void 0===r.wrapX||r.wrapX})||this).on,i.once,i.un,i.S=j,i.ne=r.format,i.ie=void 0===r.overlaps||r.overlaps,i.re=r.url,void 0!==r.loader?i.S=r.loader:void 0!==i.re&&(mt(i.ne,7),i.S=Yf(i.re,i.ne)),i.se=void 0!==r.strategy?r.strategy:Wf;var s,o,u=void 0===r.useSpatialIndex||r.useSpatialIndex;return i.oe=u?new il:null,i.ue=new il,i.ee=0,i.he={},i.fe={},i.ce={},i.ae={},i.ve=null,Array.isArray(r.features)?o=r.features:r.features&&(o=(s=r.features).getArray()),u||void 0!==s||(s=new et(o)),void 0!==o&&i.addFeaturesInternal(o),void 0!==s&&i.le(s),i}return ll(n,t),n.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},n.prototype.addFeatureInternal=function(t){var n=o(t);if(this.de(n,t)){this.we(n,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.oe&&this.oe.insert(r,t)}else this.he[n]=t;this.dispatchEvent(new dl(ul,t))}else this.ve&&this.ve.remove(t)},n.prototype.we=function(t,n){this.ae[t]=[q(n,k,this.pe,this),q(n,v,this.pe,this)]},n.prototype.de=function(t,n){var i=!0,r=n.getId();return void 0!==r&&(r.toString()in this.fe?i=!1:this.fe[r.toString()]=n),i&&(mt(!(t in this.ce),30),this.ce[t]=n),i},n.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},n.prototype.addFeaturesInternal=function(t){for(var n=[],i=[],r=[],s=0,u=t.length;s<u;s++){var e=o(f=t[s]);this.de(e,f)&&i.push(f)}s=0;for(var h=i.length;s<h;s++){var f;e=o(f=i[s]);this.we(e,f);var c=f.getGeometry();if(c){var a=c.getExtent();n.push(a),r.push(f)}else this.he[e]=f}this.oe&&this.oe.load(n,r);s=0;for(var v=i.length;s<v;s++)this.dispatchEvent(new dl(ul,i[s]))},n.prototype.le=function(t){var n=!1;this.addEventListener(ul,(function(i){n||(n=!0,t.push(i.feature),n=!1)})),this.addEventListener(fl,(function(i){n||(n=!0,t.remove(i.feature),n=!1)})),t.addEventListener(it,function(t){n||(n=!0,this.addFeature(t.element),n=!1)}.bind(this)),t.addEventListener(rt,function(t){n||(n=!0,this.removeFeature(t.element),n=!1)}.bind(this)),this.ve=t},n.prototype.clear=function(t){if(t){for(var n in this.ae){this.ae[n].forEach(J)}this.ve||(this.ae={},this.fe={},this.ce={})}else if(this.oe)for(var i in this.oe.forEach(this.removeFeatureInternal.bind(this)),this.he)this.removeFeatureInternal(this.he[i]);this.ve&&this.ve.clear(),this.oe&&this.oe.clear(),this.he={};var r=new dl(hl);this.dispatchEvent(r),this.changed()},n.prototype.forEachFeature=function(t){if(this.oe)return this.oe.forEach(t);this.ve&&this.ve.forEach(t)},n.prototype.forEachFeatureAtCoordinateDirect=function(t,n){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){return i.getGeometry().intersectsCoordinate(t)?n(i):void 0}))},n.prototype.forEachFeatureInExtent=function(t,n){if(this.oe)return this.oe.forEachInExtent(t,n);this.ve&&this.ve.forEach(n)},n.prototype.forEachFeatureIntersectingExtent=function(t,n){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){var r=n(i);if(r)return r}}))},n.prototype.getFeaturesCollection=function(){return this.ve},n.prototype.getFeatures=function(){var t;return this.ve?t=this.ve.getArray().slice(0):this.oe&&(t=this.oe.getAll(),A(this.he)||_(t,T(this.he))),t},n.prototype.getFeaturesAtCoordinate=function(t){var n=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){n.push(t)})),n},n.prototype.getFeaturesInExtent=function(t){return this.oe?this.oe.getInExtent(t):this.ve?this.ve.getArray().slice(0):[]},n.prototype.getClosestFeatureToCoordinate=function(t,n){var i=t[0],r=t[1],s=null,o=[NaN,NaN],u=1/0,e=[-1/0,-1/0,1/0,1/0],h=n||O;return this.oe.forEachInExtent(e,(function(t){if(h(t)){var n=t.getGeometry(),f=u;if((u=n.closestPointXY(i,r,o,u))<f){s=t;var c=Math.sqrt(u);e[0]=i-c,e[1]=r-c,e[2]=i+c,e[3]=r+c}}})),s},n.prototype.getExtent=function(t){return this.oe.getExtent(t)},n.prototype.getFeatureById=function(t){var n=this.fe[t.toString()];return void 0!==n?n:null},n.prototype.getFeatureByUid=function(t){var n=this.ce[t];return void 0!==n?n:null},n.prototype.getFormat=function(){return this.ne},n.prototype.getOverlaps=function(){return this.ie},n.prototype.getUrl=function(){return this.re},n.prototype.pe=function(t){var n=t.target,i=o(n),r=n.getGeometry();if(r){var s=r.getExtent();i in this.he?(delete this.he[i],this.oe&&this.oe.insert(s,n)):this.oe&&this.oe.update(s,n)}else i in this.he||(this.oe&&this.oe.remove(n),this.he[i]=n);var u=n.getId();if(void 0!==u){var e=u.toString();this.fe[e]!==n&&(this.ye(n),this.fe[e]=n)}else this.ye(n),this.ce[i]=n;this.changed(),this.dispatchEvent(new dl(el,n))},n.prototype.hasFeature=function(t){var n=t.getId();return void 0!==n?n in this.fe:o(t)in this.ce},n.prototype.isEmpty=function(){return this.oe.isEmpty()&&A(this.he)},n.prototype.loadFeatures=function(t,n,i){for(var r=this.ue,s=this.se(t,n,i),o=function(t,o){var e=s[t];r.forEachInExtent(e,(function(t){return gn(t.extent,e)}))||(++u.ee,u.dispatchEvent(new dl(cl)),u.S.call(u,e,n,i,function(t){--this.ee,this.dispatchEvent(new dl(al,void 0,t))}.bind(u),function(){--this.ee,this.dispatchEvent(new dl(vl))}.bind(u)),r.insert(e,{extent:e.slice()}))},u=this,e=0,h=s.length;e<h;++e)o(e);this.loading=!(this.S.length<4)&&this.ee>0},n.prototype.refresh=function(){this.clear(!0),this.ue.clear(),t.prototype.refresh.call(this)},n.prototype.removeLoadedExtent=function(t){var n,i=this.ue;i.forEachInExtent(t,(function(i){if(Tn(i.extent,t))return n=i,!0})),n&&i.remove(n)},n.prototype.removeFeature=function(t){var n=o(t);n in this.he?delete this.he[n]:this.oe&&this.oe.remove(t),this.removeFeatureInternal(t),this.changed()},n.prototype.removeFeatureInternal=function(t){var n=o(t);this.ae[n].forEach(J),delete this.ae[n];var i=t.getId();void 0!==i&&delete this.fe[i.toString()],delete this.ce[n],this.dispatchEvent(new dl(fl,t))},n.prototype.ye=function(t){var n=!1;for(var i in this.fe)if(this.fe[i]===t){delete this.fe[i],n=!0;break}return n},n.prototype.setLoader=function(t){this.S=t},n.prototype.setUrl=function(t){mt(this.ne,7),this.re=t,this.setLoader(Yf(t,this.ne))},n}(ol),pl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yl=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,wrapX:n.wrapX})||this;return i.resolution=void 0,i.distance=void 0!==n.distance?n.distance:20,i.minDistance=n.minDistance||0,i.interpolationRatio=0,i.features=[],i.geometryFunction=n.geometryFunction||function(t){var n=t.getGeometry();return mt(n.getType()==At.POINT,10),n},i.be=n.createCluster,i.source=null,i._e=i.refresh.bind(i),i.updateDistance(i.distance,i.minDistance),i.setSource(n.source||null),i}return pl(n,t),n.prototype.clear=function(n){this.features.length=0,t.prototype.clear.call(this,n)},n.prototype.getDistance=function(){return this.distance},n.prototype.getSource=function(){return this.source},n.prototype.loadFeatures=function(t,n,i){this.source.loadFeatures(t,n,i),n!==this.resolution&&(this.resolution=n,this.refresh())},n.prototype.setDistance=function(t){this.updateDistance(t,this.minDistance)},n.prototype.setMinDistance=function(t){this.updateDistance(this.distance,t)},n.prototype.getMinDistance=function(){return this.minDistance},n.prototype.setSource=function(t){this.source&&this.source.removeEventListener(k,this._e),this.source=t,t&&t.addEventListener(k,this._e),this.refresh()},n.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},n.prototype.updateDistance=function(t,n){var i=0===t?0:Math.min(n,t)/t,r=t!==this.distance||this.interpolationRatio!==i;this.distance=t,this.minDistance=n,this.interpolationRatio=i,r&&this.refresh()},n.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],n=this.distance*this.resolution,i=this.source.getFeatures(),r={},s=0,u=i.length;s<u;s++){var e=i[s];if(!(o(e)in r)){var h=this.geometryFunction(e);if(h){Sn(h.getCoordinates(),t),pn(t,n,t);var f=this.source.getFeaturesInExtent(t).filter((function(t){var n=o(t);return!(n in r)&&(r[n]=!0,!0)}));this.features.push(this.createCluster(f,t))}}}},n.prototype.createCluster=function(t,n){for(var i=[0,0],r=t.length-1;r>=0;--r){var s=this.geometryFunction(t[r]);s?Xi(i,s.getCoordinates()):t.splice(r,1)}Vi(i,1/t.length);var o=zn(n),u=this.interpolationRatio,e=new ls([i[0]*(1-u)+o[0]*u,i[1]*(1-u)+o[1]*u]);return this.be?this.be(e,t):new jt({geometry:e,features:t})},n}(wl),bl="tileloadstart",_l="tileloadend",gl="tileloaderror",ml=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ol=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:n.projection,state:n.state,wrapX:n.wrapX})||this;i.on,i.once,i.un,i.ge=void 0!==n.opaque&&n.opaque,i.me=void 0!==n.tilePixelRatio?n.tilePixelRatio:1,i.tileGrid=void 0!==n.tileGrid?n.tileGrid:null;var r=n.tileGrid;return r&&Ue(r.getTileSize(r.getMinZoom()),[256,256]),i.tileCache=new Af(n.cacheSize||0),i.tmpSize=[0,0],i.hs=n.key||"",i.tileOptions={transition:n.transition},i.zDirection=n.zDirection?n.zDirection:0,i}return ml(n,t),n.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);i&&i.expireCache(n)},n.prototype.forEachLoadedTile=function(t,n,i,r){var s=this.getTileCacheForProjection(t);if(!s)return!1;for(var o,u,e,h=!0,f=i.minX;f<=i.maxX;++f)for(var c=i.minY;c<=i.maxY;++c)u=Mf(n,f,c),e=!1,s.containsKey(u)&&(e=(o=s.get(u)).getState()===ct)&&(e=!1!==r(o)),e||(h=!1);return h},n.prototype.getGutterForProjection=function(t){return 0},n.prototype.getKey=function(){return this.hs},n.prototype.setKey=function(t){this.hs!==t&&(this.hs=t,this.changed())},n.prototype.getOpaque=function(t){return this.ge},n.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},n.prototype.getTile=function(t,n,i,s,o){return r()},n.prototype.getTileGrid=function(){return this.tileGrid},n.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:gc(t)},n.prototype.getTileCacheForProjection=function(t){return mt(lr(this.getProjection(),t),68),this.tileCache},n.prototype.getTilePixelRatio=function(t){return this.me},n.prototype.getTilePixelSize=function(t,n,i){var r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(n),o=Ue(r.getTileSize(t),this.tmpSize);return 1==s?o:ze(o,s,this.tmpSize)},n.prototype.getTileCoordForTileUrlFunction=function(t,n){var i=void 0!==n?n:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=mc(r,t,i)),Ef(t,r)?t:null},n.prototype.clear=function(){this.tileCache.clear()},n.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},n.prototype.updateCacheSize=function(t,n){var i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)},n.prototype.useTile=function(t,n,i,r){},n}(ol),Ml=function(t){function n(n,i){var r=t.call(this,n)||this;return r.tile=i,r}return ml(n,t),n}(a),jl=Ol,xl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Sl=function(t){function n(n){var i=this,r=void 0===n.projection?"EPSG:3857":n.projection,s=n.tileGrid;return void 0===s&&r&&(s=Mc({extent:Sc(r),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize})),(i=t.call(this,{cacheSize:.1,projection:r,tileGrid:s,opaque:n.opaque,state:n.state,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition})||this).Oe={},i.S=n.loader,i.Di=i.Di.bind(i),i.bandCount=void 0===n.bandCount?4:n.bandCount,i}return xl(n,t),n.prototype.setLoader=function(t){this.S=t},n.prototype.getTile=function(t,n,i,r,s){var o=Mf(t,n,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var u=this.S;var e=new gt(S({tileCoord:[t,n,i],loader:function(){return u(t,n,i)}},this.tileOptions));return e.key=this.getKey(),e.addEventListener(k,this.Di),this.tileCache.set(o,e),e},n.prototype.Di=function(t){var n,i=t.target,r=o(i),s=i.getState();s==ft?(this.Oe[r]=!0,n=bl):r in this.Oe&&(delete this.Oe[r],n=s==at?gl:s==ct?_l:void 0),n&&this.dispatchEvent(new Ml(n,i))},n}(jl),El=!0,Tl=function(){function t(t,n,i,r,s,o){this.Me=t,this.je=n;var u={},e=wr(this.je,this.Me);this.xe=function(t){var n=t[0]+"/"+t[1];return u[n]||(u[n]=e(t)),u[n]},this.Se=r,this.Ee=s*s,this.Te=[],this.Ae=!1,this.Ce=this.Me.canWrapX()&&!!r&&!!this.Me.getExtent()&&Zn(r)==Zn(this.Me.getExtent()),this.Ne=this.Me.getExtent()?Zn(this.Me.getExtent()):null,this.ke=this.je.getExtent()?Zn(this.je.getExtent()):null;var h=Bn(i),f=qn(i),c=Dn(i),a=Fn(i),v=this.xe(h),l=this.xe(f),d=this.xe(c),w=this.xe(a),p=10+(o?Math.max(0,Math.ceil(si(Ln(i)/(o*o*256*256)))):0);if(this.Pe(h,f,c,a,v,l,d,w,p),this.Ae){var y=1/0;this.Te.forEach((function(t,n,i){y=Math.min(y,t.source[0][0],t.source[1][0],t.source[2][0])})),this.Te.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-y>this.Ne/2){var n=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];n[0][0]-y>this.Ne/2&&(n[0][0]-=this.Ne),n[1][0]-y>this.Ne/2&&(n[1][0]-=this.Ne),n[2][0]-y>this.Ne/2&&(n[2][0]-=this.Ne);var i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.Ne/2&&(t.source=n)}}.bind(this))}u={}}return t.prototype.Ie=function(t,n,i,r,s,o){this.Te.push({source:[r,s,o],target:[t,n,i]})},t.prototype.Pe=function(t,n,i,r,s,o,u,e,h){var f=wn([s,o,u,e]),c=this.Ne?Zn(f)/this.Ne:null,a=this.Ne,v=this.Me.canWrapX()&&c>.5&&c<1,l=!1;if(h>0){if(this.je.isGlobal()&&this.ke)l=Zn(wn([t,n,i,r]))/this.ke>.25||l;!v&&this.Me.isGlobal()&&c&&(l=c>.25||l)}if(!(!l&&this.Se&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3]))||Jn(f,this.Se)){var d=0;if(!(l||isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(e[0])&&isFinite(e[1])))if(h>0)l=!0;else if(1!=(d=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(u[0])&&isFinite(u[1])?0:2)+(isFinite(e[0])&&isFinite(e[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(h>0){if(!l){var w=[(t[0]+i[0])/2,(t[1]+i[1])/2],p=this.xe(w),y=void 0;if(v)y=(ci(s[0],a)+ci(u[0],a))/2-ci(p[0],a);else y=(s[0]+u[0])/2-p[0];var b=(s[1]+u[1])/2-p[1];l=y*y+b*b>this.Ee}if(l){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var _=[(n[0]+i[0])/2,(n[1]+i[1])/2],g=this.xe(_),m=[(r[0]+t[0])/2,(r[1]+t[1])/2],O=this.xe(m);this.Pe(t,n,_,m,s,o,g,O,h-1),this.Pe(m,_,i,r,O,g,u,e,h-1)}else{var M=[(t[0]+n[0])/2,(t[1]+n[1])/2],j=this.xe(M),x=[(i[0]+r[0])/2,(i[1]+r[1])/2],S=this.xe(x);this.Pe(t,M,x,r,s,j,S,e,h-1),this.Pe(M,n,i,x,j,o,u,S,h-1)}return}}if(v){if(!this.Ce)return;this.Ae=!0}0==(11&d)&&this.Ie(t,i,r,s,u,e),0==(14&d)&&this.Ie(t,i,n,s,u,o),d&&(0==(13&d)&&this.Ie(n,r,t,o,e,s),0==(7&d)&&this.Ie(n,r,i,o,e,u))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.Te.forEach((function(n,i,r){var s=n.source;Nn(t,s[0]),Nn(t,s[1]),Nn(t,s[2])})),t},t.prototype.getTriangles=function(){return this.Te},t}(),Al=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Cl=function(t){function n(n,i,r,s,o,u,e){var h=this,f=n.getExtent(),c=i.getExtent(),a=c?Wn(r,c):r,v=wc(n,i,zn(a),s),l=new Tl(n,i,a,f,.5*v,s),d=u(l.calculateSourceExtent(),v,o),w=d?to:so,p=d?d.getPixelRatio():1;return(h=t.call(this,r,s,p,w)||this).je=i,h.Se=f,h.Ge=l,h.Jn=s,h.Re=r,h.Le=d,h.Fe=p,h.De=e,h.Mt=null,h.ze=null,h}return Al(n,t),n.prototype.disposeInternal=function(){this.state==no&&this.Ue(),t.prototype.disposeInternal.call(this)},n.prototype.getImage=function(){return this.Mt},n.prototype.getProjection=function(){return this.je},n.prototype.Xe=function(){var t=this.Le.getState();if(t==io){var n=Zn(this.Re)/this.Jn,i=Yn(this.Re)/this.Jn;this.Mt=yc(n,i,this.Fe,this.Le.getResolution(),this.Se,this.Jn,this.Re,this.Ge,[{extent:this.Le.getExtent(),image:this.Le.getImage()}],0,void 0,this.De)}this.state=t,this.changed()},n.prototype.load=function(){if(this.state==to){this.state=no,this.changed();var t=this.Le.getState();t==io||t==ro?this.Xe():(this.ze=q(this.Le,k,(function(t){var n=this.Le.getState();n!=io&&n!=ro||(this.Ue(),this.Xe())}),this),this.Le.load())}},n.prototype.Ue=function(){J(this.ze),this.ze=null},n}(Qs),Nl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kl="imageloadstart",Pl="imageloadend",Il="imageloaderror",Gl=function(t){function n(n,i){var r=t.call(this,n)||this;return r.image=i,r}return Nl(n,t),n}(a);function Rl(t,n){t.getImage().src=n}var Ll=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,projection:n.projection,state:n.state})||this;return i.on,i.once,i.un,i.si=void 0!==n.resolutions?n.resolutions:null,i.Ye=null,i.We=0,i.De=!1===n.imageSmoothing?vc:void 0,i}return Nl(n,t),n.prototype.getResolutions=function(){return this.si},n.prototype.getContextOptions=function(){return this.De},n.prototype.findNearestResolution=function(t){if(this.si){var n=y(this.si,t,0);t=this.si[n]}return t},n.prototype.getImage=function(t,n,i,r){var s=this.getProjection();if(s&&r&&!lr(s,r)){if(this.Ye){if(this.We==this.getRevision()&&lr(this.Ye.getProjection(),r)&&this.Ye.getResolution()==n&&Tn(this.Ye.getExtent(),t))return this.Ye;this.Ye.dispose(),this.Ye=null}return this.Ye=new Cl(s,r,t,n,i,function(t,n,i){return this.getImageInternal(t,n,i,s)}.bind(this),this.De),this.We=this.getRevision(),this.Ye}return s&&(r=s),this.getImageInternal(t,n,i,r)},n.prototype.getImageInternal=function(t,n,i,s){return r()},n.prototype.handleImageChange=function(t){var n=t.target;switch(n.getState()){case no:this.loading=!0,this.dispatchEvent(new Gl(kl,n));break;case io:this.loading=!1,this.dispatchEvent(new Gl(Pl,n));break;case ro:this.loading=!1,this.dispatchEvent(new Gl(Il,n))}},n}(ol),Fl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Dl=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,{attributions:r.attributions,imageSmoothing:r.imageSmoothing,projection:r.projection,resolutions:r.resolutions,state:r.state})||this).Be=r.canvasFunction,i.Mt=null,i.qe=0,i.Ze=void 0!==r.ratio?r.ratio:1.5,i}return Fl(n,t),n.prototype.getImageInternal=function(t,n,i,r){n=this.findNearestResolution(n);var s=this.Mt;if(s&&this.qe==this.getRevision()&&s.getResolution()==n&&s.getPixelRatio()==i&&gn(s.getExtent(),t))return s;$n(t=t.slice(),this.Ze);var o=[Zn(t)/n*i,Yn(t)/n*i],u=this.Be.call(this,t,n,i,o,r);return u&&(s=new fo(t,n,i,u)),this.Mt=s,this.qe=this.getRevision(),s},n}(Ll),zl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var Ul=function(t){function n(n){var i=t.call(this,{imageSmoothing:n.imageSmoothing,projection:n.projection,resolutions:n.resolutions})||this;return i.xt=void 0!==n.crossOrigin?n.crossOrigin:null,i.Je=void 0!==n.displayDpi?n.displayDpi:96,i.Ve=n.params||{},i.re=n.url,i.bt=void 0!==n.imageLoadFunction?n.imageLoadFunction:Rl,i.He=void 0===n.hidpi||n.hidpi,i.H=void 0!==n.metersPerUnit?n.metersPerUnit:1,i.Ze=void 0!==n.ratio?n.ratio:1,i.$e=void 0!==n.useOverlay&&n.useOverlay,i.wt=null,i.qe=0,i}return zl(n,t),n.prototype.getParams=function(){return this.Ve},n.prototype.getImageInternal=function(t,n,i,r){n=this.findNearestResolution(n),i=this.He?i:1;var s=this.wt;if(s&&this.qe==this.getRevision()&&s.getResolution()==n&&s.getPixelRatio()==i&&gn(s.getExtent(),t))return s;1!=this.Ze&&$n(t=t.slice(),this.Ze);var o=[Zn(t)/n*i,Yn(t)/n*i];if(void 0!==this.re){var u=this.getUrl(this.re,this.Ve,t,o,r);(s=new eo(t,n,i,u,this.xt,this.bt)).addEventListener(k,this.handleImageChange.bind(this))}else s=null;return this.wt=s,this.qe=this.getRevision(),s},n.prototype.getImageLoadFunction=function(){return this.bt},n.prototype.updateParams=function(t){S(this.Ve,t),this.changed()},n.prototype.getUrl=function(t,n,i,r,s){var o=function(t,n,i,r){var s=Zn(t),o=Yn(t),u=n[0],e=n[1],h=.0254/r;return e*s>u*o?s*i/(u*h):o*i/(e*h)}(i,r,this.H,this.Je),u=zn(i),e={OPERATION:this.$e?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.Je,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:o,SETVIEWCENTERX:u[0],SETVIEWCENTERY:u[1]};return S(e,n),Nc(t,e)},n.prototype.setImageLoadFunction=function(t){this.wt=null,this.bt=t,this.changed()},n}(Ll),Xl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yl=function(t){function n(n){var i=this,r=void 0!==n.crossOrigin?n.crossOrigin:null,s=void 0!==n.imageLoadFunction?n.imageLoadFunction:Rl;return(i=t.call(this,{attributions:n.attributions,imageSmoothing:n.imageSmoothing,projection:ur(n.projection)})||this).re=n.url,i.Ke=n.imageExtent,i.wt=new eo(i.Ke,void 0,1,i.re,r,s),i.Qe=n.imageSize?n.imageSize:null,i.wt.addEventListener(k,i.handleImageChange.bind(i)),i}return Xl(n,t),n.prototype.getImageExtent=function(){return this.Ke},n.prototype.getImageInternal=function(t,n,i,r){return Jn(t,this.wt.getExtent())?this.wt:null},n.prototype.getUrl=function(){return this.re},n.prototype.handleImageChange=function(n){if(this.wt.getState()==io){var i=this.wt.getExtent(),r=this.wt.getImage(),s=void 0,o=void 0;this.Qe?(s=this.Qe[0],o=this.Qe[1]):(s=r.width,o=r.height);var u=Zn(i),e=Yn(i),h=u/s,f=e/o,c=s,a=o;if(h>f?c=Math.round(u/f):a=Math.round(e/h),c!==s||a!==o){var v=co(c,a);S(v,this.getContextOptions());var l=v.canvas;v.drawImage(r,0,0,s,o,0,0,l.width,l.height),this.wt.setImage(l)}}t.prototype.handleImageChange.call(this,n)},n}(Ll),Wl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bl=function(t){function n(n,i,r,s,o,u,e,h,f,c,a,v){var l=t.call(this,o,ht)||this;l.th=void 0!==a&&a,l.De=v,l.lt=e,l.nh=h,l.Mt=null,l.ih=i,l.rh=s,l.sh=u||o,l.oh=[],l.uh=null,l.eh=0;var d=s.getTileCoordExtent(l.sh),w=l.rh.getExtent(),p=l.ih.getExtent(),y=w?Wn(d,w):d;if(0===Ln(y))return l.state=vt,l;var b=n.getExtent();b&&(p=p?Wn(p,b):b);var _=s.getResolution(l.sh[0]),g=pc(n,r,y,_);if(!isFinite(g)||g<=0)return l.state=vt,l;var m=void 0!==c?c:.5;if(l.Ge=new Tl(n,r,y,p,g*m,_),0===l.Ge.getTriangles().length)return l.state=vt,l;l.eh=i.getZForResolution(g);var O=l.Ge.calculateSourceExtent();if(p&&(n.canWrapX()?(O[1]=ii(O[1],p[1],p[3]),O[3]=ii(O[3],p[1],p[3])):O=Wn(O,p)),Ln(O)){for(var M=i.getTileRangeForExtentAndZ(O,l.eh),j=M.minX;j<=M.maxX;j++)for(var x=M.minY;x<=M.maxY;x++){var S=f(l.eh,j,x,e);S&&l.oh.push(S)}0===l.oh.length&&(l.state=vt)}else l.state=vt;return l}return Wl(n,t),n.prototype.getImage=function(){return this.Mt},n.prototype.Xe=function(){var t=[];if(this.oh.forEach(function(n,i,r){n&&n.getState()==ct&&t.push({extent:this.ih.getTileCoordExtent(n.tileCoord),image:n.getImage()})}.bind(this)),this.oh.length=0,0===t.length)this.state=at;else{var n=this.sh[0],i=this.rh.getTileSize(n),r="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],o=this.rh.getResolution(n),u=this.ih.getResolution(this.eh),e=this.rh.getTileCoordExtent(this.sh);this.Mt=yc(r,s,this.lt,u,this.ih.getExtent(),o,e,this.Ge,t,this.nh,this.th,this.De),this.state=ct}this.changed()},n.prototype.load=function(){if(this.state==ht){this.state=ft,this.changed();var t=0;this.uh=[],this.oh.forEach(function(n,i,r){var s=n.getState();if(s==ht||s==ft){t++;var o=q(n,k,(function(i){var r=n.getState();r!=ct&&r!=at&&r!=vt||(J(o),0===--t&&(this.hh(),this.Xe()))}),this);this.uh.push(o)}}.bind(this)),0===t?setTimeout(this.Xe.bind(this),0):this.oh.forEach((function(t,n,i){t.getState()==ht&&t.load()}))}},n.prototype.hh=function(){this.uh.forEach(J),this.uh=null},n}(bt),ql=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Zl=function(t){function n(i){var r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this;return r.fh=r.tileUrlFunction===n.prototype.tileUrlFunction,r.tileLoadFunction=i.tileLoadFunction,i.tileUrlFunction&&(r.tileUrlFunction=i.tileUrlFunction),r.urls=null,i.urls?r.setUrls(i.urls):i.url&&r.setUrl(i.url),r.Oe={},r}return ql(n,t),n.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},n.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},n.prototype.getUrls=function(){return this.urls},n.prototype.handleTileChange=function(t){var n,i=t.target,r=o(i),s=i.getState();s==ft?(this.Oe[r]=!0,n=bl):r in this.Oe&&(delete this.Oe[r],n=s==at?gl:s==ct?_l:void 0),null!=n&&this.dispatchEvent(new Ml(n,i))},n.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},n.prototype.setTileUrlFunction=function(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==n?this.setKey(n):this.changed()},n.prototype.setUrl=function(t){var n=Cc(t);this.urls=n,this.setUrls(n)},n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.fh?this.setTileUrlFunction(Tc(t,this.tileGrid),n):this.setKey(n)},n.prototype.tileUrlFunction=function(t,n,i){},n.prototype.useTile=function(t,n,i){var r=Mf(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},n}(jl),Jl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Vl(t,n){t.getImage().src=n}var Hl=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:Vl,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX,transition:n.transition,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this;return i.crossOrigin=void 0!==n.crossOrigin?n.crossOrigin:null,i.tileClass=void 0!==n.tileClass?n.tileClass:_o,i.tileCacheForProjection={},i.tileGridForProjection={},i.ah=n.reprojectionErrorThreshold,i.De=!1===n.imageSmoothing?vc:void 0,i.lh=!1,i}return Jl(n,t),n.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==i?n:{}),this.tileCacheForProjection){var s=this.tileCacheForProjection[r];s.expireCache(s==i?n:{})}},n.prototype.getContextOptions=function(){return this.De},n.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!lr(this.getProjection(),t)?0:this.getGutter()},n.prototype.getGutter=function(){return 0},n.prototype.getKey=function(){return t.prototype.getKey.call(this)+(this.De?"\n"+JSON.stringify(this.De):"")},n.prototype.getOpaque=function(n){return!(this.getProjection()&&n&&!lr(this.getProjection(),n))&&t.prototype.getOpaque.call(this,n)},n.prototype.getTileGridForProjection=function(t){var n=this.getProjection();if(!this.tileGrid||n&&!lr(n,t)){var i=o(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=gc(t)),this.tileGridForProjection[i]}return this.tileGrid},n.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();if(!n||lr(n,t))return this.tileCache;var i=o(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Af(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},n.prototype.dh=function(t,n,i,r,s,o){var u=[t,n,i],e=this.getTileCoordForTileUrlFunction(u,s),h=e?this.tileUrlFunction(e,r,s):void 0,f=new this.tileClass(u,void 0!==h?ht:vt,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=o,f.addEventListener(k,this.handleTileChange.bind(this)),f},n.prototype.getTile=function(t,n,i,r,s){var o=this.getProjection();if(o&&s&&!lr(o,s)){var u=this.getTileCacheForProjection(s),e=[t,n,i],h=void 0,f=jf(e);u.containsKey(f)&&(h=u.get(f));var c=this.getKey();if(h&&h.key==c)return h;var a=this.getTileGridForProjection(o),v=this.getTileGridForProjection(s),l=this.getTileCoordForTileUrlFunction(e,s),d=new Bl(o,a,s,v,e,l,this.getTilePixelRatio(r),this.getGutter(),function(t,n,i,r){return this.getTileInternal(t,n,i,r,o)}.bind(this),this.ah,this.lh,this.De);return d.key=c,h?(d.interimTile=h,d.refreshInterimChain(),u.replace(f,d)):u.set(f,d),d}return this.getTileInternal(t,n,i,r,o||s)},n.prototype.getTileInternal=function(t,n,i,r,s){var o=null,u=Mf(t,n,i),e=this.getKey();if(this.tileCache.containsKey(u)){if((o=this.tileCache.get(u)).key!=e){var h=o;o=this.dh(t,n,i,r,s,e),h.getState()==ht?o.interimTile=h.interimTile:o.interimTile=h,o.refreshInterimChain(),this.tileCache.replace(u,o)}}else o=this.dh(t,n,i,r,s,e),this.tileCache.set(u,o);return o},n.prototype.setRenderReprojectionEdges=function(t){if(this.lh!=t){for(var n in this.lh=t,this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},n.prototype.setTileGridForProjection=function(t,n){var i=ur(t);if(i){var r=o(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}},n}(Zl),$l=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Kl=function(t){function n(n){var i=n||{},r=void 0!==i.projection?i.projection:"EPSG:3857",s=void 0!==i.tileGrid?i.tileGrid:Mc({extent:Sc(r),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,imageSmoothing:i.imageSmoothing,opaque:i.opaque,projection:r,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:s,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this}return $l(n,t),n}(Hl),Ql=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),td='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',nd=function(t){function n(n){var i,r=n||{};i=void 0!==r.attributions?r.attributions:[td];var s=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",o=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:i,attributionsCollapsible:!1,cacheSize:r.cacheSize,crossOrigin:s,imageSmoothing:r.imageSmoothing,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,opaque:void 0===r.opaque||r.opaque,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,transition:r.transition,url:o,wrapX:r.wrapX,zDirection:r.zDirection})||this}return Ql(n,t),n}(Kl),id=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rd=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection,url:r.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,n){var r=t.getTileCoord()[0],s=Ue(i.tileGrid.getTileSize(r)),o=co(s[0],s[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,s[0]+.5,s[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(n,s[0]/2,s[1]/2,s[0]),o.fillText(n,s[0]/2,s[1]/2,s[0]),t.setImage(o.canvas)}})||this}return id(n,t),n}(Kl),sd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),od=function(t){function n(n){var i=t.call(this,n)||this;return i.container=null,i.renderedResolution,i.tempTransform=[1,0,0,1,0,0],i.pixelTransform=[1,0,0,1,0,0],i.inversePixelTransform=[1,0,0,1,0,0],i.context=null,i.containerReused=!1,i}return sd(n,t),n.prototype.useContainer=function(t,n,i){var r,s,o=this.getLayer().getClassName();t&&t.style.opacity===pu(i)&&t.className===o&&((e=t.firstElementChild)instanceof HTMLCanvasElement&&(s=e.getContext("2d")));if(s&&s.canvas.style.transform===n?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(r=document.createElement("div")).className=o;var u=r.style;u.position="absolute",u.width="100%",u.height="100%";var e=(s=co()).canvas;r.appendChild(e),(u=e.style).position="absolute",u.left="0",u.transformOrigin="top left",this.container=r,this.context=s}},n.prototype.clipUnrotated=function(t,n,i){var r=Bn(i),s=qn(i),o=Dn(i),u=Fn(i);Ht(n.coordinateToPixelTransform,r),Ht(n.coordinateToPixelTransform,s),Ht(n.coordinateToPixelTransform,o),Ht(n.coordinateToPixelTransform,u);var e=this.inversePixelTransform;Ht(e,r),Ht(e,s),Ht(e,o),Ht(e,u),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(u[0]),Math.round(u[1])),t.clip()},n.prototype.ku=function(t,n,i){var r=this.getLayer();if(r.hasListener(t)){var s=new uu(t,this.inversePixelTransform,i,n);r.dispatchEvent(s)}},n.prototype.preRender=function(t,n){this.ku(qo,t,n)},n.prototype.postRender=function(t,n){this.ku(Zo,t,n)},n.prototype.getRenderTransform=function(t,n,i,r,s,o,u){var e=s/2,h=o/2,f=r/n,c=-f,a=-t[0]+u,v=-t[1];return tn(this.tempTransform,e,h,f,c,-i,a,v)},n.prototype.getDataAtPixel=function(t,n,i){var r,s=Ht(this.inversePixelTransform,t.slice()),o=this.context,u=this.getLayer().getExtent();if(u&&!_n(u,Ht(n.pixelToCoordinateTransform,t.slice())))return null;try{var e=Math.round(s[0]),h=Math.round(s[1]),f=document.createElement("canvas"),c=f.getContext("2d");f.width=1,f.height=1,c.clearRect(0,0,1,1),c.drawImage(o.canvas,e,h,1,1,0,0,1,1),r=c.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:r}return 0===r[3]?null:r},n}(Za),ud=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ed=function(t){function n(n){var i=t.call(this,n)||this;return i.wt=null,i}return ud(n,t),n.prototype.getImage=function(){return this.wt?this.wt.getImage():null},n.prototype.prepareFrame=function(t){var n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,r=t.viewState,s=r.resolution,o=this.getLayer().getSource(),u=t.viewHints,e=t.extent;if(void 0!==n.extent&&(e=Wn(e,jr(n.extent,r.projection))),!u[de]&&!u[we]&&!Vn(e))if(o){var h=r.projection,f=o.getImage(e,s,i,h);f&&this.loadImage(f)&&(this.wt=f)}else this.wt=null;return!!this.wt},n.prototype.renderFrame=function(t,n){var i=this.wt,r=i.getExtent(),s=i.getResolution(),o=i.getPixelRatio(),u=t.layerStatesArray[t.layerIndex],e=t.pixelRatio,h=t.viewState,f=h.center,c=h.resolution,a=t.size,v=e*s/(c*o),l=Math.round(a[0]*e),d=Math.round(a[1]*e),w=h.rotation;if(w){var p=Math.round(Math.sqrt(l*l+d*d));l=p,d=p}tn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/e,1/e,w,-l/2,-d/2),nn(this.inversePixelTransform,this.pixelTransform);var y=sn(this.pixelTransform);this.useContainer(n,y,u.opacity);var b=this.context,_=b.canvas;_.width!=l||_.height!=d?(_.width=l,_.height=d):this.containerReused||b.clearRect(0,0,l,d);var g=!1,m=!0;if(u.extent){var O=jr(u.extent,h.projection);(g=(m=Jn(O,t.extent))&&!gn(O,t.extent))&&this.clipUnrotated(b,t,O)}var M=i.getImage(),j=tn(this.tempTransform,l/2,d/2,v,v,0,o*(r[0]-f[0])/s,o*(f[1]-r[3])/s);this.renderedResolution=s*e/o;var x=M.width*j[0],E=M.height*j[3];if(S(b,this.getLayer().getSource().getContextOptions()),this.preRender(b,t),m&&x>=.5&&E>=.5){var T=j[4],A=j[5],C=u.opacity,N=void 0;1!==C&&(N=b.globalAlpha,b.globalAlpha=C),b.drawImage(M,0,0,+M.width,+M.height,Math.round(T),Math.round(A),Math.round(x),Math.round(E)),1!==C&&(b.globalAlpha=N)}return this.postRender(b,t),g&&b.restore(),y!==_.style.transform&&(_.style.transform=y),this.container},n}(od),hd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fd=function(t){function n(n){var i=t.call(this,n)||this;return i.extentChanged=!0,i.wh=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.ph=!1,i.tmpExtent=[1/0,1/0,-1/0,-1/0],i.yh=new kf(0,0,0,0),i}return hd(n,t),n.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==ct||i==vt||i==at&&!r},n.prototype.getTile=function(t,n,i,r){var s=r.pixelRatio,o=r.viewState.projection,u=this.getLayer(),e=u.getSource().getTile(t,n,i,s,o);return e.getState()==at&&(u.getUseInterimTilesOnError()?u.getPreload()>0&&(this.ph=!0):e.setState(ct)),this.isDrawableTile(e)||(e=e.getInterimTile()),e},n.prototype.loadedTileCallback=function(n,i,r){return!!this.isDrawableTile(r)&&t.prototype.loadedTileCallback.call(this,n,i,r)},n.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},n.prototype.renderFrame=function(t,n){var i=t.layerStatesArray[t.layerIndex],r=t.viewState,s=r.projection,u=r.resolution,e=r.center,h=r.rotation,f=t.pixelRatio,c=this.getLayer(),a=c.getSource(),v=a.getRevision(),l=a.getTileGridForProjection(s),d=l.getZForResolution(u,a.zDirection),p=l.getResolution(d),y=t.extent,b=i.extent&&jr(i.extent,s);b&&(y=Wn(y,jr(i.extent,s)));var _=a.getTilePixelRatio(f),g=Math.round(t.size[0]*_),m=Math.round(t.size[1]*_);if(h){var O=Math.round(Math.sqrt(g*g+m*m));g=O,m=O}var M=p*g/2/_,j=p*m/2/_,x=[e[0]-M,e[1]-j,e[0]+M,e[1]+j],E=l.getTileRangeForExtentAndZ(y,d),T={};T[d]={};var A=this.createLoadedTileFinder(a,s,T),C=this.tmpExtent,N=this.yh;this.ph=!1;for(var k=E.minX;k<=E.maxX;++k)for(var P=E.minY;P<=E.maxY;++P){var I=this.getTile(d,k,P,t);if(this.isDrawableTile(I)){var G=o(this);if(I.getState()==ct){T[d][I.tileCoord.toString()]=I;var R=I.inTransition(G);this.ph||!R&&-1!==this.renderedTiles.indexOf(I)||(this.ph=!0)}if(1===I.getAlpha(G,t.time))continue}var L=l.getTileCoordChildTileRange(I.tileCoord,N,C),F=!1;L&&(F=A(d+1,L)),F||l.forEachTileCoordParentTileRange(I.tileCoord,A,N,C)}var D=p/u;tn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/_,1/_,h,-g/2,-m/2);var z=sn(this.pixelTransform);this.useContainer(n,z,i.opacity);var U=this.context,X=U.canvas;nn(this.inversePixelTransform,this.pixelTransform),tn(this.tempTransform,g/2,m/2,D,D,0,-g/2,-m/2),X.width!=g||X.height!=m?(X.width=g,X.height=m):this.containerReused||U.clearRect(0,0,g,m),b&&this.clipUnrotated(U,t,b),S(U,a.getContextOptions()),this.preRender(U,t),this.renderedTiles.length=0;var Y,W,B,q=Object.keys(T).map(Number);q.sort(w),1!==i.opacity||this.containerReused&&!a.getOpaque(t.viewState.projection)?(Y=[],W=[]):q=q.reverse();for(var Z=q.length-1;Z>=0;--Z){var J=q[Z],V=a.getTilePixelSize(J,f,s),H=l.getResolution(J)/p,$=V[0]*H*D,K=V[1]*H*D,Q=l.getTileCoordForCoordAndZ(Bn(x),J),tt=l.getTileCoordExtent(Q),nt=Ht(this.tempTransform,[_*(tt[0]-x[0])/p,_*(x[3]-tt[3])/p]),it=_*a.getGutterForProjection(s),rt=T[J];for(var st in rt){var ot=(I=rt[st]).tileCoord,ut=Q[1]-ot[1],et=Math.round(nt[0]-(ut-1)*$),ht=Q[2]-ot[2],ft=Math.round(nt[1]-(ht-1)*K),at=et-(k=Math.round(nt[0]-ut*$)),vt=ft-(P=Math.round(nt[1]-ht*K)),lt=d===J;if(!(R=lt&&1!==I.getAlpha(o(this),t.time)))if(Y){U.save(),B=[k,P,k+at,P,k+at,P+vt,k,P+vt];for(var dt=0,wt=Y.length;dt<wt;++dt)if(d!==J&&J<W[dt]){var pt=Y[dt];U.beginPath(),U.moveTo(B[0],B[1]),U.lineTo(B[2],B[3]),U.lineTo(B[4],B[5]),U.lineTo(B[6],B[7]),U.moveTo(pt[6],pt[7]),U.lineTo(pt[4],pt[5]),U.lineTo(pt[2],pt[3]),U.lineTo(pt[0],pt[1]),U.clip()}Y.push(B),W.push(J)}else U.clearRect(k,P,at,vt);this.drawTileImage(I,t,k,P,at,vt,it,lt),Y&&!R?(U.restore(),this.renderedTiles.unshift(I)):this.renderedTiles.push(I),this.updateUsedTiles(t.usedTiles,a,I)}}this.renderedRevision=v,this.renderedResolution=p,this.extentChanged=!this.wh||!Tn(this.wh,x),this.wh=x,this.renderedPixelRatio=f,this.renderedProjection=s,this.manageTilePyramid(t,a,l,f,s,y,d,c.getPreload()),this.scheduleExpireCache(t,a),this.postRender(U,t),i.extent&&U.restore(),z!==X.style.transform&&(X.style.transform=z);var yt=pu(i.opacity),bt=this.container;return yt!==bt.style.opacity&&(bt.style.opacity=yt),this.container},n.prototype.drawTileImage=function(t,n,i,r,s,u,e,h){var f=this.getTileImage(t);if(f){var c=o(this),a=h?t.getAlpha(c,n.time):1,v=a!==this.context.globalAlpha;v&&(this.context.save(),this.context.globalAlpha=a),this.context.drawImage(f,e,e,f.width-2*e,f.height-2*e,i,r,s,u),v&&this.context.restore(),1!==a?n.animate=!0:h&&t.endTransition(c)}},n.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},n.prototype.getTileImage=function(t){return t.getImage()},n.prototype.scheduleExpireCache=function(t,n){if(n.canExpireCache()){var i=function(t,n,i){var r=o(t);r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}.bind(null,n);t.postRenderFunctions.push(i)}},n.prototype.updateUsedTiles=function(t,n,i){var r=o(n);r in t||(t[r]={}),t[r][i.getKey()]=!0},n.prototype.manageTilePyramid=function(t,n,i,r,s,u,e,h,f){var c=o(n);c in t.wantedTiles||(t.wantedTiles[c]={});var a,v,l,d,w,p,y=t.wantedTiles[c],b=t.tileQueue,_=0;for(p=i.getMinZoom();p<=e;++p)for(v=i.getTileRangeForExtentAndZ(u,p,v),l=i.getResolution(p),d=v.minX;d<=v.maxX;++d)for(w=v.minY;w<=v.maxY;++w)e-p<=h?(++_,(a=n.getTile(p,d,w,r,s)).getState()==ht&&(y[a.getKey()]=!0,b.isKeyQueued(a.getKey())||b.enqueue([a,c,i.getTileCoordCenter(a.tileCoord),l])),void 0!==f&&f(a)):n.useTile(p,d,w,s);n.updateCacheSize(_,s)},n}(od);fd.prototype.getLayer;var cd=fd,ad={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},vd=[ad.FILL],ld=[ad.STROKE],dd=[ad.BEGIN_PATH],wd=[ad.CLOSE_PATH],pd=ad,yd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bd=function(t){function n(n,i,r,s){var o=t.call(this)||this;return o.tolerance=n,o.maxExtent=i,o.pixelRatio=s,o.maxLineWidth=0,o.resolution=r,o.bh=null,o._h=null,o.gh=null,o.instructions=[],o.coordinates=[],o.mh=[],o.hitDetectionInstructions=[],o.state={},o}return yd(n,t),n.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return 1==n?t:t.map((function(t){return t*n}))},n.prototype.appendFlatPointCoordinates=function(t,n){for(var i=this.getBufferedMaxExtent(),r=this.mh,s=this.coordinates,o=s.length,u=0,e=t.length;u<e;u+=n)r[0]=t[u],r[1]=t[u+1],_n(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o},n.prototype.appendFlatLineCoordinates=function(t,n,i,r,s,o){var u=this.coordinates,e=u.length,h=this.getBufferedMaxExtent();o&&(n+=r);var f,c,a,v=t[n],l=t[n+1],d=this.mh,w=!0;for(f=n+r;f<i;f+=r)d[0]=t[f],d[1]=t[f+1],(a=On(h,d))!==c?(w&&(u[e++]=v,u[e++]=l,w=!1),u[e++]=d[0],u[e++]=d[1]):a===cn?(u[e++]=d[0],u[e++]=d[1],w=!1):w=!0,v=d[0],l=d[1],c=a;return(s&&w||f===n+r)&&(u[e++]=v,u[e++]=l),e},n.prototype.Oh=function(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o],h=this.appendFlatLineCoordinates(t,n,e,r,!1,!1);s.push(h),n=e}return n},n.prototype.drawCustom=function(t,n,i,r){this.beginGeometry(t,n);var s,o,u,e,h,f=t.getType(),c=t.getStride(),a=this.coordinates.length;switch(f){case At.MULTI_POLYGON:s=t.getOrientedFlatCoordinates(),e=[];var v=t.getEndss();h=0;for(var l=0,d=v.length;l<d;++l){var w=[];h=this.Oh(s,h,v[l],c,w),e.push(w)}this.instructions.push([pd.CUSTOM,a,e,t,i,us]),this.hitDetectionInstructions.push([pd.CUSTOM,a,e,t,r||i,us]);break;case At.POLYGON:case At.MULTI_LINE_STRING:u=[],s=f==At.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.Oh(s,0,t.getEnds(),c,u),this.instructions.push([pd.CUSTOM,a,u,t,i,os]),this.hitDetectionInstructions.push([pd.CUSTOM,a,u,t,r||i,os]);break;case At.LINE_STRING:case At.CIRCLE:s=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(s,0,s.length,c,!1,!1),this.instructions.push([pd.CUSTOM,a,o,t,i,ss]),this.hitDetectionInstructions.push([pd.CUSTOM,a,o,t,r||i,ss]);break;case At.MULTI_POINT:s=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(s,c))>a&&(this.instructions.push([pd.CUSTOM,a,o,t,i,ss]),this.hitDetectionInstructions.push([pd.CUSTOM,a,o,t,r||i,ss]));break;case At.POINT:s=t.getFlatCoordinates(),this.coordinates.push(s[0],s[1]),o=this.coordinates.length,this.instructions.push([pd.CUSTOM,a,o,t,i]),this.hitDetectionInstructions.push([pd.CUSTOM,a,o,t,r||i])}this.endGeometry(n)},n.prototype.beginGeometry=function(t,n){this.bh=[pd.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.bh),this._h=[pd.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this._h)},n.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},n.prototype.reverseHitDetectionInstructions=function(){var t,n=this.hitDetectionInstructions;n.reverse();var i,r,s=n.length,o=-1;for(t=0;t<s;++t)(r=(i=n[t])[0])==pd.END_GEOMETRY?o=t:r==pd.BEGIN_GEOMETRY&&(i[2]=t,b(this.hitDetectionInstructions,o,t),o=-1)},n.prototype.setFillStrokeStyle=function(t,n){var i=this.state;if(t){var r=t.getColor();i.fillStyle=Rf(r||bu)}else i.fillStyle=void 0;if(n){var s=n.getColor();i.strokeStyle=Rf(s||Mu);var o=n.getLineCap();i.lineCap=void 0!==o?o:_u;var u=n.getLineDash();i.lineDash=u?u.slice():gu;var e=n.getLineDashOffset();i.lineDashOffset=e||0;var h=n.getLineJoin();i.lineJoin=void 0!==h?h:mu;var f=n.getWidth();i.lineWidth=void 0!==f?f:1;var c=n.getMiterLimit();i.miterLimit=void 0!==c?c:Ou,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.gh=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},n.prototype.createFill=function(t){var n=t.fillStyle,i=[pd.SET_FILL_STYLE,n];return"string"!=typeof n&&i.push(!0),i},n.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},n.prototype.createStroke=function(t){return[pd.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},n.prototype.updateFillStyle=function(t,n){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)},n.prototype.updateStrokeStyle=function(t,n){var i=t.strokeStyle,r=t.lineCap,s=t.lineDash,o=t.lineDashOffset,u=t.lineJoin,e=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||s!=t.currentLineDash&&!g(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=u||t.currentLineWidth!=e||t.currentMiterLimit!=h)&&(void 0!==i&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=u,t.currentLineWidth=e,t.currentMiterLimit=h)},n.prototype.endGeometry=function(t){this.bh[2]=this.instructions.length,this.bh=null,this._h[2]=this.hitDetectionInstructions.length,this._h=null;var n=[pd.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},n.prototype.getBufferedMaxExtent=function(){if(!this.gh&&(this.gh=yn(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;pn(this.gh,t,this.gh)}return this.gh},n}(Vf),_d=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gd=function(t){function n(n,i,r,s){var o=t.call(this,n,i,r,s)||this;return o.xo=null,o.wt=null,o.Mh=void 0,o.jh=void 0,o.xh=void 0,o.Sh=void 0,o.uo=void 0,o.Eh=void 0,o.Th=void 0,o.eo=void 0,o.vr=void 0,o.ho=void 0,o.Yo=void 0,o.Ah=void 0,o}return _d(n,t),n.prototype.drawPoint=function(t,n){if(this.wt){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([pd.DRAW_IMAGE,s,o,this.wt,this.jh*this.Mh,this.xh*this.Mh,Math.ceil(this.Sh*this.Mh),this.uo,this.Eh,this.Th,this.eo,this.vr,[this.ho[0]*this.pixelRatio/this.Mh,this.ho[1]*this.pixelRatio/this.Mh],Math.ceil(this.Yo*this.Mh),this.Ah]),this.hitDetectionInstructions.push([pd.DRAW_IMAGE,s,o,this.xo,this.jh,this.xh,this.Sh,this.uo,this.Eh,this.Th,this.eo,this.vr,this.ho,this.Yo,this.Ah]),this.endGeometry(n)}},n.prototype.drawMultiPoint=function(t,n){if(this.wt){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([pd.DRAW_IMAGE,s,o,this.wt,this.jh*this.Mh,this.xh*this.Mh,Math.ceil(this.Sh*this.Mh),this.uo,this.Eh,this.Th,this.eo,this.vr,[this.ho[0]*this.pixelRatio/this.Mh,this.ho[1]*this.pixelRatio/this.Mh],Math.ceil(this.Yo*this.Mh),this.Ah]),this.hitDetectionInstructions.push([pd.DRAW_IMAGE,s,o,this.xo,this.jh,this.xh,this.Sh,this.uo,this.Eh,this.Th,this.eo,this.vr,this.ho,this.Yo,this.Ah]),this.endGeometry(n)}},n.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.jh=void 0,this.xh=void 0,this.xo=null,this.wt=null,this.Mh=void 0,this.Sh=void 0,this.ho=void 0,this.uo=void 0,this.Eh=void 0,this.Th=void 0,this.eo=void 0,this.vr=void 0,this.Yo=void 0,t.prototype.finish.call(this)},n.prototype.setImageStyle=function(t,n){var i=t.getAnchor(),r=t.getSize(),s=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),u=t.getOrigin();this.Mh=t.getPixelRatio(this.pixelRatio),this.jh=i[0],this.xh=i[1],this.xo=s,this.wt=o,this.Sh=r[1],this.uo=t.getOpacity(),this.Eh=u[0]*this.Mh,this.Th=u[1]*this.Mh,this.eo=t.getRotateWithView(),this.vr=t.getRotation(),this.ho=t.getScaleArray(),this.Yo=r[0],this.Ah=n},n}(bd),md=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Od=function(t){function n(n,i,r,s){return t.call(this,n,i,r,s)||this}return md(n,t),n.prototype.Ch=function(t,n,i,r){var s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,r,!1,!1),u=[pd.MOVE_TO_LINE_TO,s,o];return this.instructions.push(u),this.hitDetectionInstructions.push(u),i},n.prototype.drawLineString=function(t,n){var i=this.state,r=i.strokeStyle,s=i.lineWidth;if(void 0!==r&&void 0!==s){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([pd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,gu,0],dd);var o=t.getFlatCoordinates(),u=t.getStride();this.Ch(o,0,o.length,u),this.hitDetectionInstructions.push(ld),this.endGeometry(n)}},n.prototype.drawMultiLineString=function(t,n){var i=this.state,r=i.strokeStyle,s=i.lineWidth;if(void 0!==r&&void 0!==s){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([pd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],dd);for(var o=t.getEnds(),u=t.getFlatCoordinates(),e=t.getStride(),h=0,f=0,c=o.length;f<c;++f)h=this.Ch(u,h,o[f],e);this.hitDetectionInstructions.push(ld),this.endGeometry(n)}},n.prototype.finish=function(){var n=this.state;return null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&this.instructions.push(ld),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},n.prototype.applyStroke=function(n){null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&(this.instructions.push(ld),n.lastStroke=this.coordinates.length),n.lastStroke=0,t.prototype.applyStroke.call(this,n),this.instructions.push(dd)},n}(bd),Md=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jd=function(t){function n(n,i,r,s){return t.call(this,n,i,r,s)||this}return Md(n,t),n.prototype.Nh=function(t,n,i,r){var s=this.state,o=void 0!==s.fillStyle,u=void 0!==s.strokeStyle,e=i.length;this.instructions.push(dd),this.hitDetectionInstructions.push(dd);for(var h=0;h<e;++h){var f=i[h],c=this.coordinates.length,a=this.appendFlatLineCoordinates(t,n,f,r,!0,!u),v=[pd.MOVE_TO_LINE_TO,c,a];this.instructions.push(v),this.hitDetectionInstructions.push(v),u&&(this.instructions.push(wd),this.hitDetectionInstructions.push(wd)),n=f}return o&&(this.instructions.push(vd),this.hitDetectionInstructions.push(vd)),u&&(this.instructions.push(ld),this.hitDetectionInstructions.push(ld)),n},n.prototype.drawCircle=function(t,n){var i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0!==r||void 0!==s){this.kh(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([pd.SET_FILL_STYLE,bu]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([pd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),u=t.getStride(),e=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,u,!1,!1);var h=[pd.CIRCLE,e];this.instructions.push(dd,h),this.hitDetectionInstructions.push(dd,h),void 0!==i.fillStyle&&(this.instructions.push(vd),this.hitDetectionInstructions.push(vd)),void 0!==i.strokeStyle&&(this.instructions.push(ld),this.hitDetectionInstructions.push(ld)),this.endGeometry(n)}},n.prototype.drawPolygon=function(t,n){var i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0!==r||void 0!==s){this.kh(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([pd.SET_FILL_STYLE,bu]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([pd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),u=t.getOrientedFlatCoordinates(),e=t.getStride();this.Nh(u,0,o,e),this.endGeometry(n)}},n.prototype.drawMultiPolygon=function(t,n){var i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0!==r||void 0!==s){this.kh(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([pd.SET_FILL_STYLE,bu]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([pd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),u=t.getOrientedFlatCoordinates(),e=t.getStride(),h=0,f=0,c=o.length;f<c;++f)h=this.Nh(u,h,o[f],e);this.endGeometry(n)}},n.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var n=this.tolerance;if(0!==n)for(var i=this.coordinates,r=0,s=i.length;r<s;++r)i[r]=ts(i[r],n);return t.prototype.finish.call(this)},n.prototype.kh=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},n}(bd);function xd(t,n,i,r,s){var o,u,e,h,f,c,a,v,l,d=i,w=i,p=0,y=0,b=i;for(o=i;o<r;o+=s){var _=n[o],g=n[o+1];void 0!==h&&(v=_-h,l=g-f,e=Math.sqrt(v*v+l*l),void 0!==c&&(y+=u,Math.acos((c*v+a*l)/(u*e))>t&&(y>p&&(p=y,d=b,w=o),y=0,b=o-s)),u=e,c=v,a=l),h=_,f=g}return(y+=e)>p?[b,o]:[d,w]}var Sd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ed={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Td=function(t){function n(n,i,r,s){var o=t.call(this,n,i,r,s)||this;return o.Ph=null,o.Ns="",o.ks=0,o.Ps=0,o.Is=void 0,o.Gs=0,o.Ls=null,o.fillStates={},o.Fs=null,o.strokeStates={},o.Ds={},o.textStates={},o.Ih="",o.Gh="",o.Rh="",o.Ah=void 0,o}return Sd(n,t),n.prototype.finish=function(){var n=t.prototype.finish.call(this);return n.textStates=this.textStates,n.fillStates=this.fillStates,n.strokeStates=this.strokeStates,n},n.prototype.drawText=function(t,n){var i=this.Ls,r=this.Fs,s=this.Ds;if(""!==this.Ns&&s&&(i||r)){var o=this.coordinates,u=o.length,e=t.getType(),h=null,f=t.getStride();if(s.placement!==Na||e!=At.LINE_STRING&&e!=At.MULTI_LINE_STRING&&e!=At.POLYGON&&e!=At.MULTI_POLYGON){var c=s.overflow?null:[];switch(e){case At.POINT:case At.MULTI_POINT:h=t.getFlatCoordinates();break;case At.LINE_STRING:h=t.getFlatMidpoint();break;case At.CIRCLE:h=t.getCenter();break;case At.MULTI_LINE_STRING:h=t.getFlatMidpoints(),f=2;break;case At.POLYGON:h=t.getFlatInteriorPoint(),s.overflow||c.push(h[2]/this.resolution),f=3;break;case At.MULTI_POLYGON:var a=t.getFlatInteriorPoints();h=[];for(O=0,M=a.length;O<M;O+=3)s.overflow||c.push(a[O+2]/this.resolution),h.push(a[O],a[O+1]);if(0===h.length)return;f=2}if((C=this.appendFlatPointCoordinates(h,f))===u)return;if(c&&(C-u)/2!=h.length/f){var v=u/2;c=c.filter((function(t,n){var i=o[2*(v+n)]===h[n*f]&&o[2*(v+n)+1]===h[n*f+1];return i||--v,i}))}this.Lh(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var l=s.padding;if(l!=Su&&(s.scale[0]<0||s.scale[1]<0)){var d=s.padding[0],w=s.padding[1],p=s.padding[2],y=s.padding[3];s.scale[0]<0&&(w=-w,y=-y),s.scale[1]<0&&(d=-d,p=-p),l=[d,w,p,y]}var b=this.pixelRatio;this.instructions.push([pd.DRAW_IMAGE,u,C,null,NaN,NaN,NaN,1,0,0,this.Is,this.Gs,[1,1],NaN,this.Ah,l==Su?Su:l.map((function(t){return t*b})),!!s.backgroundFill,!!s.backgroundStroke,this.Ns,this.Ih,this.Rh,this.Gh,this.ks,this.Ps,c]);var _=1/b;this.hitDetectionInstructions.push([pd.DRAW_IMAGE,u,C,null,NaN,NaN,NaN,1,0,0,this.Is,this.Gs,[_,_],NaN,this.Ah,l,!!s.backgroundFill,!!s.backgroundStroke,this.Ns,this.Ih,this.Rh,this.Gh,this.ks,this.Ps,c]),this.endGeometry(n)}else{if(!Jn(this.getBufferedMaxExtent(),t.getExtent()))return;var g=void 0;if(h=t.getFlatCoordinates(),e==At.LINE_STRING)g=[h.length];else if(e==At.MULTI_LINE_STRING)g=t.getEnds();else if(e==At.POLYGON)g=t.getEnds().slice(0,1);else if(e==At.MULTI_POLYGON){var m=t.getEndss();g=[];for(var O=0,M=m.length;O<M;++O)g.push(m[O][0])}this.beginGeometry(t,n);for(var j=s.textAlign,x=0,S=void 0,E=0,T=g.length;E<T;++E){if(null==j){var A=xd(s.maxAngle,h,x,g[E],f);x=A[0],S=A[1]}else S=g[E];for(var O=x;O<S;O+=f)o.push(h[O],h[O+1]);var C=o.length;x=g[E],this.Fh(u,C),u=C}this.endGeometry(n)}}},n.prototype.Lh=function(){var t=this.Fs,n=this.Ds,i=this.Ls,r=this.Rh;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var s=this.Ih;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||ju,textBaseline:n.textBaseline||xu,scale:n.scale});var o=this.Gh;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},n.prototype.Fh=function(t,n){var i=this.Fs,r=this.Ds,s=this.Rh,o=this.Ih,u=this.Gh;this.Lh();var e=this.pixelRatio,h=Ed[r.textBaseline],f=this.Ps*e,c=this.Ns,a=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([pd.DRAW_CHARS,t,n,h,r.overflow,u,r.maxAngle,e,f,s,a*e,c,o,1]),this.hitDetectionInstructions.push([pd.DRAW_CHARS,t,n,h,r.overflow,u,r.maxAngle,1,f,s,a,c,o,1/e])},n.prototype.setTextStyle=function(t,n){var i,r,s;if(t){var u=t.getFill();u?((r=this.Ls)||(r={},this.Ls=r),r.fillStyle=Rf(u.getColor()||bu)):(r=null,this.Ls=r);var e=t.getStroke();if(e){(s=this.Fs)||(s={},this.Fs=s);var h=e.getLineDash(),f=e.getLineDashOffset(),c=e.getWidth(),a=e.getMiterLimit();s.lineCap=e.getLineCap()||_u,s.lineDash=h?h.slice():gu,s.lineDashOffset=void 0===f?0:f,s.lineJoin=e.getLineJoin()||mu,s.lineWidth=void 0===c?1:c,s.miterLimit=void 0===a?Ou:a,s.strokeStyle=Rf(e.getColor()||Mu)}else s=null,this.Fs=s;i=this.Ds;var v=t.getFont()||yu;Pu(v);var l=t.getScaleArray();i.overflow=t.getOverflow(),i.font=v,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||xu,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Su,i.scale=void 0===l?[1,1]:l;var d=t.getOffsetX(),w=t.getOffsetY(),p=t.getRotateWithView(),y=t.getRotation();this.Ns=t.getText()||"",this.ks=void 0===d?0:d,this.Ps=void 0===w?0:w,this.Is=void 0!==p&&p,this.Gs=void 0===y?0:y,this.Rh=s?("string"==typeof s.strokeStyle?s.strokeStyle:o(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.Ih=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.Gh=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+o(r.fillStyle):""}else this.Ns="";this.Ah=n},n}(bd),Ad={Circle:jd,Default:bd,Image:gd,LineString:Od,Polygon:jd,Text:Td},Cd=function(){function t(t,n,i,r){this.Dh=t,this.zh=n,this.lt=r,this.Uh=i,this.Xh={}}return t.prototype.finish=function(){var t={};for(var n in this.Xh){t[n]=t[n]||{};var i=this.Xh[n];for(var r in i){var s=i[r].finish();t[n][r]=s}}return t},t.prototype.getBuilder=function(t,n){var i=void 0!==t?t.toString():"0",r=this.Xh[i];void 0===r&&(r={},this.Xh[i]=r);var s=r[n];void 0===s&&(s=new(0,Ad[n])(this.Dh,this.zh,this.Uh,this.lt),r[n]=s);return s},t}();function Nd(t,n,i,r,s,o,u,e,h,f,c,a){var v=t[n],l=t[n+1],d=0,w=0,p=0,y=0;function b(){d=v,w=l,v=t[n+=r],l=t[n+1],y+=p,p=Math.sqrt((v-d)*(v-d)+(l-w)*(l-w))}do{b()}while(n<i-r&&y+p<o);for(var _=0===p?0:(o-y)/p,g=ai(d,v,_),m=ai(w,l,_),O=n-r,M=y,j=o+e*h(f,s,c);n<i-r&&y+p<j;)b();var x,S=ai(d,v,_=0===p?0:(j-y)/p),E=ai(w,l,_);if(a){var T=[g,m,S,E];Cr(T,0,4,2,a,T,T),x=T[0]>T[2]}else x=g>S;var A,C=Math.PI,N=[],k=O+r===n;if(p=0,y=M,v=t[n=O],l=t[n+1],k){b(),A=Math.atan2(l-w,v-d),x&&(A+=A>0?-C:C);var P=(S+g)/2,I=(E+m)/2;return N[0]=[P,I,(j-o)/2,A,s],N}for(var G=0,R=s.length;G<R;){b();var L=Math.atan2(l-w,v-d);if(x&&(L+=L>0?-C:C),void 0!==A){var F=L-A;if(F+=F>C?-2*C:F<-C?2*C:0,Math.abs(F)>u)return null}A=L;for(var D=G,z=0;G<R;++G){var U=e*h(f,s[x?R-G-1:G],c);if(n+r<i&&y+p<o+z+U/2)break;z+=U}if(G!==D){var X=x?s.substring(R-D,R-G):s.substring(D,G);P=ai(d,v,_=0===p?0:(o+z/2-y)/p),I=ai(w,l,_);N.push([P,I,z/2,L,X]),o+=z}}return N}function kd(t,n,i,r){for(var s=t[n],o=t[n+1],u=0,e=n+r;e<i;e+=r){var h=t[e],f=t[e+1];u+=Math.sqrt((h-s)*(h-s)+(f-o)*(f-o)),s=h,o=f}return u}var Pd=[1/0,1/0,-1/0,-1/0],Id=[],Gd=[],Rd=[],Ld=[];function Fd(t){return t[3].declutterBox}var Dd=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function zd(t,n){return"start"!==n&&"end"!==n||Dd.test(t)||(n="start"===n?"left":"right"),Ed[n]}var Ud=function(){function t(t,n,i,r){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.Yh,this.instructions=r.instructions,this.coordinates=r.coordinates,this.Wh={},this.Bh=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.zs=null,this.vs=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.qh={},this.Ph={}}return t.prototype.createLabel=function(t,n,i,r){var s=t+n+i+r;if(this.Ph[s])return this.Ph[s];var o=r?this.strokeStates[r]:null,u=i?this.fillStates[i]:null,e=this.textStates[n],h=this.pixelRatio,f=[e.scale[0]*h,e.scale[1]*h],c=zd(t,e.textAlign||ju),a=r&&o.lineWidth?o.lineWidth:0,v=t.split("\n"),l=v.length,d=[],w=Fu(e.font,v,d),p=Iu(e.font),y=w+a,b=[],_=(y+2)*f[0],g=(p*l+a)*f[1],m={width:_<0?Math.floor(_):Math.ceil(_),height:g<0?Math.floor(g):Math.ceil(g),contextInstructions:b};(1==f[0]&&1==f[1]||b.push("scale",f),b.push("font",e.font),r)&&(b.push("strokeStyle",o.strokeStyle),b.push("lineWidth",a),b.push("lineCap",o.lineCap),b.push("lineJoin",o.lineJoin),b.push("miterLimit",o.miterLimit),(Ut?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(b.push("setLineDash",[o.lineDash]),b.push("lineDashOffset",o.lineDashOffset)));i&&b.push("fillStyle",u.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");var O,M=.5-c,j=c*y+M*a;if(r)for(O=0;O<l;++O)b.push("strokeText",[v[O],j+M*d[O],.5*(a+p)+O*p]);if(i)for(O=0;O<l;++O)b.push("fillText",[v[O],j+M*d[O],.5*(a+p)+O*p]);return this.Ph[s]=m,m},t.prototype.Zh=function(t,n,i,r,s,o,u){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,n),o&&(this.Yh=o[2],this.vo(t)),u&&(this.Jh(t,u),t.stroke())},t.prototype.Vh=function(t,n,i,r,s,o,u,e,h,f,c,a,v,l,d,w){var p,y=i-(u*=a[0]),b=r-(e*=a[1]),_=s+h>t?t-h:s,g=o+f>n?n-f:o,m=l[3]+_*a[0]+l[1],O=l[0]+g*a[1]+l[2],M=y-l[3],j=b-l[0];return(d||0!==c)&&(Id[0]=M,Ld[0]=M,Id[1]=j,Gd[1]=j,Gd[0]=M+m,Rd[0]=Gd[0],Rd[1]=j+O,Ld[1]=Rd[1]),0!==c?(Ht(p=tn([1,0,0,1,0,0],i,r,1,1,c,-i,-r),Id),Ht(p,Gd),Ht(p,Rd),Ht(p,Ld),jn(Math.min(Id[0],Gd[0],Rd[0],Ld[0]),Math.min(Id[1],Gd[1],Rd[1],Ld[1]),Math.max(Id[0],Gd[0],Rd[0],Ld[0]),Math.max(Id[1],Gd[1],Rd[1],Ld[1]),Pd)):jn(Math.min(M,M+m),Math.min(j,j+O),Math.max(M,M+m),Math.max(j,j+O),Pd),v&&(y=Math.round(y),b=Math.round(b)),{drawImageX:y,drawImageY:b,drawImageW:_,drawImageH:g,originX:h,originY:f,declutterBox:{minX:Pd[0],minY:Pd[1],maxX:Pd[2],maxY:Pd[3],value:w},canvasTransform:p,scale:a}},t.prototype.Hh=function(t,n,i,r,s,o,u){var e=!(!o&&!u),h=r.declutterBox,f=t.canvas,c=u?u[2]*r.scale[0]/2:0;return h.minX-c<=f.width/n&&h.maxX+c>=0&&h.minY-c<=f.height/n&&h.maxY+c>=0&&(e&&this.Zh(t,Id,Gd,Rd,Ld,o,u),Du(t,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},t.prototype.vo=function(t){if(this.Yh){var n=Ht(this.Bh,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.vs)}t.fill(),this.Yh&&t.restore()},t.prototype.Jh=function(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.setLineDash&&(t.lineDashOffset=n[7],t.setLineDash(n[6]))},t.prototype.$h=function(t,n,i,r){var s=this.textStates[n],o=this.createLabel(t,n,r,i),u=this.strokeStates[i],e=this.pixelRatio,h=zd(t,s.textAlign||ju),f=Ed[s.textBaseline||xu],c=u&&u.lineWidth?u.lineWidth:0;return{label:o,anchorX:h*(o.width/e-2*s.scale[0])+2*(.5-h)*c,anchorY:f*o.height/e+2*(.5-f)*c}},t.prototype.Kh=function(t,n,i,r,s,o,u,e){var h;this.zs&&g(i,this.Bh)?h=this.zs:(this.zs||(this.zs=[]),h=Ar(this.coordinates,0,this.coordinates.length,2,i,this.zs),Vt(this.Bh,i));for(var f,c,a,v,l,d,w,p,y,b,_,m,O,M,j,x,S=0,E=r.length,T=0,A=0,C=0,N=null,k=null,P=this.Wh,I=this.vs,G=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,R={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:I},L=this.instructions!=r||this.overlaps?0:200;S<E;){var F=r[S];switch(F[0]){case pd.BEGIN_GEOMETRY:O=F[1],x=F[3],O.getGeometry()?void 0===u||Jn(u,x.getExtent())?++S:S=F[2]+1:S=F[2];break;case pd.BEGIN_PATH:A>L&&(this.vo(t),A=0),C>L&&(t.stroke(),C=0),A||C||(t.beginPath(),v=NaN,l=NaN),++S;break;case pd.CIRCLE:var D=h[T=F[1]],z=h[T+1],U=h[T+2]-D,X=h[T+3]-z,Y=Math.sqrt(U*U+X*X);t.moveTo(D+Y,z),t.arc(D,z,Y,0,2*Math.PI,!0),++S;break;case pd.CLOSE_PATH:t.closePath(),++S;break;case pd.CUSTOM:T=F[1],f=F[2];var W=F[3],B=F[4],q=6==F.length?F[5]:void 0;R.geometry=W,R.feature=O,S in P||(P[S]=[]);var Z=P[S];q?q(h,T,f,2,Z):(Z[0]=h[T],Z[1]=h[T+1],Z.length=2),B(Z,R),++S;break;case pd.DRAW_IMAGE:T=F[1],f=F[2],p=F[3],c=F[4],a=F[5];var J=F[6],V=F[7],H=F[8],$=F[9],K=F[10],Q=F[11],tt=F[12],nt=F[13],it=F[14];if(!p&&F.length>=19){y=F[18],b=F[19],_=F[20],m=F[21];var rt=this.$h(y,b,_,m);p=rt.label,F[3]=p;var st=F[22];c=(rt.anchorX-st)*this.pixelRatio,F[4]=c;var ot=F[23];a=(rt.anchorY-ot)*this.pixelRatio,F[5]=a,J=p.height,F[6]=J,nt=p.width,F[13]=nt}var ut=void 0;F.length>24&&(ut=F[24]);var et=void 0,ht=void 0,ft=void 0;F.length>16?(et=F[15],ht=F[16],ft=F[17]):(et=Su,ht=!1,ft=!1),K&&G?Q+=I:K||G||(Q-=I);for(var ct=0;T<f;T+=2)if(!(ut&&ut[ct++]<nt/this.pixelRatio)){var at=[t,n,p,Ft=this.Vh(p.width,p.height,h[T],h[T+1],nt,J,c,a,H,$,Q,tt,s,et,ht||ft,O),V,ht?N:null,ft?k:null],vt=void 0,lt=void 0;if(e&&it){var dt=f-T;if(!it[dt]){it[dt]=at;continue}if(vt=it[dt],delete it[dt],lt=Fd(vt),e.collides(lt))continue}e&&e.collides(Ft.declutterBox)||(vt&&(e&&e.insert(lt),this.Hh.apply(this,vt)),e&&e.insert(Ft.declutterBox),this.Hh.apply(this,at))}++S;break;case pd.DRAW_CHARS:var wt=F[1],pt=F[2],yt=F[3],bt=F[4];m=F[5];var _t=F[6],gt=F[7],mt=F[8];_=F[9];var Ot=F[10];y=F[11],b=F[12];var Mt=[F[13],F[13]],jt=this.textStates[b],xt=jt.font,St=[jt.scale[0]*gt,jt.scale[1]*gt],Et=void 0;xt in this.qh?Et=this.qh[xt]:(Et={},this.qh[xt]=Et);var Tt=kd(h,wt,pt,2),At=Math.abs(St[0])*Lu(xt,y,Et);if(bt||At<=Tt){var Ct=this.textStates[b].textAlign,Nt=Nd(h,wt,pt,2,y,(Tt-At)*Ed[Ct],_t,Math.abs(St[0]),Lu,xt,Et,G?0:this.vs);t:if(Nt){var kt=[],Pt=void 0,It=void 0,Gt=void 0,Rt=void 0,Lt=void 0;if(_)for(Pt=0,It=Nt.length;Pt<It;++Pt){Gt=(Lt=Nt[Pt])[4],Rt=this.createLabel(Gt,b,"",_),c=Lt[2]+(St[0]<0?-Ot:Ot),a=yt*Rt.height+2*(.5-yt)*Ot*St[1]/St[0]-mt;var Ft=this.Vh(Rt.width,Rt.height,Lt[0],Lt[1],Rt.width,Rt.height,c,a,0,0,Lt[3],Mt,!1,Su,!1,O);if(e&&e.collides(Ft.declutterBox))break t;kt.push([t,n,Rt,Ft,1,null,null])}if(m)for(Pt=0,It=Nt.length;Pt<It;++Pt){Gt=(Lt=Nt[Pt])[4],Rt=this.createLabel(Gt,b,m,""),c=Lt[2],a=yt*Rt.height-mt;Ft=this.Vh(Rt.width,Rt.height,Lt[0],Lt[1],Rt.width,Rt.height,c,a,0,0,Lt[3],Mt,!1,Su,!1,O);if(e&&e.collides(Ft.declutterBox))break t;kt.push([t,n,Rt,Ft,1,null,null])}e&&e.load(kt.map(Fd));for(var Dt=0,zt=kt.length;Dt<zt;++Dt)this.Hh.apply(this,kt[Dt])}}++S;break;case pd.END_GEOMETRY:if(void 0!==o){var Ut=o(O=F[1],x);if(Ut)return Ut}++S;break;case pd.FILL:L?A++:this.vo(t),++S;break;case pd.MOVE_TO_LINE_TO:for(T=F[1],f=F[2],M=h[T],w=(j=h[T+1])+.5|0,(d=M+.5|0)===v&&w===l||(t.moveTo(M,j),v=d,l=w),T+=2;T<f;T+=2)d=(M=h[T])+.5|0,w=(j=h[T+1])+.5|0,T!=f-2&&d===v&&w===l||(t.lineTo(M,j),v=d,l=w);++S;break;case pd.SET_FILL_STYLE:N=F,this.Yh=F[2],A&&(this.vo(t),A=0,C&&(t.stroke(),C=0)),t.fillStyle=F[1],++S;break;case pd.SET_STROKE_STYLE:k=F,C&&(t.stroke(),C=0),this.Jh(t,F),++S;break;case pd.STROKE:L?C++:t.stroke(),++S;break;default:++S}}A&&this.vo(t),C&&t.stroke()},t.prototype.execute=function(t,n,i,r,s,o){this.vs=r,this.Kh(t,n,i,this.instructions,s,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,n,i,r,s){return this.vs=i,this.Kh(t,1,n,this.hitDetectionInstructions,!0,r,s)},t}(),Xd=[ic,Kf,nc,tc,rc,Qf],Yd=function(){function t(t,n,i,r,s,o){this.zh=t,this.ie=r,this.lt=i,this.Uh=n,this.Qh=o,this.tf={},this.nf=null,this.if=[1,0,0,1,0,0],this.rf(s)}return t.prototype.clip=function(t,n){var i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.rf=function(t){for(var n in t){var i=this.tf[n];void 0===i&&(i={},this.tf[n]=i);var r=t[n];for(var s in r){var o=r[s];i[s]=new Ud(this.Uh,this.lt,this.ie,o)}}},t.prototype.hasExecutors=function(t){for(var n in this.tf)for(var i=this.tf[n],r=0,s=t.length;r<s;++r)if(t[r]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s,o){var u=2*(r=Math.round(r))+1,e=tn(this.if,r+.5,r+.5,1/n,-1/n,-i,-t[0],-t[1]),h=!this.nf;h&&(this.nf=co(u,u));var f,c=this.nf;c.canvas.width!==u||c.canvas.height!==u?(c.canvas.width=u,c.canvas.height=u):h||c.clearRect(0,0,u,u),void 0!==this.Qh&&(Nn(f=[1/0,1/0,-1/0,-1/0],t),pn(f,n*(this.Qh+r),f));var a,v=Bd(r);function l(t,n){for(var i=c.getImageData(0,0,u,u).data,e=0,h=v.length;e<h;e++)if(i[v[e]]>0){if(!o||a!==tc&&a!==rc||-1!==o.indexOf(t)){var f=(v[e]-3)/4,l=r-f%u,d=r-(f/u|0),w=s(t,n,l*l+d*d);if(w)return w}c.clearRect(0,0,u,u);break}}var d,p,y,b,_,g=Object.keys(this.tf).map(Number);for(g.sort(w),d=g.length-1;d>=0;--d){var m=g[d].toString();for(y=this.tf[m],p=Xd.length-1;p>=0;--p)if(void 0!==(b=y[a=Xd[p]])&&(_=b.executeHitDetection(c,e,i,l,f)))return _}},t.prototype.getClipCoords=function(t){var n=this.zh;if(!n)return null;var i=n[0],r=n[1],s=n[2],o=n[3],u=[i,r,i,o,s,o,s,r];return Ar(u,0,8,2,t,u),u},t.prototype.isEmpty=function(){return A(this.tf)},t.prototype.execute=function(t,n,i,r,s,o,u){var e=Object.keys(this.tf).map(Number);e.sort(w),this.zh&&(t.save(),this.clip(t,i));var h,f,c,a,v,l,d=o||Xd;for(u&&e.reverse(),h=0,f=e.length;h<f;++h){var p=e[h].toString();for(v=this.tf[p],c=0,a=d.length;c<a;++c){void 0!==(l=v[d[c]])&&l.execute(t,n,i,r,s,u)}}this.zh&&t.restore()},t}(),Wd={};function Bd(t){if(void 0!==Wd[t])return Wd[t];for(var n=2*t+1,i=t*t,r=new Array(i+1),s=0;s<=t;++s)for(var o=0;o<=t;++o){var u=s*s+o*o;if(u>i)break;var e=r[u];e||(e=[],r[u]=e),e.push(4*((t+s)*n+(t+o))+3),s>0&&e.push(4*((t-s)*n+(t+o))+3),o>0&&(e.push(4*((t+s)*n+(t-o))+3),s>0&&e.push(4*((t-s)*n+(t-o))+3))}for(var h=[],f=(s=0,r.length);s<f;++s)r[s]&&h.push.apply(h,r[s]);return Wd[t]=h,h}var qd=Yd,Zd=.5;function Jd(t,n,i,r,s,o,u){var e=co(t[0]*Zd,t[1]*Zd);e.imageSmoothingEnabled=!1;for(var h=e.canvas,f=new $f(e,Zd,s,null,u),c=i.length,a=Math.floor(16777215/c),v={},l=1;l<=c;++l){var d=i[l-1],p=d.getStyleFunction()||r;if(r){var y=p(d,o);if(y){Array.isArray(y)||(y=[y]);for(var b="#"+("000000"+(l*a).toString(16)).slice(-6),_=0,g=y.length;_<g;++_){var m=y[_],O=m.getGeometryFunction()(d);if(O&&Jn(s,O.getExtent())){var M=m.clone(),j=M.getFill();j&&j.setColor(b);var x=M.getStroke();x&&(x.setColor(b),x.setLineDash(null)),M.setText(void 0);var S=m.getImage();if(S&&0!==S.getOpacity()){var E=S.getImageSize();if(!E)continue;var T=co(E[0],E[1],void 0,{alpha:!1}),A=T.canvas;T.fillStyle=b,T.fillRect(0,0,A.width,A.height),M.setImage(new ga({img:A,imgSize:E,anchor:S.getAnchor(),anchorXUnits:fa,anchorYUnits:fa,offset:S.getOrigin(),opacity:1,size:S.getSize(),scale:S.getScale(),rotation:S.getRotation(),rotateWithView:S.getRotateWithView()}))}var C=M.getZIndex()||0;(P=v[C])||(P={},v[C]=P,P[At.POLYGON]=[],P[At.CIRCLE]=[],P[At.LINE_STRING]=[],P[At.POINT]=[]),P[O.getType().replace("Multi","")].push(O,M)}}}}}for(var N=Object.keys(v).map(Number).sort(w),k=(l=0,N.length);l<k;++l){var P=v[N[l]];for(var I in P){var G=P[I];for(_=0,g=G.length;_<g;_+=2){f.setStyle(G[_+1]);for(var R=0,L=n.length;R<L;++R)f.setTransform(n[R]),f.drawGeometry(G[_])}}}return e.getImageData(0,0,h.width,h.height)}function Vd(t,n,i){var r=[];if(i){var s=Math.floor(Math.round(t[0])*Zd),o=Math.floor(Math.round(t[1])*Zd),u=4*(ii(s,0,i.width-1)+ii(o,0,i.height-1)*i.width),e=i.data[u],h=i.data[u+1],f=i.data[u+2]+256*(h+256*e),c=Math.floor(16777215/n.length);f&&f%c==0&&r.push(n[f/c-1])}return r}var Hd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$d=function(t){function n(n){var i=t.call(this,n)||this;return i.sf=i.uf.bind(i),i.ef,i.hf=!1,i.ff=null,i.cf=null,i.qe=-1,i.af=NaN,i.wh=[1/0,1/0,-1/0,-1/0],i.vf=[1/0,1/0,-1/0,-1/0],i.lf,i.df=null,i.wf=null,i.pf=null,i.yf=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return Hd(n,t),n.prototype.useContainer=function(n,i,r){r<1&&(n=null),t.prototype.useContainer.call(this,n,i,r)},n.prototype.renderWorlds=function(t,n,i){var r=n.extent,s=n.viewState,o=s.center,u=s.resolution,e=s.projection,h=s.rotation,f=e.getExtent(),c=this.getLayer().getSource(),a=n.pixelRatio,v=n.viewHints,l=!(v[de]||v[we]),d=this.context,w=Math.round(n.size[0]*a),p=Math.round(n.size[1]*a),y=c.getWrapX()&&e.canWrapX(),b=y?Zn(f):null,_=y?Math.ceil((r[2]-f[2])/b)+1:1,g=y?Math.floor((r[0]-f[0])/b):0;do{var m=this.getRenderTransform(o,u,h,a,w,p,g*b);t.execute(d,1,m,h,l,void 0,i)}while(++g<_)},n.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},n.prototype.renderFrame=function(t,n){var i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];Qt(this.pixelTransform,1/i,1/i),nn(this.inversePixelTransform,this.pixelTransform);var s=sn(this.pixelTransform);this.useContainer(n,s,r.opacity);var o=this.context,u=o.canvas,e=this.yf,h=this.declutterExecutorGroup;if((!e||e.isEmpty())&&(!h||h.isEmpty()))return null;var f=Math.round(t.size[0]*i),c=Math.round(t.size[1]*i);u.width!=f||u.height!=c?(u.width=f,u.height=c,u.style.transform!==s&&(u.style.transform=s)):this.containerReused||o.clearRect(0,0,f,c),this.preRender(o,t);var a=t.viewState,v=a.projection,l=!1,d=!0;if(r.extent&&this.clipping){var w=jr(r.extent,v);(l=(d=Jn(w,t.extent))&&!gn(w,t.extent))&&this.clipUnrotated(o,t,w)}d&&this.renderWorlds(e,t),l&&o.restore(),this.postRender(o,t);var p=pu(r.opacity),y=this.container;return p!==y.style.opacity&&(y.style.opacity=p),this.lf!==a.rotation&&(this.lf=a.rotation,this.ff=null),this.container},n.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.ff&&!this.ef){var i=[this.context.canvas.width,this.context.canvas.height];Ht(this.pixelTransform,i);var r=this.df,s=this.af,o=this.lf,u=this.wf,e=this.vf,h=this.getLayer(),f=[],c=i[0]*Zd,a=i[1]*Zd;f.push(this.getRenderTransform(r,s,o,Zd,c,a,0).slice());var v=h.getSource(),l=u.getExtent();if(v.getWrapX()&&u.canWrapX()&&!gn(l,e)){for(var d=e[0],w=Zn(l),p=0,y=void 0;d<l[0];)y=w*--p,f.push(this.getRenderTransform(r,s,o,Zd,c,a,y).slice()),d+=w;for(p=0,d=e[2];d>l[2];)y=w*++p,f.push(this.getRenderTransform(r,s,o,Zd,c,a,y).slice()),d-=w}this.ff=Jd(i,f,this.cf,h.getStyleFunction(),e,s,o)}n(Vd(t,this.cf,this.ff))}.bind(this))},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s){var u=this;if(this.yf){var e,h=n.viewState.resolution,f=n.viewState.rotation,c=this.getLayer(),a={},v=function(t,n,i){var u=o(t),e=a[u];if(e){if(!0!==e&&i<e.distanceSq){if(0===i)return a[u]=!0,s.splice(s.lastIndexOf(e),1),r(t,c,n);e.geometry=n,e.distanceSq=i}}else{if(0===i)return a[u]=!0,r(t,c,n);s.push(a[u]={feature:t,layer:c,geometry:n,distanceSq:i,callback:r})}},l=[this.yf];return this.declutterExecutorGroup&&l.push(this.declutterExecutorGroup),l.some((function(r){return e=r.forEachFeatureAtCoordinate(t,h,f,i,v,r===u.declutterExecutorGroup?n.declutterTree.all().map((function(t){return t.value})):null)})),e}},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.yf&&t.changed()},n.prototype.uf=function(t){this.renderIfReadyAndVisible()},n.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource();if(!i)return!1;var r=t.viewHints[de],s=t.viewHints[we],o=n.getUpdateWhileAnimating(),u=n.getUpdateWhileInteracting();if(!this.hf&&!o&&r||!u&&s)return this.ef=!0,!0;this.ef=!1;var e=t.extent,h=t.viewState,f=h.projection,c=h.resolution,a=t.pixelRatio,v=n.getRevision(),l=n.getRenderBuffer(),d=n.getRenderOrder();void 0===d&&(d=oc);var w=h.center.slice(),p=pn(e,l*c),y=p.slice(),b=[p.slice()],_=f.getExtent();if(i.getWrapX()&&f.canWrapX()&&!gn(_,t.extent)){var m=Zn(_),O=Math.max(Zn(p)/2,m);p[0]=_[0]-O,p[2]=_[2]+O,tr(w,f);var M=ti(b[0],f);M[0]<_[0]&&M[2]<_[2]?b.push([M[0]+m,M[1],M[2]+m,M[3]]):M[0]>_[0]&&M[2]>_[2]&&b.push([M[0]-m,M[1],M[2]-m,M[3]])}if(!this.hf&&this.af==c&&this.qe==v&&this.pf==d&&gn(this.vf,p))return g(this.wh,y)||(this.ff=null,this.wh=y),this.df=w,this.replayGroupChanged=!1,!0;this.yf=null,this.hf=!1;var j,x=new Cd(ec(c,a),p,c,a);this.getLayer().getDeclutter()&&(j=new Cd(ec(c,a),p,c,a));var S,E=gr();if(E){for(var T=0,A=b.length;T<A;++T){var C=Mr(b[T],f);i.loadFeatures(C,xr(c,f),E)}S=dr(E,f)}else for(T=0,A=b.length;T<A;++T)i.loadFeatures(b[T],c,f);var N=uc(c,a),k=function(t){var i,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(i=r(t,c)),i){var s=this.renderFeature(t,N,i,x,S,j);this.hf=this.hf||s}}.bind(this),P=Mr(p,f),I=i.getFeaturesInExtent(P);d&&I.sort(d);for(T=0,A=I.length;T<A;++T)k(I[T]);this.cf=I;var G=x.finish(),R=new qd(p,c,a,i.getOverlaps(),G,n.getRenderBuffer());return j&&(this.declutterExecutorGroup=new qd(p,c,a,i.getOverlaps(),j.finish(),n.getRenderBuffer())),this.af=c,this.qe=v,this.pf=d,this.wh=y,this.vf=p,this.df=w,this.wf=f,this.yf=R,this.ff=null,this.replayGroupChanged=!0,!0},n.prototype.renderFeature=function(t,n,i,r,s,o){if(!i)return!1;var u=!1;if(Array.isArray(i))for(var e=0,h=i.length;e<h;++e)u=hc(r,t,i[e],n,this.sf,s,o)||u;else u=hc(r,t,i,n,this.sf,s,o);return u},n}(od),Kd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qd=function(t){function n(n){var i=t.call(this,n)||this;return i.bf=new $d(n),i._f=n.getImageRatio(),i.gf=[1,0,0,1,0,0],i.mf=null,i}return Kd(n,t),n.prototype.disposeInternal=function(){this.bf.dispose(),t.prototype.disposeInternal.call(this)},n.prototype.getFeatures=function(t){if(!this.bf)return new Promise((function(t){return t([])}));var n=Ht(this.gf,Ht(this.mf,t.slice()));return this.bf.getFeatures(n)},n.prototype.handleFontsChanged=function(){this.bf.handleFontsChanged()},n.prototype.prepareFrame=function(t){var n=t.pixelRatio,i=t.viewState,r=i.resolution,s=t.viewHints,o=this.bf,u=t.extent;1!==this._f&&$n(u=u.slice(0),this._f);var e=Zn(u)/r,h=Yn(u)/r;if(!s[de]&&!s[we]&&!Vn(u)){o.useContainer(null,null,1);var f=o.context,c=S({},t,{declutterTree:new nl(9),extent:u,size:[e,h],viewState:S({},t.viewState,{rotation:0})}),a=!0,v=new fo(u,r,n,f.canvas,(function(t){o.prepareFrame(c)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(c,null)&&(o.renderDeclutter(c),a=!1),t())}));v.addEventListener(k,function(){if(v.getState()===io){this.wt=a?null:v;var t=v.getResolution(),r=v.getPixelRatio(),s=t*n/r;this.renderedResolution=s,this.gf=tn(this.gf,e/2,h/2,1/s,-1/s,0,-i.center[0],-i.center[1])}}.bind(this)),v.load()}return this.wt&&(this.mf=t.pixelToCoordinateTransform.slice()),!!this.wt},n.prototype.preRender=function(){},n.prototype.postRender=function(){},n.prototype.renderDeclutter=function(){},n.prototype.forEachFeatureAtCoordinate=function(n,i,r,s,o){return this.bf?this.bf.forEachFeatureAtCoordinate(n,i,r,s,o):t.prototype.forEachFeatureAtCoordinate.call(this,n,i,r,s,o)},n}(ed);function tw(t,n,i,r,s,o,u){var e,h,f=(i-n)/r;if(1===f)e=n;else if(2===f)e=n,h=s;else if(0!==f){for(var c=t[n],a=t[n+1],v=0,l=[0],w=n+r;w<i;w+=r){var p=t[w],y=t[w+1];v+=Math.sqrt((p-c)*(p-c)+(y-a)*(y-a)),l.push(v),c=p,a=y}var b=s*v,_=d(l,b);_<0?(h=(b-l[-_-2])/(l[-_-1]-l[-_-2]),e=n+(-_-2)*r):e=n+_*r}var g=u>1?u:2,m=o||new Array(g);for(w=0;w<g;++w)m[w]=void 0===e?NaN:void 0===h?t[e+w]:ai(t[e+w],t[e+r+w],h);return m}function nw(t,n,i,r,s,o){if(i==n)return null;var u;if(s<t[n+r-1])return o?((u=t.slice(n,n+r))[r-1]=s,u):null;if(t[i-1]<s)return o?((u=t.slice(i-r,i))[r-1]=s,u):null;if(s==t[n+r-1])return t.slice(n,n+r);for(var e=n/r,h=i/r;e<h;){var f=e+h>>1;s<t[(f+1)*r-1]?h=f:e=f+1}var c=t[e*r-1];if(s==c)return t.slice((e-1)*r,(e-1)*r+r);var a=(s-c)/(t[(e+1)*r-1]-c);u=[];for(var v=0;v<r-1;++v)u.push(ai(t[(e-1)*r+v],t[e*r+v],a));return u.push(s),u}function iw(t,n,i,r,s,o,u){if(u)return nw(t,n,i[i.length-1],r,s,o);var e;if(s<t[r-1])return o?((e=t.slice(0,r))[r-1]=s,e):null;if(t[t.length-1]<s)return o?((e=t.slice(t.length-r))[r-1]=s,e):null;for(var h=0,f=i.length;h<f;++h){var c=i[h];if(n!=c){if(s<t[n+r-1])return null;if(s<=t[c-1])return nw(t,n,c,r,s,!1);n=c}}return null}function rw(t,n,i,r){for(var s=[],o=[1/0,1/0,-1/0,-1/0],u=0,e=i.length;u<e;++u){var h=i[u];o=En(t,n,h[0],r),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),n=h[h.length-1]}return s}var sw=[1,0,0,1,0,0],ow=function(){function t(t,n,i,r,s){this.D,this.C=s,this.Of=t,this.Mf=n,this.jf=null,this.xf=null,this.nt=i,this.Sf=r}return t.prototype.get=function(t){return this.Sf[t]},t.prototype.getExtent=function(){return this.D||(this.D=this.Of===At.POINT?Sn(this.Mf):En(this.Mf,0,this.Mf.length,2)),this.D},t.prototype.getFlatInteriorPoint=function(){if(!this.jf){var t=zn(this.getExtent());this.jf=bs(this.Mf,0,this.nt,2,t,0)}return this.jf},t.prototype.getFlatInteriorPoints=function(){if(!this.jf){var t=rw(this.Mf,0,this.nt,2);this.jf=_s(this.Mf,0,this.nt,2,t)}return this.jf},t.prototype.getFlatMidpoint=function(){return this.xf||(this.xf=tw(this.Mf,0,this.Mf.length,2,.5)),this.xf},t.prototype.getFlatMidpoints=function(){if(!this.xf){this.xf=[];for(var t=this.Mf,n=0,i=this.nt,r=0,s=i.length;r<s;++r){var o=i[r],u=tw(t,n,o,2,.5);_(this.xf,u),n=o}}return this.xf},t.prototype.getId=function(){return this.C},t.prototype.getOrientedFlatCoordinates=function(){return this.Mf},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,n){return this},t.prototype.getProperties=function(){return this.Sf},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){},t.prototype.getType=function(){return this.Of},t.prototype.transform=function(t){var n=(t=ur(t)).getExtent(),i=t.getWorldExtent();if(n&&i){var r=Yn(i)/Yn(n);tn(sw,i[0],i[3],r,-r,0,0,0),Ar(this.Mf,0,this.Mf.length,2,sw,this.Mf)}},t.prototype.getEnds=function(){return this.nt},t}();ow.prototype.getEndss=ow.prototype.getEnds,ow.prototype.getFlatCoordinates=ow.prototype.getOrientedFlatCoordinates;var uw=ow;var ew=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hw=function(t){function n(n){var i=n||{};return t.call(this,i)||this}return ew(n,t),n}(nu),fw="preload",cw="useInterimTilesOnError",aw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vw=function(t){function n(n){var i=this,r=n||{},s=S({},r);return delete s.preload,delete s.useInterimTilesOnError,(i=t.call(this,s)||this).on,i.once,i.un,i.setPreload(void 0!==r.preload?r.preload:0),i.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),i}return aw(n,t),n.prototype.getPreload=function(){return this.get(fw)},n.prototype.setPreload=function(t){this.set(fw,t)},n.prototype.getUseInterimTilesOnError=function(){return this.get(cw)},n.prototype.setUseInterimTilesOnError=function(t){this.set(cw,t)},n}(nu),lw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dw="renderOrder",ww=function(t){function n(n){var i=this,r=n||{},s=S({},r);return delete s.style,delete s.renderBuffer,delete s.updateWhileAnimating,delete s.updateWhileInteracting,(i=t.call(this,s)||this).Ef=void 0!==r.declutter&&r.declutter,i.Qh=void 0!==r.renderBuffer?r.renderBuffer:100,i.k=null,i.P=void 0,i.setStyle(r.style),i.Tf=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,i.Af=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,i}return lw(n,t),n.prototype.getDeclutter=function(){return this.Ef},n.prototype.getFeatures=function(n){return t.prototype.getFeatures.call(this,n)},n.prototype.getRenderBuffer=function(){return this.Qh},n.prototype.getRenderOrder=function(){return this.get(dw)},n.prototype.getStyle=function(){return this.k},n.prototype.getStyleFunction=function(){return this.P},n.prototype.getUpdateWhileAnimating=function(){return this.Tf},n.prototype.getUpdateWhileInteracting=function(){return this.Af},n.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new nl(9)),this.getRenderer().renderDeclutter(t)},n.prototype.setRenderOrder=function(t){this.set(dw,t)},n.prototype.setStyle=function(t){this.k=void 0!==t?t:Sa,this.P=null===t?void 0:ja(this.k),this.changed()},n}(nu),pw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yw=function(t){function n(n,i){var r=t.call(this)||this;return r.Cf=null,r.Nf=-1,r.K=-1,r.tt=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r}return pw(n,t),n.prototype.appendCoordinate=function(t){this.flatCoordinates?_(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.tt!=this.getRevision()&&(this.K=Math.sqrt(Ur(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.tt=this.getRevision()),Wr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.K,!1,t,n,i,r))},n.prototype.forEachSegment=function(t){return gs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinateAtM=function(t,n){if(this.layout!=Et&&this.layout!=Tt)return null;var i=void 0!==n&&n;return nw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},n.prototype.getCoordinates=function(){return ss(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinateAt=function(t,n){return tw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)},n.prototype.getLength=function(){return kd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getFlatMidpoint=function(){return this.Nf!=this.getRevision()&&(this.Cf=this.getCoordinateAt(.5,this.Cf),this.Nf=this.getRevision()),this.Cf},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=$r(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,xt)},n.prototype.getType=function(){return At.LINE_STRING},n.prototype.intersectsExtent=function(t){return ms(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jr(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Dr),bw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_w=function(t){function n(n){return t.call(this,n)||this}return bw(n,t),n.prototype.createRenderer=function(){return new $d(this)},n}(ww);function gw(t,n,i){for(var r,s,o,u,e,h,f=[],c=t(0),a=t(1),v=n(c),l=n(a),d=[a,c],w=[l,v],p=[1,0],y={},b=1e5;--b>0&&p.length>0;)o=p.pop(),c=d.pop(),v=w.pop(),(h=o.toString())in y||(f.push(v[0],v[1]),y[h]=!0),u=p.pop(),a=d.pop(),l=w.pop(),oi((s=n(r=t(e=(o+u)/2)))[0],s[1],v[0],v[1],l[0],l[1])<i?(f.push(l[0],l[1]),y[h=u.toString()]=!0):(p.push(u,e,e,o),w.push(l,s,s,v),d.push(a,r,r,c));return f}function mw(t,n,i,r,s){return gw((function(r){return[t,n+(i-n)*r]}),wr(ur("EPSG:4326"),r),s)}function Ow(t,n,i,r,s){return gw((function(r){return[n+(i-n)*r,t]}),wr(ur("EPSG:4326"),r),s)}var Mw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jw=new ma({color:"rgba(0,0,0,0.2)"}),xw=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],Sw=function(t){function n(n){var i=this,r=n||{},s=S({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},r);return delete s.maxLines,delete s.strokeStyle,delete s.targetSize,delete s.showLabels,delete s.lonLabelFormatter,delete s.latLabelFormatter,delete s.lonLabelPosition,delete s.latLabelPosition,delete s.lonLabelStyle,delete s.latLabelStyle,delete s.intervals,(i=t.call(this,s)||this).Bn=null,i.kf=1/0,i.Pf=1/0,i.If=-1/0,i.Gf=-1/0,i.Rf=1/0,i.Lf=1/0,i.Ff=-1/0,i.Df=-1/0,i.zf=void 0!==r.targetSize?r.targetSize:100,i.Uf=void 0!==r.maxLines?r.maxLines:100,i.Xf=[],i.Yf=[],i.Wf=void 0!==r.strokeStyle?r.strokeStyle:jw,i.Bf=void 0,i.qf=void 0,i.Zf=null,i.Jf=null,i.Vf=null,i.Hf=null,i.$f=null,i.Kf=null,i.Qf=null,r.showLabels&&(i.tc=null==r.lonLabelFormatter?Bi.bind(i,"EW"):r.lonLabelFormatter,i.nc=null==r.latLabelFormatter?Bi.bind(i,"NS"):r.latLabelFormatter,i.ic=null==r.lonLabelPosition?0:r.lonLabelPosition,i.rc=null==r.latLabelPosition?1:r.latLabelPosition,i.sc=new Aa({text:void 0!==r.lonLabelStyle?r.lonLabelStyle.clone():new ka({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new ea({color:"rgba(0,0,0,1)"}),stroke:new ma({color:"rgba(255,255,255,1)",width:3})})}),i.oc=function(t){var n=t.get("graticule_label");return this.sc.getText().setText(n),this.sc}.bind(i),i.uc=new Aa({text:void 0!==r.latLabelStyle?r.latLabelStyle.clone():new ka({font:"12px Calibri,sans-serif",textAlign:"right",fill:new ea({color:"rgba(0,0,0,1)"}),stroke:new ma({color:"rgba(255,255,255,1)",width:3})})}),i.ec=function(t){var n=t.get("graticule_label");return this.uc.getText().setText(n),this.uc}.bind(i),i.Kf=[],i.Qf=[],i.addEventListener(Zo,i.hc.bind(i))),i.fc=void 0!==r.intervals?r.intervals:xw,i.setSource(new wl({loader:i.loaderFunction.bind(i),strategy:i.strategyFunction.bind(i),features:new et,overlaps:!1,useSpatialIndex:!1,wrapX:r.wrapX})),i.cc=[],i.ac=new Aa({stroke:i.Wf}),i.vc=null,i.wh=null,i.setRenderOrder(null),i}return Mw(n,t),n.prototype.strategyFunction=function(t,n){var i=t.slice();return this.Bn&&this.getSource().getWrapX()&&ti(i,this.Bn),this.vc&&(An(this.vc,i,n)?i=this.vc.slice():this.getSource().removeLoadedExtent(this.vc)),[i]},n.prototype.loaderFunction=function(t,n,i){this.vc=t;var r=this.getSource(),s=Wn(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.wh&&Tn(this.wh,s)||(this.wh=s,Vn(s)))){var o=zn(s),u=n*n/4;(!this.Bn||!lr(this.Bn,i))&&this.lc(i),this.dc(s,o,n,u);var e,h=this.Xf.length+this.Yf.length;for(this.Kf&&(h+=this.Xf.length),this.Qf&&(h+=this.Yf.length);h>this.cc.length;)e=new jt,this.cc.push(e);var f=r.getFeaturesCollection();f.clear();var c,a,v=0;for(c=0,a=this.Xf.length;c<a;++c)(e=this.cc[v++]).setGeometry(this.Xf[c]),e.setStyle(this.ac),f.push(e);for(c=0,a=this.Yf.length;c<a;++c)(e=this.cc[v++]).setGeometry(this.Yf[c]),e.setStyle(this.ac),f.push(e)}},n.prototype.wc=function(t,n,i,r,s,o){var u=this.yc(t,n,i,r,o);if(Jn(u.getExtent(),s)){if(this.Kf){var e=this.tc(t);o in this.Kf?this.Kf[o].text=e:this.Kf[o]={geom:new ls([]),text:e}}this.Xf[o++]=u}return o},n.prototype.bc=function(t,n,i,r,s,o){var u=this._c(t,n,i,r,o);if(Jn(u.getExtent(),s)){if(this.Qf){var e=this.nc(t);o in this.Qf?this.Qf[o].text=e:this.Qf[o]={geom:new ls([]),text:e}}this.Yf[o++]=u}return o},n.prototype.hc=function(t){var n=t.frameState.viewState.rotation,i=t.frameState.extent,r=zn(i),s=i;if(n){var o=Zn(i),u=Yn(i),e=Math.abs(Math.cos(n)),h=Math.abs(Math.sin(n)),f=(h*u-e*o)/(h*h-e*e),c=(h*o-e*u)/(h*h-e*e);s=[r[0]-f/2,r[1]-c/2,r[0]+f/2,r[1]+c/2]}var a=0,v=0,l=this.rc<.5,d=this.Bn.getExtent(),w=Zn(d);this.getSource().getWrapX()&&this.Bn.canWrapX()&&!gn(d,i)&&(a=Math.floor((i[0]-d[0])/w),v=Math.ceil((i[2]-d[2])/w),l=l!==Math.abs(n)>Math.PI/2);for(var p=cc(t),y=a;y<=v;++y){var b=this.Xf.length+this.Yf.length,_=void 0,g=void 0,m=void 0,O=void 0;if(this.Kf)for(g=0,m=this.Kf.length;g<m;++g){var M=this.Xf[g];if(n||0!==y)(j=M.clone()).translate(y*w,0),j.rotate(-n,r),(O=this.gc(j,s,g)).rotate(n,r);else O=this.gc(M,i,g);(_=this.cc[b++]).setGeometry(O),_.set("graticule_label",this.Kf[g].text),p.drawFeature(_,this.oc(_))}if(this.Qf&&(y===a&&l||y===v&&!l))for(g=0,m=this.Yf.length;g<m;++g){var j;M=this.Yf[g];if(n||0!==y)(j=M.clone()).translate(y*w,0),j.rotate(-n,r),(O=this.mc(j,s,g)).rotate(n,r);else O=this.mc(M,i,g);(_=this.cc[b++]).setGeometry(O),_.set("graticule_label",this.Qf[g].text),p.drawFeature(_,this.ec(_))}}},n.prototype.dc=function(t,n,i,r){var s=this.Oc(i);if(-1==s)return this.Xf.length=0,this.Yf.length=0,this.Kf&&(this.Kf.length=0),void(this.Qf&&(this.Qf.length=0));var o=!1,u=this.Bn.getExtent(),e=Zn(u);this.getSource().getWrapX()&&this.Bn.canWrapX()&&!gn(u,t)&&(Zn(t)>=e?(t[0]=u[0],t[2]=u[2]):o=!0);var h=[ii(n[0],this.Ff,this.Rf),ii(n[1],this.Df,this.Lf)],f=this.qf(h);isNaN(f[1])&&(f[1]=Math.abs(this.kf)>=Math.abs(this.If)?this.kf:this.If);var c,a,v,l,d=ii(f[0],this.Gf,this.Pf),w=ii(f[1],this.If,this.kf),p=this.Uf,y=t;o||(y=[ii(t[0],this.Ff,this.Rf),ii(t[1],this.Df,this.Lf),ii(t[2],this.Ff,this.Rf),ii(t[3],this.Df,this.Lf)]);var b=Qn(y,this.qf,void 0,8),_=b[3],g=b[2],m=b[1],O=b[0];if(o||(_n(y,this.Jf)&&(O=this.Gf,m=this.If),_n(y,this.Vf)&&(g=this.Pf,m=this.If),_n(y,this.Hf)&&(O=this.Gf,_=this.kf),_n(y,this.$f)&&(g=this.Pf,_=this.kf),_=ii(_,w,this.kf),g=ii(g,d,this.Pf),m=ii(m,this.If,w),O=ii(O,this.Gf,d)),l=ii(d=Math.floor(d/s)*s,this.Gf,this.Pf),a=this.wc(l,m,_,r,t,0),c=0,o)for(;(l-=s)>=O&&c++<p;)a=this.wc(l,m,_,r,t,a);else for(;l!=this.Gf&&c++<p;)l=Math.max(l-s,this.Gf),a=this.wc(l,m,_,r,t,a);if(l=ii(d,this.Gf,this.Pf),c=0,o)for(;(l+=s)<=g&&c++<p;)a=this.wc(l,m,_,r,t,a);else for(;l!=this.Pf&&c++<p;)l=Math.min(l+s,this.Pf),a=this.wc(l,m,_,r,t,a);for(this.Xf.length=a,this.Kf&&(this.Kf.length=a),v=ii(w=Math.floor(w/s)*s,this.If,this.kf),a=this.bc(v,O,g,r,t,0),c=0;v!=this.If&&c++<p;)v=Math.max(v-s,this.If),a=this.bc(v,O,g,r,t,a);for(v=ii(w,this.If,this.kf),c=0;v!=this.kf&&c++<p;)v=Math.min(v+s,this.kf),a=this.bc(v,O,g,r,t,a);this.Yf.length=a,this.Qf&&(this.Qf.length=a)},n.prototype.Oc=function(t){for(var n=this.Zf[0],i=this.Zf[1],r=-1,s=Math.pow(this.zf*t,2),o=[],u=[],e=0,h=this.fc.length;e<h;++e){var f=ii(this.fc[e]/2,0,90),c=ii(i,-90+f,90-f);if(o[0]=n-f,o[1]=c-f,u[0]=n+f,u[1]=c+f,this.Bf(o,o),this.Bf(u,u),Math.pow(u[0]-o[0],2)+Math.pow(u[1]-o[1],2)<=s)break;r=this.fc[e]}return r},n.prototype.yc=function(t,n,i,r,s){var o=mw(t,n,i,this.Bn,r),u=this.Xf[s];return u?(u.setFlatCoordinates(xt,o),u.changed()):(u=new yw(o,xt),this.Xf[s]=u),u},n.prototype.gc=function(t,n,i){var r=t.getFlatCoordinates(),s=1,o=r.length-1;r[s]>r[o]&&(s=o,o=1);var u=Math.max(n[1],r[s]),e=Math.min(n[3],r[o]),h=ii(n[1]+Math.abs(n[1]-n[3])*this.ic,u,e),f=[r[s-1]+(r[o-1]-r[s-1])*(h-r[s])/(r[o]-r[s]),h],c=this.Kf[i].geom;return c.setCoordinates(f),c},n.prototype.getMeridians=function(){return this.Xf},n.prototype._c=function(t,n,i,r,s){var o=Ow(t,n,i,this.Bn,r),u=this.Yf[s];return u?(u.setFlatCoordinates(xt,o),u.changed()):u=new yw(o,xt),u},n.prototype.mc=function(t,n,i){var r=t.getFlatCoordinates(),s=0,o=r.length-2;r[s]>r[o]&&(s=o,o=0);var u=Math.max(n[0],r[s]),e=Math.min(n[2],r[o]),h=ii(n[0]+Math.abs(n[0]-n[2])*this.rc,u,e),f=[h,r[s+1]+(r[o+1]-r[s+1])*(h-r[s])/(r[o]-r[s])],c=this.Qf[i].geom;return c.setCoordinates(f),c},n.prototype.getParallels=function(){return this.Yf},n.prototype.lc=function(t){var n=ur("EPSG:4326"),i=t.getWorldExtent();this.kf=i[3],this.Pf=i[2],this.If=i[1],this.Gf=i[0];var r=wr(t,n);if(this.Gf<this.Pf)this.qf=r;else{var s=this.Gf+this.Pf/2;this.Pf+=360,this.qf=function(t,n,i){for(var o=i||2,u=r(t,n,o),e=0,h=u.length;e<h;e+=o)u[e]<s&&(u[e]+=360);return u}}this.Bf=wr(n,t);var o=Qn([this.Gf,this.If,this.Pf,this.kf],this.Bf,void 0,8);this.Ff=o[0],this.Rf=o[2],this.Df=o[1],this.Lf=o[3],this.Jf=this.Bf([this.Gf,this.If]),this.Vf=this.Bf([this.Pf,this.If]),this.Hf=this.Bf([this.Gf,this.kf]),this.$f=this.Bf([this.Pf,this.kf]),this.Zf=this.qf(zn(t.getExtent())),isNaN(this.Zf[1])&&(this.Zf[1]=Math.abs(this.kf)>=Math.abs(this.If)?this.kf:this.If),this.Bn=t},n}(_w),Ew=new Uint8Array(4),Tw=function(){function t(t,n){this.ru=t;var i=t.getGL();this.Mc=i.createTexture(),this.jc=i.createFramebuffer(),this.po=n||[1,1],this.T=new Uint8Array(0),this.xc=!0,this.Sc()}return t.prototype.setSize=function(t){g(t,this.po)||(this.po[0]=t[0],this.po[1]=t[1],this.Sc())},t.prototype.getSize=function(){return this.po},t.prototype.clearCachedData=function(){this.xc=!0},t.prototype.readAll=function(){if(this.xc){var t=this.po,n=this.ru.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.jc),n.readPixels(0,0,t[0],t[1],n.RGBA,n.UNSIGNED_BYTE,this.T),this.xc=!1}return this.T},t.prototype.readPixel=function(t,n){if(t<0||n<0||t>this.po[0]||n>=this.po[1])return Ew[0]=0,Ew[1]=0,Ew[2]=0,Ew[3]=0,Ew;this.readAll();var i=Math.floor(t)+(this.po[1]-Math.floor(n)-1)*this.po[0];return Ew[0]=this.T[4*i],Ew[1]=this.T[4*i+1],Ew[2]=this.T[4*i+2],Ew[3]=this.T[4*i+3],Ew},t.prototype.getTexture=function(){return this.Mc},t.prototype.getFramebuffer=function(){return this.jc},t.prototype.Sc=function(){var t=this.po,n=this.ru.getGL();this.Mc=this.ru.createTexture(t,null,this.Mc),n.bindFramebuffer(n.FRAMEBUFFER,this.jc),n.viewport(0,0,t[0],t[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.Mc,0),this.T=new Uint8Array(t[0]*t[1]*4)},t}(),Aw=new Blob(['var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};'],{type:"application/javascript"}),Cw=URL.createObjectURL(Aw);var Nw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kw=function(t){function n(n,i){var r=this,s=i.uniforms||{},u=[1,0,0,1,0,0];s[Ka]=u,(r=t.call(this,n,{className:i.className,uniforms:s,postProcesses:i.postProcesses})||this).Ec=-1,r.Tc=new Ua(Pa,Ra),r.Ac=new Ua(Pa,Ra),r.Cc=new Ua(Ia,Ra),r.Fu=r.helper.getProgram(i.fragmentShader,i.vertexShader),r.Nc=!(!i.hitFragmentShader||!i.hitVertexShader),r.kc=r.Nc&&r.helper.getProgram(i.hitFragmentShader,i.hitVertexShader);var e=i.attributes?i.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:sv.FLOAT}})):[];r.attributes=[{name:"a_position",size:2,type:sv.FLOAT},{name:"a_index",size:1,type:sv.FLOAT}].concat(e),r.hitDetectionAttributes=[{name:"a_position",size:2,type:sv.FLOAT},{name:"a_index",size:1,type:sv.FLOAT},{name:"a_hitColor",size:4,type:sv.FLOAT},{name:"a_featureUid",size:1,type:sv.FLOAT}].concat(e),r.customAttributes=i.attributes?i.attributes:[],r.ji=[1/0,1/0,-1/0,-1/0],r.Pc=u,r.Ic=[1,0,0,1,0,0],r.Gc=[1,0,0,1,0,0],r.Rc=new Float32Array(0),r.Lc=new Float32Array(0),r.Fc=r.Nc&&new Tw(r.helper),r.Dc=new Worker(Cw),r.Dc.addEventListener("message",function(t){var n=t.data;if(n.type===hv){var i=n.projectionTransform;n.hitDetection?(this.Ac.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.Ac)):(this.Tc.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.Tc)),this.Cc.fromArrayBuffer(n.indexBuffer),this.helper.flushBufferData(this.Cc),this.Ic=i,nn(this.Gc,this.Ic),n.hitDetection?this.Lc=new Float32Array(t.data.renderInstructions):this.Rc=new Float32Array(t.data.renderInstructions),this.getLayer().changed()}}.bind(r)),r.zc={},r.Uc=0;var h=r.getLayer().getSource();return r.Xc=[q(h,ul,r.Yc,r),q(h,el,r.Wc,r),q(h,fl,r.Bc,r),q(h,hl,r.qc,r)],h.forEachFeature(function(t){this.zc[o(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.Uc++}.bind(r)),r}return Nw(n,t),n.prototype.Yc=function(t){var n=t.feature;this.zc[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()},this.Uc++},n.prototype.Wc=function(t){var n=t.feature;this.zc[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()}},n.prototype.Bc=function(t){var n=t.feature;delete this.zc[o(n)],this.Uc--},n.prototype.qc=function(){this.zc={},this.Uc=0},n.prototype.renderFrame=function(t){this.preRender(t);var n=this.Cc.getSize();this.helper.drawElements(0,n),this.helper.finalizeDraw(t);var i=this.helper.getCanvas(),r=t.layerStatesArray[t.layerIndex].opacity;return r!==parseFloat(i.style.opacity)&&(i.style.opacity=String(r)),this.Nc&&(this.renderHitDetection(t),this.Fc.clearCachedData()),this.postRender(t),i},n.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource(),r=t.viewState,s=!t.viewHints[de]&&!t.viewHints[we],o=!Tn(this.ji,t.extent),u=this.Ec<i.getRevision();if(u&&(this.Ec=i.getRevision()),s&&(o||u)){var e=r.projection,h=r.resolution,f=n instanceof ww?n.getRenderBuffer():0,c=pn(t.extent,f*h);i.loadFeatures(c,h,e),this.Zc(t),this.ji=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.Pc),Zt(this.Pc,this.Gc),this.helper.useProgram(this.Fu),this.helper.prepareDraw(t),this.helper.bindBuffer(this.Tc),this.helper.bindBuffer(this.Cc),this.helper.enableAttributes(this.attributes),!0},n.prototype.Zc=function(t){var n=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,n);var i,r,s=(2+this.customAttributes.length)*this.Uc;if(this.Rc&&this.Rc.length===s||(this.Rc=new Float32Array(s)),this.Nc){var o=(7+this.customAttributes.length)*this.Uc;this.Lc&&this.Lc.length===o||(this.Lc=new Float32Array(o))}var u,e,h,f,c,a=[],v=[],l=0,d=0;for(var w in this.zc)if((r=(i=this.zc[w]).geometry)&&r.getType()===At.POINT){a[0]=r.getFlatCoordinates()[0],a[1]=r.getFlatCoordinates()[1],Ht(n,a),e=d+6,h=void 0,f=void 0,c=void 0,f=256,c=255,(h=v||[])[0]=Math.floor(e/f/f/f)/c,h[1]=Math.floor(e/f/f)%f/c,h[2]=Math.floor(e/f)%f/c,h[3]=e%f/c,u=h,this.Rc[l++]=a[0],this.Rc[l++]=a[1],this.Nc&&(this.Lc[d++]=a[0],this.Lc[d++]=a[1],this.Lc[d++]=u[0],this.Lc[d++]=u[1],this.Lc[d++]=u[2],this.Lc[d++]=u[3],this.Lc[d++]=Number(w));for(var p=void 0,y=0;y<this.customAttributes.length;y++)p=this.customAttributes[y].callback(i.feature,i.properties),this.Rc[l++]=p,this.Nc&&(this.Lc[d++]=p)}var b={type:hv,renderInstructions:this.Rc.buffer,customAttributesCount:this.customAttributes.length};if(b.projectionTransform=n,this.Dc.postMessage(b,[this.Rc.buffer]),this.Rc=null,this.Nc){var _={type:hv,renderInstructions:this.Lc.buffer,customAttributesCount:5+this.customAttributes.length};_.projectionTransform=n,_.hitDetection=!0,this.Dc.postMessage(_,[this.Lc.buffer]),this.Lc=null}},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s){if(mt(this.Nc,66),this.Lc){var o=Ht(n.coordinateToPixelTransform,t.slice()),u=this.Fc.readPixel(o[0]/2,o[1]/2),e=function(t){var n=0,i=256,r=255;return n+=Math.round(t[0]*i*i*i*r),n+=Math.round(t[1]*i*i*r),n+=Math.round(t[2]*i*r),n+Math.round(t[3]*r)}([u[0]/255,u[1]/255,u[2]/255,u[3]/255]),h=this.Lc[e],f=Math.floor(h).toString(),c=this.getLayer().getSource().getFeatureByUid(f);return c?r(c,this.getLayer(),null):void 0}},n.prototype.renderHitDetection=function(t){if(this.Ac.getSize()){this.Fc.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.kc),this.helper.prepareDrawToRenderTarget(t,this.Fc,!0),this.helper.bindBuffer(this.Ac),this.helper.bindBuffer(this.Cc),this.helper.enableAttributes(this.hitDetectionAttributes);var n=this.Cc.getSize();this.helper.drawElements(0,n)}},n.prototype.disposeInternal=function(){this.Dc.terminate(),this.eu=null,this.Xc.forEach((function(t){J(t)})),this.Xc=null,t.prototype.disposeInternal.call(this)},n}(cv),Pw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Iw="blur",Gw="gradient",Rw="radius",Lw=["#00f","#0ff","#0f0","#ff0","#f00"];var Fw=function(t){function n(n){var i=this,r=n||{},s=S({},r);delete s.gradient,delete s.radius,delete s.blur,delete s.weight,(i=t.call(this,s)||this).Jc=null,i.addChangeListener(Gw,i.Vc),i.setGradient(r.gradient?r.gradient:Lw),i.setBlur(void 0!==r.blur?r.blur:15),i.setRadius(void 0!==r.radius?r.radius:8);var o=r.weight?r.weight:"weight";return i.Hc="string"==typeof o?function(t){return t.get(o)}:o,i.setRenderOrder(null),i}return Pw(n,t),n.prototype.getBlur=function(){return this.get(Iw)},n.prototype.getGradient=function(){return this.get(Gw)},n.prototype.getRadius=function(){return this.get(Rw)},n.prototype.Vc=function(){this.Jc=function(t){for(var n=1,i=256,r=co(n,i),s=r.createLinearGradient(0,0,n,i),o=1/(t.length-1),u=0,e=t.length;u<e;++u)s.addColorStop(u*o,t[u]);return r.fillStyle=s,r.fillRect(0,0,n,i),r.canvas}(this.getGradient())},n.prototype.setBlur=function(t){this.set(Iw,t)},n.prototype.setGradient=function(t){this.set(Gw,t)},n.prototype.setRadius=function(t){this.set(Rw,t)},n.prototype.createRenderer=function(){return new kw(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var n=this.Hc(t);return void 0!==n?ii(n,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(Rw)+this.get(Iw))}.bind(this),u_blurSlope:function(){return this.get(Rw)/Math.max(1,this.get(Iw))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.Jc}.bind(this)}}]})},n.prototype.renderDeclutter=function(){},n}(_w),Dw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),zw=function(t){function n(n){return t.call(this,n)||this}return Dw(n,t),n.prototype.createRenderer=function(){return new ed(this)},n}(hw),Uw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Xw=function(t){function n(n){return t.call(this,n)||this}return Uw(n,t),n.prototype.createRenderer=function(){return new cd(this)},n}(vw),Yw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ww=function(t){function n(n){var i=this,r=n||{},s=S({},r);return delete s.imageRatio,(i=t.call(this,s)||this).$c=void 0!==r.imageRatio?r.imageRatio:1,i}return Yw(n,t),n.prototype.getImageRatio=function(){return this.$c},n.prototype.createRenderer=function(){return new Qd(this)},n}(ww),Bw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qw="addfeatures",Zw=function(t){function n(n,i,r,s){var o=t.call(this,n)||this;return o.features=r,o.file=i,o.projection=s,o}return Bw(n,t),n}(a),Jw=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{handleEvent:O})||this).on,i.once,i.un,i.Kc=!1,i.Qc=[];for(var s=r.formatConstructors?r.formatConstructors:[],o=0,u=s.length;o<u;++o){var e=s[o];"function"==typeof e&&(e=new e),i.Qc.push(e),i.Kc=i.Kc||e.getType()===Lf}return i.Bn=r.projection?ur(r.projection):null,i.ta=null,i.na=r.source||null,i.target=r.target?r.target:null,i}return Bw(n,t),n.prototype.ia=function(t,n){var i,r=n.target.result,s=this.getMap(),o=this.Bn;o||(o=s.getView().getProjection());for(var u=this.Qc,e=0,h=u.length;e<h;++e){var f=u[e],c=r;this.Kc&&f.getType()!==Lf&&(void 0===i&&(i=(new TextDecoder).decode(r)),c=i);var a=this.ra(f,c,{featureProjection:o});if(a&&a.length>0){this.na&&(this.na.clear(),this.na.addFeatures(a)),this.dispatchEvent(new Zw(qw,t,a,o));break}}},n.prototype.sa=function(){var t=this.getMap();if(t){var n=this.target?this.target:t.getViewport();this.ta=[q(n,D,this.handleDrop,this),q(n,L,this.handleStop,this),q(n,F,this.handleStop,this),q(n,D,this.handleStop,this)]}},n.prototype.setActive=function(n){!this.getActive()&&n&&this.sa(),this.getActive()&&!n&&this.oa(),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.oa(),t.prototype.setMap.call(this,n),this.getActive()&&this.sa()},n.prototype.ra=function(t,n,i){try{return t.readFeatures(n,i)}catch(t){return null}},n.prototype.oa=function(){this.ta&&(this.ta.forEach(J),this.ta=null)},n.prototype.handleDrop=function(t){for(var n=t.dataTransfer.files,i=0,r=n.length;i<r;++i){var s=n.item(i),o=new FileReader;o.addEventListener(X,this.ia.bind(this,s)),this.Kc?o.readAsArrayBuffer(s):o.readAsText(s)}},n.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},n}(rh),Vw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Hw=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).mr=r.condition?r.condition:_h,i.jr=void 0,i.ua=void 0,i.ns=0,i.cr=void 0!==r.duration?r.duration:400,i}return Vw(n,t),n.prototype.handleDragEvent=function(t){if(mh(t)){var n=t.map,i=n.getSize(),r=t.pixel,s=r[0]-i[0]/2,o=i[1]/2-r[1],u=Math.atan2(o,s),e=Math.sqrt(s*s+o*o),h=n.getView();if(void 0!==this.jr){var f=this.jr-u;h.adjustRotationInternal(f)}this.jr=u,void 0!==this.ua&&h.adjustResolutionInternal(this.ua/e),void 0!==this.ua&&(this.ns=this.ua/e),this.ua=e}},n.prototype.handleUpEvent=function(t){if(!mh(t))return!0;var n=t.map.getView(),i=this.ns>1?1:-1;return n.endInteraction(this.cr,i),this.ns=0,!1},n.prototype.handleDownEvent=function(t){return!!mh(t)&&(!!this.mr(t)&&(t.map.getView().beginInteraction(),this.jr=void 0,this.ua=void 0,!0))},n}(hh),$w=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Kw=function(t){function n(n,i,r){var s=t.call(this)||this;if(void 0!==r&&void 0===i)s.setFlatCoordinates(r,n);else{var o=i||0;s.setCenterAndRadius(n,o,r)}return s}return $w(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){var s=this.flatCoordinates,o=t-s[0],u=n-s[1],e=o*o+u*u;if(e<r){if(0===e)for(var h=0;h<this.stride;++h)i[h]=s[h];else{var f=this.getRadius()/Math.sqrt(e);i[0]=s[0]+f*o,i[1]=s[1]+f*u;for(h=2;h<this.stride;++h)i[h]=s[h]}return i.length=this.stride,e}return r},n.prototype.containsXY=function(t,n){var i=this.flatCoordinates,r=t-i[0],s=n-i[1];return r*r+s*s<=this.ea()},n.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.computeExtent=function(t){var n=this.flatCoordinates,i=n[this.stride]-n[0];return jn(n[0]-i,n[1]-i,n[0]+i,n[1]+i,t)},n.prototype.getRadius=function(){return Math.sqrt(this.ea())},n.prototype.ea=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+n*n},n.prototype.getType=function(){return At.CIRCLE},n.prototype.intersectsExtent=function(t){if(Jn(t,this.getExtent())){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||(t[1]<=n[1]&&t[3]>=n[1]||Rn(t,this.intersectsCoordinate.bind(this)))}return!1},n.prototype.setCenter=function(t){var n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],r=t.slice();r[n]=r[0]+i;for(var s=1;s<n;++s)r[n+s]=t[s];this.setFlatCoordinates(this.layout,r),this.changed()},n.prototype.setCenterAndRadius=function(t,n,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,s=Zr(r,0,t,this.stride);r[s++]=r[0]+n;for(var o=1,u=this.stride;o<u;++o)r[s++]=r[o];r.length=s,this.changed()},n.prototype.getCoordinates=function(){return null},n.prototype.setCoordinates=function(t,n){},n.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},n.prototype.rotate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(Cr(i,0,i.length,r,t,n,i)),this.changed()},n.prototype.translate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(kr(i,0,i.length,r,t,n,i)),this.changed()},n}(Dr);Kw.prototype.transform;var Qw=Kw,tp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),np=function(t){function n(n,i,r){var s=t.call(this)||this;if(s.nt=[],s.K=-1,s.tt=-1,Array.isArray(n[0]))s.setCoordinates(n,i);else if(void 0!==i&&r)s.setFlatCoordinates(i,n),s.nt=r;else{for(var o=s.getLayout(),u=n,e=[],h=[],f=0,c=u.length;f<c;++f){var a=u[f];0===f&&(o=a.getLayout()),_(e,a.getFlatCoordinates()),h.push(e.length)}s.setFlatCoordinates(o,e),s.nt=h}return s}return tp(n,t),n.prototype.appendLineString=function(t){this.flatCoordinates?_(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.nt.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.nt.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.tt!=this.getRevision()&&(this.K=Math.sqrt(Xr(this.flatCoordinates,0,this.nt,this.stride,0)),this.tt=this.getRevision()),Br(this.flatCoordinates,0,this.nt,this.stride,this.K,!1,t,n,i,r))},n.prototype.getCoordinateAtM=function(t,n,i){if(this.layout!=Et&&this.layout!=Tt||0===this.flatCoordinates.length)return null;var r=void 0!==n&&n,s=void 0!==i&&i;return iw(this.flatCoordinates,0,this.nt,this.stride,t,r,s)},n.prototype.getCoordinates=function(){return os(this.flatCoordinates,0,this.nt,this.stride)},n.prototype.getEnds=function(){return this.nt},n.prototype.getLineString=function(t){return t<0||this.nt.length<=t?null:new yw(this.flatCoordinates.slice(0===t?0:this.nt[t-1],this.nt[t]),this.layout)},n.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,n=this.nt,i=this.layout,r=[],s=0,o=0,u=n.length;o<u;++o){var e=n[o],h=new yw(t.slice(s,e),i);r.push(h),s=e}return r},n.prototype.getFlatMidpoints=function(){for(var t=[],n=this.flatCoordinates,i=0,r=this.nt,s=this.stride,o=0,u=r.length;o<u;++o){var e=r[o];_(t,tw(n,i,e,s,.5)),i=e}return t},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=Kr(this.flatCoordinates,0,this.nt,this.stride,t,i,0,r),new n(i,xt,r)},n.prototype.getType=function(){return At.MULTI_LINE_STRING},n.prototype.intersectsExtent=function(t){return Os(this.flatCoordinates,0,this.nt,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Vr(this.flatCoordinates,0,t,this.stride,this.nt);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(Dr),ip=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rp=function(t){function n(n,i){var r=t.call(this)||this;return i&&!Array.isArray(n[0])?r.setFlatCoordinates(i,n):r.setCoordinates(n,i),r}return ip(n,t),n.prototype.appendPoint=function(t){this.flatCoordinates?_(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){if(r<bn(this.getExtent(),t,n))return r;for(var s=this.flatCoordinates,o=this.stride,u=0,e=s.length;u<e;u+=o){var h=ui(t,n,s[u],s[u+1]);if(h<r){r=h;for(var f=0;f<o;++f)i[f]=s[u+f];i.length=o}}return r},n.prototype.getCoordinates=function(){return ss(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getPoint=function(t){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new ls(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},n.prototype.getPoints=function(){for(var t=this.flatCoordinates,n=this.layout,i=this.stride,r=[],s=0,o=t.length;s<o;s+=i){var u=new ls(t.slice(s,s+i),n);r.push(u)}return r},n.prototype.getType=function(){return At.MULTI_POINT},n.prototype.intersectsExtent=function(t){for(var n=this.flatCoordinates,i=this.stride,r=0,s=n.length;r<s;r+=i){if(mn(t,n[r],n[r+1]))return!0}return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jr(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Dr),sp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),op=function(t){function n(n,i,r){var s=t.call(this)||this;if(s.ha=[],s.fa=-1,s.jf=null,s.K=-1,s.tt=-1,s.st=-1,s.ot=null,!r&&!Array.isArray(n[0])){for(var o=s.getLayout(),u=n,e=[],h=[],f=0,c=u.length;f<c;++f){var a=u[f];0===f&&(o=a.getLayout());for(var v=e.length,l=a.getEnds(),d=0,w=l.length;d<w;++d)l[d]+=v;_(e,a.getFlatCoordinates()),h.push(l)}i=o,n=e,r=h}return void 0!==i&&r?(s.setFlatCoordinates(i,n),s.ha=r):s.setCoordinates(n,i),s}return sp(n,t),n.prototype.appendPolygon=function(t){var n;if(this.flatCoordinates){var i=this.flatCoordinates.length;_(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,s=(n=t.getEnds().slice()).length;r<s;++r)n[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.ha.push();this.ha.push(n),this.changed()},n.prototype.clone=function(){for(var t=this.ha.length,i=new Array(t),r=0;r<t;++r)i[r]=this.ha[r].slice();var s=new n(this.flatCoordinates.slice(),this.layout,i);return s.applyProperties(this),s},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.tt!=this.getRevision()&&(this.K=Math.sqrt(Yr(this.flatCoordinates,0,this.ha,this.stride,0)),this.tt=this.getRevision()),qr(this.getOrientedFlatCoordinates(),0,this.ha,this.stride,this.K,!0,t,n,i,r))},n.prototype.containsXY=function(t,n){return ys(this.getOrientedFlatCoordinates(),0,this.ha,this.stride,t,n)},n.prototype.getArea=function(){return fs(this.getOrientedFlatCoordinates(),0,this.ha,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?Ns(n=this.getOrientedFlatCoordinates().slice(),0,this.ha,this.stride,t):n=this.flatCoordinates,us(n,0,this.ha,this.stride)},n.prototype.getEndss=function(){return this.ha},n.prototype.getFlatInteriorPoints=function(){if(this.fa!=this.getRevision()){var t=rw(this.flatCoordinates,0,this.ha,this.stride);this.jf=_s(this.getOrientedFlatCoordinates(),0,this.ha,this.stride,t),this.fa=this.getRevision()}return this.jf},n.prototype.getInteriorPoints=function(){return new rp(this.getFlatInteriorPoints().slice(),Et)},n.prototype.getOrientedFlatCoordinates=function(){if(this.st!=this.getRevision()){var t=this.flatCoordinates;As(t,0,this.ha,this.stride)?this.ot=t:(this.ot=t.slice(),this.ot.length=Ns(this.ot,0,this.ha,this.stride)),this.st=this.getRevision()}return this.ot},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=rs(this.flatCoordinates,0,this.ha,this.stride,Math.sqrt(t),i,0,r),new n(i,xt,r)},n.prototype.getPolygon=function(t){if(t<0||this.ha.length<=t)return null;var n;if(0===t)n=0;else{var i=this.ha[t-1];n=i[i.length-1]}var r=this.ha[t].slice(),s=r[r.length-1];if(0!==n)for(var o=0,u=r.length;o<u;++o)r[o]-=n;return new Is(this.flatCoordinates.slice(n,s),this.layout,r)},n.prototype.getPolygons=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.ha,r=[],s=0,o=0,u=i.length;o<u;++o){var e=i[o].slice(),h=e[e.length-1];if(0!==s)for(var f=0,c=e.length;f<c;++f)e[f]-=s;var a=new Is(n.slice(s,h),t,e);r.push(a),s=h}return r},n.prototype.getType=function(){return At.MULTI_POLYGON},n.prototype.intersectsExtent=function(t){return xs(this.getOrientedFlatCoordinates(),0,this.ha,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Hr(this.flatCoordinates,0,t,this.stride,this.ha);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},n}(Dr),up=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ep="Point",hp="LineString",fp="Polygon",cp="Circle",ap="drawstart",vp="drawend",lp="drawabort",dp=function(t){function n(n,i){var r=t.call(this,n)||this;return r.feature=i,r}return up(n,t),n}(a);var wp=function(t){function n(n){var i=this,r=n;r.stopDown||(r.stopDown=M),(i=t.call(this,r)||this).on,i.once,i.un,i.ca=!1,i.aa=null,i.va,i.la,i.da,i.wa=!1,i.na=n.source?n.source:null,i.pa=n.features?n.features:null,i.ya=n.snapTolerance?n.snapTolerance:12,i.Of=n.type,i.Wr=function(t){switch(t){case At.POINT:case At.MULTI_POINT:return ep;case At.LINE_STRING:case At.MULTI_LINE_STRING:return hp;case At.POLYGON:case At.MULTI_POLYGON:return fp;case At.CIRCLE:return cp;default:throw new Error("Invalid type: "+t)}}(i.Of),i.ba=!!n.stopClick,i._a=n.minPoints?n.minPoints:i.Wr===fp?3:2,i.ga=i.Wr===cp?2:n.maxPoints?n.maxPoints:1/0,i.ma=n.finishCondition?n.finishCondition:O;var s,o=n.geometryFunction;if(!o){var u,e=i.Wr;if(e===cp)o=function(t,n,i){var r=n||new Qw([NaN,NaN]),s=Or(t[0],i),o=Hi(s,Or(t[t.length-1],i));r.setCenterAndRadius(s,Math.sqrt(o));var u=gr();return u&&r.transform(i,u),r};else e===ep?u=ls:e===hp?u=yw:e===fp&&(u=Is),o=function(t,n,i){return n?e===fp?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new u(t),n}}return i.Wo=o,i.Oa=void 0!==n.dragVertexDelay?n.dragVertexDelay:500,i.Ma=null,i.ja=null,i.xa=null,i.Sa=null,i.Ea=null,i.Ta=null,i.Aa=n.clickTolerance?n.clickTolerance*n.clickTolerance:36,i.Ca=new _w({source:new wl({useSpatialIndex:!1,wrapX:!!n.wrapX&&n.wrapX}),style:n.style?n.style:(s=Ea(),function(t,n){return s[t.getGeometry().getType()]}),updateWhileInteracting:!0}),i.N=n.geometryName,i.mr=n.condition?n.condition:bh,i.Na,n.freehand?i.Na=dh:i.Na=n.freehandCondition?n.freehandCondition:_h,i.addChangeListener(Qe,i.ka),i}return up(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),this.ka()},n.prototype.getOverlay=function(){return this.Ca},n.prototype.handleEvent=function(n){n.originalEvent.type===I&&n.originalEvent.preventDefault(),this.wa=this.Wr!==ep&&this.Na(n);var i=n.type===Vu.POINTERMOVE,r=!0;!this.wa&&this.la&&n.type===Vu.POINTERDRAG&&(Date.now()-this.la>=this.Oa?(this.aa=n.pixel,this.ca=!this.wa,i=!0):this.la=void 0,this.ca&&void 0!==this.va&&(clearTimeout(this.va),this.va=void 0));return this.wa&&n.type===Vu.POINTERDRAG&&null!==this.ja?(this.Pa(n.coordinate),r=!1):this.wa&&n.type===Vu.POINTERDOWN?r=!1:i&&this.getPointerCount()<2?(r=n.type===Vu.POINTERMOVE)&&this.wa?(this.xn(n),this.ca&&n.originalEvent.preventDefault()):("mouse"===n.originalEvent.pointerType||n.type===Vu.POINTERDRAG&&void 0===this.va)&&this.xn(n):n.type===Vu.DBLCLICK&&(r=!1),t.prototype.handleEvent.call(this,n)&&r},n.prototype.handleDownEvent=function(t){return this.ca=!this.wa,this.wa?(this.aa=t.pixel,this.Ma||this.Ia(t.coordinate),!0):this.mr(t)?(this.la=Date.now(),this.va=setTimeout(function(){this.xn(new Ju(Vu.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.Oa),this.aa=t.pixel,!0):(this.la=void 0,!1)},n.prototype.handleUpEvent=function(t){var n=!0;if(0===this.getPointerCount())if(this.va&&(clearTimeout(this.va),this.va=void 0),this.xn(t),this.ca){var i=!this.Ma;i&&this.Ia(t.coordinate),!i&&this.wa?this.finishDrawing():this.wa||i&&this.Wr!==ep||(this.Ga(t.pixel)?this.ma(t)&&this.finishDrawing():this.Pa(t.coordinate)),n=!1}else this.wa&&this.abortDrawing();return!n&&this.ba&&t.preventDefault(),n},n.prototype.xn=function(t){if(this.da=t.originalEvent.pointerType,this.aa&&(!this.wa&&this.ca||this.wa&&!this.ca)){var n=this.aa,i=t.pixel,r=n[0]-i[0],s=n[1]-i[1],o=r*r+s*s;if(this.ca=this.wa?o>this.Aa:o<=this.Aa,!this.ca)return}this.Ma?this.Ra(t.coordinate):this.La(t.coordinate.slice())},n.prototype.Ga=function(t){var n=!1;if(this.ja){var i=!1,r=[this.Ma],s=this.Wr;if(s===ep)n=!0;else if(s===cp)n=2===this.Sa.length;else if(s===hp)i=this.Sa.length>this._a;else if(s===fp){var o=this.Sa;i=o[0].length>this._a,r=[o[0][0],o[0][o[0].length-2]]}if(i)for(var u=this.getMap(),e=0,h=r.length;e<h;e++){var f=r[e],c=u.getPixelFromCoordinate(f),a=t[0]-c[0],v=t[1]-c[1],l=this.wa?1:this.ya;if(n=Math.sqrt(a*a+v*v)<=l){this.Ma=f;break}}}return n},n.prototype.La=function(t){this.xa?this.xa.getGeometry().setCoordinates(t):(this.xa=new jt(new ls(t)),this.Fa())},n.prototype.Da=function(t){this.Ea||(this.Ea=new jt);var n=t.getLinearRing(0),i=this.Ea.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new yw(n.getFlatCoordinates(),n.getLayout()),this.Ea.setGeometry(i))},n.prototype.Ia=function(t){var n=this.getMap().getView().getProjection();this.Ma=t,this.Wr===ep?this.Sa=t.slice():this.Wr===fp?(this.Sa=[[t.slice(),t.slice()]],this.Ta=this.Sa[0]):this.Sa=[t.slice(),t.slice()],this.Ta&&(this.Ea=new jt(new yw(this.Ta)));var i=this.Wo(this.Sa,void 0,n);this.ja=new jt,this.N&&this.ja.setGeometryName(this.N),this.ja.setGeometry(i),this.Fa(),this.dispatchEvent(new dp(ap,this.ja))},n.prototype.Ra=function(t){var n,i,r=this.getMap(),s=this.ja.getGeometry(),o=r.getView().getProjection();(this.Wr===ep?i=this.Sa:this.Wr===fp?(i=(n=this.Sa[0])[n.length-1],this.Ga(r.getPixelFromCoordinate(t))&&(t=this.Ma.slice())):i=(n=this.Sa)[n.length-1],i[0]=t[0],i[1]=t[1],this.Wo(this.Sa,s,o),this.xa)&&this.xa.getGeometry().setCoordinates(t);if(s.getType()===At.POLYGON&&this.Wr!==fp)this.Da(s);else if(this.Ta){this.Ea.getGeometry().setCoordinates(this.Ta)}this.Fa()},n.prototype.Pa=function(t){var n,i,r=this.ja.getGeometry(),s=this.getMap().getView().getProjection(),o=this.Wr;o===hp||o===cp?(this.Ma=t.slice(),(i=this.Sa).length>=this.ga&&(this.wa?i.pop():n=!0),i.push(t.slice()),this.Wo(i,r,s)):o===fp&&((i=this.Sa[0]).length>=this.ga&&(this.wa?i.pop():n=!0),i.push(t.slice()),n&&(this.Ma=i[0]),this.Wo(this.Sa,r,s)),this.La(t.slice()),this.Fa(),n&&this.finishDrawing()},n.prototype.removeLastPoint=function(){if(this.ja){var t,n=this.ja.getGeometry(),i=this.getMap().getView().getProjection(),r=this.Wr;if(r===hp||r===cp){if((t=this.Sa).splice(-2,1),t.length>=2){this.Ma=t[t.length-2].slice();var s=this.Ma.slice();t[t.length-1]=s,this.La(s)}this.Wo(t,n,i),n.getType()===At.POLYGON&&this.Ea&&this.Da(n)}else if(r===fp){(t=this.Sa[0]).splice(-2,1);var o=this.Ea.getGeometry();if(t.length>=2){s=t[t.length-2].slice();t[t.length-1]=s,this.La(s)}o.setCoordinates(t),this.Wo(this.Sa,n,i)}1===t.length&&this.abortDrawing(),this.Fa()}},n.prototype.finishDrawing=function(){var t=this.za();if(t){var n=this.Sa,i=t.getGeometry(),r=this.getMap().getView().getProjection();this.Wr===hp?(n.pop(),this.Wo(n,i,r)):this.Wr===fp&&(n[0].pop(),this.Wo(n,i,r),n=i.getCoordinates()),this.Of===At.MULTI_POINT?t.setGeometry(new rp([n])):this.Of===At.MULTI_LINE_STRING?t.setGeometry(new np([n])):this.Of===At.MULTI_POLYGON&&t.setGeometry(new op([n])),this.dispatchEvent(new dp(vp,t)),this.pa&&this.pa.push(t),this.na&&this.na.addFeature(t)}},n.prototype.za=function(){this.Ma=null;var t=this.ja;return this.ja=null,this.xa=null,this.Ea=null,this.Ca.getSource().clear(!0),t},n.prototype.abortDrawing=function(){var t=this.za();t&&this.dispatchEvent(new dp(lp,t))},n.prototype.appendCoordinates=function(t){var n,i=this.Wr,r=!this.ja;if(r&&this.Ia(t[0]),i===hp||i===cp)n=this.Sa;else{if(i!==fp)return;n=this.Sa&&this.Sa.length?this.Sa[0]:[]}r&&n.shift(),n.pop();for(var s=0;s<t.length;s++)this.Pa(t[s]);var o=t[t.length-1];this.Pa(o),this.Ra(o)},n.prototype.extend=function(t){var n=t.getGeometry();this.ja=t,this.Sa=n.getCoordinates();var i=this.Sa[this.Sa.length-1];this.Ma=i.slice(),this.Sa.push(i.slice()),this.xa=new jt(new ls(i)),this.Fa(),this.dispatchEvent(new dp(ap,this.ja))},n.prototype.Fa=function(){var t=[];this.ja&&t.push(this.ja),this.Ea&&t.push(this.Ea),this.xa&&t.push(this.xa);var n=this.Ca.getSource();n.clear(!0),n.addFeatures(t)},n.prototype.ka=function(){var t=this.getMap(),n=this.getActive();t&&n||this.abortDrawing(),this.Ca.setMap(n?t:null)},n}(hh),pp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yp="extentchanged",bp=function(t){function n(n){var i=t.call(this,yp)||this;return i.extent=n,i}return pp(n,t),n}(a);function _p(){var t=Ea();return function(n,i){return t[At.POINT]}}function gp(t){return function(n){return wn([t,n])}}function mp(t,n){return t[0]==n[0]?function(i){return wn([t,[i[0],n[1]]])}:t[1]==n[1]?function(i){return wn([t,[n[0],i[1]]])}:null}var Op=function(t){function n(n){var i,r=this,s=n||{};return(r=t.call(this,s)||this).on,r.once,r.un,r.mr=s.condition?s.condition:dh,r.D=null,r.Ua=null,r.Xa=void 0!==s.pixelTolerance?s.pixelTolerance:10,r.Ya=!1,r.Wa=null,r.Ba=null,n||(n={}),r.qa=new _w({source:new wl({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.boxStyle?n.boxStyle:(i=Ea(),function(t,n){return i[At.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.Za=new _w({source:new wl({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.pointerStyle?n.pointerStyle:_p(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.extent&&r.setExtent(n.extent),r}return pp(n,t),n.prototype.Ja=function(t,n){var i=n.getCoordinateFromPixelInternal(t),r=this.getExtentInternal();if(r){var s=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);s.sort((function(t,n){return Ki(i,t)-Ki(i,n)}));var o=s[0],u=Wi(i,o),e=n.getPixelFromCoordinateInternal(u);if($i(t,e)<=this.Xa){var h=n.getPixelFromCoordinateInternal(o[0]),f=n.getPixelFromCoordinateInternal(o[1]),c=Hi(e,h),a=Hi(e,f),v=Math.sqrt(Math.min(c,a));return this.Ya=v<=this.Xa,this.Ya&&(u=c>a?o[1]:o[0]),u}}return null},n.prototype.xn=function(t){var n=t.pixel,i=t.map,r=this.Ja(n,i);r||(r=i.getCoordinateFromPixelInternal(n)),this.Va(r)},n.prototype.Ha=function(t){var n=this.Wa;return n?t?n.setGeometry(Rs(t)):n.setGeometry(void 0):(n=new jt(t?Rs(t):{}),this.Wa=n,this.qa.getSource().addFeature(n)),n},n.prototype.Va=function(t){var n=this.Ba;n?n.getGeometry().setCoordinates(t):(n=new jt(new ls(t)),this.Ba=n,this.Za.getSource().addFeature(n));return n},n.prototype.handleEvent=function(n){return!n.originalEvent||!this.mr(n)||(n.type!=Vu.POINTERMOVE||this.handlingDownUpSequence||this.xn(n),t.prototype.handleEvent.call(this,n),!1)},n.prototype.handleDownEvent=function(t){var n=t.pixel,i=t.map,r=this.getExtentInternal(),s=this.Ja(n,i),o=function(t){var n=null,i=null;return t[0]==r[0]?n=r[2]:t[0]==r[2]&&(n=r[0]),t[1]==r[1]?i=r[3]:t[1]==r[3]&&(i=r[1]),null!==n&&null!==i?[n,i]:null};if(s&&r){var u=s[0]==r[0]||s[0]==r[2]?s[0]:null,e=s[1]==r[1]||s[1]==r[3]?s[1]:null;null!==u&&null!==e?this.Ua=gp(o(s)):null!==u?this.Ua=mp(o([u,r[1]]),o([u,r[3]])):null!==e&&(this.Ua=mp(o([r[0],e]),o([r[2],e])))}else s=i.getCoordinateFromPixelInternal(n),this.setExtent([s[0],s[1],s[0],s[1]]),this.Ua=gp(s);return!0},n.prototype.handleDragEvent=function(t){if(this.Ua){var n=t.coordinate;this.setExtent(this.Ua(n)),this.Va(n)}},n.prototype.handleUpEvent=function(t){this.Ua=null;var n=this.getExtentInternal();return n&&0!==Ln(n)||this.setExtent(null),!1},n.prototype.setMap=function(n){this.qa.setMap(n),this.Za.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getExtent=function(){return Mr(this.getExtentInternal(),this.getMap().getView().getProjection())},n.prototype.getExtentInternal=function(){return this.D},n.prototype.setExtent=function(t){this.D=t||null,this.Ha(t),this.dispatchEvent(new bp(this.D))},n}(hh);function Mp(t){return(Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var jp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xp=[0,0,0,0],Sp=[],Ep="modifystart",Tp="modifyend",Ap=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.features=i,s.mapBrowserEvent=r,s}return jp(n,t),n}(a);function Cp(t,n){return t.index-n.index}function Np(t,n,i){var r=n.geometry;if(r.getType()===At.CIRCLE){var s=r;if(1===n.index){var o=gr();o&&(s=s.clone().transform(o,i));var u=Hi(s.getCenter(),Or(t,i)),e=Math.sqrt(u)-s.getRadius();return e*e}}var h=Or(t,i);return Sp[0]=Or(n.segment[0],i),Sp[1]=Or(n.segment[1],i),Ki(h,Sp)}function kp(t,n,i){var r=n.geometry;if(r.getType()===At.CIRCLE&&1===n.index){var s=r,o=gr();return o&&(s=s.clone().transform(o,i)),mr(s.getClosestPoint(Or(t,i)),i)}var u=Or(t,i);return Sp[0]=Or(n.segment[0],i),Sp[1]=Or(n.segment[1],i),mr(Wi(u,Sp),i)}var Pp=function(t){function n(n){var i,r,s=t.call(this,n)||this;if(s.on,s.once,s.un,s.$a=s.pe.bind(s),s.mr=n.condition?n.condition:Oh,s.Ka=function(t){return ch(t)&&yh(t)},s.Qa=n.deleteCondition?n.deleteCondition:s.Ka,s.tv=n.insertVertexCondition?n.insertVertexCondition:dh,s.Ba=null,s.nv=null,s.iv=[0,0],s.rv=!1,s.sv=null,s.ov=new il,s.Xa=void 0!==n.pixelTolerance?n.pixelTolerance:10,s.Ya=!1,s.uv=!1,s.ev=[],s.Ca=new _w({source:new wl({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.style?n.style:(i=Ea(),function(t,n){return i[At.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),s.hv={Point:s.fv.bind(s),LineString:s.cv.bind(s),LinearRing:s.cv.bind(s),Polygon:s.av.bind(s),MultiPoint:s.vv.bind(s),MultiLineString:s.lv.bind(s),MultiPolygon:s.dv.bind(s),Circle:s.wv.bind(s),GeometryCollection:s.pv.bind(s)},s.na=null,s.yv=null,n.features?r=n.features:n.source&&(s.na=n.source,r=new et(s.na.getFeatures()),s.na.addEventListener(ul,s.bv.bind(s)),s.na.addEventListener(fl,s._v.bind(s))),!r)throw new Error("The modify interaction requires features, a source or a layer");return n.hitDetection&&(s.yv=n.hitDetection),s.pa=r,s.pa.forEach(s.gv.bind(s)),s.pa.addEventListener(it,s.mv.bind(s)),s.pa.addEventListener(rt,s.Ov.bind(s)),s.Mv=null,s.wr=[0,0],s.jv=void 0===n.snapToPointer?!s.yv:n.snapToPointer,s}return jp(n,t),n.prototype.gv=function(t){var n=t.getGeometry();if(n){var i=this.hv[n.getType()];i&&i(t,n)}var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.xv(this.iv,r),t.addEventListener(k,this.$a)},n.prototype.Sv=function(t,n){if(!this.sv){this.sv=new et;for(var i=this.sv.getArray(),r=0,s=n.length;r<s;++r)for(var o=n[r],u=0,e=o.length;u<e;++u){var h=o[u].feature;h&&-1===i.indexOf(h)&&this.sv.push(h)}0===this.sv.getLength()?this.sv=null:this.dispatchEvent(new Ap(Ep,this.sv,t))}},n.prototype.Ev=function(t){this.Tv(t),this.Ba&&0===this.pa.getLength()&&(this.Ca.getSource().removeFeature(this.Ba),this.Ba=null),t.removeEventListener(k,this.$a)},n.prototype.Tv=function(t){var n=this.ov,i=[];n.forEach((function(n){t===n.feature&&i.push(n)}));for(var r=i.length-1;r>=0;--r){for(var s=i[r],o=this.ev.length-1;o>=0;--o)this.ev[o][0]===s&&this.ev.splice(o,1);n.remove(s)}},n.prototype.setActive=function(n){this.Ba&&!n&&(this.Ca.getSource().removeFeature(this.Ba),this.Ba=null),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.Ca.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getOverlay=function(){return this.Ca},n.prototype.bv=function(t){t.feature&&this.pa.push(t.feature)},n.prototype._v=function(t){t.feature&&this.pa.remove(t.feature)},n.prototype.mv=function(t){this.gv(t.element)},n.prototype.pe=function(t){if(!this.uv){var n=t.target;this.Ev(n),this.gv(n)}},n.prototype.Ov=function(t){var n=t.element;this.Ev(n)},n.prototype.fv=function(t,n){var i=n.getCoordinates(),r={feature:t,geometry:n,segment:[i,i]};this.ov.insert(n.getExtent(),r)},n.prototype.vv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r){var o=i[r],u={feature:t,geometry:n,depth:[r],index:r,segment:[o,o]};this.ov.insert(n.getExtent(),u)}},n.prototype.cv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length-1;r<s;++r){var o=i.slice(r,r+2),u={feature:t,geometry:n,index:r,segment:o};this.ov.insert(wn(o),u)}},n.prototype.lv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length-1;u<e;++u){var h=o.slice(u,u+2),f={feature:t,geometry:n,depth:[r],index:u,segment:h};this.ov.insert(wn(h),f)}},n.prototype.av=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length-1;u<e;++u){var h=o.slice(u,u+2),f={feature:t,geometry:n,depth:[r],index:u,segment:h};this.ov.insert(wn(h),f)}},n.prototype.dv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length;u<e;++u)for(var h=o[u],f=0,c=h.length-1;f<c;++f){var a=h.slice(f,f+2),v={feature:t,geometry:n,depth:[u,r],index:f,segment:a};this.ov.insert(wn(a),v)}},n.prototype.wv=function(t,n){var i=n.getCenter(),r={feature:t,geometry:n,index:0,segment:[i,i]},s={feature:t,geometry:n,index:1,segment:[i,i]},o=[r,s];r.featureSegments=o,s.featureSegments=o,this.ov.insert(Sn(i),r);var u=n,e=gr();if(e&&this.getMap()){var h=this.getMap().getView().getProjection();u=Ls(u=u.clone().transform(e,h)).transform(h,e)}this.ov.insert(u.getExtent(),s)},n.prototype.pv=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var s=i[r];(0,this.hv[s.getType()])(t,s)}},n.prototype.Av=function(t,n,i){var r=this.Ba;r?r.getGeometry().setCoordinates(t):(r=new jt(new ls(t)),this.Ba=r,this.Ca.getSource().addFeature(r));return r.set("features",n),r.set("geometries",i),r},n.prototype.handleEvent=function(n){return!n.originalEvent||(this.Mv=n,n.map.getView().getInteracting()||n.type!=Vu.POINTERMOVE||this.handlingDownUpSequence||this.xn(n),this.Ba&&this.Qa(n)&&(i=!(n.type!=Vu.SINGLECLICK||!this.rv)||this.removePoint()),n.type==Vu.SINGLECLICK&&(this.rv=!1),t.prototype.handleEvent.call(this,n)&&!i);var i},n.prototype.handleDragEvent=function(t){this.rv=!1,this.Sv(t,this.ev);for(var n=[t.coordinate[0]+this.wr[0],t.coordinate[1]+this.wr[1]],i=[],r=[],s=0,o=this.ev.length;s<o;++s){var u=this.ev[s],e=u[0],h=e.feature;-1===i.indexOf(h)&&i.push(h);var f=e.geometry;-1===r.indexOf(f)&&r.push(f);for(var c=e.depth,a=void 0,v=e.segment,l=u[1];n.length<f.getStride();)n.push(v[l][n.length]);switch(f.getType()){case At.POINT:a=n,v[0]=n,v[1]=n;break;case At.MULTI_POINT:(a=f.getCoordinates())[e.index]=n,v[0]=n,v[1]=n;break;case At.LINE_STRING:(a=f.getCoordinates())[e.index+l]=n,v[l]=n;break;case At.MULTI_LINE_STRING:case At.POLYGON:(a=f.getCoordinates())[c[0]][e.index+l]=n,v[l]=n;break;case At.MULTI_POLYGON:(a=f.getCoordinates())[c[1]][c[0]][e.index+l]=n,v[l]=n;break;case At.CIRCLE:if(v[0]=n,v[1]=n,0===e.index)this.uv=!0,f.setCenter(n),this.uv=!1;else{this.uv=!0;var d=t.map.getView().getProjection(),w=$i(Or(f.getCenter(),d),Or(n,d)),p=gr();if(p){var y=f.clone().transform(p,d);y.setRadius(w),w=y.transform(d,p).getRadius()}f.setRadius(w),this.uv=!1}}a&&this.Cv(f,a)}this.Av(n,i,r)},n.prototype.handleDownEvent=function(t){if(!this.mr(t))return!1;var n=t.coordinate;this.xv(t.pixel,t.map,n),this.ev.length=0,this.sv=null;var i=this.Ba;if(i){var r=t.map.getView().getProjection(),s=[],u=i.getGeometry().getCoordinates(),e=wn([u]),h=this.ov.getInExtent(e),f={};h.sort(Cp);for(var c=0,a=h.length;c<a;++c){var v=h[c],l=v.segment,d=o(v.geometry),w=v.depth;if(w&&(d+="-"+w.join("-")),f[d]||(f[d]=new Array(2)),v.geometry.getType()!==At.CIRCLE||1!==v.index)if(!Zi(l[0],u)||f[d][0])if(!Zi(l[1],u)||f[d][1])o(l)in this.nv&&!f[d][0]&&!f[d][1]&&this.tv(t)&&s.push(v);else{if((v.geometry.getType()===At.LINE_STRING||v.geometry.getType()===At.MULTI_LINE_STRING)&&f[d][0]&&0===f[d][0].index)continue;this.ev.push([v,1]),f[d][1]=v}else this.ev.push([v,0]),f[d][0]=v;else Zi(kp(n,v,r),u)&&!f[d][0]&&(this.ev.push([v,0]),f[d][0]=v)}s.length&&this.Sv(t,[s]);for(var p=s.length-1;p>=0;--p)this.Nv(s[p],u)}return!!this.Ba},n.prototype.handleUpEvent=function(t){for(var n=this.ev.length-1;n>=0;--n){var i=this.ev[n][0],r=i.geometry;if(r.getType()===At.CIRCLE){var s=r.getCenter(),o=i.featureSegments[0],u=i.featureSegments[1];o.segment[0]=s,o.segment[1]=s,u.segment[0]=s,u.segment[1]=s,this.ov.update(Sn(s),o);var e=r,h=gr();if(h){var f=t.map.getView().getProjection();e=Ls(e=e.clone().transform(h,f)).transform(f,h)}this.ov.update(e.getExtent(),u)}else this.ov.update(wn(i.segment),i)}return this.sv&&(this.dispatchEvent(new Ap(Tp,this.sv,t)),this.sv=null),!1},n.prototype.xn=function(t){this.iv=t.pixel,this.xv(t.pixel,t.map,t.coordinate)},n.prototype.xv=function(t,n,i){var r,s,u=this,e=i||n.getCoordinateFromPixel(t),h=n.getView().getProjection();if(this.yv){var f="object"===Mp(this.yv)?function(t){return t===u.yv}:void 0;n.forEachFeatureAtPixel(t,(function(t,n,i){if((i=i||t.getGeometry()).getType()===At.POINT&&p(u.pa.getArray(),t)){s=i;var o=i.getFlatCoordinates().slice(0,2);r=[{feature:t,geometry:i,segment:[o,o]}]}return!0}),{layerFilter:f})}if(!r){var c=Mr(pn(jr(Sn(e,xp),h),n.getView().getResolution()*this.Xa,xp),h);r=this.ov.getInExtent(c)}if(r&&r.length>0){var a=r.sort((function(t,n){return Np(e,t,h)-Np(e,n,h)}))[0],v=a.segment,l=kp(e,a,h),d=n.getPixelFromCoordinate(l),w=$i(t,d);if(s||w<=this.Xa){var y={};if(y[o(v)]=!0,this.jv||(this.wr[0]=l[0]-e[0],this.wr[1]=l[1]-e[1]),a.geometry.getType()===At.CIRCLE&&1===a.index)this.Ya=!0,this.Av(l,[a.feature],[a.geometry]);else{var b=n.getPixelFromCoordinate(v[0]),_=n.getPixelFromCoordinate(v[1]),g=Hi(d,b),m=Hi(d,_);w=Math.sqrt(Math.min(g,m)),this.Ya=w<=this.Xa,this.Ya&&(l=g>m?v[1]:v[0]),this.Av(l,[a.feature],[a.geometry]);var O={};O[o(a.geometry)]=!0;for(var M=1,j=r.length;M<j;++M){var x=r[M].segment;if(!(Zi(v[0],x[0])&&Zi(v[1],x[1])||Zi(v[0],x[1])&&Zi(v[1],x[0])))break;var S=o(r[M].geometry);S in O||(O[S]=!0,y[o(x)]=!0)}}return void(this.nv=y)}}this.Ba&&(this.Ca.getSource().removeFeature(this.Ba),this.Ba=null)},n.prototype.Nv=function(t,n){for(var i,r=t.segment,s=t.feature,o=t.geometry,u=t.depth,e=t.index;n.length<o.getStride();)n.push(0);switch(o.getType()){case At.MULTI_LINE_STRING:case At.POLYGON:(i=o.getCoordinates())[u[0]].splice(e+1,0,n);break;case At.MULTI_POLYGON:(i=o.getCoordinates())[u[1]][u[0]].splice(e+1,0,n);break;case At.LINE_STRING:(i=o.getCoordinates()).splice(e+1,0,n);break;default:return}this.Cv(o,i);var h=this.ov;h.remove(t),this.kv(o,e,u,1);var f={segment:[r[0],n],feature:s,geometry:o,depth:u,index:e};h.insert(wn(f.segment),f),this.ev.push([f,1]);var c={segment:[n,r[1]],feature:s,geometry:o,depth:u,index:e+1};h.insert(wn(c.segment),c),this.ev.push([c,0]),this.rv=!0},n.prototype.removePoint=function(){if(this.Mv&&this.Mv.type!=Vu.POINTERDRAG){var t=this.Mv;this.Sv(t,this.ev);var n=this.Pv();return this.dispatchEvent(new Ap(Tp,this.sv,t)),this.sv=null,n}return!1},n.prototype.Pv=function(){var t,n,i,r,s,u,e,h,f,c,a,v=this.ev,l={},d=!1;for(s=v.length-1;s>=0;--s)a=o((c=(i=v[s])[0]).feature),c.depth&&(a+="-"+c.depth.join("-")),a in l||(l[a]={}),0===i[1]?(l[a].right=c,l[a].index=c.index):1==i[1]&&(l[a].left=c,l[a].index=c.index+1);for(a in l){switch(f=l[a].right,e=l[a].left,(h=(u=l[a].index)-1)<0&&(h=0),t=n=(r=(c=void 0!==e?e:f).geometry).getCoordinates(),d=!1,r.getType()){case At.MULTI_LINE_STRING:n[c.depth[0]].length>2&&(n[c.depth[0]].splice(u,1),d=!0);break;case At.LINE_STRING:n.length>2&&(n.splice(u,1),d=!0);break;case At.MULTI_POLYGON:t=t[c.depth[1]];case At.POLYGON:(t=t[c.depth[0]]).length>4&&(u==t.length-1&&(u=0),t.splice(u,1),d=!0,0===u&&(t.pop(),t.push(t[0]),h=t.length-1))}if(d){this.Cv(r,n);var w=[];if(void 0!==e&&(this.ov.remove(e),w.push(e.segment[0])),void 0!==f&&(this.ov.remove(f),w.push(f.segment[1])),void 0!==e&&void 0!==f){var p={depth:c.depth,feature:c.feature,geometry:c.geometry,index:h,segment:w};this.ov.insert(wn(p.segment),p)}this.kv(r,u,c.depth,-1),this.Ba&&(this.Ca.getSource().removeFeature(this.Ba),this.Ba=null),v.length=0}}return d},n.prototype.Cv=function(t,n){this.uv=!0,t.setCoordinates(n),this.uv=!1},n.prototype.kv=function(t,n,i,r){this.ov.forEachInExtent(t.getExtent(),(function(s){s.geometry===t&&(void 0===i||void 0===s.depth||g(s.depth,i))&&s.index>n&&(s.index+=r)}))},n}(hh),Ip=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Gp="select",Rp=function(t){function n(n,i,r,s){var o=t.call(this,n)||this;return o.selected=i,o.deselected=r,o.mapBrowserEvent=s,o}return Ip(n,t),n}(a),Lp={};var Fp=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r,s,o=n||{};if(i.Iv=i.gv.bind(i),i.Gv=i.Ev.bind(i),i.mr=o.condition?o.condition:yh,i.Rv=o.addCondition?o.addCondition:ph,i.Lv=o.removeCondition?o.removeCondition:ph,i.Fv=o.toggleCondition?o.toggleCondition:_h,i.Dv=!!o.multi&&o.multi,i.zv=o.filter?o.filter:O,i.Uv=o.hitTolerance?o.hitTolerance:0,i.k=void 0!==o.style?o.style:(_((r=Ea())[At.POLYGON],r[At.LINE_STRING]),_(r[At.GEOMETRY_COLLECTION],r[At.LINE_STRING]),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),i.pa=o.features||new et,o.layers)if("function"==typeof o.layers)s=o.layers;else{var u=o.layers;s=function(t){return p(u,t)}}else s=O;return i.Xv=s,i.Yv={},i}return Ip(n,t),n.prototype.Wv=function(t,n){this.Yv[o(t)]=n},n.prototype.getFeatures=function(){return this.pa},n.prototype.getHitTolerance=function(){return this.Uv},n.prototype.getLayer=function(t){return this.Yv[o(t)]},n.prototype.setHitTolerance=function(t){this.Uv=t},n.prototype.setMap=function(n){this.getMap()&&this.k&&this.pa.forEach(this.Bv.bind(this)),t.prototype.setMap.call(this,n),n?(this.pa.addEventListener(it,this.Iv),this.pa.addEventListener(rt,this.Gv),this.k&&this.pa.forEach(this.qv.bind(this))):(this.pa.removeEventListener(it,this.Iv),this.pa.removeEventListener(rt,this.Gv))},n.prototype.gv=function(t){var n=t.element;this.k&&this.qv(n)},n.prototype.Ev=function(t){var n=t.element;this.k&&this.Bv(n)},n.prototype.getStyle=function(){return this.k},n.prototype.qv=function(t){var n=o(t);n in Lp||(Lp[n]=t.getStyle()),t.setStyle(this.k)},n.prototype.Bv=function(t){for(var i=this.getMap().getInteractions().getArray(),r=i.length-1;r>=0;--r){var s=i[r];if(s!==this&&s instanceof n&&s.getStyle()&&-1!==s.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(s.getStyle())}var u=o(t);t.setStyle(Lp[u]),delete Lp[u]},n.prototype.Zv=function(t){delete this.Yv[o(t)]},n.prototype.handleEvent=function(t){if(!this.mr(t))return!0;var n=this.Rv(t),i=this.Lv(t),r=this.Fv(t),s=!n&&!i&&!r,o=t.map,u=this.getFeatures(),e=[],h=[];if(s){E(this.Yv),o.forEachFeatureAtPixel(t.pixel,function(t,n){if(this.zv(t,n))return h.push(t),this.Wv(t,n),!this.Dv}.bind(this),{layerFilter:this.Xv,hitTolerance:this.Uv});for(var f=u.getLength()-1;f>=0;--f){var c=u.item(f),a=h.indexOf(c);a>-1?h.splice(a,1):(u.remove(c),e.push(c))}0!==h.length&&u.extend(h)}else{o.forEachFeatureAtPixel(t.pixel,function(t,s){if(this.zv(t,s))return!n&&!r||p(u.getArray(),t)?(i||r)&&p(u.getArray(),t)&&(e.push(t),this.Zv(t)):(h.push(t),this.Wv(t,s)),!this.Dv}.bind(this),{layerFilter:this.Xv,hitTolerance:this.Uv});for(var v=e.length-1;v>=0;--v)u.remove(e[v]);u.extend(h)}return(h.length>0||e.length>0)&&this.dispatchEvent(new Rp(Gp,h,e,t)),!0},n}(rh),Dp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function zp(t){return t.feature?t.feature:t.element?t.element:void 0}var Up=[],Xp=function(t){function n(n){var i=this,r=n||{},s=r;return s.handleDownEvent||(s.handleDownEvent=O),s.stopDown||(s.stopDown=M),(i=t.call(this,s)||this).na=r.source?r.source:null,i.Jv=void 0===r.vertex||r.vertex,i.Vv=void 0===r.edge||r.edge,i.pa=r.features?r.features:null,i.Hv=[],i.$v={},i.Kv={},i.Qv={},i.Xa=void 0!==r.pixelTolerance?r.pixelTolerance:10,i.ov=new il,i.hv={Point:i.fv.bind(i),LineString:i.cv.bind(i),LinearRing:i.cv.bind(i),Polygon:i.av.bind(i),MultiPoint:i.vv.bind(i),MultiLineString:i.lv.bind(i),MultiPolygon:i.dv.bind(i),GeometryCollection:i.pv.bind(i),Circle:i.wv.bind(i)},i}return Dp(n,t),n.prototype.addFeature=function(t,n){var i=void 0===n||n,r=o(t),s=t.getGeometry();if(s){var u=this.hv[s.getType()];u&&(this.Kv[r]=s.getExtent([1/0,1/0,-1/0,-1/0]),u(t,s))}i&&(this.$v[r]=q(t,k,this.pe,this))},n.prototype.tl=function(t){this.addFeature(t)},n.prototype.nl=function(t){this.removeFeature(t)},n.prototype.il=function(){var t;return this.pa?t=this.pa:this.na&&(t=this.na.getFeatures()),t},n.prototype.handleEvent=function(n){var i=this.snapTo(n.pixel,n.coordinate,n.map);return i.snapped&&(n.coordinate=i.vertex.slice(0,2),n.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,n)},n.prototype.mv=function(t){var n=zp(t);this.addFeature(n)},n.prototype.Ov=function(t){var n=zp(t);this.removeFeature(n)},n.prototype.pe=function(t){var n=t.target;if(this.handlingDownUpSequence){var i=o(n);i in this.Qv||(this.Qv[i]=n)}else this.rl(n)},n.prototype.handleUpEvent=function(t){var n=T(this.Qv);return n.length&&(n.forEach(this.rl.bind(this)),this.Qv={}),!1},n.prototype.removeFeature=function(t,n){var i=void 0===n||n,r=o(t),s=this.Kv[r];if(s){var u=this.ov,e=[];u.forEachInExtent(s,(function(n){t===n.feature&&e.push(n)}));for(var h=e.length-1;h>=0;--h)u.remove(e[h])}i&&(J(this.$v[r]),delete this.$v[r])},n.prototype.setMap=function(n){var i=this.getMap(),r=this.Hv,s=this.il();i&&(r.forEach(J),r.length=0,s.forEach(this.nl.bind(this))),t.prototype.setMap.call(this,n),n&&(this.pa?r.push(q(this.pa,it,this.mv,this),q(this.pa,rt,this.Ov,this)):this.na&&r.push(q(this.na,ul,this.mv,this),q(this.na,fl,this.Ov,this)),s.forEach(this.tl.bind(this)))},n.prototype.snapTo=function(t,n,i){var r=wn([i.getCoordinateFromPixel([t[0]-this.Xa,t[1]+this.Xa]),i.getCoordinateFromPixel([t[0]+this.Xa,t[1]-this.Xa])]),s=this.ov.getInExtent(r);this.Jv&&!this.Vv&&(s=s.filter((function(t){return t.feature.getGeometry().getType()!==At.CIRCLE})));var o=!1,u=null,e=null;if(0===s.length)return{snapped:o,vertex:u,vertexPixel:e};for(var h,f=i.getView().getProjection(),c=Or(n,f),a=1/0,v=0;v<s.length;++v){var l=s[v];Up[0]=Or(l.segment[0],f),Up[1]=Or(l.segment[1],f);var d=Ki(c,Up);d<a&&(h=l,a=d)}var w=h.segment;if(this.Jv&&!this.Vv){var p=i.getPixelFromCoordinate(w[0]),y=i.getPixelFromCoordinate(w[1]),b=Hi(t,p),_=Hi(t,y);Math.sqrt(Math.min(b,_))<=this.Xa&&(o=!0,u=b>_?w[1]:w[0],e=i.getPixelFromCoordinate(u))}else if(this.Vv){var g=h.feature.getGeometry().getType()===At.CIRCLE;if(g){var m=h.feature.getGeometry(),O=gr();O&&(m=m.clone().transform(O,f)),u=mr(Yi(c,m),f)}else Up[0]=Or(w[0],f),Up[1]=Or(w[1],f),u=mr(Wi(c,Up),f);if($i(t,e=i.getPixelFromCoordinate(u))<=this.Xa&&(o=!0,this.Jv&&!g)){p=i.getPixelFromCoordinate(w[0]),y=i.getPixelFromCoordinate(w[1]),b=Hi(e,p),_=Hi(e,y);Math.sqrt(Math.min(b,_))<=this.Xa&&(u=b>_?w[1]:w[0],e=i.getPixelFromCoordinate(u))}}return o&&(e=[Math.round(e[0]),Math.round(e[1])]),{snapped:o,vertex:u,vertexPixel:e}},n.prototype.rl=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},n.prototype.wv=function(t,n){var i=this.getMap().getView().getProjection(),r=n,s=gr();s&&(r=r.clone().transform(s,i));var o=Ls(r);s&&o.transform(i,s);for(var u=o.getCoordinates()[0],e=0,h=u.length-1;e<h;++e){var f=u.slice(e,e+2),c={feature:t,segment:f};this.ov.insert(wn(f),c)}},n.prototype.pv=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var s=this.hv[i[r].getType()];s&&s(t,i[r])}},n.prototype.cv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length-1;r<s;++r){var o=i.slice(r,r+2),u={feature:t,segment:o};this.ov.insert(wn(o),u)}},n.prototype.lv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length-1;u<e;++u){var h=o.slice(u,u+2),f={feature:t,segment:h};this.ov.insert(wn(h),f)}},n.prototype.vv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r){var o=i[r],u={feature:t,segment:[o,o]};this.ov.insert(n.getExtent(),u)}},n.prototype.dv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length;u<e;++u)for(var h=o[u],f=0,c=h.length-1;f<c;++f){var a=h.slice(f,f+2),v={feature:t,segment:a};this.ov.insert(wn(a),v)}},n.prototype.fv=function(t,n){var i=n.getCoordinates(),r={feature:t,segment:[i,i]};this.ov.insert(n.getExtent(),r)},n.prototype.av=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length-1;u<e;++u){var h=o.slice(u,u+2),f={feature:t,segment:h};this.ov.insert(wn(h),f)}},n}(hh),Yp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Wp="translatestart",Bp="translating",qp="translateend",Zp=function(t){function n(n,i,r,s,o){var u=t.call(this,n)||this;return u.features=i,u.coordinate=r,u.startCoordinate=s,u.mapBrowserEvent=o,u}return Yp(n,t),n}(a),Jp=function(t){function n(n){var i,r=this,s=n||{};if((r=t.call(this,s)||this).on,r.once,r.un,r.sl=null,r.ul=null,r.pa=void 0!==s.features?s.features:null,s.layers&&!r.pa)if("function"==typeof s.layers)i=s.layers;else{var o=s.layers;i=function(t){return p(o,t)}}else i=O;return r.Xv=i,r.zv=s.filter&&!r.pa?s.filter:O,r.Uv=s.hitTolerance?s.hitTolerance:0,r.mr=s.condition?s.condition:dh,r.el=null,r.addChangeListener(Qe,r.hl),r}return Yp(n,t),n.prototype.handleDownEvent=function(t){if(!t.originalEvent||!this.mr(t))return!1;if(this.el=this.fl(t.pixel,t.map),!this.sl&&this.el){this.ul=t.coordinate,this.sl=t.coordinate,this.handleMoveEvent(t);var n=this.pa||new et([this.el]);return this.dispatchEvent(new Zp(Wp,n,t.coordinate,this.ul,t)),!0}return!1},n.prototype.handleUpEvent=function(t){if(this.sl){this.sl=null,this.handleMoveEvent(t);var n=this.pa||new et([this.el]);return this.dispatchEvent(new Zp(qp,n,t.coordinate,this.ul,t)),this.ul=null,!0}return!1},n.prototype.handleDragEvent=function(t){if(this.sl){var n=t.coordinate,i=n[0]-this.sl[0],r=n[1]-this.sl[1],s=this.pa||new et([this.el]);s.forEach((function(t){var n=t.getGeometry();n.translate(i,r),t.setGeometry(n)})),this.sl=n,this.dispatchEvent(new Zp(Bp,s,n,this.ul,t))}},n.prototype.handleMoveEvent=function(t){var n=t.map.getViewport();this.fl(t.pixel,t.map)?(n.classList.remove(this.sl?"ol-grab":"ol-grabbing"),n.classList.add(this.sl?"ol-grabbing":"ol-grab")):n.classList.remove("ol-grab","ol-grabbing")},n.prototype.fl=function(t,n){return n.forEachFeatureAtPixel(t,function(t,n){if(this.zv(t,n)&&(!this.pa||p(this.pa.getArray(),t)))return t}.bind(this),{layerFilter:this.Xv,hitTolerance:this.Uv})},n.prototype.getHitTolerance=function(){return this.Uv},n.prototype.setHitTolerance=function(t){this.Uv=t},n.prototype.setMap=function(n){var i=this.getMap();t.prototype.setMap.call(this,n),this.ka(i)},n.prototype.hl=function(){this.ka(null)},n.prototype.ka=function(t){var n=this.getMap(),i=this.getActive();n&&i||(n=n||t)&&n.getViewport().classList.remove("ol-grab","ol-grabbing")},n}(hh),Vp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Hp(t){for(var n=[],i=0,r=t.length;i<r;++i)n.push(t[i].clone());return n}var $p=function(t){function n(n){var i=t.call(this)||this;return i.cl=n||null,i.al=[],i.vl(),i}return Vp(n,t),n.prototype.ll=function(){this.al.forEach(J),this.al.length=0},n.prototype.vl=function(){if(this.cl)for(var t=0,n=this.cl.length;t<n;++t)this.al.push(q(this.cl[t],k,this.changed,this))},n.prototype.clone=function(){var t=new n(null);return t.setGeometries(this.cl),t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){if(r<bn(this.getExtent(),t,n))return r;for(var s=this.cl,o=0,u=s.length;o<u;++o)r=s[o].closestPointXY(t,n,i,r);return r},n.prototype.containsXY=function(t,n){for(var i=this.cl,r=0,s=i.length;r<s;++r)if(i[r].containsXY(t,n))return!0;return!1},n.prototype.computeExtent=function(t){xn(t);for(var n=this.cl,i=0,r=n.length;i<r;++i)Cn(t,n[i].getExtent());return t},n.prototype.getGeometries=function(){return Hp(this.cl)},n.prototype.getGeometriesArray=function(){return this.cl},n.prototype.getGeometriesArrayRecursive=function(){for(var t=[],n=this.cl,i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],r=this.cl,s=!1,o=0,u=r.length;o<u;++o){var e=r[o],h=e.getSimplifiedGeometry(t);i.push(h),h!==e&&(s=!0)}if(s){var f=new n(null);return f.setGeometriesArray(i),f}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},n.prototype.getType=function(){return At.GEOMETRY_COLLECTION},n.prototype.intersectsExtent=function(t){for(var n=this.cl,i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(t))return!0;return!1},n.prototype.isEmpty=function(){return 0===this.cl.length},n.prototype.rotate=function(t,n){for(var i=this.cl,r=0,s=i.length;r<s;++r)i[r].rotate(t,n);this.changed()},n.prototype.scale=function(t,n,i){var r=i;r||(r=zn(this.getExtent()));for(var s=this.cl,o=0,u=s.length;o<u;++o)s[o].scale(t,n,r);this.changed()},n.prototype.setGeometries=function(t){this.setGeometriesArray(Hp(t))},n.prototype.setGeometriesArray=function(t){this.ll(),this.cl=t,this.vl(),this.changed()},n.prototype.applyTransform=function(t){for(var n=this.cl,i=0,r=n.length;i<r;++i)n[i].applyTransform(t);this.changed()},n.prototype.translate=function(t,n){for(var i=this.cl,r=0,s=i.length;r<s;++r)i[r].translate(t,n);this.changed()},n.prototype.disposeInternal=function(){this.ll(),t.prototype.disposeInternal.call(this)},n}(Gr);function Kp(t,n,i,r,s,o){var u,e;void 0!==s?(u=s,e=void 0!==o?o:0):(u=[],e=0);for(var h=n;h<i;){var f=t[h++];u[e++]=t[h++],u[e++]=f;for(var c=2;c<r;++c)u[e++]=t[h++]}return u.length=e,u}var Qp=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,n){var i;if(n){var r=n.dataProjection?ur(n.dataProjection):this.readProjection(t);n.extent&&r&&r.getUnits()===It.TILE_PIXELS&&(r=ur(r)).setWorldExtent(n.extent),i={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return S({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return r()},t.prototype.readFeature=function(t,n){return r()},t.prototype.readFeatures=function(t,n){return r()},t.prototype.readGeometry=function(t,n){return r()},t.prototype.readProjection=function(t){return r()},t.prototype.writeFeature=function(t,n){return r()},t.prototype.writeFeatures=function(t,n){return r()},t.prototype.writeGeometry=function(t,n){return r()},t}();function ty(t,n,i){var r,s=i?ur(i.featureProjection):null,o=i?ur(i.dataProjection):null;if(r=s&&o&&!lr(s,o)?(n?t.clone():t).transform(n?s:o,n?o:s):t,n&&i&&void 0!==i.decimals){var u=Math.pow(10,i.decimals);r===t&&(r=t.clone()),r.applyTransform((function(t){for(var n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*u)/u;return t}))}return r}var ny=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),iy=function(t){function n(){var n=t.call(this)||this;return n.dl=$c(),n}return ny(n,t),n.prototype.getType=function(){return zf},n.prototype.readFeature=function(t,n){if(t){if("string"==typeof t){var i=Lc(t);return this.readFeatureFromDocument(i,n)}return Rc(t)?this.readFeatureFromDocument(t,n):this.readFeatureFromNode(t,n)}return null},n.prototype.readFeatureFromDocument=function(t,n){var i=this.readFeaturesFromDocument(t,n);return i.length>0?i[0]:null},n.prototype.readFeatureFromNode=function(t,n){return null},n.prototype.readFeatures=function(t,n){if(t){if("string"==typeof t){var i=Lc(t);return this.readFeaturesFromDocument(i,n)}return Rc(t)?this.readFeaturesFromDocument(t,n):this.readFeaturesFromNode(t,n)}return[]},n.prototype.readFeaturesFromDocument=function(t,n){for(var i=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&_(i,this.readFeaturesFromNode(r,n));return i},n.prototype.readFeaturesFromNode=function(t,n){return r()},n.prototype.readGeometry=function(t,n){if(t){if("string"==typeof t){var i=Lc(t);return this.readGeometryFromDocument(i,n)}return Rc(t)?this.readGeometryFromDocument(t,n):this.readGeometryFromNode(t,n)}return null},n.prototype.readGeometryFromDocument=function(t,n){return null},n.prototype.readGeometryFromNode=function(t,n){return null},n.prototype.readProjection=function(t){if(t){if("string"==typeof t){var n=Lc(t);return this.readProjectionFromDocument(n)}return Rc(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},n.prototype.readProjectionFromDocument=function(t){return this.dataProjection},n.prototype.readProjectionFromNode=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){var i=this.writeFeatureNode(t,n);return this.dl.serializeToString(i)},n.prototype.writeFeatureNode=function(t,n){return null},n.prototype.writeFeatures=function(t,n){var i=this.writeFeaturesNode(t,n);return this.dl.serializeToString(i)},n.prototype.writeFeaturesNode=function(t,n){return null},n.prototype.writeGeometry=function(t,n){var i=this.writeGeometryNode(t,n);return this.dl.serializeToString(i)},n.prototype.writeGeometryNode=function(t,n){return null},n}(Qp);function ry(t){var n=/^\s*(true|1)|(false|0)\s*$/.exec(t);return n?void 0!==n[1]||!1:void 0}function sy(t){var n=Ic(t,!1),i=Date.parse(n);return isNaN(i)?void 0:i/1e3}function oy(t){return uy(Ic(t,!1))}function uy(t){var n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return n?parseFloat(n[1]):void 0}function ey(t){return hy(Ic(t,!1))}function hy(t){var n=/^\s*(\d+)\s*$/.exec(t);return n?parseInt(n[1],10):void 0}function fy(t){return Ic(t,!1).trim()}function cy(t,n){var i=new Date(1e3*n),r=i.getUTCFullYear()+"-"+Ui(i.getUTCMonth()+1,2)+"-"+Ui(i.getUTCDate(),2)+"T"+Ui(i.getUTCHours(),2)+":"+Ui(i.getUTCMinutes(),2)+":"+Ui(i.getUTCSeconds(),2)+"Z";t.appendChild(Qc().createTextNode(r))}function ay(t,n){var i=n.toPrecision();t.appendChild(Qc().createTextNode(i))}function vy(t,n){var i=n.toString();t.appendChild(Qc().createTextNode(i))}function ly(t,n){t.appendChild(Qc().createTextNode(n))}var dy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wy=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],py={rte:Wy,trk:By,wpt:qy},yy=Bc(wy,{rte:Fc(Wy),trk:Fc(By),wpt:Fc(qy)}),by=Bc(wy,{text:Dc(fy,"linkText"),type:Dc(fy,"linkType")}),_y=Bc(wy,{rte:zc((function(t,n,i){var r=i[0],s=n.getProperties(),o={node:t};o.properties=s;var u=n.getGeometry();if(u.getType()==At.LINE_STRING){var e=ty(u,!0,r);o.geometryLayout=e.getLayout(),s.rtept=e.getCoordinates()}var h=i[i.length-1].node,f=Ay[h.namespaceURI],c=Wc(s,f);Vc(o,Cy,Yc,c,i,f)})),trk:zc((function(t,n,i){var r=i[0],s=n.getProperties(),o={node:t};o.properties=s;var u=n.getGeometry();if(u.getType()==At.MULTI_LINE_STRING){var e=ty(u,!0,r);s.trkseg=e.getLineStrings()}var h=i[i.length-1].node,f=ky[h.namespaceURI],c=Wc(s,f);Vc(o,Py,Yc,c,i,f)})),wpt:zc((function(t,n,i){var r=i[0],s=i[i.length-1];s.properties=n.getProperties();var o=n.getGeometry();if(o.getType()==At.POINT){var u=ty(o,!0,r);s.geometryLayout=u.getLayout(),Jy(t,u.getCoordinates(),i)}}))}),gy=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=ur("EPSG:4326"),i.wl=r.readExtensions,i}return dy(n,t),n.prototype.pl=function(t){t||(t=[]);for(var n=0,i=t.length;n<i;++n){var r=t[n];if(this.wl){var s=r.get("extensionsNode_")||null;this.wl(r,s)}r.set("extensionsNode_",void 0)}},n.prototype.readFeatureFromNode=function(t,n){if(!p(wy,t.namespaceURI))return null;var i=py[t.localName];if(!i)return null;var r=i(t,[this.getReadOptions(t,n)]);return r?(this.pl([r]),r):null},n.prototype.readFeaturesFromNode=function(t,n){if(!p(wy,t.namespaceURI))return[];if("gpx"==t.localName){var i=Zc([],yy,t,[this.getReadOptions(t,n)]);return i?(this.pl(i),i):[]}return[]},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=Pc("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",kc),i.setAttributeNS(kc,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),Vc({node:i},_y,Dy,t,[n]),i},n}(iy),my=Bc(wy,{name:Dc(fy),cmt:Dc(fy),desc:Dc(fy),src:Dc(fy),link:Xy,number:Dc(ey),extensions:Yy,type:Dc(fy),rtept:function(t,n){var i=Zc({},Oy,t,n);if(i){var r=n[n.length-1],s=r.flatCoordinates,o=r.layoutOptions;zy(s,o,t,i)}}}),Oy=Bc(wy,{ele:Dc(oy),time:Dc(sy)}),My=Bc(wy,{name:Dc(fy),cmt:Dc(fy),desc:Dc(fy),src:Dc(fy),link:Xy,number:Dc(ey),type:Dc(fy),extensions:Yy,trkseg:function(t,n){var i=n[n.length-1];qc(jy,t,n);var r=i.flatCoordinates;i.ends.push(r.length)}}),jy=Bc(wy,{trkpt:function(t,n){var i=Zc({},xy,t,n);if(i){var r=n[n.length-1],s=r.flatCoordinates,o=r.layoutOptions;zy(s,o,t,i)}}}),xy=Bc(wy,{ele:Dc(oy),time:Dc(sy)}),Sy=Bc(wy,{ele:Dc(oy),time:Dc(sy),magvar:Dc(oy),geoidheight:Dc(oy),name:Dc(fy),cmt:Dc(fy),desc:Dc(fy),src:Dc(fy),link:Xy,sym:Dc(fy),type:Dc(fy),fix:Dc(fy),sat:Dc(ey),hdop:Dc(oy),vdop:Dc(oy),pdop:Dc(oy),ageofdgpsdata:Dc(oy),dgpsid:Dc(ey),extensions:Yy}),Ey=["text","type"],Ty=Bc(wy,{text:zc(ly),type:zc(ly)}),Ay=Bc(wy,["name","cmt","desc","src","link","number","type","rtept"]),Cy=Bc(wy,{name:zc(ly),cmt:zc(ly),desc:zc(ly),src:zc(ly),link:zc(Zy),number:zc(vy),type:zc(ly),rtept:Uc(zc(Jy))}),Ny=Bc(wy,["ele","time"]),ky=Bc(wy,["name","cmt","desc","src","link","number","type","trkseg"]),Py=Bc(wy,{name:zc(ly),cmt:zc(ly),desc:zc(ly),src:zc(ly),link:zc(Zy),number:zc(vy),type:zc(ly),trkseg:Uc(zc((function(t,n,i){var r={node:t};r.geometryLayout=n.getLayout(),r.properties={},Vc(r,Gy,Iy,n.getCoordinates(),i)})))}),Iy=Xc("trkpt"),Gy=Bc(wy,{trkpt:zc(Jy)}),Ry=Bc(wy,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Ly=Bc(wy,{ele:zc(ay),time:zc(cy),magvar:zc(ay),geoidheight:zc(ay),name:zc(ly),cmt:zc(ly),desc:zc(ly),src:zc(ly),link:zc(Zy),sym:zc(ly),type:zc(ly),fix:zc(ly),sat:zc(vy),hdop:zc(ay),vdop:zc(ay),pdop:zc(ay),ageofdgpsdata:zc(ay),dgpsid:zc(vy)}),Fy={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Dy(t,n,i){var r=t.getGeometry();if(r){var s=Fy[r.getType()];if(s)return Pc(n[n.length-1].node.namespaceURI,s)}}function zy(t,n,i,r){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,n.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,n.hasM=!0):t.push(0),t}function Uy(t,n,i){var r=xt,s=2;if(t.hasZ&&t.hasM?(r=Tt,s=4):t.hasZ?(r=St,s=3):t.hasM&&(r=Et,s=3),4!==s){for(var o=0,u=n.length/4;o<u;o++)n[o*s]=n[4*o],n[o*s+1]=n[4*o+1],t.hasZ&&(n[o*s+2]=n[4*o+2]),t.hasM&&(n[o*s+2]=n[4*o+3]);if(n.length=n.length/4*s,i)for(o=0,u=i.length;o<u;o++)i[o]=i[o]/4*s}return r}function Xy(t,n){var i=n[n.length-1],r=t.getAttribute("href");null!==r&&(i.link=r),qc(by,t,n)}function Yy(t,n){n[n.length-1].yl=t}function Wy(t,n){var i=n[0],r=Zc({flatCoordinates:[],layoutOptions:{}},my,t,n);if(r){var s=r.flatCoordinates;delete r.flatCoordinates;var o=r.layoutOptions;delete r.layoutOptions;var u=Uy(o,s),e=new yw(s,u);ty(e,!1,i);var h=new jt(e);return h.setProperties(r,!0),h}}function By(t,n){var i=n[0],r=Zc({flatCoordinates:[],ends:[],layoutOptions:{}},My,t,n);if(r){var s=r.flatCoordinates;delete r.flatCoordinates;var o=r.ends;delete r.ends;var u=r.layoutOptions;delete r.layoutOptions;var e=Uy(u,s,o),h=new np(s,e,o);ty(h,!1,i);var f=new jt(h);return f.setProperties(r,!0),f}}function qy(t,n){var i=n[0],r=Zc({},Sy,t,n);if(r){var s={},o=zy([],s,t,r),u=Uy(s,o),e=new ls(o,u);ty(e,!1,i);var h=new jt(e);return h.setProperties(r,!0),h}}function Zy(t,n,i){t.setAttribute("href",n);var r=i[i.length-1].properties,s=[r.linkText,r.linkType];Vc({node:t},Ty,Yc,s,i,Ey)}function Jy(t,n,i){var r=i[i.length-1],s=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(n[1])),t.setAttributeNS(null,"lon",String(n[0])),r.geometryLayout){case Tt:0!==n[3]&&(o.time=n[3]);case St:0!==n[2]&&(o.ele=n[2]);break;case Et:0!==n[2]&&(o.time=n[2])}var u="rtept"==t.nodeName?Ny[s]:Ry[s],e=Wc(o,u);Vc({node:t,properties:o},Ly,Yc,e,i,u)}var Vy=gy,Hy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function $y(t){if("string"==typeof t){var n=JSON.parse(t);return n||null}return null!==t?t:null}var Ky=function(t){function n(){return t.call(this)||this}return Hy(n,t),n.prototype.getType=function(){return Ff},n.prototype.readFeature=function(t,n){return this.readFeatureFromObject($y(t),this.getReadOptions(t,n))},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromObject($y(t),this.getReadOptions(t,n))},n.prototype.readFeatureFromObject=function(t,n){return r()},n.prototype.readFeaturesFromObject=function(t,n){return r()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromObject($y(t),this.getReadOptions(t,n))},n.prototype.readGeometryFromObject=function(t,n){return r()},n.prototype.readProjection=function(t){return this.readProjectionFromObject($y(t))},n.prototype.readProjectionFromObject=function(t){return r()},n.prototype.writeFeature=function(t,n){return JSON.stringify(this.writeFeatureObject(t,n))},n.prototype.writeFeatureObject=function(t,n){return r()},n.prototype.writeFeatures=function(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))},n.prototype.writeFeaturesObject=function(t,n){return r()},n.prototype.writeGeometry=function(t,n){return JSON.stringify(this.writeGeometryObject(t,n))},n.prototype.writeGeometryObject=function(t,n){return r()},n}(Qp),Qy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function tb(t,n){if(!t)return null;var i;switch(t.type){case At.POINT:i=function(t){return new ls(t.coordinates)}(t);break;case At.LINE_STRING:i=function(t){return new yw(t.coordinates)}(t);break;case At.POLYGON:i=function(t){return new Is(t.coordinates)}(t);break;case At.MULTI_POINT:i=function(t){return new rp(t.coordinates)}(t);break;case At.MULTI_LINE_STRING:i=function(t){return new np(t.coordinates)}(t);break;case At.MULTI_POLYGON:i=function(t){return new op(t.coordinates)}(t);break;case At.GEOMETRY_COLLECTION:i=function(t,n){var i=t.geometries.map((function(t){return tb(t,n)}));return new $p(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return ty(i,!1,n)}function nb(t,n){var i,r=(t=ty(t,!0,n)).getType();switch(r){case At.POINT:i=function(t,n){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case At.LINE_STRING:i=function(t,n){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case At.POLYGON:i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,n);break;case At.MULTI_POINT:i=function(t,n){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case At.MULTI_LINE_STRING:i=function(t,n){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case At.MULTI_POLYGON:i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,n);break;case At.GEOMETRY_COLLECTION:i=function(t,n){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var i=S({},n);return delete i.featureProjection,nb(t,i)}))}}(t,n);break;case At.CIRCLE:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return i}var ib=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this)||this).dataProjection=ur(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(i.defaultFeatureProjection=ur(r.featureProjection)),i.N=r.geometryName,i.bl=r.extractGeometryName,i.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],i}return Qy(n,t),n.prototype.readFeatureFromObject=function(t,n){var i=null,r=tb((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,n),s=new jt;return this.N?s.setGeometryName(this.N):this.bl&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s},n.prototype.readFeaturesFromObject=function(t,n){var i=null;if("FeatureCollection"===t.type){i=[];for(var r=t.features,s=0,o=r.length;s<o;++s)i.push(this.readFeatureFromObject(r[s],n))}else i=[this.readFeatureFromObject(t,n)];return i},n.prototype.readGeometryFromObject=function(t,n){return tb(t,n)},n.prototype.readProjectionFromObject=function(t){var n,i=t.crs;return i?"name"==i.type?n=ur(i.properties.name):"EPSG"===i.type?n=ur("EPSG:"+i.properties.code):mt(!1,36):n=this.dataProjection,n},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={type:"Feature",geometry:null,properties:null},r=t.getId();if(void 0!==r&&(i.id=r),!t.hasProperties())return i;var s=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=nb(o,n),delete s[t.getGeometryName()]),A(s)||(i.properties=s),i},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],r=0,s=t.length;r<s;++r)i.push(this.writeFeatureObject(t[r],n));return{type:"FeatureCollection",features:i}},n.prototype.writeGeometryObject=function(t,n){return nb(t,this.adaptOptions(n))},n}(Ky),rb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function sb(t){return"string"==typeof t?t:""}var ob=function(t){function n(){return t.call(this)||this}return rb(n,t),n.prototype.getType=function(){return Df},n.prototype.readFeature=function(t,n){return this.readFeatureFromText(sb(t),this.adaptOptions(n))},n.prototype.readFeatureFromText=function(t,n){return r()},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromText(sb(t),this.adaptOptions(n))},n.prototype.readFeaturesFromText=function(t,n){return r()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromText(sb(t),this.adaptOptions(n))},n.prototype.readGeometryFromText=function(t,n){return r()},n.prototype.readProjection=function(t){return this.readProjectionFromText(sb(t))},n.prototype.readProjectionFromText=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){return this.writeFeatureText(t,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){return r()},n.prototype.writeFeatures=function(t,n){return this.writeFeaturesText(t,this.adaptOptions(n))},n.prototype.writeFeaturesText=function(t,n){return r()},n.prototype.writeGeometry=function(t,n){return this.writeGeometryText(t,this.adaptOptions(n))},n.prototype.writeGeometryText=function(t,n){return r()},n}(Qp),ub=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function eb(t,n,i){var r,s=i||1e5,o=new Array(n);for(r=0;r<n;++r)o[r]=0;for(var u=0,e=t.length;u<e;)for(r=0;r<n;++r,++u){var h=t[u],f=h-o[r];o[r]=h,t[u]=f}return fb(t,s)}function hb(t,n,i){var r,s=i||1e5,o=new Array(n);for(r=0;r<n;++r)o[r]=0;for(var u=cb(t,s),e=0,h=u.length;e<h;)for(r=0;r<n;++r,++e)o[r]+=u[e],u[e]=o[r];return u}function fb(t,n){for(var i=n||1e5,r=0,s=t.length;r<s;++r)t[r]=Math.round(t[r]*i);return ab(t)}function cb(t,n){for(var i=n||1e5,r=vb(t),s=0,o=r.length;s<o;++s)r[s]/=i;return r}function ab(t){for(var n=0,i=t.length;n<i;++n){var r=t[n];t[n]=r<0?~(r<<1):r<<1}return lb(t)}function vb(t){for(var n=db(t),i=0,r=n.length;i<r;++i){var s=n[i];n[i]=1&s?~(s>>1):s>>1}return n}function lb(t){for(var n="",i=0,r=t.length;i<r;++i)n+=wb(t[i]);return n}function db(t){for(var n=[],i=0,r=0,s=0,o=t.length;s<o;++s){var u=t.charCodeAt(s)-63;i|=(31&u)<<r,u<32?(n.push(i),i=0,r=0):r+=5}return n}function wb(t){for(var n,i="";t>=32;)n=63+(32|31&t),i+=String.fromCharCode(n),t>>=5;return n=t+63,i+=String.fromCharCode(n)}var pb=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=ur("EPSG:4326"),i._l=r.factor?r.factor:1e5,i.gl=r.geometryLayout?r.geometryLayout:xt,i}return ub(n,t),n.prototype.readFeatureFromText=function(t,n){var i=this.readGeometryFromText(t,n);return new jt(i)},n.prototype.readFeaturesFromText=function(t,n){return[this.readFeatureFromText(t,n)]},n.prototype.readGeometryFromText=function(t,n){var i=Lr(this.gl),r=hb(t,i,this._l);Kp(r,0,r.length,i,r);var s=ss(r,0,r.length,i);return ty(new yw(s,this.gl),!1,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){var i=t.getGeometry();return i?this.writeGeometryText(i,n):(mt(!1,40),"")},n.prototype.writeFeaturesText=function(t,n){return this.writeFeatureText(t[0],n)},n.prototype.writeGeometryText=function(t,n){var i=(t=ty(t,!0,this.adaptOptions(n))).getFlatCoordinates(),r=t.getStride();return Kp(i,0,i.length,r,i),eb(i,r,this._l)},n}(ob),yb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bb=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.ml=r.layerName,i.Ol=r.layers?r.layers:null,i.dataProjection=ur(r.dataProjection?r.dataProjection:"EPSG:4326"),i}return yb(n,t),n.prototype.readFeaturesFromObject=function(t,n){if("Topology"==t.type){var i=t,r=void 0,s=null,o=null;i.transform&&(s=(r=i.transform).scale,o=r.translate);var u=i.arcs;r&&function(t,n,i){for(var r=0,s=t.length;r<s;++r)Mb(t[r],n,i)}(u,s,o);var e=[],h=i.objects,f=this.ml,c=void 0;for(var a in h)this.Ol&&-1==this.Ol.indexOf(a)||("GeometryCollection"===h[a].type?(c=h[a],e.push.apply(e,mb(c,u,s,o,f,a,n))):(c=h[a],e.push(Ob(c,u,s,o,f,a,n))));return e}return[]},n.prototype.readProjectionFromObject=function(t){return this.dataProjection},n}(Ky),_b={Point:function(t,n,i){var r=t.coordinates;n&&i&&jb(r,n,i);return new ls(r)},LineString:function(t,n){var i=gb(t.arcs,n);return new yw(i)},Polygon:function(t,n){for(var i=[],r=0,s=t.arcs.length;r<s;++r)i[r]=gb(t.arcs[r],n);return new Is(i)},MultiPoint:function(t,n,i){var r=t.coordinates;if(n&&i)for(var s=0,o=r.length;s<o;++s)jb(r[s],n,i);return new rp(r)},MultiLineString:function(t,n){for(var i=[],r=0,s=t.arcs.length;r<s;++r)i[r]=gb(t.arcs[r],n);return new np(i)},MultiPolygon:function(t,n){for(var i=[],r=0,s=t.arcs.length;r<s;++r){for(var o=t.arcs[r],u=[],e=0,h=o.length;e<h;++e)u[e]=gb(o[e],n);i[r]=u}return new op(i)}};function gb(t,n){for(var i,r,s=[],o=0,u=t.length;o<u;++o)i=t[o],o>0&&s.pop(),r=i>=0?n[i]:n[~i].slice().reverse(),s.push.apply(s,r);for(var e=0,h=s.length;e<h;++e)s[e]=s[e].slice();return s}function mb(t,n,i,r,s,o,u){for(var e=t.geometries,h=[],f=0,c=e.length;f<c;++f)h[f]=Ob(e[f],n,i,r,s,o,u);return h}function Ob(t,n,i,r,s,o,u){var e=null,h=t.type;if(h){var f=_b[h];e=ty(e="Point"===h||"MultiPoint"===h?f(t,i,r):f(t,n),!1,u)}var c=new jt({geometry:e});void 0!==t.id&&c.setId(t.id);var a=t.properties;return s&&(a||(a={}),a[s]=o),a&&c.setProperties(a,!0),c}function Mb(t,n,i){for(var r=0,s=0,o=0,u=t.length;o<u;++o){var e=t[o];r+=e[0],s+=e[1],e[0]=r,e[1]=s,jb(e,n,i)}}function jb(t,n,i){t[0]=t[0]*n[0]+i[0],t[1]=t[1]*n[1]+i[1]}var xb=bb,Sb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Eb=1,Tb=2,Ab=3,Cb=4,Nb=5,kb=6,Pb=7,Ib=15,Gb=16,Rb=17,Lb=function(){function t(t){this.Ml=t,this.jl=0,this.xl=!1,this.Sl=!1,this.El=!1,this.Tl=!1,this.Al=null,this.Cl=xt}return t.prototype.readUint8=function(){return this.Ml.getUint8(this.jl++)},t.prototype.readUint32=function(t){return this.Ml.getUint32((this.jl+=4)-4,void 0!==t?t:this.Sl)},t.prototype.readDouble=function(t){return this.Ml.getFloat64((this.jl+=8)-8,void 0!==t?t:this.Sl)},t.prototype.readPoint=function(){var t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.El&&t.push(this.readDouble()),this.Tl&&t.push(this.readDouble()),t},t.prototype.readLineString=function(){for(var t=this.readUint32(),n=[],i=0;i<t;i++)n.push(this.readPoint());return n},t.prototype.readPolygon=function(){for(var t=this.readUint32(),n=[],i=0;i<t;i++)n.push(this.readLineString());return n},t.prototype.readWkbHeader=function(t){var n=this.readUint8()>0,i=this.readUint32(n),r=Math.floor((268435455&i)/1e3),s=Boolean(2147483648&i)||1===r||3===r,o=Boolean(1073741824&i)||2===r||3===r,u=Boolean(536870912&i),e=(268435455&i)%1e3,h=["XY",s?"Z":"",o?"M":""].join(""),f=u?this.readUint32(n):null;if(void 0!==t&&t!==e)throw new Error("Unexpected WKB geometry type "+e);if(this.xl){if(this.Sl!==n)throw new Error("Inconsistent endian");if(this.Cl!==h)throw new Error("Inconsistent geometry layout");if(f&&this.Al!==f)throw new Error("Inconsistent coordinate system (SRID)")}else this.Sl=n,this.El=s,this.Tl=o,this.Cl=h,this.Al=f,this.xl=!0;return e},t.prototype.readWkbPayload=function(t){switch(t){case Eb:return this.readPoint();case Tb:return this.readLineString();case Ab:case Rb:return this.readPolygon();case Cb:return this.readMultiPoint();case Nb:return this.readMultiLineString();case kb:case Ib:case Gb:return this.readMultiPolygon();case Pb:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}},t.prototype.readWkbBlock=function(t){return this.readWkbPayload(this.readWkbHeader(t))},t.prototype.readWkbCollection=function(t,n){for(var i=this.readUint32(),r=[],s=0;s<i;s++){var o=t.call(this,n);o&&r.push(o)}return r},t.prototype.readMultiPoint=function(){return this.readWkbCollection(this.readWkbBlock,Eb)},t.prototype.readMultiLineString=function(){return this.readWkbCollection(this.readWkbBlock,Tb)},t.prototype.readMultiPolygon=function(){return this.readWkbCollection(this.readWkbBlock,Ab)},t.prototype.readGeometryCollection=function(){return this.readWkbCollection(this.readGeometry)},t.prototype.readGeometry=function(){var t=this.readWkbHeader(),n=this.readWkbPayload(t);switch(t){case Eb:return new ls(n,this.Cl);case Tb:return new yw(n,this.Cl);case Ab:case Rb:return new Is(n,this.Cl);case Cb:return new rp(n,this.Cl);case Nb:return new np(n,this.Cl);case kb:case Ib:case Gb:return new op(n,this.Cl);case Pb:return new $p(n);default:return null}},t.prototype.getSrid=function(){return this.Al},t}(),Fb=function(){function t(t){t=t||{},this.Cl=t.layout,this.Sl=!1!==t.littleEndian,this.Nl=!1!==t.ewkb,this.kl=[],this.Pl=S({X:0,Y:0,Z:0,M:0},t.nodata)}return t.prototype.writeUint8=function(t){this.kl.push([1,t])},t.prototype.writeUint32=function(t){this.kl.push([4,t])},t.prototype.writeDouble=function(t){this.kl.push([8,t])},t.prototype.writePoint=function(t,n){for(var i=S.apply(null,n.split("").map((function(n,i){var r;return(r={})[n]=t[i],r}))),r=0,s=this.Cl;r<s.length;r++){var o=s[r];this.writeDouble(o in i?i[o]:this.Pl[o])}},t.prototype.writeLineString=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writePoint(t[i],n)},t.prototype.writePolygon=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeLineString(t[i],n)},t.prototype.writeWkbHeader=function(t,n){t%=1e3,this.Cl.indexOf("Z")>=0&&(t+=this.Nl?2147483648:1e3),this.Cl.indexOf("M")>=0&&(t+=this.Nl?1073741824:2e3),this.Nl&&Number.isInteger(n)&&(t|=536870912),this.writeUint8(this.Sl?1:0),this.writeUint32(t),this.Nl&&Number.isInteger(n)&&this.writeUint32(n)},t.prototype.writeMultiPoint=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(1),this.writePoint(t[i],n)},t.prototype.writeMultiLineString=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(2),this.writeLineString(t[i],n)},t.prototype.writeMultiPolygon=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(3),this.writePolygon(t[i],n)},t.prototype.writeGeometryCollection=function(t){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writeGeometry(t[n])},t.prototype.findMinimumLayout=function(t,n){void 0===n&&(n=Tt);var i,r;if(t instanceof Dr)return(i=t.getLayout())===(r=n)?i:i===Tt?r:r===Tt?i:xt;if(t instanceof $p)for(var s=t.getGeometriesArray(),o=0;o<s.length&&n!==xt;o++)n=this.findMinimumLayout(s[o],n);return n},t.prototype.writeGeometry=function(t,n){var i,r,s=((i={})[At.POINT]=Eb,i[At.LINE_STRING]=Tb,i[At.POLYGON]=Ab,i[At.MULTI_POINT]=Cb,i[At.MULTI_LINE_STRING]=Nb,i[At.MULTI_POLYGON]=kb,i[At.GEOMETRY_COLLECTION]=Pb,i),o=t.getType(),u=s[o];if(!u)throw new Error("GeometryType "+o+" is not supported");(this.Cl||(this.Cl=this.findMinimumLayout(t)),this.writeWkbHeader(u,n),t instanceof Dr)?((r={})[At.POINT]=this.writePoint,r[At.LINE_STRING]=this.writeLineString,r[At.POLYGON]=this.writePolygon,r[At.MULTI_POINT]=this.writeMultiPoint,r[At.MULTI_LINE_STRING]=this.writeMultiLineString,r[At.MULTI_POLYGON]=this.writeMultiPolygon,r)[o].call(this,t.getCoordinates(),t.getLayout()):t instanceof $p&&this.writeGeometryCollection(t.getGeometriesArray())},t.prototype.getBuffer=function(){var t=this,n=this.kl.reduce((function(t,n){return t+n[0]}),0),i=new ArrayBuffer(n),r=new DataView(i),s=0;return this.kl.forEach((function(n){switch(n[0]){case 1:r.setUint8(s,n[1]);break;case 4:r.setUint32(s,n[1],t.Sl);break;case 8:r.setFloat64(s,n[1],t.Sl)}s+=n[0]})),i},t}();function Db(t){return"string"==typeof t?function(t){for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.substr(2*i,2),16);return new DataView(n.buffer)}(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new DataView(t):null}var zb=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.splitCollection=Boolean(r.splitCollection),i.Il=null,i.Gl=!1!==r.hex,i.Rl=!1!==r.littleEndian,i.Ll=!1!==r.ewkb,i.Cl=r.geometryLayout,i.Fl=r.nodataZ||0,i.Dl=r.nodataM||0,i.Al=r.srid,i}return Sb(n,t),n.prototype.getType=function(){return this.Gl?Df:Lf},n.prototype.readFeature=function(t,n){return new jt({geometry:this.readGeometry(t,n)})},n.prototype.readFeatures=function(t,n){var i=this.readGeometry(t,n);return(this.splitCollection&&i instanceof $p?i.getGeometriesArray():[i]).map((function(t){return new jt({geometry:t})}))},n.prototype.readGeometry=function(t,n){var i=Db(t);if(!i)return null;var r=new Lb(i).readGeometry();this.Il=i;var s=this.getReadOptions(t,n);return this.Il=null,ty(r,!1,s)},n.prototype.readProjection=function(t){var n=this.Il||Db(t);if(n){var i=new Lb(n);return i.readWkbHeader(),i.getSrid()&&ur("EPSG:"+i.getSrid())||void 0}},n.prototype.writeFeature=function(t,n){return this.writeGeometry(t.getGeometry(),n)},n.prototype.writeFeatures=function(t,n){return this.writeGeometry(new $p(t.map((function(t){return t.getGeometry()}))),n)},n.prototype.writeGeometry=function(t,n){var i=this.adaptOptions(n),r=new Fb({layout:this.Cl,littleEndian:this.Rl,ewkb:this.Ll,nodata:{Z:this.Fl,M:this.Dl}}),s=Number.isInteger(this.Al)?Number(this.Al):null;if(!1!==this.Al&&!Number.isInteger(this.Al)){var o=i.dataProjection&&ur(i.dataProjection);if(o){var u=o.getCode();0===u.indexOf("EPSG:")&&(s=Number(u.substring(5)))}}r.writeGeometry(ty(t,!0,i),s);var e=r.getBuffer();return this.Gl?function(t){var n=new Uint8Array(t);return Array.from(n.values()).map((function(t){return(t<16?"0":"")+Number(t).toString(16).toUpperCase()})).join("")}(e):e},n}(Qp),Ub=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Xb={POINT:ls,LINESTRING:yw,POLYGON:Is,MULTIPOINT:rp,MULTILINESTRING:np,MULTIPOLYGON:op},Yb="EMPTY",Wb=0,Bb=1,qb=2,Zb=3,Jb=4,Vb=5,Hb=6,$b={};for(var Kb in At)$b[Kb]=At[Kb].toUpperCase();var Qb=function(){function t(t){this.wkt=t,this.zl=-1}return t.prototype.Ul=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.Xl=function(t,n){return t>="0"&&t<="9"||"."==t&&!(void 0!==n&&n)},t.prototype.Yl=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.Wl=function(){return this.wkt.charAt(++this.zl)},t.prototype.nextToken=function(){var t,n=this.Wl(),i=this.zl,r=n;if("("==n)t=qb;else if(","==n)t=Vb;else if(")"==n)t=Zb;else if(this.Xl(n)||"-"==n)t=Jb,r=this.Bl();else if(this.Ul(n))t=Bb,r=this.ql();else{if(this.Yl(n))return this.nextToken();if(""!==n)throw new Error("Unexpected character: "+n);t=Hb}return{position:i,value:r,type:t}},t.prototype.Bl=function(){var t,n=this.zl,i=!1,r=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(r=!0),t=this.Wl()}while(this.Xl(t,i)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(n,this.zl--))},t.prototype.ql=function(){var t,n=this.zl;do{t=this.Wl()}while(this.Ul(t));return this.wkt.substring(n,this.zl--).toUpperCase()},t}(),t_=function(){function t(t){this.Zl=t,this.Jl={position:0,type:Wb},this.Cl=xt}return t.prototype.Vl=function(){this.Jl=this.Zl.nextToken()},t.prototype.isTokenType=function(t){return this.Jl.type==t},t.prototype.match=function(t){var n=this.isTokenType(t);return n&&this.Vl(),n},t.prototype.parse=function(){return this.Vl(),this.Hl()},t.prototype.$l=function(){var t=xt,n=this.Jl;if(this.isTokenType(Bb)){var i=n.value;"Z"===i?t=St:"M"===i?t=Et:"ZM"===i&&(t=Tt),t!==xt&&this.Vl()}return t},t.prototype.Kl=function(){if(this.match(qb)){var t=[];do{t.push(this.Hl())}while(this.match(Vb));if(this.match(Zb))return t}throw new Error(this.Ql())},t.prototype.td=function(){if(this.match(qb)){var t=this.nd();if(this.match(Zb))return t}throw new Error(this.Ql())},t.prototype.rd=function(){if(this.match(qb)){var t=this.sd();if(this.match(Zb))return t}throw new Error(this.Ql())},t.prototype.od=function(){if(this.match(qb)){var t=this.ud();if(this.match(Zb))return t}throw new Error(this.Ql())},t.prototype.ed=function(){if(this.match(qb)){var t=void 0;if(t=this.Jl.type==qb?this.hd():this.sd(),this.match(Zb))return t}throw new Error(this.Ql())},t.prototype.fd=function(){if(this.match(qb)){var t=this.ud();if(this.match(Zb))return t}throw new Error(this.Ql())},t.prototype.ad=function(){if(this.match(qb)){var t=this.vd();if(this.match(Zb))return t}throw new Error(this.Ql())},t.prototype.nd=function(){for(var t=[],n=this.Cl.length,i=0;i<n;++i){var r=this.Jl;if(!this.match(Jb))break;t.push(r.value)}if(t.length==n)return t;throw new Error(this.Ql())},t.prototype.sd=function(){for(var t=[this.nd()];this.match(Vb);)t.push(this.nd());return t},t.prototype.hd=function(){for(var t=[this.td()];this.match(Vb);)t.push(this.td());return t},t.prototype.ud=function(){for(var t=[this.rd()];this.match(Vb);)t.push(this.rd());return t},t.prototype.vd=function(){for(var t=[this.od()];this.match(Vb);)t.push(this.od());return t},t.prototype.ld=function(){var t=this.isTokenType(Bb)&&this.Jl.value==Yb;return t&&this.Vl(),t},t.prototype.Ql=function(){return"Unexpected `"+this.Jl.value+"` at position "+this.Jl.position+" in `"+this.Zl.wkt+"`"},t.prototype.Hl=function(){var t=this.Jl;if(this.match(Bb)){var n=t.value;this.Cl=this.$l();var i=this.ld();if("GEOMETRYCOLLECTION"==n){if(i)return new $p([]);var r=this.Kl();return new $p(r)}var s=Xb[n];if(!s)throw new Error("Invalid geometry type: "+n);var o=void 0;if(i)o="POINT"==n?[NaN,NaN]:[];else switch(n){case"POINT":o=this.td();break;case"LINESTRING":o=this.rd();break;case"POLYGON":o=this.od();break;case"MULTIPOINT":o=this.ed();break;case"MULTILINESTRING":o=this.fd();break;case"MULTIPOLYGON":o=this.ad()}return new s(o,this.Cl)}throw new Error(this.Ql())},t}(),n_=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dd=void 0!==r.splitCollection&&r.splitCollection,i}return Ub(n,t),n.prototype.wd=function(t){var n=new Qb(t);return new t_(n).parse()},n.prototype.readFeatureFromText=function(t,n){var i=this.readGeometryFromText(t,n),r=new jt;return r.setGeometry(i),r},n.prototype.readFeaturesFromText=function(t,n){for(var i=[],r=this.readGeometryFromText(t,n),s=[],o=0,u=(i=this.dd&&r.getType()==At.GEOMETRY_COLLECTION?r.getGeometriesArray():[r]).length;o<u;++o){var e=new jt;e.setGeometry(i[o]),s.push(e)}return s},n.prototype.readGeometryFromText=function(t,n){return ty(this.wd(t),!1,n)},n.prototype.writeFeatureText=function(t,n){var i=t.getGeometry();return i?this.writeGeometryText(i,n):""},n.prototype.writeFeaturesText=function(t,n){if(1==t.length)return this.writeFeatureText(t[0],n);for(var i=[],r=0,s=t.length;r<s;++r)i.push(t[r].getGeometry());var o=new $p(i);return this.writeGeometryText(o,n)},n.prototype.writeGeometryText=function(t,n){return u_(ty(t,!0,n))},n}(ob);function i_(t){var n=t.getCoordinates();return 0===n.length?"":n.join(" ")}function r_(t){for(var n=t.getCoordinates(),i=[],r=0,s=n.length;r<s;++r)i.push(n[r].join(" "));return i.join(",")}function s_(t){for(var n=[],i=t.getLinearRings(),r=0,s=i.length;r<s;++r)n.push("("+r_(i[r])+")");return n.join(",")}var o_={Point:i_,LineString:r_,Polygon:s_,MultiPoint:function(t){for(var n=[],i=t.getPoints(),r=0,s=i.length;r<s;++r)n.push("("+i_(i[r])+")");return n.join(",")},MultiLineString:function(t){for(var n=[],i=t.getLineStrings(),r=0,s=i.length;r<s;++r)n.push("("+r_(i[r])+")");return n.join(",")},MultiPolygon:function(t){for(var n=[],i=t.getPolygons(),r=0,s=i.length;r<s;++r)n.push("("+s_(i[r])+")");return n.join(",")},GeometryCollection:function(t){for(var n=[],i=t.getGeometries(),r=0,s=i.length;r<s;++r)n.push(u_(i[r]));return n.join(",")}};function u_(t){var n=t.getType(),i=(0,o_[n])(t);if(n=n.toUpperCase(),"function"==typeof t.getFlatCoordinates){var r=function(t){var n=t.getLayout(),i="";return n!==St&&n!==Tt||(i+="Z"),n!==Et&&n!==Tt||(i+="M"),i}(t);r.length>0&&(n+=" "+r)}return 0===i.length?n+" "+Yb:n+"("+i+")"}var e_=n_,h_=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var n=Lc(t);return this.readFromDocument(n)}return Rc(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);return null},t.prototype.readFromNode=function(t){},t}(),f_=function(){function t(t){this.pd=t}return t.prototype.getTagName=function(){return this.pd},t}(),c_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),a_=function(t){function n(n,i){var r=t.call(this,n)||this;return r.conditions=i,mt(r.conditions.length>=2,57),r}return c_(n,t),n}(f_),v_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),l_=function(t){function n(n){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return v_(n,t),n}(a_),d_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),w_=function(t){function n(n,i,r){var s=t.call(this,"BBOX")||this;if(s.geometryName=n,s.extent=i,4!==i.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return s.srsName=r,s}return d_(n,t),n}(f_),p_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),y_=function(t){function n(n,i,r,s){var o=t.call(this,n)||this;return o.geometryName=i||"the_geom",o.geometry=r,o.srsName=s,o}return p_(n,t),n}(f_),b_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),__=function(t){function n(n,i,r){return t.call(this,"Contains",n,i,r)||this}return b_(n,t),n}(y_),g_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),m_=function(t){function n(n,i,r,s,o){var u=t.call(this,"DWithin",n,i,o)||this;return u.distance=r,u.unit=s,u}return g_(n,t),n}(y_),O_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),M_=function(t){function n(n,i,r){return t.call(this,"Disjoint",n,i,r)||this}return O_(n,t),n}(y_),j_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),x_=function(t){function n(n,i){var r=t.call(this,n)||this;return r.propertyName=i,r}return j_(n,t),n}(f_),S_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),E_=function(t){function n(n,i,r){var s=t.call(this,"During",n)||this;return s.begin=i,s.end=r,s}return S_(n,t),n}(x_),T_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),A_=function(t){function n(n,i,r,s){var o=t.call(this,n,i)||this;return o.expression=r,o.matchCase=s,o}return T_(n,t),n}(x_),C_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),N_=function(t){function n(n,i,r){return t.call(this,"PropertyIsEqualTo",n,i,r)||this}return C_(n,t),n}(A_),k_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),P_=function(t){function n(n,i){return t.call(this,"PropertyIsGreaterThan",n,i)||this}return k_(n,t),n}(A_),I_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),G_=function(t){function n(n,i){return t.call(this,"PropertyIsGreaterThanOrEqualTo",n,i)||this}return I_(n,t),n}(A_),R_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),L_=function(t){function n(n,i,r){return t.call(this,"Intersects",n,i,r)||this}return R_(n,t),n}(y_),F_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),D_=function(t){function n(n,i,r){var s=t.call(this,"PropertyIsBetween",n)||this;return s.lowerBoundary=i,s.upperBoundary=r,s}return F_(n,t),n}(x_),z_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),U_=function(t){function n(n,i,r,s,o,u){var e=t.call(this,"PropertyIsLike",n)||this;return e.pattern=i,e.wildCard=void 0!==r?r:"*",e.singleChar=void 0!==s?s:".",e.escapeChar=void 0!==o?o:"!",e.matchCase=u,e}return z_(n,t),n}(x_),X_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Y_=function(t){function n(n){return t.call(this,"PropertyIsNull",n)||this}return X_(n,t),n}(x_),W_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),B_=function(t){function n(n,i){return t.call(this,"PropertyIsLessThan",n,i)||this}return W_(n,t),n}(A_),q_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Z_=function(t){function n(n,i){return t.call(this,"PropertyIsLessThanOrEqualTo",n,i)||this}return q_(n,t),n}(A_),J_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),V_=function(t){function n(n){var i=t.call(this,"Not")||this;return i.condition=n,i}return J_(n,t),n}(f_),H_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$_=function(t){function n(n,i,r){return t.call(this,"PropertyIsNotEqualTo",n,i,r)||this}return H_(n,t),n}(A_),K_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Q_=function(t){function n(n){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return K_(n,t),n}(a_),tg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ng=function(t){function n(n){var i=t.call(this,"ResourceId")||this;return i.rid=n,i}return tg(n,t),n}(f_),ig=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rg=function(t){function n(n,i,r){return t.call(this,"Within",n,i,r)||this}return ig(n,t),n}(y_);var sg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),og=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],ug="enterfullscreen",eg="leavefullscreen";function hg(){var t=document.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function fg(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function cg(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var ag=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).on,i.once,i.un,i.yd=void 0!==r.className?r.className:"ol-full-screen",i.bd=void 0!==r.activeClassName?r.activeClassName.split(" "):[i.yd+"-true"],i._d=void 0!==r.inactiveClassName?r.inactiveClassName.split(" "):[i.yd+"-false"];var s=void 0!==r.label?r.label:"⤢";i.gd="string"==typeof s?document.createTextNode(s):s;var o=void 0!==r.labelActive?r.labelActive:"×";i.md="string"==typeof o?document.createTextNode(o):o,i.Od=document.createElement("button");var u=r.tipLabel?r.tipLabel:"Toggle full-screen";i.Md(i.Od,fg()),i.Od.setAttribute("type","button"),i.Od.title=u,i.Od.appendChild(i.gd),i.Od.addEventListener(G,i.ir.bind(i),!1);var e=i.yd+" "+"ol-unselectable "+"ol-control "+(hg()?"":cu),h=i.element;return h.className=e,h.appendChild(i.Od),i.jd=void 0!==r.keys&&r.keys,i.na=r.source,i}return sg(n,t),n.prototype.ir=function(t){t.preventDefault(),this.xd()},n.prototype.xd=function(){if(hg()){var t=this.getMap();if(t)if(fg())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var n=void 0;n=this.na?"string"==typeof this.na?document.getElementById(this.na):this.na:t.getTargetElement(),this.jd?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():cg(t)}(n):cg(n)}}},n.prototype.Sd=function(){var t=this.getMap();fg()?(this.Md(this.Od,!0),lo(this.md,this.gd),this.dispatchEvent(ug)):(this.Md(this.Od,!1),lo(this.gd,this.md),this.dispatchEvent(eg)),t&&t.updateSize()},n.prototype.Md=function(t,n){var i,r,s,o=this.bd,u=this._d,e=n?o:u;(i=t.classList).remove.apply(i,o),(r=t.classList).remove.apply(r,u),(s=t.classList).add.apply(s,e)},n.prototype.setMap=function(n){if(t.prototype.setMap.call(this,n),n)for(var i=0,r=og.length;i<r;++i)this.listenerKeys.push(q(document,og[i],this.Sd,this))},n}(Be),vg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),lg="projection",dg="coordinateFormat",wg=function(t){function n(n){var i=this,r=n||{},s=document.createElement("div");s.className=void 0!==r.className?r.className:"ol-mouse-position",(i=t.call(this,{element:s,render:r.render,target:r.target})||this).on,i.once,i.un,i.addChangeListener(lg,i.ft),r.coordinateFormat&&i.setCoordinateFormat(r.coordinateFormat),r.projection&&i.setProjection(r.projection);var o=!0,u="&#160;";return"undefinedHTML"in r?(void 0!==r.undefinedHTML&&(u=r.undefinedHTML),o=!!u):"placeholder"in r&&(!1===r.placeholder?o=!1:u=String(r.placeholder)),i.Ed=u,i.Td=o,i.Ad=s.innerHTML,i.Cd=null,i.et=null,i}return vg(n,t),n.prototype.ft=function(){this.et=null},n.prototype.getCoordinateFormat=function(){return this.get(dg)},n.prototype.getProjection=function(){return this.get(lg)},n.prototype.handleMouseMove=function(t){var n=this.getMap();this.Nd(n.getEventPixel(t))},n.prototype.handleMouseOut=function(t){this.Nd(null)},n.prototype.setMap=function(n){if(t.prototype.setMap.call(this,n),n){var i=n.getViewport();this.listenerKeys.push(q(i,Hu,this.handleMouseMove,this)),this.Td&&this.listenerKeys.push(q(i,Qu,this.handleMouseOut,this)),this.Nd(null)}},n.prototype.setCoordinateFormat=function(t){this.set(dg,t)},n.prototype.setProjection=function(t){this.set(lg,ur(t))},n.prototype.Nd=function(t){var n=this.Ed;if(t&&this.Cd){if(!this.et){var i=this.getProjection();this.et=i?dr(this.Cd,i):rr}var r=this.getMap().getCoordinateFromPixelInternal(t);if(r){var s=gr();s&&(this.et=dr(this.Cd,s)),this.et(r,r);var o=this.getCoordinateFormat();n=o?o(r):r.toString()}}this.Ad&&n===this.Ad||(this.element.innerHTML=n,this.Ad=n)},n.prototype.render=function(t){var n=t.frameState;n?this.Cd!=n.viewState.projection&&(this.Cd=n.viewState.projection,this.et=null):this.Cd=null},n}(Be),pg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yg=.75,bg=.1,_g=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return pg(n,t),n.prototype.createRenderer=function(){return new Uu(this)},n}(Ye),gg=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).kd=i.Pd.bind(i),i.Vi=void 0===r.collapsed||r.collapsed,i.Ki=void 0===r.collapsible||r.collapsible,i.Ki||(i.Vi=!1),i.eo=void 0!==r.rotateWithView&&r.rotateWithView,i.Id=void 0;var s=void 0!==r.className?r.className:"ol-overviewmap",o=void 0!==r.tipLabel?r.tipLabel:"Overview map",u=void 0!==r.collapseLabel?r.collapseLabel:"‹";"string"==typeof u?(i.Qi=document.createElement("span"),i.Qi.textContent=u):i.Qi=u;var e=void 0!==r.label?r.label:"›";"string"==typeof e?(i.tr=document.createElement("span"),i.tr.textContent=e):i.tr=e;var h=i.Ki&&!i.Vi?i.Qi:i.tr,f=document.createElement("button");f.setAttribute("type","button"),f.title=o,f.appendChild(h),f.addEventListener(G,i.ir.bind(i),!1),i.Gd=document.createElement("div"),i.Gd.className="ol-overviewmap-map",i.Ml=r.view,i.Rd=new _g({view:r.view});var c=i.Rd;r.layers&&r.layers.forEach((function(t){c.addLayer(t)}));var a=document.createElement("div");a.className="ol-overviewmap-box",a.style.boxSizing="border-box",i.Ld=new gf({position:[0,0],positioning:hf,element:a}),i.Rd.addOverlay(i.Ld);var v=s+" "+"ol-unselectable "+au+(i.Vi&&i.Ki?" ol-collapsed":"")+(i.Ki?"":" ol-uncollapsible"),l=i.element;l.className=v,l.appendChild(i.Gd),l.appendChild(f);var d=i,w=i.Ld,p=i.Ld.getElement(),y=function(t){var n,i={clientX:(n=t).clientX,clientY:n.clientY},r=c.getEventCoordinateInternal(i);w.setPosition(r)},b=function t(n){var i=c.getEventCoordinateInternal(n);d.getMap().getView().setCenterInternal(i),window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",t)};return p.addEventListener("mousedown",(function(){window.addEventListener("mousemove",y),window.addEventListener("mouseup",b)})),i}return pg(n,t),n.prototype.setMap=function(n){var i=this.getMap();if(n!==i){if(i){var r=i.getView();r&&this.Fd(r),this.Rd.setTarget(null)}if(t.prototype.setMap.call(this,n),n){this.Rd.setTarget(this.Gd),this.listenerKeys.push(q(n,v,this.Dd,this));var s=n.getView();s&&(this.zd(s),s.isDef()&&(this.Rd.updateSize(),this.Ud())),this.Rd.isRendered()||this.Xd()}}},n.prototype.Dd=function(t){if(t.key===he){var n=t.oldValue;n&&this.Fd(n);var i=this.getMap().getView();this.zd(i)}else this.Rd.isRendered()||t.key!==ee&&t.key!==ue||this.Rd.updateSize()},n.prototype.zd=function(t){if(!this.Ml){var n=new Fe({projection:t.getProjection()});this.Rd.setView(n)}t.addChangeListener(be,this.kd),this.Pd()},n.prototype.Fd=function(t){t.removeChangeListener(be,this.kd)},n.prototype.Pd=function(){this.eo&&this.Rd.getView().setRotation(this.getMap().getView().getRotation())},n.prototype.Yd=function(){var t=this.getMap(),n=this.Rd;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView().calculateExtentInternal(i);if(!this.Id||!Tn(r,this.Id)){this.Id=r;var s=n.getSize(),o=n.getView().calculateExtentInternal(s),u=n.getPixelFromCoordinateInternal(Bn(r)),e=n.getPixelFromCoordinateInternal(Dn(r)),h=Math.abs(u[0]-e[0]),f=Math.abs(u[1]-e[1]),c=s[0],a=s[1];h<c*bg||f<a*bg||h>c*yg||f>a*yg?this.Ud():gn(o,r)||this.Wd()}}},n.prototype.Ud=function(){var t=this.getMap(),n=this.Rd,i=t.getSize(),r=t.getView().calculateExtentInternal(i),s=n.getView(),o=Math.log(7.5)/Math.LN2;$n(r,1/(Math.pow(2,o/2)*bg)),s.fitInternal(Rs(r))},n.prototype.Wd=function(){var t=this.getMap(),n=this.Rd,i=t.getView();n.getView().setCenterInternal(i.getCenterInternal())},n.prototype.Bd=function(){var t=this.getMap(),n=this.Rd;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView(),s=n.getView(),o=this.eo?0:-r.getRotation(),u=this.Ld,e=this.Ld.getElement(),h=r.getCenterInternal(),f=r.getResolution(),c=s.getResolution(),a=i[0]*f/c,v=i[1]*f/c;if(u.setPosition(h),e){e.style.width=a+"px",e.style.height=v+"px";var l="rotate("+o+"rad)";e.style.transform=l}}},n.prototype.Xd=function(){this.qd||(this.qd=Z(this.Rd,ie,(function(t){delete this.qd,this.Bd()}),this))},n.prototype.ir=function(t){t.preventDefault(),this.er()},n.prototype.er=function(){this.element.classList.toggle(vu),this.Vi?lo(this.Qi,this.tr):lo(this.tr,this.Qi),this.Vi=!this.Vi;var t=this.Rd;if(!this.Vi){if(t.isRendered())return this.Id=void 0,void t.render();t.updateSize(),this.Ud(),this.Xd()}},n.prototype.getCollapsible=function(){return this.Ki},n.prototype.setCollapsible=function(t){this.Ki!==t&&(this.Ki=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.Vi&&this.er())},n.prototype.setCollapsed=function(t){this.Ki&&this.Vi!==t&&this.er()},n.prototype.getCollapsed=function(){return this.Vi},n.prototype.getRotateWithView=function(){return this.eo},n.prototype.setRotateWithView=function(t){this.eo!==t&&(this.eo=t,0!==this.getMap().getView().getRotation()&&(this.eo?this.Pd():this.Rd.getView().setRotation(0),this.Id=void 0,this.Yd(),this.Bd()))},n.prototype.getOverviewMap=function(){return this.Rd},n.prototype.render=function(t){this.Yd(),this.Bd()},n}(Be),mg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Og="units",Mg="degrees",jg="imperial",xg="nautical",Sg="metric",Eg="us",Tg=[1,2,5],Ag=25.4/.28,Cg=function(t){function n(n){var i=this,r=n||{},s=void 0!==r.className?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).on,i.once,i.un,i.Zd=document.createElement("div"),i.Zd.className=s+"-inner",i.element.className=s+" "+fu,i.element.appendChild(i.Zd),i.Jd=null,i.Vd=void 0!==r.minWidth?r.minWidth:64,i.Jt=!1,i.Hd=void 0,i.Ad="",i.addChangeListener(Og,i.$d),i.setUnits(r.units||Sg),i.Kd=r.bar||!1,i.Qd=r.steps||4,i.tw=r.text||!1,i.nw=r.dpi||void 0,i}return mg(n,t),n.prototype.getUnits=function(){return this.get(Og)},n.prototype.$d=function(){this.ur()},n.prototype.setUnits=function(t){this.set(Og,t)},n.prototype.setDpi=function(t){this.nw=t},n.prototype.ur=function(){var t=this.Jd;if(t){var n=t.center,i=t.projection,r=this.getUnits(),s=r==Mg?It.DEGREES:It.METERS,o=er(i,t.resolution,n,s),u=this.Vd*(this.nw||Ag)/Ag,e=u*o,h="";if(r==Mg){var f=kt[It.DEGREES];(e*=f)<f/60?(h="″",o*=3600):e<f?(h="′",o*=60):h="°"}else r==jg?e<.9144?(h="in",o/=.0254):e<1609.344?(h="ft",o/=.3048):(h="mi",o/=1609.344):r==xg?(o/=1852,h="nm"):r==Sg?e<.001?(h="μm",o*=1e6):e<1?(h="mm",o*=1e3):e<1e3?h="m":(h="km",o/=1e3):r==Eg?e<.9144?(h="in",o*=39.37):e<1609.344?(h="ft",o/=.30480061):(h="mi",o/=1609.3472):mt(!1,33);for(var c,a,v,l,d=3*Math.floor(Math.log(u*o)/Math.log(10));;){v=Math.floor(d/3);var w=Math.pow(10,v);if(c=Tg[(d%3+3)%3]*w,a=Math.round(c/o),isNaN(a))return this.element.style.display="none",void(this.Jt=!1);if(a>=u)break;++d}l=this.Kd?this.createScaleBar(a,c,h):c.toFixed(v<0?-v:0)+" "+h,this.Ad!=l&&(this.Zd.innerHTML=l,this.Ad=l),this.Hd!=a&&(this.Zd.style.width=a+"px",this.Hd=a),this.Jt||(this.element.style.display="",this.Jt=!0)}else this.Jt&&(this.element.style.display="none",this.Jt=!1)},n.prototype.createScaleBar=function(t,n,i){for(var r="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),s=[],o=t/this.Qd,u="#ffffff",e=0;e<this.Qd;e++)0===e&&s.push(this.createMarker("absolute",e)),s.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+u+';"></div>'+this.createMarker("relative",e)+(e%2==0||2===this.Qd?this.createStepText(e,t,!1,n,i):"")+"</div>"),e===this.Qd-1&&s.push(this.createStepText(e+1,t,!0,n,i)),u="#ffffff"===u?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.tw?'<div class="ol-scale-text" style="width: '+t+'px;">'+r+"</div>":"")+s.join("")+"</div>"},n.prototype.createMarker=function(t,n){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},n.prototype.createStepText=function(t,n,i,r,s){var o=(0===t?0:Math.round(r/this.Qd*t*100)/100)+(0===t?"":" "+s);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:n/this.Qd*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:n/this.Qd*2)+"px;left: "+(i?n+"px":"unset")+';">'+o+"</div>"},n.prototype.getScaleForResolution=function(){var t=er(this.Jd.projection,this.Jd.resolution,this.Jd.center),n=this.nw||Ag,i=this.Jd.projection.getMetersPerUnit();return parseFloat(t.toString())*i*(1e3/25.4)*n},n.prototype.render=function(t){var n=t.frameState;this.Jd=n?n.viewState:null,this.ur()},n}(Be),Ng=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kg=0,Pg=1,Ig=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render})||this).fn=[],i.iw=void 0,i.rw=kg,i.hn,i.sw=0,i.ow=0,i.uw,i.ew,i.hw=null,i.fw=!1,i.cr=void 0!==r.duration?r.duration:200;var s=void 0!==r.className?r.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=s+"-thumb "+fu;var u=i.element;return u.className=s+" "+"ol-unselectable "+au,u.appendChild(o),u.addEventListener($u,i.cw.bind(i),!1),u.addEventListener(Hu,i.aw.bind(i),!1),u.addEventListener(Ku,i.lw.bind(i),!1),u.addEventListener(G,i.dw.bind(i),!1),o.addEventListener(G,c,!1),i}return Ng(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),n&&n.render()},n.prototype.ww=function(){var t=this.element,n=t.offsetWidth,i=t.offsetHeight;if(0===n&&0===i)return this.fw=!1;var r=getComputedStyle(t);n-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);var s=t.firstElementChild,o=getComputedStyle(s),u=s.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),e=s.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.hw=[u,e],n>i?(this.rw=Pg,this.ow=n-u):(this.rw=kg,this.sw=i-e),this.fw=!0},n.prototype.dw=function(t){var n=this.getMap().getView(),i=this.pw(t.offsetX-this.hw[0]/2,t.offsetY-this.hw[1]/2),r=this.yw(i),s=n.getConstrainedZoom(n.getZoomForResolution(r));n.animateInternal({zoom:s,duration:this.cr,easing:dt})},n.prototype.cw=function(t){if(!this.hn&&t.target===this.element.firstElementChild){var n=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.uw=t.clientX-parseFloat(n.style.left),this.ew=t.clientY-parseFloat(n.style.top),this.hn=!0,0===this.fn.length){var i=this.aw,r=this.lw,s=this.getMap().getOwnerDocument();this.fn.push(q(s,Hu,i,this),q(s,Ku,r,this))}}},n.prototype.aw=function(t){if(this.hn){var n=t.clientX-this.uw,i=t.clientY-this.ew,r=this.pw(n,i);this.iw=this.yw(r),this.getMap().getView().setResolution(this.iw)}},n.prototype.lw=function(t){this.hn&&(this.getMap().getView().endInteraction(),this.hn=!1,this.uw=void 0,this.ew=void 0,this.fn.forEach(J),this.fn.length=0)},n.prototype.bw=function(t){var n=this._w(t),i=this.element.firstElementChild;this.rw==Pg?i.style.left=this.ow*n+"px":i.style.top=this.sw*n+"px"},n.prototype.pw=function(t,n){return ii(this.rw===Pg?t/this.ow:n/this.sw,0,1)},n.prototype.yw=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},n.prototype._w=function(t){return ii(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},n.prototype.render=function(t){if(t.frameState&&(this.fw||this.ww())){var n=t.frameState.viewState.resolution;this.iw=n,this.bw(n)}},n}(Be),Gg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Rg=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).extent=r.extent?r.extent:null;var s=void 0!==r.className?r.className:"ol-zoom-extent",o=void 0!==r.label?r.label:"E",u=void 0!==r.tipLabel?r.tipLabel:"Fit to extent",e=document.createElement("button");e.setAttribute("type","button"),e.title=u,e.appendChild("string"==typeof o?document.createTextNode(o):o),e.addEventListener(G,i.ir.bind(i),!1);var h=s+" "+"ol-unselectable "+au,f=i.element;return f.className=h,f.appendChild(e),i}return Gg(n,t),n.prototype.ir=function(t){t.preventDefault(),this.handleZoomToExtent()},n.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),n=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(Rs(n))},n}(Be),Lg={};Lg.AssertionError=f,Lg.Collection=et,Lg.Collection.CollectionEvent=ut,Lg.DataTile=gt,Lg.Disposable=l,Lg.Feature=jt,Lg.Feature.createStyleFunction=Mt,Lg.Geolocation=$s,Lg.Image=eo,Lg.Image.listenImage=uo,Lg.ImageBase=Qs,Lg.ImageCanvas=fo,Lg.ImageTile=_o,Lg.Kinetic=go,Lg.Map=rf,Lg.MapBrowserEvent=Ju,Lg.MapBrowserEventHandler=ne,Lg.MapEvent=qu,Lg.Object=nt,Lg.Object.ObjectEvent=tt,Lg.Observable=K,Lg.Observable.unByKey=$,Lg.Overlay=gf,Lg.PluggableMap=Ye,Lg.Tile=bt,Lg.TileCache=Af,Lg.TileQueue=ve,Lg.TileQueue.getTilePriority=le,Lg.TileRange=kf,Lg.TileRange.createOrUpdate=Nf,Lg.VectorRenderTile=Gf,Lg.View=Fe,Lg.View.createCenterConstraint=Pe,Lg.View.createResolutionConstraint=Ie,Lg.View.createRotationConstraint=Ge,Lg.View.isNoopAnimation=Re,Lg.array={},Lg.array.binarySearch=d,Lg.array.equals=g,Lg.array.extend=_,Lg.array.find=function(t,n){for(var i,r=t.length>>>0,s=0;s<r;s++)if(n(i=t[s],s,t))return i;return null},Lg.array.findIndex=function(t,n){var i;return!t.every((function(r,s){return i=s,!n(r,s,t)}))?i:-1},Lg.array.includes=p,Lg.array.isSorted=m,Lg.array.linearFindNearest=y,Lg.array.numberSafeCompareFunction=w,Lg.array.remove=function(t,n){var i=t.indexOf(n),r=i>-1;return r&&t.splice(i,1),r},Lg.array.reverseSubArray=b,Lg.array.stableSort=function(t,n){var i,r=t.length,s=Array(t.length);for(i=0;i<r;i++)s[i]={index:i,value:t[i]};for(s.sort((function(t,i){return n(t.value,i.value)||t.index-i.index})),i=0;i<t.length;i++)t[i]=s[i].value},Lg.asserts={},Lg.asserts.assert=mt,Lg.centerconstraint={},Lg.centerconstraint.createExtent=ge,Lg.centerconstraint.none=me,Lg.color={},Lg.color.asArray=So,Lg.color.asString=Mo,Lg.color.fromString=xo,Lg.color.isStringColor=Ao,Lg.color.normalize=Eo,Lg.color.toString=To,Lg.colorlike={},Lg.colorlike.asColorLike=Rf,Lg.control={},Lg.control.Attribution=Ze,Lg.control.Control=Be,Lg.control.FullScreen=ag,Lg.control.MousePosition=wg,Lg.control.OverviewMap=gg,Lg.control.Rotate=Ve,Lg.control.ScaleLine=Cg,Lg.control.Zoom=$e,Lg.control.ZoomSlider=Ig,Lg.control.ZoomToExtent=Rg,Lg.control.defaults=Ke,Lg.coordinate={},Lg.coordinate.add=Xi,Lg.coordinate.closestOnCircle=Yi,Lg.coordinate.closestOnSegment=Wi,Lg.coordinate.createStringXY=function(t){return function(n){return Qi(n,t)}},Lg.coordinate.degreesToStringHDMS=Bi,Lg.coordinate.distance=$i,Lg.coordinate.equals=Zi,Lg.coordinate.format=qi,Lg.coordinate.getWorldsAway=nr,Lg.coordinate.rotate=Ji,Lg.coordinate.scale=Vi,Lg.coordinate.squaredDistance=Hi,Lg.coordinate.squaredDistanceToSegment=Ki,Lg.coordinate.toStringHDMS=function(t,n){return t?Bi("NS",t[1],n)+" "+Bi("EW",t[0],n):""},Lg.coordinate.toStringXY=Qi,Lg.coordinate.wrapX=tr,Lg.css={},Lg.css.CLASS_COLLAPSED=vu,Lg.css.CLASS_CONTROL=au,Lg.css.CLASS_HIDDEN=eu,Lg.css.CLASS_SELECTABLE=hu,Lg.css.CLASS_UNSELECTABLE=fu,Lg.css.CLASS_UNSUPPORTED=cu,Lg.css.cssOpacity=pu,Lg.css.getFontParameters=wu,Lg.dom={},Lg.dom.createCanvasContext2D=co,Lg.dom.outerHeight=vo,Lg.dom.outerWidth=ao,Lg.dom.removeChildren=po,Lg.dom.removeNode=wo,Lg.dom.replaceChildren=yo,Lg.dom.replaceNode=lo,Lg.easing={},Lg.easing.easeIn=lt,Lg.easing.easeOut=dt,Lg.easing.inAndOut=wt,Lg.easing.linear=pt,Lg.easing.upAndDown=function(t){return t<.5?wt(2*t):1-wt(2*(t-.5))},Lg.events={},Lg.events.Event=a,Lg.events.Event.preventDefault=function(t){t.preventDefault()},Lg.events.Event.stopPropagation=c,Lg.events.Target=N,Lg.events.condition={},Lg.events.condition.all=fh,Lg.events.condition.altKeyOnly=ch,Lg.events.condition.altShiftKeysOnly=ah,Lg.events.condition.always=dh,Lg.events.condition.click=function(t){return t.type==Vu.CLICK},Lg.events.condition.doubleClick=function(t){return t.type==Vu.DBLCLICK},Lg.events.condition.focus=vh,Lg.events.condition.focusWithTabindex=lh,Lg.events.condition.mouseActionButton=wh,Lg.events.condition.mouseOnly=mh,Lg.events.condition.never=ph,Lg.events.condition.noModifierKeys=bh,Lg.events.condition.penOnly=function(t){var n=t.originalEvent;return mt(void 0!==n,56),"pen"===n.pointerType},Lg.events.condition.platformModifierKeyOnly=function(t){var n=t.originalEvent;return!n.altKey&&(Dt?n.metaKey:n.ctrlKey)&&!n.shiftKey},Lg.events.condition.pointerMove=function(t){return"pointermove"==t.type},Lg.events.condition.primaryAction=Oh,Lg.events.condition.shiftKeyOnly=_h,Lg.events.condition.singleClick=yh,Lg.events.condition.targetNotEditable=gh,Lg.events.condition.touchOnly=function(t){var n=t.originalEvent;return mt(void 0!==n,56),"touch"===n.pointerType},Lg.events.listen=q,Lg.events.listenOnce=Z,Lg.events.unlistenByKey=J,Lg.extent={},Lg.extent.applyTransform=Qn,Lg.extent.approximatelyEquals=An,Lg.extent.boundingExtent=wn,Lg.extent.buffer=pn,Lg.extent.clone=yn,Lg.extent.closestSquaredDistanceXY=bn,Lg.extent.containsCoordinate=_n,Lg.extent.containsExtent=gn,Lg.extent.containsXY=mn,Lg.extent.coordinateRelationship=On,Lg.extent.createEmpty=Mn,Lg.extent.createOrUpdate=jn,Lg.extent.createOrUpdateEmpty=xn,Lg.extent.createOrUpdateFromCoordinate=Sn,Lg.extent.createOrUpdateFromCoordinates=function(t,n){return kn(xn(n),t)},Lg.extent.createOrUpdateFromFlatCoordinates=En,Lg.extent.createOrUpdateFromRings=function(t,n){return In(xn(n),t)},Lg.extent.equals=Tn,Lg.extent.extend=Cn,Lg.extent.extendCoordinate=Nn,Lg.extent.extendCoordinates=kn,Lg.extent.extendFlatCoordinates=Pn,Lg.extent.extendRings=In,Lg.extent.extendXY=Gn,Lg.extent.forEachCorner=Rn,Lg.extent.getArea=Ln,Lg.extent.getBottomLeft=Fn,Lg.extent.getBottomRight=Dn,Lg.extent.getCenter=zn,Lg.extent.getCorner=Un,Lg.extent.getEnlargedArea=function(t,n){var i=Math.min(t[0],n[0]),r=Math.min(t[1],n[1]);return(Math.max(t[2],n[2])-i)*(Math.max(t[3],n[3])-r)},Lg.extent.getForViewAndSize=Xn,Lg.extent.getHeight=Yn,Lg.extent.getIntersection=Wn,Lg.extent.getIntersectionArea=function(t,n){return Ln(Wn(t,n))},Lg.extent.getMargin=function(t){return Zn(t)+Yn(t)},Lg.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},Lg.extent.getTopLeft=Bn,Lg.extent.getTopRight=qn,Lg.extent.getWidth=Zn,Lg.extent.intersects=Jn,Lg.extent.intersectsSegment=Kn,Lg.extent.isEmpty=Vn,Lg.extent.returnOrUpdate=Hn,Lg.extent.scaleFromCenter=$n,Lg.extent.wrapX=ti,Lg.featureloader={},Lg.featureloader.loadFeaturesXhr=Xf,Lg.featureloader.setWithCredentials=function(t){Uf=t},Lg.featureloader.xhr=Yf,Lg.format={},Lg.format.Feature=Qp,Lg.format.Feature.transformExtentWithOptions=function(t,n){var i=n?ur(n.featureProjection):null,r=n?ur(n.dataProjection):null;return i&&r&&!lr(i,r)?yr(t,r,i):t},Lg.format.Feature.transformGeometryWithOptions=ty,Lg.format.GPX=Vy,Lg.format.GeoJSON=ib,Lg.format.JSONFeature=Ky,Lg.format.Polyline=pb,Lg.format.Polyline.decodeDeltas=hb,Lg.format.Polyline.decodeFloats=cb,Lg.format.Polyline.decodeSignedIntegers=vb,Lg.format.Polyline.decodeUnsignedIntegers=db,Lg.format.Polyline.encodeDeltas=eb,Lg.format.Polyline.encodeFloats=fb,Lg.format.Polyline.encodeSignedIntegers=ab,Lg.format.Polyline.encodeUnsignedInteger=wb,Lg.format.Polyline.encodeUnsignedIntegers=lb,Lg.format.TextFeature=ob,Lg.format.TopoJSON=xb,Lg.format.WKB=zb,Lg.format.WKT=e_,Lg.format.XML=h_,Lg.format.XMLFeature=iy,Lg.format.filter={},Lg.format.filter.And=l_,Lg.format.filter.Bbox=w_,Lg.format.filter.Comparison=x_,Lg.format.filter.ComparisonBinary=A_,Lg.format.filter.Contains=__,Lg.format.filter.DWithin=m_,Lg.format.filter.Disjoint=M_,Lg.format.filter.During=E_,Lg.format.filter.EqualTo=N_,Lg.format.filter.Filter=f_,Lg.format.filter.GreaterThan=P_,Lg.format.filter.GreaterThanOrEqualTo=G_,Lg.format.filter.Intersects=L_,Lg.format.filter.IsBetween=D_,Lg.format.filter.IsLike=U_,Lg.format.filter.IsNull=Y_,Lg.format.filter.LessThan=B_,Lg.format.filter.LessThanOrEqualTo=Z_,Lg.format.filter.LogicalNary=a_,Lg.format.filter.Not=V_,Lg.format.filter.NotEqualTo=$_,Lg.format.filter.Or=Q_,Lg.format.filter.ResourceId=ng,Lg.format.filter.Spatial=y_,Lg.format.filter.Within=rg,Lg.format.filter.and=function(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(l_,n))},Lg.format.filter.bbox=function(t,n,i){return new w_(t,n,i)},Lg.format.filter.between=function(t,n,i){return new D_(t,n,i)},Lg.format.filter.contains=function(t,n,i){return new __(t,n,i)},Lg.format.filter.disjoint=function(t,n,i){return new M_(t,n,i)},Lg.format.filter.during=function(t,n,i){return new E_(t,n,i)},Lg.format.filter.dwithin=function(t,n,i,r,s){return new m_(t,n,i,r,s)},Lg.format.filter.equalTo=function(t,n,i){return new N_(t,n,i)},Lg.format.filter.greaterThan=function(t,n){return new P_(t,n)},Lg.format.filter.greaterThanOrEqualTo=function(t,n){return new G_(t,n)},Lg.format.filter.intersects=function(t,n,i){return new L_(t,n,i)},Lg.format.filter.isNull=function(t){return new Y_(t)},Lg.format.filter.lessThan=function(t,n){return new B_(t,n)},Lg.format.filter.lessThanOrEqualTo=function(t,n){return new Z_(t,n)},Lg.format.filter.like=function(t,n,i,r,s,o){return new U_(t,n,i,r,s,o)},Lg.format.filter.not=function(t){return new V_(t)},Lg.format.filter.notEqualTo=function(t,n,i){return new $_(t,n,i)},Lg.format.filter.or=function(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Q_,n))},Lg.format.filter.resourceId=function(t){return new ng(t)},Lg.format.filter.within=function(t,n,i){return new rg(t,n,i)},Lg.format.xlink={},Lg.format.xlink.readHref=function(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")},Lg.format.xsd={},Lg.format.xsd.readBoolean=function(t){return ry(Ic(t,!1))},Lg.format.xsd.readBooleanString=ry,Lg.format.xsd.readDateTime=sy,Lg.format.xsd.readDecimal=oy,Lg.format.xsd.readDecimalString=uy,Lg.format.xsd.readNonNegativeIntegerString=hy,Lg.format.xsd.readPositiveInteger=ey,Lg.format.xsd.readString=fy,Lg.format.xsd.writeBooleanTextNode=function(t,n){ly(t,n?"1":"0")},Lg.format.xsd.writeCDATASection=function(t,n){t.appendChild(Qc().createCDATASection(n))},Lg.format.xsd.writeDateTimeTextNode=cy,Lg.format.xsd.writeDecimalTextNode=ay,Lg.format.xsd.writeNonNegativeIntegerTextNode=vy,Lg.format.xsd.writeStringTextNode=ly,Lg.functions={},Lg.functions.FALSE=M,Lg.functions.TRUE=O,Lg.functions.VOID=j,Lg.functions.memoizeOne=x,Lg.geom={},Lg.geom.Circle=Qw,Lg.geom.Geometry=Gr,Lg.geom.GeometryCollection=$p,Lg.geom.LineString=yw,Lg.geom.LinearRing=as,Lg.geom.MultiLineString=np,Lg.geom.MultiPoint=rp,Lg.geom.MultiPolygon=op,Lg.geom.Point=ls,Lg.geom.Polygon=Is,Lg.geom.Polygon.circular=Gs,Lg.geom.Polygon.fromCircle=Ls,Lg.geom.Polygon.fromExtent=Rs,Lg.geom.Polygon.makeRegular=Fs,Lg.geom.SimpleGeometry=Dr,Lg.geom.SimpleGeometry.getStrideForLayout=Lr,Lg.geom.SimpleGeometry.transformGeom2D=Fr,Lg.geom.flat={},Lg.geom.flat.area={},Lg.geom.flat.area.linearRing=es,Lg.geom.flat.area.linearRings=hs,Lg.geom.flat.area.linearRingss=fs,Lg.geom.flat.center={},Lg.geom.flat.center.linearRingss=rw,Lg.geom.flat.closest={},Lg.geom.flat.closest.arrayMaxSquaredDelta=Xr,Lg.geom.flat.closest.assignClosestArrayPoint=Br,Lg.geom.flat.closest.assignClosestMultiArrayPoint=qr,Lg.geom.flat.closest.assignClosestPoint=Wr,Lg.geom.flat.closest.maxSquaredDelta=Ur,Lg.geom.flat.closest.multiArrayMaxSquaredDelta=Yr,Lg.geom.flat.contains={},Lg.geom.flat.contains.linearRingContainsExtent=ds,Lg.geom.flat.contains.linearRingContainsXY=ws,Lg.geom.flat.contains.linearRingsContainsXY=ps,Lg.geom.flat.contains.linearRingssContainsXY=ys,Lg.geom.flat.deflate={},Lg.geom.flat.deflate.deflateCoordinate=Zr,Lg.geom.flat.deflate.deflateCoordinates=Jr,Lg.geom.flat.deflate.deflateCoordinatesArray=Vr,Lg.geom.flat.deflate.deflateMultiCoordinatesArray=Hr,Lg.geom.flat.flip={},Lg.geom.flat.flip.flipXY=Kp,Lg.geom.flat.geodesic={},Lg.geom.flat.geodesic.greatCircleArc=function(t,n,i,r,s,o){var u=ur("EPSG:4326"),e=Math.cos(fi(n)),h=Math.sin(fi(n)),f=Math.cos(fi(r)),c=Math.sin(fi(r)),a=Math.cos(fi(i-t)),v=Math.sin(fi(i-t)),l=h*c+e*f*a;return gw((function(n){if(1<=l)return[i,r];var s=n*Math.acos(l),o=Math.cos(s),u=Math.sin(s),d=v*f,w=e*c-h*f*a,p=Math.atan2(d,w),y=Math.asin(h*o+e*u*Math.cos(p));return[hi(fi(t)+Math.atan2(Math.sin(p)*u*e,o-h*Math.sin(y))),hi(y)]}),wr(u,s),o)},Lg.geom.flat.geodesic.meridian=mw,Lg.geom.flat.geodesic.parallel=Ow,Lg.geom.flat.inflate={},Lg.geom.flat.inflate.inflateCoordinates=ss,Lg.geom.flat.inflate.inflateCoordinatesArray=os,Lg.geom.flat.inflate.inflateMultiCoordinatesArray=us,Lg.geom.flat.interiorpoint={},Lg.geom.flat.interiorpoint.getInteriorPointOfArray=bs,Lg.geom.flat.interiorpoint.getInteriorPointsOfMultiArray=_s,Lg.geom.flat.interpolate={},Lg.geom.flat.interpolate.interpolatePoint=tw,Lg.geom.flat.interpolate.lineStringCoordinateAtM=nw,Lg.geom.flat.interpolate.lineStringsCoordinateAtM=iw,Lg.geom.flat.intersectsextent={},Lg.geom.flat.intersectsextent.intersectsLineString=ms,Lg.geom.flat.intersectsextent.intersectsLineStringArray=Os,Lg.geom.flat.intersectsextent.intersectsLinearRing=Ms,Lg.geom.flat.intersectsextent.intersectsLinearRingArray=js,Lg.geom.flat.intersectsextent.intersectsLinearRingMultiArray=xs,Lg.geom.flat.length={},Lg.geom.flat.length.lineStringLength=kd,Lg.geom.flat.length.linearRingLength=function(t,n,i,r){var s=kd(t,n,i,r),o=t[i-r]-t[n],u=t[i-r+1]-t[n+1];return s+=Math.sqrt(o*o+u*u)},Lg.geom.flat.orient={},Lg.geom.flat.orient.linearRingIsClockwise=Es,Lg.geom.flat.orient.linearRingsAreOriented=Ts,Lg.geom.flat.orient.linearRingssAreOriented=As,Lg.geom.flat.orient.orientLinearRings=Cs,Lg.geom.flat.orient.orientLinearRingsArray=Ns,Lg.geom.flat.reverse={},Lg.geom.flat.reverse.coordinates=Ss,Lg.geom.flat.segments={},Lg.geom.flat.segments.forEach=gs,Lg.geom.flat.simplify={},Lg.geom.flat.simplify.douglasPeucker=$r,Lg.geom.flat.simplify.douglasPeuckerArray=Kr,Lg.geom.flat.simplify.douglasPeuckerMultiArray=function(t,n,i,r,s,o,u,e){for(var h=0,f=i.length;h<f;++h){var c=i[h],a=[];u=Kr(t,n,c,r,s,o,u,a),e.push(a),n=c[c.length-1]}return u},Lg.geom.flat.simplify.quantize=ns,Lg.geom.flat.simplify.quantizeArray=is,Lg.geom.flat.simplify.quantizeMultiArray=rs,Lg.geom.flat.simplify.radialDistance=Qr,Lg.geom.flat.simplify.simplifyLineString=function(t,n,i,r,s,o,u){var e=void 0!==u?u:[];return o||(i=Qr(t,n,i,r,s,e,0),t=e,n=0,r=2),e.length=$r(t,n,i,r,s,e,0),e},Lg.geom.flat.simplify.snap=ts,Lg.geom.flat.straightchunk={},Lg.geom.flat.straightchunk.matchingChunk=xd,Lg.geom.flat.textpath={},Lg.geom.flat.textpath.drawTextOnPath=Nd,Lg.geom.flat.topology={},Lg.geom.flat.topology.lineStringIsClosed=function(t,n,i,r){var s=i-r;return t[n]===t[s]&&t[n+1]===t[s+1]&&(i-n)/r>3&&!!es(t,n,i,r)},Lg.geom.flat.transform={},Lg.geom.flat.transform.rotate=Cr,Lg.geom.flat.transform.scale=Nr,Lg.geom.flat.transform.transform2D=Ar,Lg.geom.flat.transform.translate=kr,Lg.has={},Lg.has.DEVICE_PIXEL_RATIO=zt,Lg.has.FIREFOX=Rt,Lg.has.IMAGE_DECODE=Xt,Lg.has.MAC=Dt,Lg.has.PASSIVE_EVENT_LISTENERS=Yt,Lg.has.SAFARI=Lt,Lg.has.WEBKIT=Ft,Lg.has.WORKER_OFFSCREEN_CANVAS=Ut,Lg.interaction={},Lg.interaction.DoubleClickZoom=oh,Lg.interaction.DragAndDrop=Jw,Lg.interaction.DragAndDrop.DragAndDropEvent=Zw,Lg.interaction.DragBox=Gh,Lg.interaction.DragBox.DragBoxEvent=Ih,Lg.interaction.DragPan=jh,Lg.interaction.DragRotate=Sh,Lg.interaction.DragRotateAndZoom=Hw,Lg.interaction.DragZoom=Lh,Lg.interaction.Draw=wp,Lg.interaction.Draw.DrawEvent=dp,Lg.interaction.Draw.createBox=function(){return function(t,n,i){var r=wn([t[0],t[t.length-1]].map((function(t){return Or(t,i)}))),s=[[Fn(r),Dn(r),qn(r),Bn(r),Fn(r)]],o=n;o?o.setCoordinates(s):o=new Is(s);var u=gr();return u&&o.transform(i,u),o}},Lg.interaction.Draw.createRegularPolygon=function(t,n){return function(i,r,s){var o=Or(i[0],s),u=Or(i[i.length-1],s),e=Math.sqrt(Hi(o,u)),h=r||Ls(new Qw(o),t),f=n;if(!n&&0!==n){var c=u[0]-o[0],a=u[1]-o[1];f=Math.atan2(a,c)}Fs(h,o,e,f);var v=gr();return v&&h.transform(s,v),h}},Lg.interaction.Extent=Op,Lg.interaction.Extent.ExtentEvent=bp,Lg.interaction.Interaction=rh,Lg.interaction.Interaction.pan=nh,Lg.interaction.Interaction.zoomByDelta=ih,Lg.interaction.KeyboardPan=Yh,Lg.interaction.KeyboardZoom=Bh,Lg.interaction.Modify=Pp,Lg.interaction.Modify.ModifyEvent=Ap,Lg.interaction.MouseWheelZoom=Vh,Lg.interaction.PinchRotate=$h,Lg.interaction.PinchZoom=Qh,Lg.interaction.Pointer=hh,Lg.interaction.Pointer.centroid=eh,Lg.interaction.Select=Fp,Lg.interaction.Select.SelectEvent=Rp,Lg.interaction.Snap=Xp,Lg.interaction.Translate=Jp,Lg.interaction.Translate.TranslateEvent=Zp,Lg.interaction.defaults=tf,Lg.layer={},Lg.layer.Base=Bo,Lg.layer.BaseImage=hw,Lg.layer.BaseTile=vw,Lg.layer.BaseVector=ww,Lg.layer.Graticule=Sw,Lg.layer.Group=Wu,Lg.layer.Heatmap=Fw,Lg.layer.Image=zw,Lg.layer.Layer=nu,Lg.layer.Layer.inView=tu,Lg.layer.Tile=Xw,Lg.layer.Vector=_w,Lg.layer.VectorImage=Ww,Lg.loadingstrategy={},Lg.loadingstrategy.all=Wf,Lg.loadingstrategy.bbox=function(t,n){return[t]},Lg.loadingstrategy.tile=function(t){return function(n,i,r){var s=t.getZForResolution(Sr(i,r)),o=t.getTileRangeForExtentAndZ(jr(n,r),s),u=[],e=[s,0,0];for(e[1]=o.minX;e[1]<=o.maxX;++e[1])for(e[2]=o.minY;e[2]<=o.maxY;++e[2])u.push(Mr(t.getTileCoordExtent(e),r));return u}},Lg.math={},Lg.math.clamp=ii,Lg.math.cosh=ri,Lg.math.lerp=ai,Lg.math.log2=si,Lg.math.modulo=ci,Lg.math.solveLinearSystem=ei,Lg.math.squaredDistance=ui,Lg.math.squaredSegmentDistance=oi,Lg.math.toDegrees=hi,Lg.math.toRadians=fi,Lg.net={},Lg.net.ClientError=Jf,Lg.net.ResponseError=Zf,Lg.net.getJSON=function(t){return new Promise((function(n,i){var r=new XMLHttpRequest;r.addEventListener("load",(function(t){var r=t.target;if(!r.status||r.status>=200&&r.status<300){var s=void 0;try{s=JSON.parse(r.responseText)}catch(t){var o="Error parsing response text as JSON: "+t.message;return void i(new Error(o))}n(s)}else i(new Zf(r))})),r.addEventListener("error",(function(t){i(new Jf(t.target))})),r.open("GET",t),r.setRequestHeader("Accept","application/json"),r.send()}))},Lg.net.jsonp=function(t,n,i,r){var s=document.createElement("script"),u="olc_"+o(n);function e(){delete window[u],s.parentNode.removeChild(s)}s.async=!0,s.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+u;var h=setTimeout((function(){e(),i&&i()}),1e4);window[u]=function(t){clearTimeout(h),e(),n(t)},document.getElementsByTagName("head")[0].appendChild(s)},Lg.net.overrideXHR=function(t){"undefined"!=typeof XMLHttpRequest&&(qf=XMLHttpRequest),global.XMLHttpRequest=t},Lg.net.resolveUrl=function(t,n){return n.indexOf("://")>=0?n:new URL(n,t).href},Lg.net.restoreXHR=function(){global.XMLHttpRequest=qf},Lg.obj={},Lg.obj.assign=S,Lg.obj.clear=E,Lg.obj.getValues=T,Lg.obj.isEmpty=A,Lg.proj={},Lg.proj.Projection=ni,Lg.proj.Units={},Lg.proj.Units.METERS_PER_UNIT=kt,Lg.proj.Units.fromCode=function(t){return Nt[t]},Lg.proj.addCommon=Tr,Lg.proj.addCoordinateTransforms=vr,Lg.proj.addEquivalentProjections=hr,Lg.proj.addEquivalentTransforms=fr,Lg.proj.addProjection=sr,Lg.proj.addProjections=or,Lg.proj.clearAllProjections=function(){Ai(),Pi()},Lg.proj.clearUserProjection=function(){br=null},Lg.proj.cloneTransform=ir,Lg.proj.createProjection=cr,Lg.proj.createSafeCoordinateTransform=Er,Lg.proj.createTransformFromCoordinateTransform=ar,Lg.proj.epsg3857={},Lg.proj.epsg3857.EXTENT=wi,Lg.proj.epsg3857.HALF_SIZE=di,Lg.proj.epsg3857.MAX_SAFE_Y=yi,Lg.proj.epsg3857.PROJECTIONS=_i,Lg.proj.epsg3857.RADIUS=li,Lg.proj.epsg3857.WORLD_EXTENT=pi,Lg.proj.epsg3857.fromEPSG4326=gi,Lg.proj.epsg3857.toEPSG4326=mi,Lg.proj.epsg4326={},Lg.proj.epsg4326.EXTENT=ji,Lg.proj.epsg4326.METERS_PER_UNIT=xi,Lg.proj.epsg4326.PROJECTIONS=Ei,Lg.proj.epsg4326.RADIUS=Mi,Lg.proj.equivalent=lr,Lg.proj.fromLonLat=function(t,n){return pr(t,"EPSG:4326",void 0!==n?n:"EPSG:3857")},Lg.proj.fromUserCoordinate=Or,Lg.proj.fromUserExtent=jr,Lg.proj.fromUserResolution=Sr,Lg.proj.get=ur,Lg.proj.getPointResolution=er,Lg.proj.getTransform=wr,Lg.proj.getTransformFromProjections=dr,Lg.proj.getUserProjection=gr,Lg.proj.identityTransform=rr,Lg.proj.proj4={},Lg.proj.proj4.register=function(t){var n,i,r=Object.keys(t.defs),s=r.length;for(n=0;n<s;++n){var o=r[n];if(!ur(o)){var u=t.defs(o),e=u.units;e||"longlat"!==u.projName||(e=It.DEGREES),sr(new ni({code:o,axisOrientation:u.axis,metersPerUnit:u.to_meter,units:e}))}}for(n=0;n<s;++n){var h=r[n],f=ur(h);for(i=0;i<s;++i){var c=r[i],a=ur(c);if(!Gi(h,c))if(t.defs[h]===t.defs[c])hr([f,a]);else{var v=t(h,c);vr(f,a,Er(f,a,v.forward),Er(a,f,v.inverse))}}}},Lg.proj.projections={},Lg.proj.projections.add=Ni,Lg.proj.projections.clear=Ai,Lg.proj.projections.get=Ci,Lg.proj.setUserProjection=_r,Lg.proj.toLonLat=function(t,n){var i=pr(t,void 0!==n?n:"EPSG:3857","EPSG:4326"),r=i[0];return(r<-180||r>180)&&(i[0]=ci(r+180,360)-180),i},Lg.proj.toUserCoordinate=mr,Lg.proj.toUserExtent=Mr,Lg.proj.toUserResolution=xr,Lg.proj.transform=pr,Lg.proj.transformExtent=yr,Lg.proj.transformWithProjections=function(t,n,i){return dr(n,i)(t)},Lg.proj.transforms={},Lg.proj.transforms.add=Ii,Lg.proj.transforms.clear=Pi,Lg.proj.transforms.get=Gi,Lg.proj.transforms.remove=function(t,n){var i=t.getCode(),r=n.getCode(),s=ki[i][r];return delete ki[i][r],A(ki[i])&&delete ki[i],s},Lg.proj.useGeographic=function(){_r("EPSG:4326")},Lg.render={},Lg.render.Box=Th,Lg.render.Event=uu,Lg.render.Feature=uw,Lg.render.VectorContext=Vf,Lg.render.canvas={},Lg.render.canvas.Builder=bd,Lg.render.canvas.BuilderGroup=Cd,Lg.render.canvas.Executor=Ud,Lg.render.canvas.ExecutorGroup=qd,Lg.render.canvas.ExecutorGroup.getPixelIndexArray=Bd,Lg.render.canvas.ImageBuilder=gd,Lg.render.canvas.Immediate=$f,Lg.render.canvas.Instruction={},Lg.render.canvas.Instruction.beginPathInstruction=dd,Lg.render.canvas.Instruction.closePathInstruction=wd,Lg.render.canvas.Instruction.fillInstruction=vd,Lg.render.canvas.Instruction.strokeInstruction=ld,Lg.render.canvas.LineStringBuilder=Od,Lg.render.canvas.PolygonBuilder=jd,Lg.render.canvas.TextBuilder=Td,Lg.render.canvas.checkedFonts=Eu,Lg.render.canvas.defaultFillStyle=bu,Lg.render.canvas.defaultFont=yu,Lg.render.canvas.defaultLineCap=_u,Lg.render.canvas.defaultLineDash=gu,Lg.render.canvas.defaultLineDashOffset=0,Lg.render.canvas.defaultLineJoin=mu,Lg.render.canvas.defaultLineWidth=1,Lg.render.canvas.defaultMiterLimit=Ou,Lg.render.canvas.defaultPadding=Su,Lg.render.canvas.defaultStrokeStyle=Mu,Lg.render.canvas.defaultTextAlign=ju,Lg.render.canvas.defaultTextBaseline=xu,Lg.render.canvas.drawImageOrLabel=Du,Lg.render.canvas.hitdetect={},Lg.render.canvas.hitdetect.HIT_DETECT_RESOLUTION=Zd,Lg.render.canvas.hitdetect.createHitDetectionImageData=Jd,Lg.render.canvas.hitdetect.hitDetect=Vd,Lg.render.canvas.labelCache=Tu,Lg.render.canvas.measureAndCacheTextWidth=Lu,Lg.render.canvas.measureTextHeight=Iu,Lg.render.canvas.measureTextWidth=Ru,Lg.render.canvas.measureTextWidths=Fu,Lg.render.canvas.registerFont=Pu,Lg.render.canvas.rotateAtOffset=function(t,n,i,r){0!==n&&(t.translate(i,r),t.rotate(n),t.translate(-i,-r))},Lg.render.canvas.textHeights=ku,Lg.render.getRenderPixel=function(t,n){var i=n.slice(0);return Ht(t.inversePixelTransform.slice(),i),i},Lg.render.getVectorContext=cc,Lg.render.toContext=function(t,n){var i=t.canvas,r=n||{},s=r.pixelRatio||zt,o=r.size;o&&(i.width=o[0]*s,i.height=o[1]*s,i.style.width=o[0]+"px",i.style.height=o[1]+"px");var u=[0,0,i.width,i.height],e=Kt([1,0,0,1,0,0],s,s);return new $f(t,s,u,e,0)},Lg.renderer={},Lg.renderer.Composite=Uu,Lg.renderer.Layer=Za,Lg.renderer.Map=su,Lg.renderer.canvas={},Lg.renderer.canvas.ImageLayer=ed,Lg.renderer.canvas.Layer=od,Lg.renderer.canvas.TileLayer=cd,Lg.renderer.canvas.VectorImageLayer=Qd,Lg.renderer.canvas.VectorLayer=$d,Lg.renderer.vector={},Lg.renderer.vector.defaultOrder=oc,Lg.renderer.vector.getSquaredTolerance=uc,Lg.renderer.vector.getTolerance=ec,Lg.renderer.vector.renderFeature=hc,Lg.reproj={},Lg.reproj.Image=Cl,Lg.reproj.Tile=Bl,Lg.reproj.Triangulation=Tl,Lg.reproj.calculateSourceExtentResolution=pc,Lg.reproj.calculateSourceResolution=wc,Lg.reproj.common={},Lg.reproj.common.ENABLE_RASTER_REPROJECTION=El,Lg.reproj.common.ERROR_THRESHOLD=.5,Lg.reproj.render=yc,Lg.resolutionconstraint={},Lg.resolutionconstraint.createMinMaxResolution=Se,Lg.resolutionconstraint.createSnapToPower=xe,Lg.resolutionconstraint.createSnapToResolutions=je,Lg.rotationconstraint={},Lg.rotationconstraint.createSnapToN=Ae,Lg.rotationconstraint.createSnapToZero=Ce,Lg.rotationconstraint.disable=Ee,Lg.rotationconstraint.none=Te,Lg.size={},Lg.size.buffer=function(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*n,i[1]=t[1]+2*n,i},Lg.size.hasArea=De,Lg.size.scale=ze,Lg.size.toSize=Ue,Lg.source={},Lg.source.Cluster=yl,Lg.source.DataTile=Sl,Lg.source.Image=Ll,Lg.source.Image.ImageSourceEvent=Gl,Lg.source.Image.defaultImageLoadFunction=Rl,Lg.source.ImageCanvas=Dl,Lg.source.ImageMapGuide=Ul,Lg.source.ImageStatic=Yl,Lg.source.OSM=nd,Lg.source.OSM.ATTRIBUTION=td,Lg.source.Source=ol,Lg.source.Tile=jl,Lg.source.Tile.TileSourceEvent=Ml,Lg.source.TileDebug=rd,Lg.source.TileImage=Hl,Lg.source.UrlTile=Zl,Lg.source.Vector=wl,Lg.source.Vector.VectorSourceEvent=dl,Lg.source.XYZ=Kl,Lg.source.common={},Lg.source.common.IMAGE_SMOOTHING_DISABLED=vc,Lg.sphere={},Lg.sphere.DEFAULT_RADIUS=Ri,Lg.sphere.getArea=function t(n,i){var r=i||{},s=r.radius||Ri,o=r.projection||"EPSG:3857",u=n.getType();u!==At.GEOMETRY_COLLECTION&&(n=n.clone().transform(o,"EPSG:4326"));var e,h,f,c,a,v,l=0;switch(u){case At.POINT:case At.MULTI_POINT:case At.LINE_STRING:case At.MULTI_LINE_STRING:case At.LINEAR_RING:break;case At.POLYGON:for(e=n.getCoordinates(),l=Math.abs(Di(e[0],s)),f=1,c=e.length;f<c;++f)l-=Math.abs(Di(e[f],s));break;case At.MULTI_POLYGON:for(f=0,c=(e=n.getCoordinates()).length;f<c;++f)for(h=e[f],l+=Math.abs(Di(h[0],s)),a=1,v=h.length;a<v;++a)l-=Math.abs(Di(h[a],s));break;case At.GEOMETRY_COLLECTION:var d=n.getGeometries();for(f=0,c=d.length;f<c;++f)l+=t(d[f],i);break;default:throw new Error("Unsupported geometry type: "+u)}return l},Lg.sphere.getDistance=Li,Lg.sphere.getLength=function t(n,i){var r=i||{},s=r.radius||Ri,o=r.projection||"EPSG:3857",u=n.getType();u!==At.GEOMETRY_COLLECTION&&(n=n.clone().transform(o,"EPSG:4326"));var e,h,f,c,a,v,l=0;switch(u){case At.POINT:case At.MULTI_POINT:break;case At.LINE_STRING:case At.LINEAR_RING:l=Fi(e=n.getCoordinates(),s);break;case At.MULTI_LINE_STRING:case At.POLYGON:for(f=0,c=(e=n.getCoordinates()).length;f<c;++f)l+=Fi(e[f],s);break;case At.MULTI_POLYGON:for(f=0,c=(e=n.getCoordinates()).length;f<c;++f)for(a=0,v=(h=e[f]).length;a<v;++a)l+=Fi(h[a],s);break;case At.GEOMETRY_COLLECTION:var d=n.getGeometries();for(f=0,c=d.length;f<c;++f)l+=t(d[f],i);break;default:throw new Error("Unsupported geometry type: "+u)}return l},Lg.sphere.offset=zi,Lg.string={},Lg.string.compareVersions=function(t,n){for(var i=(""+t).split("."),r=(""+n).split("."),s=0;s<Math.max(i.length,r.length);s++){var o=parseInt(i[s]||"0",10),u=parseInt(r[s]||"0",10);if(o>u)return 1;if(u>o)return-1}return 0},Lg.string.padNumber=Ui,Lg.structs={},Lg.structs.LRUCache=mf,Lg.structs.LinkedList=tl,Lg.structs.PriorityQueue=ce,Lg.structs.PriorityQueue.DROP=fe,Lg.structs.RBush=il,Lg.style={},Lg.style.Circle=ua,Lg.style.Fill=ea,Lg.style.Icon=ga,Lg.style.IconImage=ba,Lg.style.IconImage.get=ya,Lg.style.IconImageCache=ko,Lg.style.IconImageCache.shared=Po,Lg.style.Image=ia,Lg.style.RegularShape=sa,Lg.style.Stroke=ma,Lg.style.Style=Aa,Lg.style.Style.createDefaultStyle=Sa,Lg.style.Style.createEditingStyle=Ea,Lg.style.Style.toFunction=ja,Lg.style.Text=ka,Lg.style.expressions={},Lg.style.expressions.Operators=Pv,Lg.style.expressions.arrayToGlsl=Lv,Lg.style.expressions.colorToGlsl=Fv,Lg.style.expressions.expressionToGlsl=Uv,Lg.style.expressions.getStringNumberEquivalent=Dv,Lg.style.expressions.getValueType=Iv,Lg.style.expressions.isTypeUnique=Gv,Lg.style.expressions.numberToGlsl=Rv,Lg.style.expressions.stringToGlsl=zv,Lg.style.expressions.uniformNameForVariable=$v,Lg.tilecoord={},Lg.tilecoord.createOrUpdate=Of,Lg.tilecoord.fromKey=xf,Lg.tilecoord.getCacheKeyForTileKey=function(t){var n=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return Mf(n[0],n[1],n[2])},Lg.tilecoord.getKey=jf,Lg.tilecoord.getKeyZXY=Mf,Lg.tilecoord.hash=Sf,Lg.tilecoord.withinExtentAndZ=Ef,Lg.tilegrid={},Lg.tilegrid.TileGrid=_c,Lg.tilegrid.common={},Lg.tilegrid.common.DEFAULT_MAX_ZOOM=42,Lg.tilegrid.common.DEFAULT_TILE_SIZE=_e,Lg.tilegrid.createForExtent=Oc,Lg.tilegrid.createForProjection=xc,Lg.tilegrid.createXYZ=Mc,Lg.tilegrid.extentFromProjection=Sc,Lg.tilegrid.getForProjection=gc,Lg.tilegrid.wrapX=mc,Lg.tileurlfunction={},Lg.tileurlfunction.createFromTemplate=Ec,Lg.tileurlfunction.createFromTemplates=Tc,Lg.tileurlfunction.createFromTileUrlFunctions=Ac,Lg.tileurlfunction.expandUrl=Cc,Lg.tileurlfunction.nullTileUrlFunction=function(t,n,i){},Lg.transform={},Lg.transform.apply=Ht,Lg.transform.compose=tn,Lg.transform.composeCssTransform=function(t,n,i,r,s,o,u){return sn(tn([1,0,0,1,0,0],t,n,i,r,s,o,u))},Lg.transform.create=Bt,Lg.transform.determinant=rn,Lg.transform.invert=function(t){return nn(t,t)},Lg.transform.makeInverse=nn,Lg.transform.makeScale=Qt,Lg.transform.multiply=Zt,Lg.transform.reset=qt,Lg.transform.rotate=$t,Lg.transform.scale=Kt,Lg.transform.set=Jt,Lg.transform.setFromArray=Vt,Lg.transform.toString=sn,Lg.transform.translate=function(t,n,i){return Zt(t,Jt(Wt,1,0,0,1,n,i))},Lg.uri={},Lg.uri.appendParams=Nc,Lg.util={},Lg.util.VERSION=e,Lg.util.abstract=r,Lg.util.getUid=o,Lg.vec={},Lg.vec.mat4={},Lg.vec.mat4.create=ta,Lg.vec.mat4.fromTransform=na,Lg.xml={},Lg.xml.OBJECT_PROPERTY_NODE_FACTORY=Yc,Lg.xml.XML_SCHEMA_INSTANCE_URI=kc,Lg.xml.createElementNS=Pc,Lg.xml.getAllTextContent=Ic,Lg.xml.gw=Gc,Lg.xml.getAttributeNS=function(t,n,i){return t.getAttributeNS(n,i)||""},Lg.xml.getDocument=Qc,Lg.xml.getXMLSerializer=$c,Lg.xml.isDocument=Rc,Lg.xml.makeArrayExtender=function(t,n){return function(i,r){var s=t.call(void 0!==n?n:this,i,r);void 0!==s&&_(r[r.length-1],s)}},Lg.xml.makeArrayPusher=Fc,Lg.xml.makeArraySerializer=Uc,Lg.xml.makeChildAppender=zc,Lg.xml.makeObjectPropertyPusher=function(t,n,i){return function(r,s){var o=t.call(void 0!==i?i:this,r,s);if(void 0!==o){var u=s[s.length-1],e=void 0!==n?n:r.localName,h=void 0;e in u?h=u[e]:(h=[],u[e]=h),h.push(o)}}},Lg.xml.makeObjectPropertySetter=Dc,Lg.xml.makeReplacer=function(t,n){return function(i,r){var s=t.call(void 0!==n?n:this,i,r);void 0!==s&&(r[r.length-1]=s)}},Lg.xml.makeSequence=Wc,Lg.xml.makeSimpleNodeFactory=Xc,Lg.xml.makeStructureNS=Bc,Lg.xml.parse=Lc,Lg.xml.parseNode=qc,Lg.xml.pushParseAndPop=Zc,Lg.xml.pushSerializeAndPop=Vc,Lg.xml.registerDocument=function(t){Kc=t},Lg.xml.registerXMLSerializer=function(t){Hc=t},Lg.xml.serialize=Jc;var Fg=Lg}},n={};function i(r){var s=n[r];if(void 0!==s)return s.exports;var o=n[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.d=function(t,n){for(var r in n)i.o(n,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},i(760);var r=i(164);return r=r.default}()}));