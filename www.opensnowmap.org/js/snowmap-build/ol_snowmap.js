!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.ol=n():t.ol=n()}(self,(function(){return function(){var t={72:function(t,n,i){var r,s,o;function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(){"use strict";function t(t,r,s,o,u){!function t(i,r,s,o,u){for(;o>s;){if(o-s>600){var e=o-s+1,h=r-s+1,f=Math.log(e),a=.5*Math.exp(2*f/3),c=.5*Math.sqrt(f*a*(e-a)/e)*(h-e/2<0?-1:1);t(i,r,Math.max(s,Math.floor(r-h*a/e+c)),Math.min(o,Math.floor(r+(e-h)*a/e+c)),u)}var v=i[r],l=s,d=o;for(n(i,s,r),u(i[o],v)>0&&n(i,s,o);l<d;){for(n(i,l,d),l++,d--;u(i[l],v)<0;)l++;for(;u(i[d],v)>0;)d--}0===u(i[s],v)?n(i,s,d):n(i,++d,o),d<=r&&(s=d+1),r<=d&&(o=d-1)}}(t,r,s||0,o||t.length-1,u||i)}function n(t,n,i){var r=t[n];t[n]=t[i],t[i]=r}function i(t,n){return t<n?-1:t>n?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(t,n,i){if(!i)return n.indexOf(t);for(var r=0;r<n.length;r++)if(i(t,n[r]))return r;return-1}function o(t,n){u(t,0,t.children.length,n,t)}function u(t,n,i,r,s){s||(s=d(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var o=n;o<i;o++){var u=t.children[o];e(s,t.leaf?r(u):u)}return s}function e(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function h(t,n){return t.minX-n.minX}function f(t,n){return t.minY-n.minY}function a(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function v(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function l(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w(n,i,r,s,o){for(var u=[i,r];u.length;)if(!((r=u.pop())-(i=u.pop())<=s)){var e=i+Math.ceil((r-i)/s/2)*s;t(n,e,i,r,o),u.push(i,e,e,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var n=this.data,i=[];if(!l(t,n))return i;for(var r=this.toBBox,s=[];n;){for(var o=0;o<n.children.length;o++){var u=n.children[o],e=n.leaf?r(u):u;l(t,e)&&(n.leaf?i.push(u):v(t,e)?this._all(u,i):s.push(u))}n=s.pop()}return i},r.prototype.collides=function(t){var n=this.data;if(!l(t,n))return!1;for(var i=[];n;){for(var r=0;r<n.children.length;r++){var s=n.children[r],o=n.leaf?this.toBBox(s):s;if(l(t,o)){if(n.leaf||v(t,o))return!0;i.push(s)}}n=i.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0;n<t.length;n++)this.insert(t[n]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,n){if(!t)return this;for(var i,r,o,u=this.data,e=this.toBBox(t),h=[],f=[];u||h.length;){if(u||(u=h.pop(),r=h[h.length-1],i=f.pop(),o=!0),u.leaf){var a=s(t,u.children,n);if(-1!==a)return u.children.splice(a,1),h.push(u),this._condense(h),this}o||u.leaf||!v(u,e)?r?(i++,u=r.children[i],o=!1):u=null:(h.push(u),f.push(i),i=0,r=u,u=u.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,n){return t.minX-n.minX},r.prototype.compareMinY=function(t,n){return t.minY-n.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,n){for(var i=[];t;)t.leaf?n.push.apply(n,t.children):i.push.apply(i,t.children),t=i.pop();return n},r.prototype._build=function(t,n,i,r){var s,u=i-n+1,e=this._maxEntries;if(u<=e)return o(s=d(t.slice(n,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(u)/Math.log(e)),e=Math.ceil(u/Math.pow(e,r-1))),(s=d([])).leaf=!1,s.height=r;var h=Math.ceil(u/e),f=h*Math.ceil(Math.sqrt(e));w(t,n,i,f,this.compareMinX);for(var a=n;a<=i;a+=f){var c=Math.min(a+f-1,i);w(t,a,c,h,this.compareMinY);for(var v=a;v<=c;v+=h){var l=Math.min(v+h-1,c);s.children.push(this._build(t,v,l,r-1))}}return o(s,this.toBBox),s},r.prototype._chooseSubtree=function(t,n,i,r){for(;r.push(n),!n.leaf&&r.length-1!==i;){for(var s=1/0,o=1/0,u=void 0,e=0;e<n.children.length;e++){var h=n.children[e],f=a(h),c=(v=t,l=h,(Math.max(l.maxX,v.maxX)-Math.min(l.minX,v.minX))*(Math.max(l.maxY,v.maxY)-Math.min(l.minY,v.minY))-f);c<o?(o=c,s=f<s?f:s,u=h):c===o&&f<s&&(s=f,u=h)}n=u||n.children[0]}var v,l;return n},r.prototype._insert=function(t,n,i){var r=i?t:this.toBBox(t),s=[],o=this._chooseSubtree(r,this.data,n,s);for(o.children.push(t),e(o,r);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(r,s,n)},r.prototype._split=function(t,n){var i=t[n],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var u=this._chooseSplitIndex(i,s,r),e=d(i.children.splice(u,i.children.length-u));e.height=i.height,e.leaf=i.leaf,o(i,this.toBBox),o(e,this.toBBox),n?t[n-1].children.push(e):this._splitRoot(i,e)},r.prototype._splitRoot=function(t,n){this.data=d([t,n]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,n,i){for(var r,s,o,e,h,f,c,v=1/0,l=1/0,d=n;d<=i-n;d++){var w=u(t,0,d,this.toBBox),p=u(t,d,i,this.toBBox),y=(s=w,o=p,e=Math.max(s.minX,o.minX),h=Math.max(s.minY,o.minY),f=Math.min(s.maxX,o.maxX),c=Math.min(s.maxY,o.maxY),Math.max(0,f-e)*Math.max(0,c-h)),b=a(w)+a(p);y<v?(v=y,r=d,l=b<l?b:l):y===v&&b<l&&(l=b,r=d)}return r||i-n},r.prototype._chooseSplitAxis=function(t,n,i){var r=t.leaf?this.compareMinX:h,s=t.leaf?this.compareMinY:f;this._allDistMargin(t,n,i,r)<this._allDistMargin(t,n,i,s)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,n,i,r){t.children.sort(r);for(var s=this.toBBox,o=u(t,0,n,s),h=u(t,i-n,i,s),f=c(o)+c(h),a=n;a<i-n;a++){var v=t.children[a];e(o,t.leaf?s(v):v),f+=c(o)}for(var l=i-n-1;l>=n;l--){var d=t.children[l];e(h,t.leaf?s(d):d),f+=c(h)}return f},r.prototype._adjustParentBBoxes=function(t,n,i){for(var r=i;r>=0;r--)e(n[r],t)},r.prototype._condense=function(t){for(var n=t.length-1,i=void 0;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():o(t[n],this.toBBox)},r},"object"==u(n)?t.exports=o():void 0===(s="function"==typeof(r=o)?r.call(n,i,n,t):r)||(t.exports=s)},760:function(t,n,i){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=function(t){"use strict";var n,i=Object.prototype,s=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",e=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function f(t,n,i){return Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{f({},"")}catch(t){f=function(t,n,i){return t[n]=i}}function a(t,n,i,r){var s=n&&n.prototype instanceof y?n:y,o=Object.create(s.prototype),u=new A(r||[]);return o._invoke=function(t,n,i){var r=v;return function(s,o){if(r===d)throw new Error("Generator is already running");if(r===w){if("throw"===s)throw o;return N()}for(i.method=s,i.arg=o;;){var u=i.delegate;if(u){var e=E(u,i);if(e){if(e===p)continue;return e}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===v)throw r=w,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=d;var h=c(t,n,i);if("normal"===h.type){if(r=i.done?w:l,h.arg===p)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(r=w,i.method="throw",i.arg=h.arg)}}}(t,i,u),o}function c(t,n,i){try{return{type:"normal",arg:t.call(n,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var v="suspendedStart",l="suspendedYield",d="executing",w="completed",p={};function y(){}function b(){}function _(){}var g={};f(g,u,(function(){return this}));var m=Object.getPrototypeOf,O=m&&m(m(C([])));O&&O!==i&&s.call(O,u)&&(g=O);var M=_.prototype=y.prototype=Object.create(g);function j(t){["next","throw","return"].forEach((function(n){f(t,n,(function(t){return this._invoke(n,t)}))}))}function x(t,n){function i(o,u,e,h){var f=c(t[o],t,u);if("throw"!==f.type){var a=f.arg,v=a.value;return v&&"object"===r(v)&&s.call(v,"__await")?n.resolve(v.__await).then((function(t){i("next",t,e,h)}),(function(t){i("throw",t,e,h)})):n.resolve(v).then((function(t){a.value=t,e(a)}),(function(t){return i("throw",t,e,h)}))}h(f.arg)}var o;this._invoke=function(t,r){function s(){return new n((function(n,s){i(t,r,n,s)}))}return o=o?o.then(s,s):s()}}function E(t,i){var r=t.iterator[i.method];if(r===n){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=n,E(t,i),"throw"===i.method))return p;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var s=c(r,t.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,p;var o=s.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=n),i.delegate=null,p):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,p)}function S(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function T(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function C(t){if(t){var i=t[u];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function i(){for(;++r<t.length;)if(s.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=n,i.done=!0,i};return o.next=o}}return{next:N}}function N(){return{value:n,done:!0}}return b.prototype=_,f(M,"constructor",_),f(_,"constructor",b),b.displayName=f(_,h,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===b||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,f(t,h,"GeneratorFunction")),t.prototype=Object.create(M),t},t.awrap=function(t){return{__await:t}},j(x.prototype),f(x.prototype,e,(function(){return this})),t.AsyncIterator=x,t.async=function(n,i,r,s,o){void 0===o&&(o=Promise);var u=new x(a(n,i,r,s),o);return t.isGeneratorFunction(i)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},j(M),f(M,h,"Generator"),f(M,u,(function(){return this})),f(M,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var i in t)n.push(i);return n.reverse(),function i(){for(;n.length;){var r=n.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=C,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!t)for(var i in this)"t"===i.charAt(0)&&s.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(r,s){return e.type="throw",e.arg=t,i.next=r,s&&(i.method="next",i.arg=n),!!s}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],e=u.completion;if("root"===u.tryLoc)return r("end");if(u.tryLoc<=this.prev){var h=s.call(u,"catchLoc"),f=s.call(u,"finallyLoc");if(h&&f){if(this.prev<u.catchLoc)return r(u.catchLoc,!0);if(this.prev<u.finallyLoc)return r(u.finallyLoc)}else if(h){if(this.prev<u.catchLoc)return r(u.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return r(u.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),T(i),p}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var s=r.arg;T(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:C(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=n),p}},t}("object"===r(t=i.nmd(t))?t.exports:{});try{regeneratorRuntime=s}catch(t){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}},690:function(t,n,i){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}i.d(n,{default:function(){return nm}});var s=0;function o(t){return t.ol_uid||(t.ol_uid=String(++s))}var u,e="6.9.0",h=(u=function(t,n){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}u(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),f=function(t){function n(n){var i=this,r="Assertion failed. See https://openlayers.org/en/"+("v"+e.split("-")[0])+"/doc/errors/#"+n+" for details.";return(i=t.call(this,r)||this).code=n,i.name="AssertionError",i.message=r,i}return h(n,t),n}(Error);function a(t){t.stopPropagation()}var c=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),v="propertychange",l=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function d(t,n,i){for(var r,s,o=i||w,u=0,e=t.length,h=!1;u<e;)(s=+o(t[r=u+(e-u>>1)],n))<0?u=r+1:(e=r,h=!s);return h?u:~u}function w(t,n){return t>n?1:t<n?-1:0}function p(t,n){return t.indexOf(n)>=0}function y(t,n,i){var r=t.length;if(t[0]<=n)return 0;if(n<=t[r-1])return r-1;var s=void 0;if(i>0){for(s=1;s<r;++s)if(t[s]<n)return s-1}else if(i<0){for(s=1;s<r;++s)if(t[s]<=n)return s}else for(s=1;s<r;++s){if(t[s]==n)return s;if(t[s]<n)return"function"==typeof i?i(n,t[s-1],t[s])>0?s-1:s:t[s-1]-n<n-t[s]?s-1:s}return r-1}function b(t,n,i){for(;n<i;){var r=t[n];t[n]=t[i],t[i]=r,++n,--i}}function _(t,n){for(var i=Array.isArray(n)?n:[n],r=i.length,s=0;s<r;s++)t[t.length]=i[s]}function g(t,n){var i=t.length;if(i!==n.length)return!1;for(var r=0;r<i;r++)if(t[r]!==n[r])return!1;return!0}function m(t,n,i){var r=n||w;return t.every((function(n,s){if(0===s)return!0;var o=r(t[s-1],n);return!(o>0||i&&0===o)}))}function O(){return!0}function M(){return!1}function j(){}function x(t){var n,i,r,s=!1;return function(){var o=Array.prototype.slice.call(arguments);return s&&this===r&&g(o,i)||(s=!0,r=this,i=o,n=t.apply(this,arguments)),n}}var E="function"==typeof Object.assign?Object.assign:function(t,n){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=1,s=arguments.length;r<s;++r){var o=arguments[r];if(null!=o)for(var u in o)o.hasOwnProperty(u)&&(i[u]=o[u])}return i};function S(t){for(var n in t)delete t[n]}var T="function"==typeof Object.values?Object.values:function(t){var n=[];for(var i in t)n.push(t[i]);return n};function A(t){var n;for(n in t)return!1;return!n}var C=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),N=function(t){function n(n){var i=t.call(this)||this;return i.t=n,i.i=null,i.u=null,i.h=null,i}return C(n,t),n.prototype.addEventListener=function(t,n){if(t&&n){var i=this.h||(this.h={}),r=i[t]||(i[t]=[]);-1===r.indexOf(n)&&r.push(n)}},n.prototype.dispatchEvent=function(t){var n="string"==typeof t?new c(t):t,i=n.type;n.target||(n.target=this.t||this);var r,s=this.h&&this.h[i];if(s){var o=this.u||(this.u={}),u=this.i||(this.i={});i in o||(o[i]=0,u[i]=0),++o[i];for(var e=0,h=s.length;e<h;++e)if(!1===(r="handleEvent"in s[e]?s[e].handleEvent(n):s[e].call(this,n))||n.propagationStopped){r=!1;break}if(--o[i],0===o[i]){var f=u[i];for(delete u[i];f--;)this.removeEventListener(i,j);delete o[i]}return r}},n.prototype.disposeInternal=function(){this.h&&S(this.h)},n.prototype.getListeners=function(t){return this.h&&this.h[t]||void 0},n.prototype.hasListener=function(t){return!!this.h&&(t?t in this.h:Object.keys(this.h).length>0)},n.prototype.removeEventListener=function(t,n){var i=this.h&&this.h[t];if(i){var r=i.indexOf(n);-1!==r&&(this.i&&t in this.i?(i[r]=j,++this.i[t]):(i.splice(r,1),0===i.length&&delete this.h[t]))}},n}(l),k="change",P="error",I="contextmenu",G="click",R="dblclick",L="dragenter",F="dragover",D="drop",z="keydown",U="keypress",X="load",Y="resize",W="touchmove",B="wheel";function q(t,n,i,r,s){if(r&&r!==t&&(i=i.bind(r)),s){var o=i;i=function(){t.removeEventListener(n,i),o.apply(this,arguments)}}var u={target:t,type:n,listener:i};return t.addEventListener(n,i),u}function Z(t,n,i,r){return q(t,n,i,r,!0)}function J(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),S(t))}var V=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),H=function(t){function n(){var n=t.call(this)||this;return n.on=n.onInternal,n.once=n.onceInternal,n.un=n.unInternal,n.v=0,n}return V(n,t),n.prototype.changed=function(){++this.v,this.dispatchEvent(k)},n.prototype.getRevision=function(){return this.v},n.prototype.onInternal=function(t,n){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),s=0;s<i;++s)r[s]=q(this,t[s],n);return r}return q(this,t,n)},n.prototype.onceInternal=function(t,n){var i;if(Array.isArray(t)){var r=t.length;i=new Array(r);for(var s=0;s<r;++s)i[s]=Z(this,t[s],n)}else i=Z(this,t,n);return n.ol_key=i,i},n.prototype.unInternal=function(t,n){var i=n.ol_key;if(i)$(i);else if(Array.isArray(t))for(var r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],n);else this.removeEventListener(t,n)},n}(N);function $(t){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)J(t[n]);else J(t)}H.prototype.on,H.prototype.once,H.prototype.un;var K=H,Q=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tt=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.key=i,s.oldValue=r,s}return Q(n,t),n}(c),nt=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,o(i),i.l=null,void 0!==n&&i.setProperties(n),i}return Q(n,t),n.prototype.get=function(t){var n;return this.l&&this.l.hasOwnProperty(t)&&(n=this.l[t]),n},n.prototype.getKeys=function(){return this.l&&Object.keys(this.l)||[]},n.prototype.getProperties=function(){return this.l&&E({},this.l)||{}},n.prototype.hasProperties=function(){return!!this.l},n.prototype.notify=function(t,n){var i;i="change:"+t,this.dispatchEvent(new tt(i,t,n)),i=v,this.dispatchEvent(new tt(i,t,n))},n.prototype.addChangeListener=function(t,n){this.addEventListener("change:"+t,n)},n.prototype.removeChangeListener=function(t,n){this.removeEventListener("change:"+t,n)},n.prototype.set=function(t,n,i){var r=this.l||(this.l={});if(i)r[t]=n;else{var s=r[t];r[t]=n,s!==n&&this.notify(t,s)}},n.prototype.setProperties=function(t,n){for(var i in t)this.set(i,t[i],n)},n.prototype.applyProperties=function(t){t.l&&E(this.l||(this.l={}),t.l)},n.prototype.unset=function(t,n){if(this.l&&t in this.l){var i=this.l[t];delete this.l[t],A(this.l)&&(this.l=null),n||this.notify(t,i)}},n}(K),it="add",rt="remove",st=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ot="length",ut=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.element=i,s.index=r,s}return st(n,t),n}(c),et=function(t){function n(n,i){var r=t.call(this)||this;r.on,r.once,r.un;var s=i||{};if(r.p=!!s.unique,r._=n||[],r.p)for(var o=0,u=r._.length;o<u;++o)r.g(r._[o],o);return r.m(),r}return st(n,t),n.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},n.prototype.extend=function(t){for(var n=0,i=t.length;n<i;++n)this.push(t[n]);return this},n.prototype.forEach=function(t){for(var n=this._,i=0,r=n.length;i<r;++i)t(n[i],i,n)},n.prototype.getArray=function(){return this._},n.prototype.item=function(t){return this._[t]},n.prototype.getLength=function(){return this.get(ot)},n.prototype.insertAt=function(t,n){this.p&&this.g(n),this._.splice(t,0,n),this.m(),this.dispatchEvent(new ut(it,n,t))},n.prototype.pop=function(){return this.removeAt(this.getLength()-1)},n.prototype.push=function(t){this.p&&this.g(t);var n=this.getLength();return this.insertAt(n,t),this.getLength()},n.prototype.remove=function(t){for(var n=this._,i=0,r=n.length;i<r;++i)if(n[i]===t)return this.removeAt(i)},n.prototype.removeAt=function(t){var n=this._[t];return this._.splice(t,1),this.m(),this.dispatchEvent(new ut(rt,n,t)),n},n.prototype.setAt=function(t,n){var i=this.getLength();if(t<i){this.p&&this.g(n,t);var r=this._[t];this._[t]=n,this.dispatchEvent(new ut(rt,r,t)),this.dispatchEvent(new ut(it,n,t))}else{for(var s=i;s<t;++s)this.insertAt(s,void 0);this.insertAt(t,n)}},n.prototype.m=function(){this.set(ot,this._.length)},n.prototype.g=function(t,n){for(var i=0,r=this._.length;i<r;++i)if(this._[i]===t&&i!==n)throw new f(58)},n}(nt),ht=0,ft=1,at=2,ct=3,vt=4;function lt(t){return Math.pow(t,3)}function dt(t){return 1-lt(1-t)}function wt(t){return 3*t*t-2*t*t*t}function pt(t){return t}var yt=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bt=function(t){function n(n,i,r){var s=t.call(this)||this,o=r||{};return s.tileCoord=n,s.state=i,s.interimTile=null,s.key="",s.O=void 0===o.transition?250:o.transition,s.j={},s}return yt(n,t),n.prototype.changed=function(){this.dispatchEvent(k)},n.prototype.release=function(){},n.prototype.getKey=function(){return this.key+"/"+this.tileCoord},n.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==at)return this.O=0,t;t=t.interimTile}while(t);return this},n.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,n=this;do{if(t.getState()==at){t.interimTile=null;break}t.getState()==ft?n=t:t.getState()==ht?n.interimTile=t.interimTile:n=t,t=n.interimTile}while(t)}},n.prototype.getTileCoord=function(){return this.tileCoord},n.prototype.getState=function(){return this.state},n.prototype.setState=function(t){if(this.state!==ct&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},n.prototype.load=function(){r()},n.prototype.getAlpha=function(t,n){if(!this.O)return 1;var i=this.j[t];if(i){if(-1===i)return 1}else i=n,this.j[t]=i;var r=n-i+1e3/60;return r>=this.O?1:lt(r/this.O)},n.prototype.inTransition=function(t){return!!this.O&&-1!==this.j[t]},n.prototype.endTransition=function(t){this.O&&(this.j[t]=-1)},n}(N),_t=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gt=function(t){function n(n){var i=this,r=ht;return(i=t.call(this,n.tileCoord,r,{transition:n.transition})||this).S=n.loader,i.T=null,i.A=null,i}return _t(n,t),n.prototype.getData=function(){return this.T},n.prototype.getError=function(){return this.A},n.prototype.load=function(){this.state=ft,this.changed();var t=this;this.S().then((function(n){t.T=n,t.state=at,t.changed()})).catch((function(n){t.A=n,t.state=ct,t.changed()}))},n}(bt);function mt(t,n){if(!t)throw new f(n)}var Ot=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Mt(t){return"function"==typeof t?t:(Array.isArray(t)?n=t:(mt("function"==typeof t.getZIndex,41),n=[t]),function(){return n});var n}var jt=function(t){function n(n){var i=t.call(this)||this;if(i.on,i.once,i.un,i.C=void 0,i.N="geometry",i.k=null,i.P=void 0,i.I=null,i.addChangeListener(i.N,i.G),n)if("function"==typeof n.getSimplifiedGeometry){var r=n;i.setGeometry(r)}else{var s=n;i.setProperties(s)}return i}return Ot(n,t),n.prototype.clone=function(){var t=new n(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},n.prototype.getGeometry=function(){return this.get(this.N)},n.prototype.getId=function(){return this.C},n.prototype.getGeometryName=function(){return this.N},n.prototype.getStyle=function(){return this.k},n.prototype.getStyleFunction=function(){return this.P},n.prototype.R=function(){this.changed()},n.prototype.G=function(){this.I&&(J(this.I),this.I=null);var t=this.getGeometry();t&&(this.I=q(t,k,this.R,this)),this.changed()},n.prototype.setGeometry=function(t){this.set(this.N,t)},n.prototype.setStyle=function(t){this.k=t,this.P=t?Mt(t):void 0,this.changed()},n.prototype.setId=function(t){this.C=t,this.changed()},n.prototype.setGeometryName=function(t){this.removeChangeListener(this.N,this.G),this.N=t,this.addChangeListener(this.N,this.G),this.G()},n}(nt),xt="XY",Et="XYZ",St="XYM",Tt="XYZM",At={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Ct={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Nt={9001:Ct.METERS,9002:Ct.FEET,9003:Ct.USFEET,9101:Ct.RADIANS,9102:Ct.DEGREES};var kt={};kt[Ct.RADIANS]=6370997/(2*Math.PI),kt[Ct.DEGREES]=2*Math.PI*6370997/360,kt[Ct.FEET]=.3048,kt[Ct.METERS]=1,kt[Ct.USFEET]=1200/3937;var Pt,It=Ct,Gt="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Rt=-1!==Gt.indexOf("firefox"),Lt=-1!==Gt.indexOf("safari")&&-1==Gt.indexOf("chrom"),Ft=-1!==Gt.indexOf("webkit")&&-1==Gt.indexOf("edge"),Dt=-1!==Gt.indexOf("macintosh"),zt="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Ut="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Xt="undefined"!=typeof Image&&Image.prototype.decode,Yt=function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch(t){}return t}(),Wt=new Array(6);function Bt(){return[1,0,0,1,0,0]}function qt(t){return Jt(t,1,0,0,1,0,0)}function Zt(t,n){var i=t[0],r=t[1],s=t[2],o=t[3],u=t[4],e=t[5],h=n[0],f=n[1],a=n[2],c=n[3],v=n[4],l=n[5];return t[0]=i*h+s*f,t[1]=r*h+o*f,t[2]=i*a+s*c,t[3]=r*a+o*c,t[4]=i*v+s*l+u,t[5]=r*v+o*l+e,t}function Jt(t,n,i,r,s,o,u){return t[0]=n,t[1]=i,t[2]=r,t[3]=s,t[4]=o,t[5]=u,t}function Vt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function Ht(t,n){var i=n[0],r=n[1];return n[0]=t[0]*i+t[2]*r+t[4],n[1]=t[1]*i+t[3]*r+t[5],n}function $t(t,n){var i=Math.cos(n),r=Math.sin(n);return Zt(t,Jt(Wt,i,r,-r,i,0,0))}function Kt(t,n,i){return Zt(t,Jt(Wt,n,0,0,i,0,0))}function Qt(t,n,i){return Jt(t,n,0,0,i,0,0)}function tn(t,n,i,r,s,o,u,e){var h=Math.sin(o),f=Math.cos(o);return t[0]=r*f,t[1]=s*h,t[2]=-r*h,t[3]=s*f,t[4]=u*r*f-e*r*h+n,t[5]=u*s*h+e*s*f+i,t}function nn(t,n){var i=rn(n);mt(0!==i,32);var r=n[0],s=n[1],o=n[2],u=n[3],e=n[4],h=n[5];return t[0]=u/i,t[1]=-s/i,t[2]=-o/i,t[3]=r/i,t[4]=(o*h-u*e)/i,t[5]=-(r*h-s*e)/i,t}function rn(t){return t[0]*t[3]-t[1]*t[2]}function sn(t){var n="matrix("+t.join(", ")+")";if(Ut)return n;var i=Pt||(Pt=document.createElement("div"));return i.style.transform=n,i.style.transform}var on="bottom-left",un="bottom-right",en="top-left",hn="top-right",fn=0,an=1,cn=2,vn=4,ln=8,dn=16;function wn(t){for(var n=Mn(),i=0,r=t.length;i<r;++i)Nn(n,t[i]);return n}function pn(t,n,i){return i?(i[0]=t[0]-n,i[1]=t[1]-n,i[2]=t[2]+n,i[3]=t[3]+n,i):[t[0]-n,t[1]-n,t[2]+n,t[3]+n]}function yn(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t.slice()}function bn(t,n,i){var r,s;return(r=n<t[0]?t[0]-n:t[2]<n?n-t[2]:0)*r+(s=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*s}function _n(t,n){return mn(t,n[0],n[1])}function gn(t,n){return t[0]<=n[0]&&n[2]<=t[2]&&t[1]<=n[1]&&n[3]<=t[3]}function mn(t,n,i){return t[0]<=n&&n<=t[2]&&t[1]<=i&&i<=t[3]}function On(t,n){var i=t[0],r=t[1],s=t[2],o=t[3],u=n[0],e=n[1],h=fn;return u<i?h|=dn:u>s&&(h|=vn),e<r?h|=ln:e>o&&(h|=cn),h===fn&&(h=an),h}function Mn(){return[1/0,1/0,-1/0,-1/0]}function jn(t,n,i,r,s){return s?(s[0]=t,s[1]=n,s[2]=i,s[3]=r,s):[t,n,i,r]}function xn(t){return jn(1/0,1/0,-1/0,-1/0,t)}function En(t,n){var i=t[0],r=t[1];return jn(i,r,i,r,n)}function Sn(t,n,i,r,s){return Pn(xn(s),t,n,i,r)}function Tn(t,n){return t[0]==n[0]&&t[2]==n[2]&&t[1]==n[1]&&t[3]==n[3]}function An(t,n,i){return Math.abs(t[0]-n[0])<i&&Math.abs(t[2]-n[2])<i&&Math.abs(t[1]-n[1])<i&&Math.abs(t[3]-n[3])<i}function Cn(t,n){return n[0]<t[0]&&(t[0]=n[0]),n[2]>t[2]&&(t[2]=n[2]),n[1]<t[1]&&(t[1]=n[1]),n[3]>t[3]&&(t[3]=n[3]),t}function Nn(t,n){n[0]<t[0]&&(t[0]=n[0]),n[0]>t[2]&&(t[2]=n[0]),n[1]<t[1]&&(t[1]=n[1]),n[1]>t[3]&&(t[3]=n[1])}function kn(t,n){for(var i=0,r=n.length;i<r;++i)Nn(t,n[i]);return t}function Pn(t,n,i,r,s){for(;i<r;i+=s)Gn(t,n[i],n[i+1]);return t}function In(t,n){for(var i=0,r=n.length;i<r;++i)kn(t,n[i]);return t}function Gn(t,n,i){t[0]=Math.min(t[0],n),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],n),t[3]=Math.max(t[3],i)}function Rn(t,n){var i;return(i=n(Fn(t)))||(i=n(Dn(t)))||(i=n(qn(t)))?i:(i=n(Bn(t)))||!1}function Ln(t){var n=0;return Vn(t)||(n=Zn(t)*Yn(t)),n}function Fn(t){return[t[0],t[1]]}function Dn(t){return[t[2],t[1]]}function zn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Un(t,n){var i;return n===on?i=Fn(t):n===un?i=Dn(t):n===en?i=Bn(t):n===hn?i=qn(t):mt(!1,13),i}function Xn(t,n,i,r,s){var o=n*r[0]/2,u=n*r[1]/2,e=Math.cos(i),h=Math.sin(i),f=o*e,a=o*h,c=u*e,v=u*h,l=t[0],d=t[1],w=l-f+v,p=l-f-v,y=l+f-v,b=l+f+v,_=d-a-c,g=d-a+c,m=d+a+c,O=d+a-c;return jn(Math.min(w,p,y,b),Math.min(_,g,m,O),Math.max(w,p,y,b),Math.max(_,g,m,O),s)}function Yn(t){return t[3]-t[1]}function Wn(t,n,i){var r=i||[1/0,1/0,-1/0,-1/0];return Jn(t,n)?(t[0]>n[0]?r[0]=t[0]:r[0]=n[0],t[1]>n[1]?r[1]=t[1]:r[1]=n[1],t[2]<n[2]?r[2]=t[2]:r[2]=n[2],t[3]<n[3]?r[3]=t[3]:r[3]=n[3]):xn(r),r}function Bn(t){return[t[0],t[3]]}function qn(t){return[t[2],t[3]]}function Zn(t){return t[2]-t[0]}function Jn(t,n){return t[0]<=n[2]&&t[2]>=n[0]&&t[1]<=n[3]&&t[3]>=n[1]}function Vn(t){return t[2]<t[0]||t[3]<t[1]}function Hn(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t}function $n(t,n){var i=(t[2]-t[0])/2*(n-1),r=(t[3]-t[1])/2*(n-1);t[0]-=i,t[2]+=i,t[1]-=r,t[3]+=r}function Kn(t,n,i){var r=!1,s=On(t,n),o=On(t,i);if(s===an||o===an)r=!0;else{var u=t[0],e=t[1],h=t[2],f=t[3],a=n[0],c=n[1],v=i[0],l=i[1],d=(l-c)/(v-a),w=void 0,p=void 0;o&cn&&!(s&cn)&&(r=(w=v-(l-f)/d)>=u&&w<=h),r||!(o&vn)||s&vn||(r=(p=l-(v-h)*d)>=e&&p<=f),r||!(o&ln)||s&ln||(r=(w=v-(l-e)/d)>=u&&w<=h),r||!(o&dn)||s&dn||(r=(p=l-(v-u)*d)>=e&&p<=f)}return r}function Qn(t,n,i,r){var s=[];if(r>1)for(var o=t[2]-t[0],u=t[3]-t[1],e=0;e<r;++e)s.push(t[0]+o*e/r,t[1],t[2],t[1]+u*e/r,t[2]-o*e/r,t[3],t[0],t[3]-u*e/r);else s=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];n(s,s,2);for(var h=[],f=[],a=(e=0,s.length);e<a;e+=2)h.push(s[e]),f.push(s[e+1]);return function(t,n,i){return jn(Math.min.apply(null,t),Math.min.apply(null,n),Math.max.apply(null,t),Math.max.apply(null,n),i)}(h,f,i)}function ti(t,n){var i=n.getExtent(),r=zn(t);if(n.canWrapX()&&(r[0]<i[0]||r[0]>=i[2])){var s=Zn(i),o=Math.floor((r[0]-i[0])/s)*s;t[0]-=o,t[2]-=o}return t}var ni=function(){function t(t){this.L=t.code,this.F=t.units,this.D=void 0!==t.extent?t.extent:null,this.U=void 0!==t.worldExtent?t.worldExtent:null,this.W=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.B=void 0!==t.global&&t.global,this.q=!(!this.B||!this.D),this.J=t.getPointResolution,this.V=null,this.H=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.q},t.prototype.getCode=function(){return this.L},t.prototype.getExtent=function(){return this.D},t.prototype.getUnits=function(){return this.F},t.prototype.getMetersPerUnit=function(){return this.H||kt[this.F]},t.prototype.getWorldExtent=function(){return this.U},t.prototype.getAxisOrientation=function(){return this.W},t.prototype.isGlobal=function(){return this.B},t.prototype.setGlobal=function(t){this.B=t,this.q=!(!t||!this.D)},t.prototype.getDefaultTileGrid=function(){return this.V},t.prototype.setDefaultTileGrid=function(t){this.V=t},t.prototype.setExtent=function(t){this.D=t,this.q=!(!this.B||!t)},t.prototype.setWorldExtent=function(t){this.U=t},t.prototype.setGetPointResolution=function(t){this.J=t},t.prototype.getPointResolutionFunc=function(){return this.J},t}();function ii(t,n,i){return Math.min(Math.max(t,n),i)}var ri="cosh"in Math?Math.cosh:function(t){var n=Math.exp(t);return(n+1/n)/2},si="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function oi(t,n,i,r,s,o){var u=s-i,e=o-r;if(0!==u||0!==e){var h=((t-i)*u+(n-r)*e)/(u*u+e*e);h>1?(i=s,r=o):h>0&&(i+=u*h,r+=e*h)}return ui(t,n,i,r)}function ui(t,n,i,r){var s=i-t,o=r-n;return s*s+o*o}function ei(t){for(var n=t.length,i=0;i<n;i++){for(var r=i,s=Math.abs(t[i][i]),o=i+1;o<n;o++){var u=Math.abs(t[o][i]);u>s&&(s=u,r=o)}if(0===s)return null;var e=t[r];t[r]=t[i],t[i]=e;for(var h=i+1;h<n;h++)for(var f=-t[h][i]/t[i][i],a=i;a<n+1;a++)i==a?t[h][a]=0:t[h][a]+=f*t[i][a]}for(var c=new Array(n),v=n-1;v>=0;v--){c[v]=t[v][n]/t[v][v];for(var l=v-1;l>=0;l--)t[l][n]-=t[l][v]*c[v]}return c}function hi(t){return 180*t/Math.PI}function fi(t){return t*Math.PI/180}function ai(t,n){var i=t%n;return i*n<0?i+n:i}function ci(t,n,i){return t+i*(n-t)}var vi=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),li=6378137,di=Math.PI*li,wi=[-di,-di,di,di],pi=[-180,-85,180,85],yi=li*Math.log(Math.tan(Math.PI/2)),bi=function(t){function n(n){return t.call(this,{code:n,units:It.METERS,extent:wi,global:!0,worldExtent:pi,getPointResolution:function(t,n){return t/ri(n[1]/li)}})||this}return vi(n,t),n}(ni),_i=[new bi("EPSG:3857"),new bi("EPSG:102100"),new bi("EPSG:102113"),new bi("EPSG:900913"),new bi("http://www.opengis.net/def/crs/EPSG/0/3857"),new bi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function gi(t,n,i){var r=t.length,s=i>1?i:2,o=n;void 0===o&&(o=s>2?t.slice():new Array(r));for(var u=0;u<r;u+=s){o[u]=di*t[u]/180;var e=li*Math.log(Math.tan(Math.PI*(+t[u+1]+90)/360));e>yi?e=yi:e<-yi&&(e=-yi),o[u+1]=e}return o}function mi(t,n,i){var r=t.length,s=i>1?i:2,o=n;void 0===o&&(o=s>2?t.slice():new Array(r));for(var u=0;u<r;u+=s)o[u]=180*t[u]/di,o[u+1]=360*Math.atan(Math.exp(t[u+1]/li))/Math.PI-90;return o}var Oi=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mi=6378137,ji=[-180,-90,180,90],xi=Math.PI*Mi/180,Ei=function(t){function n(n,i){return t.call(this,{code:n,units:It.DEGREES,extent:ji,axisOrientation:i,global:!0,metersPerUnit:xi,worldExtent:ji})||this}return Oi(n,t),n}(ni),Si=[new Ei("CRS:84"),new Ei("EPSG:4326","neu"),new Ei("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ei("urn:ogc:def:crs:OGC:2:84"),new Ei("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new Ei("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ei("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Ti={};function Ai(){Ti={}}function Ci(t){return Ti[t]||Ti[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Ni(t,n){Ti[t]=n}var ki={};function Pi(){ki={}}function Ii(t,n,i){var r=t.getCode(),s=n.getCode();r in ki||(ki[r]={}),ki[r][s]=i}function Gi(t,n){var i;return t in ki&&n in ki[t]&&(i=ki[t][n]),i}var Ri=6371008.8;function Li(t,n,i){var r=i||Ri,s=fi(t[1]),o=fi(n[1]),u=(o-s)/2,e=fi(n[0]-t[0])/2,h=Math.sin(u)*Math.sin(u)+Math.sin(e)*Math.sin(e)*Math.cos(s)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function Fi(t,n){for(var i=0,r=0,s=t.length;r<s-1;++r)i+=Li(t[r],t[r+1],n);return i}function Di(t,n){for(var i=0,r=t.length,s=t[r-1][0],o=t[r-1][1],u=0;u<r;u++){var e=t[u][0],h=t[u][1];i+=fi(e-s)*(2+Math.sin(fi(o))+Math.sin(fi(h))),s=e,o=h}return i*n*n/2}function zi(t,n,i,r){var s=r||Ri,o=fi(t[1]),u=fi(t[0]),e=n/s,h=Math.asin(Math.sin(o)*Math.cos(e)+Math.cos(o)*Math.sin(e)*Math.cos(i));return[hi(u+Math.atan2(Math.sin(i)*Math.sin(e)*Math.cos(o),Math.cos(e)-Math.sin(o)*Math.sin(h))),hi(h)]}function Ui(t,n,i){var r=void 0!==i?t.toFixed(i):""+t,s=r.indexOf(".");return(s=-1===s?r.length:s)>n?r:new Array(1+n-s).join("0")+r}function Xi(t,n){return t[0]+=+n[0],t[1]+=+n[1],t}function Yi(t,n){var i=n.getRadius(),r=n.getCenter(),s=r[0],o=r[1],u=t[0]-s,e=t[1]-o;0===u&&0===e&&(u=1);var h=Math.sqrt(u*u+e*e);return[s+i*u/h,o+i*e/h]}function Wi(t,n){var i,r,s=t[0],o=t[1],u=n[0],e=n[1],h=u[0],f=u[1],a=e[0],c=e[1],v=a-h,l=c-f,d=0===v&&0===l?0:(v*(s-h)+l*(o-f))/(v*v+l*l||0);return d<=0?(i=h,r=f):d>=1?(i=a,r=c):(i=h+d*v,r=f+d*l),[i,r]}function Bi(t,n,i){var r=ai(n+180,360)-180,s=Math.abs(3600*r),o=i||0,u=Math.pow(10,o),e=Math.floor(s/3600),h=Math.floor((s-3600*e)/60),f=s-3600*e-60*h;return(f=Math.ceil(f*u)/u)>=60&&(f=0,h+=1),h>=60&&(h=0,e+=1),e+"° "+Ui(h,2)+"′ "+Ui(f,2,o)+"″"+(0==r?"":" "+t.charAt(r<0?1:0))}function qi(t,n,i){return t?n.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function Zi(t,n){for(var i=!0,r=t.length-1;r>=0;--r)if(t[r]!=n[r]){i=!1;break}return i}function Ji(t,n){var i=Math.cos(n),r=Math.sin(n),s=t[0]*i-t[1]*r,o=t[1]*i+t[0]*r;return t[0]=s,t[1]=o,t}function Vi(t,n){return t[0]*=n,t[1]*=n,t}function Hi(t,n){var i=t[0]-n[0],r=t[1]-n[1];return i*i+r*r}function $i(t,n){return Math.sqrt(Hi(t,n))}function Ki(t,n){return Hi(t,Wi(t,n))}function Qi(t,n){return qi(t,"{x}, {y}",n)}function tr(t,n){if(n.canWrapX()){var i=Zn(n.getExtent()),r=nr(t,n,i);r&&(t[0]-=r*i)}return t}function nr(t,n,i){var r=n.getExtent(),s=0;if(n.canWrapX()&&(t[0]<r[0]||t[0]>r[2])){var o=i||Zn(r);s=Math.floor((t[0]-r[0])/o)}return s}function ir(t,n,i){var r;if(void 0!==n){for(var s=0,o=t.length;s<o;++s)n[s]=t[s];r=n}else r=t.slice();return r}function rr(t,n,i){if(void 0!==n&&t!==n){for(var r=0,s=t.length;r<s;++r)n[r]=t[r];t=n}return t}function sr(t){Ni(t.getCode(),t),Ii(t,t,ir)}function or(t){t.forEach(sr)}function ur(t){return"string"==typeof t?Ci(t):t||null}function er(t,n,i,r){var s,o=(t=ur(t)).getPointResolutionFunc();if(o){if(s=o(n,i),r&&r!==t.getUnits())(e=t.getMetersPerUnit())&&(s=s*e/kt[r])}else{var u=t.getUnits();if(u==It.DEGREES&&!r||r==It.DEGREES)s=n;else{var e,h=dr(t,ur("EPSG:4326"));if(h===rr&&u!==It.DEGREES)s=n*t.getMetersPerUnit();else{var f=[i[0]-n/2,i[1],i[0]+n/2,i[1],i[0],i[1]-n/2,i[0],i[1]+n/2];s=(Li((f=h(f,f,2)).slice(0,2),f.slice(2,4))+Li(f.slice(4,6),f.slice(6,8)))/2}void 0!==(e=r?kt[r]:t.getMetersPerUnit())&&(s/=e)}}return s}function hr(t){or(t),t.forEach((function(n){t.forEach((function(t){n!==t&&Ii(n,t,ir)}))}))}function fr(t,n,i,r){t.forEach((function(t){n.forEach((function(n){Ii(t,n,i),Ii(n,t,r)}))}))}function ar(t,n){return t?"string"==typeof t?ur(t):t:ur(n)}function cr(t){return function(n,i,r){for(var s=n.length,o=void 0!==r?r:2,u=void 0!==i?i:new Array(s),e=0;e<s;e+=o){var h=t([n[e],n[e+1]]);u[e]=h[0],u[e+1]=h[1];for(var f=o-1;f>=2;--f)u[e+f]=n[e+f]}return u}}function vr(t,n,i,r){var s=ur(t),o=ur(n);Ii(s,o,cr(i)),Ii(o,s,cr(r))}function lr(t,n){if(t===n)return!0;var i=t.getUnits()===n.getUnits();return(t.getCode()===n.getCode()||dr(t,n)===ir)&&i}function dr(t,n){var i=Gi(t.getCode(),n.getCode());return i||(i=rr),i}function wr(t,n){return dr(ur(t),ur(n))}function pr(t,n,i){return wr(n,i)(t,void 0,t.length)}function yr(t,n,i,r){return Qn(t,wr(n,i),void 0,r)}var br=null;function _r(t){br=ur(t)}function gr(){return br}function mr(t,n){return br?pr(t,n,br):t}function Or(t,n){return br?pr(t,br,n):t}function Mr(t,n){return br?yr(t,n,br):t}function jr(t,n){return br?yr(t,br,n):t}function xr(t,n){if(!br)return t;var i=ur(n).getUnits(),r=br.getUnits();return i&&r?t*kt[i]/kt[r]:t}function Er(t,n){if(!br)return t;var i=ur(n).getUnits(),r=br.getUnits();return i&&r?t*kt[r]/kt[i]:t}function Sr(t,n,i){return function(r){var s,o,u=r[0],e=r[1];if(t.canWrapX()){var h=t.getExtent(),f=Zn(h);(o=nr(r,t,f))&&(u-=o*f),u=ii(u,h[0],h[2]),e=ii(e,h[1],h[3]),s=i([u,e])}else s=i(r);return o&&n.canWrapX()&&(s[0]+=o*Zn(n.getExtent())),s}}function Tr(){hr(_i),hr(Si),fr(Si,_i,gi,mi)}function Ar(t,n,i,r,s,o){for(var u=o||[],e=0,h=n;h<i;h+=r){var f=t[h],a=t[h+1];u[e++]=s[0]*f+s[2]*a+s[4],u[e++]=s[1]*f+s[3]*a+s[5]}return o&&u.length!=e&&(u.length=e),u}function Cr(t,n,i,r,s,o,u){for(var e=u||[],h=Math.cos(s),f=Math.sin(s),a=o[0],c=o[1],v=0,l=n;l<i;l+=r){var d=t[l]-a,w=t[l+1]-c;e[v++]=a+d*h-w*f,e[v++]=c+d*f+w*h;for(var p=l+2;p<l+r;++p)e[v++]=t[p]}return u&&e.length!=v&&(e.length=v),e}function Nr(t,n,i,r,s,o,u,e){for(var h=e||[],f=u[0],a=u[1],c=0,v=n;v<i;v+=r){var l=t[v]-f,d=t[v+1]-a;h[c++]=f+s*l,h[c++]=a+o*d;for(var w=v+2;w<v+r;++w)h[c++]=t[w]}return e&&h.length!=c&&(h.length=c),h}function kr(t,n,i,r,s,o,u){for(var e=u||[],h=0,f=n;f<i;f+=r){e[h++]=t[f]+s,e[h++]=t[f+1]+o;for(var a=f+2;a<f+r;++a)e[h++]=t[a]}return u&&e.length!=h&&(e.length=h),e}Tr();var Pr=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ir=[1,0,0,1,0,0],Gr=function(t){function n(){var n=t.call(this)||this;return n.D=[1/0,1/0,-1/0,-1/0],n.$=-1,n.simplifiedGeometryMaxMinSquaredTolerance=0,n.simplifiedGeometryRevision=0,n.simplifyTransformedInternal=x((function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);var r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})),n}return Pr(n,t),n.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)},n.prototype.clone=function(){return r()},n.prototype.closestPointXY=function(t,n,i,s){return r()},n.prototype.containsXY=function(t,n){var i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n},n.prototype.getClosestPoint=function(t,n){var i=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},n.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},n.prototype.computeExtent=function(t){return r()},n.prototype.getExtent=function(t){if(this.$!=this.getRevision()){var n=this.computeExtent(this.D);(isNaN(n[0])||isNaN(n[1]))&&xn(n),this.$=this.getRevision()}return Hn(this.D,t)},n.prototype.rotate=function(t,n){r()},n.prototype.scale=function(t,n,i){r()},n.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},n.prototype.getSimplifiedGeometry=function(t){return r()},n.prototype.getType=function(){return r()},n.prototype.applyTransform=function(t){r()},n.prototype.intersectsExtent=function(t){return r()},n.prototype.translate=function(t,n){r()},n.prototype.transform=function(t,n){var i=ur(t),r=i.getUnits()==It.TILE_PIXELS?function(t,r,s){var o=i.getExtent(),u=i.getWorldExtent(),e=Yn(u)/Yn(o);return tn(Ir,u[0],u[3],e,-e,0,0,0),Ar(t,0,t.length,s,Ir,r),wr(i,n)(t,r,s)}:wr(i,n);return this.applyTransform(r),this},n}(nt),Rr=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Lr(t){var n;return t==xt?n=2:t==Et||t==St?n=3:t==Tt&&(n=4),n}function Fr(t,n,i){var r=t.getFlatCoordinates();if(r){var s=t.getStride();return Ar(r,0,r.length,s,n,i)}return null}var Dr=function(t){function n(){var n=t.call(this)||this;return n.layout=xt,n.stride=2,n.flatCoordinates=null,n}return Rr(n,t),n.prototype.computeExtent=function(t){return Sn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinates=function(){return r()},n.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.getFlatCoordinates=function(){return this.flatCoordinates},n.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},n.prototype.getLayout=function(){return this.layout},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},n.prototype.getSimplifiedGeometryInternal=function(t){return this},n.prototype.getStride=function(){return this.stride},n.prototype.setFlatCoordinates=function(t,n){this.stride=Lr(t),this.layout=t,this.flatCoordinates=n},n.prototype.setCoordinates=function(t,n){r()},n.prototype.setLayout=function(t,n,i){var r;if(t)r=Lr(t);else{for(var s=0;s<i;++s){if(0===n.length)return this.layout=xt,void(this.stride=2);n=n[0]}t=function(t){var n;2==t?n=xt:3==t?n=Et:4==t&&(n=Tt);return n}(r=n.length)}this.layout=t,this.stride=r},n.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},n.prototype.rotate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Cr(i,0,i.length,r,t,n,i),this.changed()}},n.prototype.scale=function(t,n,i){var r=n;void 0===r&&(r=t);var s=i;s||(s=zn(this.getExtent()));var o=this.getFlatCoordinates();if(o){var u=this.getStride();Nr(o,0,o.length,u,t,r,s,o),this.changed()}},n.prototype.translate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();kr(i,0,i.length,r,t,n,i),this.changed()}},n}(Gr);function zr(t,n,i,r,s,o,u){var e,h=t[n],f=t[n+1],a=t[i]-h,c=t[i+1]-f;if(0===a&&0===c)e=n;else{var v=((s-h)*a+(o-f)*c)/(a*a+c*c);if(v>1)e=i;else{if(v>0){for(var l=0;l<r;++l)u[l]=ci(t[n+l],t[i+l],v);return void(u.length=r)}e=n}}for(l=0;l<r;++l)u[l]=t[e+l];u.length=r}function Ur(t,n,i,r,s){var o=t[n],u=t[n+1];for(n+=r;n<i;n+=r){var e=t[n],h=t[n+1],f=ui(o,u,e,h);f>s&&(s=f),o=e,u=h}return s}function Xr(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o];s=Ur(t,n,e,r,s),n=e}return s}function Yr(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o];s=Xr(t,n,e,r,s),n=e[e.length-1]}return s}function Wr(t,n,i,r,s,o,u,e,h,f,a){if(n==i)return f;var c,v;if(0===s){if((v=ui(u,e,t[n],t[n+1]))<f){for(c=0;c<r;++c)h[c]=t[n+c];return h.length=r,v}return f}for(var l=a||[NaN,NaN],d=n+r;d<i;)if(zr(t,d-r,d,r,u,e,l),(v=ui(u,e,l[0],l[1]))<f){for(f=v,c=0;c<r;++c)h[c]=l[c];h.length=r,d+=r}else d+=r*Math.max((Math.sqrt(v)-Math.sqrt(f))/s|0,1);if(o&&(zr(t,i-r,n,r,u,e,l),(v=ui(u,e,l[0],l[1]))<f)){for(f=v,c=0;c<r;++c)h[c]=l[c];h.length=r}return f}function Br(t,n,i,r,s,o,u,e,h,f,a){for(var c=a||[NaN,NaN],v=0,l=i.length;v<l;++v){var d=i[v];f=Wr(t,n,d,r,s,o,u,e,h,f,c),n=d}return f}function qr(t,n,i,r,s,o,u,e,h,f,a){for(var c=a||[NaN,NaN],v=0,l=i.length;v<l;++v){var d=i[v];f=Br(t,n,d,r,s,o,u,e,h,f,c),n=d[d.length-1]}return f}function Zr(t,n,i,r){for(var s=0,o=i.length;s<o;++s)t[n++]=i[s];return n}function Jr(t,n,i,r){for(var s=0,o=i.length;s<o;++s)for(var u=i[s],e=0;e<r;++e)t[n++]=u[e];return n}function Vr(t,n,i,r,s){for(var o=s||[],u=0,e=0,h=i.length;e<h;++e){var f=Jr(t,n,i[e],r);o[u++]=f,n=f}return o.length=u,o}function Hr(t,n,i,r,s){for(var o=s||[],u=0,e=0,h=i.length;e<h;++e){var f=Vr(t,n,i[e],r,o[u]);o[u++]=f,n=f[f.length-1]}return o.length=u,o}function $r(t,n,i,r,s,o,u){var e=(i-n)/r;if(e<3){for(;n<i;n+=r)o[u++]=t[n],o[u++]=t[n+1];return u}var h=new Array(e);h[0]=1,h[e-1]=1;for(var f=[n,i-r],a=0;f.length>0;){for(var c=f.pop(),v=f.pop(),l=0,d=t[v],w=t[v+1],p=t[c],y=t[c+1],b=v+r;b<c;b+=r){var _=oi(t[b],t[b+1],d,w,p,y);_>l&&(a=b,l=_)}l>s&&(h[(a-n)/r]=1,v+r<a&&f.push(v,a),a+r<c&&f.push(a,c))}for(b=0;b<e;++b)h[b]&&(o[u++]=t[n+b*r],o[u++]=t[n+b*r+1]);return u}function Kr(t,n,i,r,s,o,u,e){for(var h=0,f=i.length;h<f;++h){var a=i[h];u=$r(t,n,a,r,s,o,u),e.push(u),n=a}return u}function Qr(t,n,i,r,s,o,u){if(i<=n+r){for(;n<i;n+=r)o[u++]=t[n],o[u++]=t[n+1];return u}var e=t[n],h=t[n+1];o[u++]=e,o[u++]=h;var f=e,a=h;for(n+=r;n<i;n+=r)ui(e,h,f=t[n],a=t[n+1])>s&&(o[u++]=f,o[u++]=a,e=f,h=a);return f==e&&a==h||(o[u++]=f,o[u++]=a),u}function ts(t,n){return n*Math.round(t/n)}function ns(t,n,i,r,s,o,u){if(n==i)return u;var e,h,f=ts(t[n],s),a=ts(t[n+1],s);n+=r,o[u++]=f,o[u++]=a;do{if(e=ts(t[n],s),h=ts(t[n+1],s),(n+=r)==i)return o[u++]=e,o[u++]=h,u}while(e==f&&h==a);for(;n<i;){var c=ts(t[n],s),v=ts(t[n+1],s);if(n+=r,c!=e||v!=h){var l=e-f,d=h-a,w=c-f,p=v-a;l*p==d*w&&(l<0&&w<l||l==w||l>0&&w>l)&&(d<0&&p<d||d==p||d>0&&p>d)?(e=c,h=v):(o[u++]=e,o[u++]=h,f=e,a=h,e=c,h=v)}}return o[u++]=e,o[u++]=h,u}function is(t,n,i,r,s,o,u,e){for(var h=0,f=i.length;h<f;++h){var a=i[h];u=ns(t,n,a,r,s,o,u),e.push(u),n=a}return u}function rs(t,n,i,r,s,o,u,e){for(var h=0,f=i.length;h<f;++h){var a=i[h],c=[];u=is(t,n,a,r,s,o,u,c),e.push(c),n=a[a.length-1]}return u}function ss(t,n,i,r,s){for(var o=void 0!==s?s:[],u=0,e=n;e<i;e+=r)o[u++]=t.slice(e,e+r);return o.length=u,o}function os(t,n,i,r,s){for(var o=void 0!==s?s:[],u=0,e=0,h=i.length;e<h;++e){var f=i[e];o[u++]=ss(t,n,f,r,o[u]),n=f}return o.length=u,o}function us(t,n,i,r,s){for(var o=void 0!==s?s:[],u=0,e=0,h=i.length;e<h;++e){var f=i[e];o[u++]=os(t,n,f,r,o[u]),n=f[f.length-1]}return o.length=u,o}function es(t,n,i,r){for(var s=0,o=t[i-r],u=t[i-r+1];n<i;n+=r){var e=t[n],h=t[n+1];s+=u*e-o*h,o=e,u=h}return s/2}function hs(t,n,i,r){for(var s=0,o=0,u=i.length;o<u;++o){var e=i[o];s+=es(t,n,e,r),n=e}return s}function fs(t,n,i,r){for(var s=0,o=0,u=i.length;o<u;++o){var e=i[o];s+=hs(t,n,e,r),n=e[e.length-1]}return s}var as=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cs=function(t){function n(n,i){var r=t.call(this)||this;return r.K=-1,r.tt=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r}return as(n,t),n.prototype.clone=function(){return new n(this.flatCoordinates.slice(),this.layout)},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.tt!=this.getRevision()&&(this.K=Math.sqrt(Ur(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.tt=this.getRevision()),Wr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.K,!0,t,n,i,r))},n.prototype.getArea=function(){return es(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinates=function(){return ss(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=$r(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,xt)},n.prototype.getType=function(){return At.LINEAR_RING},n.prototype.intersectsExtent=function(t){return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jr(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Dr),vs=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ls=function(t){function n(n,i){var r=t.call(this)||this;return r.setCoordinates(n,i),r}return vs(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){var s=this.flatCoordinates,o=ui(t,n,s[0],s[1]);if(o<r){for(var u=this.stride,e=0;e<u;++e)i[e]=s[e];return i.length=u,o}return r},n.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},n.prototype.computeExtent=function(t){return En(this.flatCoordinates,t)},n.prototype.getType=function(){return At.POINT},n.prototype.intersectsExtent=function(t){return mn(t,this.flatCoordinates[0],this.flatCoordinates[1])},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Zr(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Dr);function ds(t,n,i,r,s){return!Rn(s,(function(s){return!ws(t,n,i,r,s[0],s[1])}))}function ws(t,n,i,r,s,o){for(var u=0,e=t[i-r],h=t[i-r+1];n<i;n+=r){var f=t[n],a=t[n+1];h<=o?a>o&&(f-e)*(o-h)-(s-e)*(a-h)>0&&u++:a<=o&&(f-e)*(o-h)-(s-e)*(a-h)<0&&u--,e=f,h=a}return 0!==u}function ps(t,n,i,r,s,o){if(0===i.length)return!1;if(!ws(t,n,i[0],r,s,o))return!1;for(var u=1,e=i.length;u<e;++u)if(ws(t,i[u-1],i[u],r,s,o))return!1;return!0}function ys(t,n,i,r,s,o){if(0===i.length)return!1;for(var u=0,e=i.length;u<e;++u){var h=i[u];if(ps(t,n,h,r,s,o))return!0;n=h[h.length-1]}return!1}function bs(t,n,i,r,s,o,u){for(var e,h,f,a,c,v,l,d=s[o+1],p=[],y=0,b=i.length;y<b;++y){var _=i[y];for(a=t[_-r],v=t[_-r+1],e=n;e<_;e+=r)c=t[e],l=t[e+1],(d<=v&&l<=d||v<=d&&d<=l)&&(f=(d-v)/(l-v)*(c-a)+a,p.push(f)),a=c,v=l}var g=NaN,m=-1/0;for(p.sort(w),a=p[0],e=1,h=p.length;e<h;++e){c=p[e];var O=Math.abs(c-a);O>m&&ps(t,n,i,r,f=(a+c)/2,d)&&(g=f,m=O),a=c}return isNaN(g)&&(g=s[o]),u?(u.push(g,d,m),u):[g,d,m]}function _s(t,n,i,r,s){for(var o=[],u=0,e=i.length;u<e;++u){var h=i[u];o=bs(t,n,h,r,s,2*u,o),n=h[h.length-1]}return o}function gs(t,n,i,r,s){var o;for(n+=r;n<i;n+=r)if(o=s(t.slice(n-r,n),t.slice(n,n+r)))return o;return!1}function ms(t,n,i,r,s){var o=Pn([1/0,1/0,-1/0,-1/0],t,n,i,r);return!!Jn(s,o)&&(!!gn(s,o)||(o[0]>=s[0]&&o[2]<=s[2]||(o[1]>=s[1]&&o[3]<=s[3]||gs(t,n,i,r,(function(t,n){return Kn(s,t,n)})))))}function Os(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){if(ms(t,n,i[o],r,s))return!0;n=i[o]}return!1}function Ms(t,n,i,r,s){return!!ms(t,n,i,r,s)||(!!ws(t,n,i,r,s[0],s[1])||(!!ws(t,n,i,r,s[0],s[3])||(!!ws(t,n,i,r,s[2],s[1])||!!ws(t,n,i,r,s[2],s[3]))))}function js(t,n,i,r,s){if(!Ms(t,n,i[0],r,s))return!1;if(1===i.length)return!0;for(var o=1,u=i.length;o<u;++o)if(ds(t,i[o-1],i[o],r,s)&&!ms(t,i[o-1],i[o],r,s))return!1;return!0}function xs(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o];if(js(t,n,e,r,s))return!0;n=e[e.length-1]}return!1}function Es(t,n,i,r){for(;n<i-r;){for(var s=0;s<r;++s){var o=t[n+s];t[n+s]=t[i-r+s],t[i-r+s]=o}n+=r,i-=r}}function Ss(t,n,i,r){for(var s=0,o=t[i-r],u=t[i-r+1];n<i;n+=r){var e=t[n],h=t[n+1];s+=(e-o)*(h+u),o=e,u=h}return 0===s?void 0:s>0}function Ts(t,n,i,r,s){for(var o=void 0!==s&&s,u=0,e=i.length;u<e;++u){var h=i[u],f=Ss(t,n,h,r);if(0===u){if(o&&f||!o&&!f)return!1}else if(o&&!f||!o&&f)return!1;n=h}return!0}function As(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o];if(!Ts(t,n,e,r,s))return!1;e.length&&(n=e[e.length-1])}return!0}function Cs(t,n,i,r,s){for(var o=void 0!==s&&s,u=0,e=i.length;u<e;++u){var h=i[u],f=Ss(t,n,h,r);(0===u?o&&f||!o&&!f:o&&!f||!o&&f)&&Es(t,n,h,r),n=h}return n}function Ns(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o)n=Cs(t,n,i[o],r,s);return n}var ks=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ps=function(t){function n(n,i,r){var s=t.call(this)||this;return s.nt=[],s.it=-1,s.rt=null,s.K=-1,s.tt=-1,s.st=-1,s.ot=null,void 0!==i&&r?(s.setFlatCoordinates(i,n),s.nt=r):s.setCoordinates(n,i),s}return ks(n,t),n.prototype.appendLinearRing=function(t){this.flatCoordinates?_(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.nt.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.nt.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.tt!=this.getRevision()&&(this.K=Math.sqrt(Xr(this.flatCoordinates,0,this.nt,this.stride,0)),this.tt=this.getRevision()),Br(this.flatCoordinates,0,this.nt,this.stride,this.K,!0,t,n,i,r))},n.prototype.containsXY=function(t,n){return ps(this.getOrientedFlatCoordinates(),0,this.nt,this.stride,t,n)},n.prototype.getArea=function(){return hs(this.getOrientedFlatCoordinates(),0,this.nt,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?Cs(n=this.getOrientedFlatCoordinates().slice(),0,this.nt,this.stride,t):n=this.flatCoordinates,os(n,0,this.nt,this.stride)},n.prototype.getEnds=function(){return this.nt},n.prototype.getFlatInteriorPoint=function(){if(this.it!=this.getRevision()){var t=zn(this.getExtent());this.rt=bs(this.getOrientedFlatCoordinates(),0,this.nt,this.stride,t,0),this.it=this.getRevision()}return this.rt},n.prototype.getInteriorPoint=function(){return new ls(this.getFlatInteriorPoint(),St)},n.prototype.getLinearRingCount=function(){return this.nt.length},n.prototype.getLinearRing=function(t){return t<0||this.nt.length<=t?null:new cs(this.flatCoordinates.slice(0===t?0:this.nt[t-1],this.nt[t]),this.layout)},n.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.nt,r=[],s=0,o=0,u=i.length;o<u;++o){var e=i[o],h=new cs(n.slice(s,e),t);r.push(h),s=e}return r},n.prototype.getOrientedFlatCoordinates=function(){if(this.st!=this.getRevision()){var t=this.flatCoordinates;Ts(t,0,this.nt,this.stride)?this.ot=t:(this.ot=t.slice(),this.ot.length=Cs(this.ot,0,this.nt,this.stride)),this.st=this.getRevision()}return this.ot},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=is(this.flatCoordinates,0,this.nt,this.stride,Math.sqrt(t),i,0,r),new n(i,xt,r)},n.prototype.getType=function(){return At.POLYGON},n.prototype.intersectsExtent=function(t){return js(this.getOrientedFlatCoordinates(),0,this.nt,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Vr(this.flatCoordinates,0,t,this.stride,this.nt);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(Dr),Is=Ps;function Gs(t,n,i,r){for(var s=i||32,o=[],u=0;u<s;++u)_(o,zi(t,n,2*Math.PI*u/s,r));return o.push(o[0],o[1]),new Ps(o,xt,[o.length])}function Rs(t){var n=t[0],i=t[1],r=t[2],s=t[3],o=[n,i,n,s,r,s,r,i,n,i];return new Ps(o,xt,[o.length])}function Ls(t,n,i){for(var r=n||32,s=t.getStride(),o=t.getLayout(),u=t.getCenter(),e=s*(r+1),h=new Array(e),f=0;f<e;f+=s){h[f]=0,h[f+1]=0;for(var a=2;a<s;a++)h[f+a]=u[a]}var c=[h.length],v=new Ps(h,o,c);return Fs(v,u,t.getRadius(),i),v}function Fs(t,n,i,r){for(var s=t.getFlatCoordinates(),o=t.getStride(),u=s.length/o-1,e=r||0,h=0;h<=u;++h){var f=h*o,a=e+2*ai(h,u)*Math.PI/u;s[f]=n[0]+i*Math.cos(a),s[f+1]=n[1]+i*Math.sin(a)}t.changed()}var Ds=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),zs="accuracy",Us="accuracyGeometry",Xs="altitude",Ys="altitudeAccuracy",Ws="heading",Bs="position",qs="projection",Zs="speed",Js="tracking",Vs="trackingOptions",Hs=function(t){function n(n){var i=t.call(this,P)||this;return i.code=n.code,i.message=n.message,i}return Ds(n,t),n}(c),$s=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.ut=null,i.et=rr,i.ht=void 0,i.addChangeListener(qs,i.ft),i.addChangeListener(Js,i.ct),void 0!==r.projection&&i.setProjection(r.projection),void 0!==r.trackingOptions&&i.setTrackingOptions(r.trackingOptions),i.setTracking(void 0!==r.tracking&&r.tracking),i}return Ds(n,t),n.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},n.prototype.ft=function(){var t=this.getProjection();t&&(this.et=dr(ur("EPSG:4326"),t),this.ut&&this.set(Bs,this.et(this.ut)))},n.prototype.ct=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.ht?this.ht=navigator.geolocation.watchPosition(this.vt.bind(this),this.lt.bind(this),this.getTrackingOptions()):t||void 0===this.ht||(navigator.geolocation.clearWatch(this.ht),this.ht=void 0)}},n.prototype.vt=function(t){var n=t.coords;this.set(zs,n.accuracy),this.set(Xs,null===n.altitude?void 0:n.altitude),this.set(Ys,null===n.altitudeAccuracy?void 0:n.altitudeAccuracy),this.set(Ws,null===n.heading?void 0:fi(n.heading)),this.ut?(this.ut[0]=n.longitude,this.ut[1]=n.latitude):this.ut=[n.longitude,n.latitude];var i=this.et(this.ut);this.set(Bs,i),this.set(Zs,null===n.speed?void 0:n.speed);var r=Gs(this.ut,n.accuracy);r.applyTransform(this.et),this.set(Us,r),this.changed()},n.prototype.lt=function(t){this.dispatchEvent(new Hs(t))},n.prototype.getAccuracy=function(){return this.get(zs)},n.prototype.getAccuracyGeometry=function(){return this.get(Us)||null},n.prototype.getAltitude=function(){return this.get(Xs)},n.prototype.getAltitudeAccuracy=function(){return this.get(Ys)},n.prototype.getHeading=function(){return this.get(Ws)},n.prototype.getPosition=function(){return this.get(Bs)},n.prototype.getProjection=function(){return this.get(qs)},n.prototype.getSpeed=function(){return this.get(Zs)},n.prototype.getTracking=function(){return this.get(Js)},n.prototype.getTrackingOptions=function(){return this.get(Vs)},n.prototype.setProjection=function(t){this.set(qs,ur(t))},n.prototype.setTracking=function(t){this.set(Js,t)},n.prototype.setTrackingOptions=function(t){this.set(Vs,t)},n}(nt),Ks=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qs=function(t){function n(n,i,r,s){var o=t.call(this)||this;return o.extent=n,o.dt=r,o.resolution=i,o.state=s,o}return Ks(n,t),n.prototype.changed=function(){this.dispatchEvent(k)},n.prototype.getExtent=function(){return this.extent},n.prototype.getImage=function(){return r()},n.prototype.getPixelRatio=function(){return this.dt},n.prototype.getResolution=function(){return this.resolution},n.prototype.getState=function(){return this.state},n.prototype.load=function(){r()},n}(N),to=0,no=1,io=2,ro=3,so=4,oo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function uo(t,n,i){var r=t;if(r.src&&Xt){var s=r.decode(),o=!0;return s.then((function(){o&&n()})).catch((function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?n():i())})),function(){o=!1}}var u=[Z(r,X,n),Z(r,P,i)];return function(){u.forEach(J)}}var eo=function(t){function n(n,i,r,s,o,u){var e=t.call(this,n,i,r,to)||this;return e.wt=s,e.yt=new Image,null!==o&&(e.yt.crossOrigin=o),e.bt=null,e.state=to,e._t=u,e}return oo(n,t),n.prototype.getImage=function(){return this.yt},n.prototype.gt=function(){this.state=ro,this.Ot(),this.changed()},n.prototype.Mt=function(){void 0===this.resolution&&(this.resolution=Yn(this.extent)/this.yt.height),this.state=io,this.Ot(),this.changed()},n.prototype.load=function(){this.state!=to&&this.state!=ro||(this.state=no,this.changed(),this._t(this,this.wt),this.bt=uo(this.yt,this.Mt.bind(this),this.gt.bind(this)))},n.prototype.setImage=function(t){this.yt=t,this.resolution=Yn(this.extent)/this.yt.height},n.prototype.Ot=function(){this.bt&&(this.bt(),this.bt=null)},n}(Qs),ho=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fo=function(t){function n(n,i,r,s,o){var u=this,e=void 0!==o?to:io;return(u=t.call(this,n,i,r,e)||this).S=void 0!==o?o:null,u.jt=s,u.A=null,u}return ho(n,t),n.prototype.getError=function(){return this.A},n.prototype.xt=function(t){t?(this.A=t,this.state=ro):this.state=io,this.changed()},n.prototype.load=function(){this.state==to&&(this.state=no,this.changed(),this.S(this.xt.bind(this)))},n.prototype.getImage=function(){return this.jt},n}(Qs);function ao(t,n,i,r){var s;return i&&i.length?s=i.shift():Ut?s=new OffscreenCanvas(t||300,n||300):(s=document.createElement("canvas")).style.all="unset",t&&(s.width=t),n&&(s.height=n),s.getContext("2d",r)}function co(t){var n=t.offsetWidth,i=getComputedStyle(t);return n+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)}function vo(t){var n=t.offsetHeight,i=getComputedStyle(t);return n+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)}function lo(t,n){var i=n.parentNode;i&&i.replaceChild(t,n)}function wo(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function po(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function yo(t,n){for(var i=t.childNodes,r=0;;++r){var s=i[r],o=n[r];if(!s&&!o)break;s!==o&&(s?o?t.insertBefore(o,s):(t.removeChild(s),--r):t.appendChild(o))}}var bo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var _o=function(t){function n(n,i,r,s,o,u){var e=t.call(this,n,i,u)||this;return e.Et=s,e.wt=r,e.key=r,e.yt=new Image,null!==s&&(e.yt.crossOrigin=s),e.bt=null,e.St=o,e}return bo(n,t),n.prototype.getImage=function(){return this.yt},n.prototype.setImage=function(t){this.yt=t,this.state=at,this.Ot(),this.changed()},n.prototype.gt=function(){var t;this.state=ct,this.Ot(),this.yt=((t=ao(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},n.prototype.Mt=function(){var t=this.yt;t.naturalWidth&&t.naturalHeight?this.state=at:this.state=vt,this.Ot(),this.changed()},n.prototype.load=function(){this.state==ct&&(this.state=ht,this.yt=new Image,null!==this.Et&&(this.yt.crossOrigin=this.Et)),this.state==ht&&(this.state=ft,this.changed(),this.St(this,this.wt),this.bt=uo(this.yt,this.Mt.bind(this),this.gt.bind(this)))},n.prototype.Ot=function(){this.bt&&(this.bt(),this.bt=null)},n}(bt),go=function(){function t(t,n,i){this.Tt=t,this.At=n,this.Ct=i,this.Nt=[],this.kt=0,this.Pt=0}return t.prototype.begin=function(){this.Nt.length=0,this.kt=0,this.Pt=0},t.prototype.update=function(t,n){this.Nt.push(t,n,Date.now())},t.prototype.end=function(){if(this.Nt.length<6)return!1;var t=Date.now()-this.Ct,n=this.Nt.length-3;if(this.Nt[n+2]<t)return!1;for(var i=n-3;i>0&&this.Nt[i+2]>t;)i-=3;var r=this.Nt[n+2]-this.Nt[i+2];if(r<1e3/60)return!1;var s=this.Nt[n]-this.Nt[i],o=this.Nt[n+1]-this.Nt[i+1];return this.kt=Math.atan2(o,s),this.Pt=Math.sqrt(s*s+o*o)/r,this.Pt>this.At},t.prototype.getDistance=function(){return(this.At-this.Pt)/this.Tt},t.prototype.getAngle=function(){return this.kt},t}(),mo=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Oo=/^([a-z]*)$|^hsla?\(.*\)$/i;function Mo(t){return"string"==typeof t?t:To(t)}function jo(t){var n=document.createElement("div");if(n.style.color=t,""!==n.style.color){document.body.appendChild(n);var i=getComputedStyle(n).color;return document.body.removeChild(n),i}return""}var xo=function(){var t={},n=0;return function(i){var r;if(t.hasOwnProperty(i))r=t[i];else{if(n>=1024){var s=0;for(var o in t)0==(3&s++)&&(delete t[o],--n)}r=function(t){var n,i,r,s,o;Oo.exec(t)&&(t=jo(t));if(mo.exec(t)){var u=t.length-1,e=void 0;e=u<=4?1:2;var h=4===u||8===u;n=parseInt(t.substr(1+0*e,e),16),i=parseInt(t.substr(1+1*e,e),16),r=parseInt(t.substr(1+2*e,e),16),s=h?parseInt(t.substr(1+3*e,e),16):255,1==e&&(n=(n<<4)+n,i=(i<<4)+i,r=(r<<4)+r,h&&(s=(s<<4)+s)),o=[n,i,r,s/255]}else 0==t.indexOf("rgba(")?So(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),So(o)):mt(!1,14);return o}(i),t[i]=r,++n}return r}}();function Eo(t){return Array.isArray(t)?t:xo(t)}function So(t){return t[0]=ii(t[0]+.5|0,0,255),t[1]=ii(t[1]+.5|0,0,255),t[2]=ii(t[2]+.5|0,0,255),t[3]=ii(t[3],0,1),t}function To(t){var n=t[0];n!=(0|n)&&(n=n+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+n+","+i+","+r+","+(void 0===t[3]?1:t[3])+")"}function Ao(t){return Oo.test(t)&&(t=jo(t)),mo.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")}var Co=function(){function t(){this.It={},this.Gt=0,this.Rt=32}return t.prototype.clear=function(){this.It={},this.Gt=0},t.prototype.canExpireCache=function(){return this.Gt>this.Rt},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var n in this.It){var i=this.It[n];0!=(3&t++)||i.hasListener()||(delete this.It[n],--this.Gt)}}},t.prototype.get=function(t,n,i){var r=No(t,n,i);return r in this.It?this.It[r]:null},t.prototype.set=function(t,n,i,r){var s=No(t,n,i);this.It[s]=r,++this.Gt},t.prototype.setSize=function(t){this.Rt=t,this.expire()},t}();function No(t,n,i){return n+":"+t+":"+(i?Mo(i):"null")}var ko=Co,Po=new Co,Io="opacity",Go="visible",Ro="extent",Lo="zIndex",Fo="maxResolution",Do="minResolution",zo="maxZoom",Uo="minZoom",Xo="source";function Yo(t){return(Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Wo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bo=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=E({},n);return"object"===Yo(n.properties)&&(delete r.properties,E(r,n.properties)),r[Io]=void 0!==n.opacity?n.opacity:1,mt("number"==typeof r[Io],64),r[Go]=void 0===n.visible||n.visible,r[Lo]=n.zIndex,r[Fo]=void 0!==n.maxResolution?n.maxResolution:1/0,r[Do]=void 0!==n.minResolution?n.minResolution:0,r[Uo]=void 0!==n.minZoom?n.minZoom:-1/0,r[zo]=void 0!==n.maxZoom?n.maxZoom:1/0,i.Lt=void 0!==r.className?n.className:"ol-layer",delete r.className,i.setProperties(r),i.Ft=null,i}return Wo(n,t),n.prototype.getClassName=function(){return this.Lt},n.prototype.getLayerState=function(t){var n=this.Ft||{layer:this,managed:void 0===t||t},i=this.getZIndex();return n.opacity=ii(Math.round(100*this.getOpacity())/100,0,1),n.sourceState=this.getSourceState(),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=void 0!==i||n.managed?i:1/0,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.Ft=n,n},n.prototype.getLayersArray=function(t){return r()},n.prototype.getLayerStatesArray=function(t){return r()},n.prototype.getExtent=function(){return this.get(Ro)},n.prototype.getMaxResolution=function(){return this.get(Fo)},n.prototype.getMinResolution=function(){return this.get(Do)},n.prototype.getMinZoom=function(){return this.get(Uo)},n.prototype.getMaxZoom=function(){return this.get(zo)},n.prototype.getOpacity=function(){return this.get(Io)},n.prototype.getSourceState=function(){return r()},n.prototype.getVisible=function(){return this.get(Go)},n.prototype.getZIndex=function(){return this.get(Lo)},n.prototype.setExtent=function(t){this.set(Ro,t)},n.prototype.setMaxResolution=function(t){this.set(Fo,t)},n.prototype.setMinResolution=function(t){this.set(Do,t)},n.prototype.setMaxZoom=function(t){this.set(zo,t)},n.prototype.setMinZoom=function(t){this.set(Uo,t)},n.prototype.setOpacity=function(t){mt("number"==typeof t,64),this.set(Io,t)},n.prototype.setVisible=function(t){this.set(Go,t)},n.prototype.setZIndex=function(t){this.set(Lo,t)},n.prototype.disposeInternal=function(){this.Ft&&(this.Ft.layer=null,this.Ft=null),t.prototype.disposeInternal.call(this)},n}(nt),qo="prerender",Zo="postrender",Jo="precompose",Vo="postcompose",Ho="rendercomplete",$o="undefined",Ko="ready",Qo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function tu(t,n){if(!t.visible)return!1;var i=n.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;var r=n.zoom;return r>t.minZoom&&r<=t.maxZoom}var nu=function(t){function n(n){var i=this,r=E({},n);delete r.source,(i=t.call(this,r)||this).on,i.once,i.un,i.Dt=null,i.zt=null,i.Ut=null,i.Xt=null,n.render&&(i.render=n.render),n.map&&i.setMap(n.map),i.addChangeListener(Xo,i.Yt);var s=n.source?n.source:null;return i.setSource(s),i}return Qo(n,t),n.prototype.getLayersArray=function(t){var n=t||[];return n.push(this),n},n.prototype.getLayerStatesArray=function(t){var n=t||[];return n.push(this.getLayerState()),n},n.prototype.getSource=function(){return this.get(Xo)||null},n.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():$o},n.prototype.Wt=function(){this.changed()},n.prototype.Yt=function(){this.Ut&&(J(this.Ut),this.Ut=null);var t=this.getSource();t&&(this.Ut=q(t,k,this.Wt,this)),this.changed()},n.prototype.getFeatures=function(t){return this.Xt?this.Xt.getFeatures(t):new Promise((function(t){return t([])}))},n.prototype.render=function(t,n){var i=this.getRenderer();if(i.prepareFrame(t))return i.renderFrame(t,n)},n.prototype.setMap=function(t){this.Dt&&(J(this.Dt),this.Dt=null),t||this.changed(),this.zt&&(J(this.zt),this.zt=null),t&&(this.Dt=q(t,Jo,(function(t){var n=t.frameState.layerStatesArray,i=this.getLayerState(!1);mt(!n.some((function(t){return t.layer===i.layer})),67),n.push(i)}),this),this.zt=q(this,k,t.render,t),this.changed())},n.prototype.setSource=function(t){this.set(Xo,t)},n.prototype.getRenderer=function(){return this.Xt||(this.Xt=this.createRenderer()),this.Xt},n.prototype.hasRenderer=function(){return!!this.Xt},n.prototype.createRenderer=function(){return null},n.prototype.disposeInternal=function(){this.Xt&&(this.Xt.dispose(),delete this.Xt),this.setSource(null),t.prototype.disposeInternal.call(this)},n}(Bo),iu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function ru(t,n){Po.expire()}var su=function(t){function n(n){var i=t.call(this)||this;return i.Bt=n,i}return iu(n,t),n.prototype.dispatchRenderEvent=function(t,n){r()},n.prototype.calculateMatrices2D=function(t){var n=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;tn(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),nn(r,i)},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s,o,u,e){var h,f=n.viewState;function a(t,n,i,r){return s.call(o,n,t?i:null,r)}var c=f.projection,v=tr(t.slice(),c),l=[[0,0]];if(c.canWrapX()&&r){var d=Zn(c.getExtent());l.push([-d,0],[d,0])}for(var w=n.layerStatesArray,p=w.length,y=[],b=[],_=0;_<l.length;_++)for(var g=p-1;g>=0;--g){var m=w[g],O=m.layer;if(O.hasRenderer()&&tu(m,f)&&u.call(e,O)){var M=O.getRenderer(),j=O.getSource();if(M&&j){var x=j.getWrapX()?v:t,E=a.bind(null,m.managed);b[0]=x[0]+l[_][0],b[1]=x[1]+l[_][1],h=M.forEachFeatureAtCoordinate(b,n,i,E,y)}if(h)return h}}if(0!==y.length){var S=1/y.length;return y.forEach((function(t,n){return t.distanceSq+=n*S})),y.sort((function(t,n){return t.distanceSq-n.distanceSq})),y.some((function(t){return h=t.callback(t.feature,t.layer,t.geometry)})),h}},n.prototype.forEachLayerAtPixel=function(t,n,i,s,o){return r()},n.prototype.hasFeatureAtCoordinate=function(t,n,i,r,s,o){return void 0!==this.forEachFeatureAtCoordinate(t,n,i,r,O,this,s,o)},n.prototype.getMap=function(){return this.Bt},n.prototype.renderFrame=function(t){r()},n.prototype.scheduleExpireIconCache=function(t){Po.canExpireCache()&&t.postRenderFunctions.push(ru)},n}(l),ou=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),uu=function(t){function n(n,i,r,s){var o=t.call(this,n)||this;return o.inversePixelTransform=i,o.frameState=r,o.context=s,o}return ou(n,t),n}(c),eu="ol-hidden",hu="ol-selectable",fu="ol-unselectable",au="ol-unsupported",cu="ol-control",vu="ol-collapsed",lu=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),du=["style","variant","weight","size","lineHeight","family"],wu=function(t){var n=t.match(lu);if(!n)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,s=du.length;r<s;++r){var o=n[r+1];void 0!==o&&(i[du[r]]=o)}return i.families=i.family.split(/,\s?/),i};function pu(t){return 1===t?"":String(Math.round(100*t)/100)}var yu="10px sans-serif",bu="#000",_u="round",gu=[],mu="round",Ou=10,Mu="#000",ju="center",xu="middle",Eu=[0,0,0,0],Su=new nt,Tu=new N;Tu.setSize=function(){console.warn("labelCache is deprecated.")};var Au,Cu,Nu=null,ku={},Pu=function(){var t,n,i="32px ",r=["monospace","serif"],s=r.length,o="wmytzilWMYTZIL@#/&?$%10";function u(t,u,e){for(var h=!0,f=0;f<s;++f){var a=r[f];if(n=Ru(t+" "+u+" "+i+a,o),e!=a){var c=Ru(t+" "+u+" "+i+e+","+a,o);h=h&&c!=n}}return!!h}function e(){for(var n=!0,i=Su.getKeys(),r=0,s=i.length;r<s;++r){var o=i[r];Su.get(o)<100&&(u.apply(this,o.split("\n"))?(S(ku),Nu=null,Au=void 0,Su.set(o,100)):(Su.set(o,Su.get(o)+1,!0),n=!1))}n&&(clearInterval(t),t=void 0)}return function(n){var i=wu(n);if(i)for(var r=i.families,s=0,o=r.length;s<o;++s){var h=r[s],f=i.style+"\n"+i.weight+"\n"+h;void 0===Su.get(f)&&(Su.set(f,100,!0),u(i.style,i.weight,h)||(Su.set(f,0,!0),void 0===t&&(t=setInterval(e,32))))}}}(),Iu=function(t){var n=ku[t];if(null==n){if(Ut){var i=wu(t),r=Gu(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else Cu||((Cu=document.createElement("div")).innerHTML="M",Cu.style.minHeight="0",Cu.style.maxHeight="none",Cu.style.height="auto",Cu.style.padding="0",Cu.style.border="none",Cu.style.position="absolute",Cu.style.display="block",Cu.style.left="-99999px"),Cu.style.font=t,document.body.appendChild(Cu),n=Cu.offsetHeight,document.body.removeChild(Cu);ku[t]=n}return n};function Gu(t,n){return Nu||(Nu=ao(1,1)),t!=Au&&(Nu.font=t,Au=Nu.font),Nu.measureText(n)}function Ru(t,n){return Gu(t,n).width}function Lu(t,n,i){if(n in i)return i[n];var r=Ru(t,n);return i[n]=r,r}function Fu(t,n,i){for(var r=n.length,s=0,o=0;o<r;++o){var u=Ru(t,n[o]);s=Math.max(s,u),i.push(u)}return s}function Du(t,n,i,r,s,o,u,e,h,f,a){t.save(),1!==i&&(t.globalAlpha*=i),n&&t.setTransform.apply(t,n),r.contextInstructions?(t.translate(h,f),t.scale(a[0],a[1]),function(t,n){for(var i=t.contextInstructions,r=0,s=i.length;r<s;r+=2)Array.isArray(i[r+1])?n[i[r]].apply(n,i[r+1]):n[i[r]]=i[r+1]}(r,t)):a[0]<0||a[1]<0?(t.translate(h,f),t.scale(a[0],a[1]),t.drawImage(r,s,o,u,e,0,0,u,e)):t.drawImage(r,s,o,u,e,h,f,u*a[0],e*a[1]),t.restore()}var zu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Uu=function(t){function n(n){var i=t.call(this,n)||this;i.qt=q(Su,v,n.redrawText.bind(n)),i.Zt=document.createElement("div");var r=i.Zt.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",i.Zt.className="ol-unselectable ol-layers";var s=n.getViewport();return s.insertBefore(i.Zt,s.firstChild||null),i.Jt=[],i.Vt=!0,i}return zu(n,t),n.prototype.dispatchRenderEvent=function(t,n){var i=this.getMap();if(i.hasListener(t)){var r=new uu(t,void 0,n);i.dispatchEvent(r)}},n.prototype.disposeInternal=function(){J(this.qt),this.Zt.parentNode.removeChild(this.Zt),t.prototype.disposeInternal.call(this)},n.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(Jo,t);var n=t.layerStatesArray.sort((function(t,n){return t.zIndex-n.zIndex})),i=t.viewState;this.Jt.length=0;for(var r=[],s=null,o=0,u=n.length;o<u;++o){var e=n[o];if(t.layerIndex=o,tu(e,i)&&(e.sourceState==Ko||e.sourceState==$o)){var h=e.layer,f=h.render(t,s);f&&(f!==s&&(this.Jt.push(f),s=f),"getDeclutter"in h&&r.push(h))}}for(o=r.length-1;o>=0;--o)r[o].renderDeclutter(t);yo(this.Zt,this.Jt),this.dispatchRenderEvent(Vo,t),this.Vt||(this.Zt.style.display="",this.Vt=!0),this.scheduleExpireIconCache(t)}else this.Vt&&(this.Zt.style.display="none",this.Vt=!1)},n.prototype.forEachLayerAtPixel=function(t,n,i,r,s){for(var o=n.viewState,u=n.layerStatesArray,e=u.length-1;e>=0;--e){var h=u[e],f=h.layer;if(f.hasRenderer()&&tu(h,o)&&s(f)){var a=f.getRenderer().getDataAtPixel(t,n,i);if(a){var c=r(f,a);if(c)return c}}}},n}(su),Xu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yu="layers",Wu=function(t){function n(n){var i=this,r=n||{},s=E({},r);delete s.layers;var o=r.layers;return(i=t.call(this,s)||this).on,i.once,i.un,i.Ht=[],i.$t={},i.addChangeListener(Yu,i.Kt),o?Array.isArray(o)?o=new et(o.slice(),{unique:!0}):mt("function"==typeof o.getArray,43):o=new et(void 0,{unique:!0}),i.setLayers(o),i}return Xu(n,t),n.prototype.Qt=function(){this.changed()},n.prototype.Kt=function(){this.Ht.forEach(J),this.Ht.length=0;var t=this.getLayers();for(var n in this.Ht.push(q(t,it,this.tn,this),q(t,rt,this.nn,this)),this.$t)this.$t[n].forEach(J);S(this.$t);for(var i=t.getArray(),r=0,s=i.length;r<s;r++){var u=i[r];this.$t[o(u)]=[q(u,v,this.Qt,this),q(u,k,this.Qt,this)]}this.changed()},n.prototype.tn=function(t){var n=t.element;this.$t[o(n)]=[q(n,v,this.Qt,this),q(n,k,this.Qt,this)],this.changed()},n.prototype.nn=function(t){var n=o(t.element);this.$t[n].forEach(J),delete this.$t[n],this.changed()},n.prototype.getLayers=function(){return this.get(Yu)},n.prototype.setLayers=function(t){this.set(Yu,t)},n.prototype.getLayersArray=function(t){var n=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(n)})),n},n.prototype.getLayerStatesArray=function(t){var n=void 0!==t?t:[],i=n.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(n)}));var r=this.getLayerState(),s=r.zIndex;t||void 0!==r.zIndex||(s=0);for(var o=i,u=n.length;o<u;o++){var e=n[o];e.opacity*=r.opacity,e.visible=e.visible&&r.visible,e.maxResolution=Math.min(e.maxResolution,r.maxResolution),e.minResolution=Math.max(e.minResolution,r.minResolution),e.minZoom=Math.max(e.minZoom,r.minZoom),e.maxZoom=Math.min(e.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==e.extent?e.extent=Wn(e.extent,r.extent):e.extent=r.extent),void 0===e.zIndex&&(e.zIndex=s)}return n},n.prototype.getSourceState=function(){return Ko},n}(Bo),Bu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qu=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.map=i,s.frameState=void 0!==r?r:null,s}return Bu(n,t),n}(c),Zu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ju=function(t){function n(n,i,r,s,o){var u=t.call(this,n,i,o)||this;return u.originalEvent=r,u.rn=null,u.sn=null,u.dragging=void 0!==s&&s,u}return Zu(n,t),Object.defineProperty(n.prototype,"pixel",{get:function(){return this.rn||(this.rn=this.map.getEventPixel(this.originalEvent)),this.rn},set:function(t){this.rn=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.sn||(this.sn=this.map.getCoordinateFromPixel(this.pixel)),this.sn},set:function(t){this.sn=t},enumerable:!1,configurable:!0}),n.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},n.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},n}(qu),Vu={SINGLECLICK:"singleclick",CLICK:G,DBLCLICK:R,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Hu="pointermove",$u="pointerdown",Ku="pointerup",Qu="pointerout",te=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ne=function(t){function n(n,i){var r=t.call(this,n)||this;r.Bt=n,r.en,r.hn=!1,r.fn=!1,r.an=[],r.cn=void 0===i?1:i,r.vn=null;var s=r.Bt.getViewport();return r.ln=0,r.dn={},r.Zt=s,r.wn=q(s,$u,r.pn,r),r.yn,r.bn=q(s,Hu,r._n,r),r.gn=r.mn.bind(r),r.Zt.addEventListener(W,r.gn,!!Yt&&{passive:!1}),r}return te(n,t),n.prototype.On=function(t){var n=new Ju(Vu.CLICK,this.Bt,t);this.dispatchEvent(n),void 0!==this.en?(clearTimeout(this.en),this.en=void 0,n=new Ju(Vu.DBLCLICK,this.Bt,t),this.dispatchEvent(n)):this.en=setTimeout(function(){this.en=void 0;var n=new Ju(Vu.SINGLECLICK,this.Bt,t);this.dispatchEvent(n)}.bind(this),250)},n.prototype.Mn=function(t){var n=t;n.type==Vu.POINTERUP||n.type==Vu.POINTERCANCEL?delete this.dn[n.pointerId]:n.type==Vu.POINTERDOWN&&(this.dn[n.pointerId]=!0),this.ln=Object.keys(this.dn).length},n.prototype.jn=function(t){this.Mn(t);var n=new Ju(Vu.POINTERUP,this.Bt,t);this.dispatchEvent(n),this.hn&&!n.defaultPrevented&&!this.fn&&this.xn(t)&&this.On(this.vn),0===this.ln&&(this.an.forEach(J),this.an.length=0,this.fn=!1,this.vn=null)},n.prototype.xn=function(t){return 0===t.button},n.prototype.pn=function(t){this.hn=0===this.ln,this.Mn(t);var n=new Ju(Vu.POINTERDOWN,this.Bt,t);for(var i in this.dispatchEvent(n),this.vn={},t){var r=t[i];this.vn[i]="function"==typeof r?j:r}if(0===this.an.length){var s=this.Bt.getOwnerDocument();this.an.push(q(s,Vu.POINTERMOVE,this.En,this),q(s,Vu.POINTERUP,this.jn,this),q(this.Zt,Vu.POINTERCANCEL,this.jn,this)),this.Zt.getRootNode&&this.Zt.getRootNode()!==s&&this.an.push(q(this.Zt.getRootNode(),Vu.POINTERUP,this.jn,this))}},n.prototype.En=function(t){if(this.Sn(t)){this.fn=!0;var n=new Ju(Vu.POINTERDRAG,this.Bt,t,this.fn);this.dispatchEvent(n)}},n.prototype._n=function(t){this.yn=t;var n=!(!this.vn||!this.Sn(t));this.dispatchEvent(new Ju(t.type,this.Bt,t,n))},n.prototype.mn=function(t){var n=this.yn;n&&!n.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},n.prototype.Sn=function(t){return this.fn||Math.abs(t.clientX-this.vn.clientX)>this.cn||Math.abs(t.clientY-this.vn.clientY)>this.cn},n.prototype.disposeInternal=function(){this.bn&&(J(this.bn),this.bn=null),this.Zt.removeEventListener(W,this.gn),this.wn&&(J(this.wn),this.wn=null),this.an.forEach(J),this.an.length=0,this.Zt=null,t.prototype.disposeInternal.call(this)},n}(N),ie="postrender",re="movestart",se="moveend",oe="layergroup",ue="size",ee="target",he="view",fe=1/0,ae=function(){function t(t,n){this.Tn=t,this.An=n,this.Cn=[],this.Nn=[],this.kn={}}return t.prototype.clear=function(){this.Cn.length=0,this.Nn.length=0,S(this.kn)},t.prototype.dequeue=function(){var t=this.Cn,n=this.Nn,i=t[0];1==t.length?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.Pn(0));var r=this.An(i);return delete this.kn[r],i},t.prototype.enqueue=function(t){mt(!(this.An(t)in this.kn),31);var n=this.Tn(t);return n!=fe&&(this.Cn.push(t),this.Nn.push(n),this.kn[this.An(t)]=!0,this.In(0,this.Cn.length-1),!0)},t.prototype.getCount=function(){return this.Cn.length},t.prototype.Gn=function(t){return 2*t+1},t.prototype.Rn=function(t){return 2*t+2},t.prototype.Ln=function(t){return t-1>>1},t.prototype.Fn=function(){var t;for(t=(this.Cn.length>>1)-1;t>=0;t--)this.Pn(t)},t.prototype.isEmpty=function(){return 0===this.Cn.length},t.prototype.isKeyQueued=function(t){return t in this.kn},t.prototype.isQueued=function(t){return this.isKeyQueued(this.An(t))},t.prototype.Pn=function(t){for(var n=this.Cn,i=this.Nn,r=n.length,s=n[t],o=i[t],u=t;t<r>>1;){var e=this.Gn(t),h=this.Rn(t),f=h<r&&i[h]<i[e]?h:e;n[t]=n[f],i[t]=i[f],t=f}n[t]=s,i[t]=o,this.In(u,t)},t.prototype.In=function(t,n){for(var i=this.Cn,r=this.Nn,s=i[n],o=r[n];n>t;){var u=this.Ln(n);if(!(r[u]>o))break;i[n]=i[u],r[n]=r[u],n=u}i[n]=s,r[n]=o},t.prototype.reprioritize=function(){var t,n,i,r=this.Tn,s=this.Cn,o=this.Nn,u=0,e=s.length;for(n=0;n<e;++n)(i=r(t=s[n]))==fe?delete this.kn[this.An(t)]:(o[u]=i,s[u++]=t);s.length=u,o.length=u,this.Fn()},t}(),ce=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ve=function(t){function n(n,i){var r=t.call(this,(function(t){return n.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return r.Dn=r.handleTileChange.bind(r),r.zn=i,r.Un=0,r.Xn={},r}return ce(n,t),n.prototype.enqueue=function(n){var i=t.prototype.enqueue.call(this,n);i&&n[0].addEventListener(k,this.Dn);return i},n.prototype.getTilesLoading=function(){return this.Un},n.prototype.handleTileChange=function(t){var n=t.target,i=n.getState();if(i===at||i===ct||i===vt){n.removeEventListener(k,this.Dn);var r=n.getKey();r in this.Xn&&(delete this.Xn[r],--this.Un),this.zn()}},n.prototype.loadMoreTiles=function(t,n){for(var i,r,s=0;this.Un<t&&s<n&&this.getCount()>0;)r=(i=this.dequeue()[0]).getKey(),i.getState()!==ht||r in this.Xn||(this.Xn[r]=!0,++this.Un,++s,i.load())},n}(ae);function le(t,n,i,r,s){if(!t||!(i in t.wantedTiles))return fe;if(!t.wantedTiles[i][n.getKey()])return fe;var o=t.viewState.center,u=r[0]-o[0],e=r[1]-o[1];return 65536*Math.log(s)+Math.sqrt(u*u+e*e)/s}var de=0,we=1,pe="center",ye="resolution",be="rotation",_e=256;function ge(t,n,i){return function(r,s,o,u,e){if(r){var h=n?0:o[0]*s,f=n?0:o[1]*s,a=e?e[0]:0,c=e?e[1]:0,v=t[0]+h/2+a,l=t[2]-h/2+a,d=t[1]+f/2+c,w=t[3]-f/2+c;v>l&&(l=v=(l+v)/2),d>w&&(w=d=(w+d)/2);var p=ii(r[0],v,l),y=ii(r[1],d,w),b=30*s;return u&&i&&(p+=-b*Math.log(1+Math.max(0,v-r[0])/b)+b*Math.log(1+Math.max(0,r[0]-l)/b),y+=-b*Math.log(1+Math.max(0,d-r[1])/b)+b*Math.log(1+Math.max(0,r[1]-w)/b)),[p,y]}}}function me(t){return t}function Oe(t,n,i,r){var s=Zn(n)/i[0],o=Yn(n)/i[1];return r?Math.min(t,Math.max(s,o)):Math.min(t,Math.min(s,o))}function Me(t,n,i){var r=Math.min(t,n);return r*=Math.log(1+50*Math.max(0,t/n-1))/50+1,i&&(r=Math.max(r,i),r/=Math.log(1+50*Math.max(0,i/t-1))/50+1),ii(r,i/2,2*n)}function je(t,n,i,r){return function(s,o,u,e){if(void 0!==s){var h=t[0],f=t[t.length-1],a=i?Oe(h,i,u,r):h;if(e)return void 0===n||n?Me(s,a,f):ii(s,f,a);var c=Math.min(a,s),v=Math.floor(y(t,c,o));return t[v]>a&&v<t.length-1?t[v+1]:t[v]}}}function xe(t,n,i,r,s,o){return function(u,e,h,f){if(void 0!==u){var a=s?Oe(n,s,h,o):n,c=void 0!==i?i:0;if(f)return void 0===r||r?Me(u,a,c):ii(u,c,a);var v=Math.ceil(Math.log(n/a)/Math.log(t)-1e-9),l=-e*(.5-1e-9)+.5,d=Math.min(a,u),w=Math.floor(Math.log(n/d)/Math.log(t)+l),p=Math.max(v,w);return ii(n/Math.pow(t,p),c,a)}}}function Ee(t,n,i,r,s){return function(o,u,e,h){if(void 0!==o){var f=r?Oe(t,r,e,s):t;return(void 0===i||i)&&h?Me(o,f,n):ii(o,n,f)}}}function Se(t){return void 0!==t?0:void 0}function Te(t){return void 0!==t?t:void 0}function Ae(t){var n=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}}function Ce(t){var n=t||fi(5);return function(t,i){return i?t:void 0!==t?Math.abs(t)<=n?0:t:void 0}}var Ne=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function ke(t,n){setTimeout((function(){t(n)}),0)}function Pe(t){if(void 0!==t.extent){var n=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return ge(t.extent,t.constrainOnlyCenter,n)}var i=ar(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&i.isGlobal()){var r=i.getExtent().slice();return r[0]=-1/0,r[2]=1/0,ge(r,!1,!1)}return me}function Ie(t){var n,i,r,s=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,u=void 0!==t.zoomFactor?t.zoomFactor:2,e=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,f=void 0!==t.showFullExtent&&t.showFullExtent,a=ar(t.projection,"EPSG:3857"),c=a.getExtent(),v=t.constrainOnlyCenter,l=t.extent;if(e||l||!a.isGlobal()||(v=!1,l=c),void 0!==t.resolutions){var d=t.resolutions;i=d[s],r=void 0!==d[o]?d[o]:d[d.length-1],n=t.constrainResolution?je(d,h,!v&&l,f):Ee(i,r,h,!v&&l,f)}else{var w=(c?Math.max(Zn(c),Yn(c)):360*kt[It.DEGREES]/a.getMetersPerUnit())/_e/Math.pow(2,0),p=w/Math.pow(2,28);void 0!==(i=t.maxResolution)?s=0:i=w/Math.pow(u,s),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(u,o):w/Math.pow(u,o):p),o=s+Math.floor(Math.log(i/r)/Math.log(u)),r=i/Math.pow(u,o-s),n=t.constrainResolution?xe(u,i,r,h,!v&&l,f):Ee(i,r,h,!v&&l,f)}return{constraint:n,maxResolution:i,minResolution:r,minZoom:s,zoomFactor:u}}function Ge(t){if(void 0===t.enableRotation||t.enableRotation){var n=t.constrainRotation;return void 0===n||!0===n?Ce():!1===n?Te:"number"==typeof n?Ae(n):Te}return Se}function Re(t){return!(t.sourceCenter&&t.targetCenter&&!Zi(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function Le(t,n,i,r,s){var o=Math.cos(-s),u=Math.sin(-s),e=t[0]*o-t[1]*u,h=t[1]*o+t[0]*u;return[(e+=(n[0]/2-i[0])*r)*o-(h+=(i[1]-n[1]/2)*r)*(u=-u),h*o+e*u]}var Fe=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=E({},n);return i.Yn=[0,0],i.Wn=[],i.Bn,i.qn=ar(r.projection,"EPSG:3857"),i.Zn=[100,100],i.Jn=null,i.Vn,i.Hn,i.$n=null,i.Kn,i.Qn,i.ti=void 0,r.center&&(r.center=Or(r.center,i.qn)),r.extent&&(r.extent=jr(r.extent,i.qn)),i.ni(r),i}return Ne(n,t),n.prototype.ni=function(t){var n=Ie(t);this.ii=n.maxResolution,this.ri=n.minResolution,this.si=n.zoomFactor,this.oi=t.resolutions,this.ui=t.padding,this.ei=n.minZoom;var i=Pe(t),r=n.constraint,s=Ge(t);this.hi={center:i,resolution:r,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.fi=t},Object.defineProperty(n.prototype,"padding",{get:function(){return this.ui},set:function(t){var n=this.ui;this.ui=t;var i=this.getCenter();if(i){var r=t||[0,0,0,0];n=n||[0,0,0,0];var s=this.getResolution(),o=s/2*(r[3]-n[3]+n[1]-r[1]),u=s/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-u])}},enumerable:!1,configurable:!0}),n.prototype.ai=function(t){var n=E({},this.fi);return void 0!==n.resolution?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),E({},n,t)},n.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var r=arguments[i];r.center&&((r=E({},r)).center=Or(r.center,this.getProjection())),r.anchor&&((r=E({},r)).anchor=Or(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)},n.prototype.animateInternal=function(t){var n,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(n=arguments[i-1],--i);for(var r=0;r<i&&!this.isDef();++r){var s=arguments[r];s.center&&this.setCenterInternal(s.center),void 0!==s.zoom?this.setZoom(s.zoom):s.resolution&&this.setResolution(s.resolution),void 0!==s.rotation&&this.setRotation(s.rotation)}if(r!==i){for(var o=Date.now(),u=this.Jn.slice(),e=this.Vn,h=this.Hn,f=[];r<i;++r){var a=arguments[r],c={start:o,complete:!1,anchor:a.anchor,duration:void 0!==a.duration?a.duration:1e3,easing:a.easing||wt,callback:n};if(a.center&&(c.sourceCenter=u,c.targetCenter=a.center.slice(),u=c.targetCenter),void 0!==a.zoom?(c.sourceResolution=e,c.targetResolution=this.getResolutionForZoom(a.zoom),e=c.targetResolution):a.resolution&&(c.sourceResolution=e,c.targetResolution=a.resolution,e=c.targetResolution),void 0!==a.rotation){c.sourceRotation=h;var v=ai(a.rotation-h+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=h+v,h=c.targetRotation}Re(c)?c.complete=!0:o+=c.duration,f.push(c)}this.Wn.push(f),this.setHint(de,1),this.ci()}else n&&ke(n,!0)},n.prototype.getAnimating=function(){return this.Yn[de]>0},n.prototype.getInteracting=function(){return this.Yn[we]>0},n.prototype.cancelAnimations=function(){var t;this.setHint(de,-this.Yn[de]);for(var n=0,i=this.Wn.length;n<i;++n){var r=this.Wn[n];if(r[0].callback&&ke(r[0].callback,!1),!t)for(var s=0,o=r.length;s<o;++s){var u=r[s];if(!u.complete){t=u.anchor;break}}}this.Wn.length=0,this.ti=t,this.$n=null,this.Kn=NaN,this.Qn=NaN},n.prototype.ci=function(){if(void 0!==this.Bn&&(cancelAnimationFrame(this.Bn),this.Bn=void 0),this.getAnimating()){for(var t=Date.now(),n=!1,i=this.Wn.length-1;i>=0;--i){for(var r=this.Wn[i],s=!0,o=0,u=r.length;o<u;++o){var e=r[o];if(!e.complete){var h=t-e.start,f=e.duration>0?h/e.duration:1;f>=1?(e.complete=!0,f=1):s=!1;var a=e.easing(f);if(e.sourceCenter){var c=e.sourceCenter[0],v=e.sourceCenter[1],l=e.targetCenter[0],d=e.targetCenter[1];this.$n=e.targetCenter;var w=c+a*(l-c),p=v+a*(d-v);this.Jn=[w,p]}if(e.sourceResolution&&e.targetResolution){var y=1===a?e.targetResolution:e.sourceResolution+a*(e.targetResolution-e.sourceResolution);if(e.anchor){var b=this.vi(this.getRotation()),_=this.hi.resolution(y,0,b,!0);this.Jn=this.calculateCenterZoom(_,e.anchor)}this.Kn=e.targetResolution,this.Vn=y,this.li(!0)}if(void 0!==e.sourceRotation&&void 0!==e.targetRotation){var g=1===a?ai(e.targetRotation+Math.PI,2*Math.PI)-Math.PI:e.sourceRotation+a*(e.targetRotation-e.sourceRotation);if(e.anchor){var m=this.hi.rotation(g,!0);this.Jn=this.calculateCenterRotate(m,e.anchor)}this.Qn=e.targetRotation,this.Hn=g}if(this.li(!0),n=!0,!e.complete)break}}if(s){this.Wn[i]=null,this.setHint(de,-1),this.$n=null,this.Kn=NaN,this.Qn=NaN;var O=r[0].callback;O&&ke(O,!0)}}this.Wn=this.Wn.filter(Boolean),n&&void 0===this.Bn&&(this.Bn=requestAnimationFrame(this.ci.bind(this)))}},n.prototype.calculateCenterRotate=function(t,n){var i,r=this.getCenterInternal();return void 0!==r&&(Ji(i=[r[0]-n[0],r[1]-n[1]],t-this.getRotation()),Xi(i,n)),i},n.prototype.calculateCenterZoom=function(t,n){var i,r=this.getCenterInternal(),s=this.getResolution();void 0!==r&&void 0!==s&&(i=[n[0]-t*(n[0]-r[0])/s,n[1]-t*(n[1]-r[1])/s]);return i},n.prototype.vi=function(t){var n=this.Zn;if(t){var i=n[0],r=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}return n},n.prototype.setViewportSize=function(t){this.Zn=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},n.prototype.getCenter=function(){var t=this.getCenterInternal();return t?mr(t,this.getProjection()):t},n.prototype.getCenterInternal=function(){return this.get(pe)},n.prototype.getConstraints=function(){return this.hi},n.prototype.getConstrainResolution=function(){return this.fi.constrainResolution},n.prototype.getHints=function(t){return void 0!==t?(t[0]=this.Yn[0],t[1]=this.Yn[1],t):this.Yn.slice()},n.prototype.calculateExtent=function(t){return Mr(this.calculateExtentInternal(t),this.getProjection())},n.prototype.calculateExtentInternal=function(t){var n=t||this.di(),i=this.getCenterInternal();mt(i,1);var r=this.getResolution();mt(void 0!==r,2);var s=this.getRotation();return mt(void 0!==s,3),Xn(i,r,s,n)},n.prototype.getMaxResolution=function(){return this.ii},n.prototype.getMinResolution=function(){return this.ri},n.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.ri)},n.prototype.setMaxZoom=function(t){this.ni(this.ai({maxZoom:t}))},n.prototype.getMinZoom=function(){return this.getZoomForResolution(this.ii)},n.prototype.setMinZoom=function(t){this.ni(this.ai({minZoom:t}))},n.prototype.setConstrainResolution=function(t){this.ni(this.ai({constrainResolution:t}))},n.prototype.getProjection=function(){return this.qn},n.prototype.getResolution=function(){return this.get(ye)},n.prototype.getResolutions=function(){return this.oi},n.prototype.getResolutionForExtent=function(t,n){return this.getResolutionForExtentInternal(jr(t,this.getProjection()),n)},n.prototype.getResolutionForExtentInternal=function(t,n){var i=n||this.di(),r=Zn(t)/i[0],s=Yn(t)/i[1];return Math.max(r,s)},n.prototype.getResolutionForValueFunction=function(t){var n=t||2,i=this.getConstrainedResolution(this.ii),r=this.ri,s=Math.log(i/r)/Math.log(n);return function(t){return i/Math.pow(n,t*s)}},n.prototype.getRotation=function(){return this.get(be)},n.prototype.getValueForResolutionFunction=function(t){var n=Math.log(t||2),i=this.getConstrainedResolution(this.ii),r=this.ri,s=Math.log(i/r)/n;return function(t){return Math.log(i/t)/n/s}},n.prototype.di=function(t){var n=this.vi(t),i=this.ui;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},n.prototype.getState=function(){var t=this.getProjection(),n=this.getResolution(),i=this.getRotation(),r=this.getCenterInternal(),s=this.ui;if(s){var o=this.di();r=Le(r,this.vi(),[o[0]/2+s[3],o[1]/2+s[0]],n,i)}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:n,nextCenter:this.$n,nextResolution:this.Kn,nextRotation:this.Qn,rotation:i,zoom:this.getZoom()}},n.prototype.getZoom=function(){var t,n=this.getResolution();return void 0!==n&&(t=this.getZoomForResolution(n)),t},n.prototype.getZoomForResolution=function(t){var n,i,r=this.ei||0;if(this.oi){var s=y(this.oi,t,1);r=s,n=this.oi[s],i=s==this.oi.length-1?2:n/this.oi[s+1]}else n=this.ii,i=this.si;return r+Math.log(n/t)/Math.log(i)},n.prototype.getResolutionForZoom=function(t){if(this.oi){if(this.oi.length<=1)return 0;var n=ii(Math.floor(t),0,this.oi.length-2),i=this.oi[n]/this.oi[n+1];return this.oi[n]/Math.pow(i,ii(t-n,0,1))}return this.ii/Math.pow(this.si,t-this.ei)},n.prototype.fit=function(t,n){var i;if(mt(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))mt(!Vn(t),25),i=Rs(r=jr(t,this.getProjection()));else if(t.getType()===At.CIRCLE){var r;(i=Rs(r=jr(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),zn(r))}else{var s=gr();i=s?t.clone().transform(s,this.getProjection()):t}this.fitInternal(i,n)},n.prototype.rotatedExtentForGeometry=function(t){for(var n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),s=t.getFlatCoordinates(),o=t.getStride(),u=1/0,e=1/0,h=-1/0,f=-1/0,a=0,c=s.length;a<c;a+=o){var v=s[a]*i-s[a+1]*r,l=s[a]*r+s[a+1]*i;u=Math.min(u,v),e=Math.min(e,l),h=Math.max(h,v),f=Math.max(f,l)}return[u,e,h,f]},n.prototype.fitInternal=function(t,n){var i=n||{},r=i.size;r||(r=this.di());var s,o=void 0!==i.padding?i.padding:[0,0,0,0],u=void 0!==i.nearest&&i.nearest;s=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;var e=this.rotatedExtentForGeometry(t),h=this.getResolutionForExtentInternal(e,[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);h=isNaN(h)?s:Math.max(h,s),h=this.getConstrainedResolution(h,u?0:1);var f=this.getRotation(),a=Math.sin(f),c=Math.cos(f),v=zn(e);v[0]+=(o[1]-o[3])/2*h,v[1]+=(o[0]-o[2])/2*h;var l=v[0]*c-v[1]*a,d=v[1]*c+v[0]*a,w=this.getConstrainedCenter([l,d],h),p=i.callback?i.callback:j;void 0!==i.duration?this.animateInternal({resolution:h,center:w,duration:i.duration,easing:i.easing},p):(this.Vn=h,this.Jn=w,this.li(!1,!0),ke(p,!0))},n.prototype.centerOn=function(t,n,i){this.centerOnInternal(Or(t,this.getProjection()),n,i)},n.prototype.centerOnInternal=function(t,n,i){this.setCenterInternal(Le(t,n,i,this.getResolution(),this.getRotation()))},n.prototype.calculateCenterShift=function(t,n,i,r){var s,o=this.ui;if(o&&t){var u=this.di(-i),e=Le(t,r,[u[0]/2+o[3],u[1]/2+o[0]],n,i);s=[t[0]-e[0],t[1]-e[1]]}return s},n.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},n.prototype.adjustCenter=function(t){var n=mr(this.Jn,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustCenterInternal=function(t){var n=this.Jn;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustResolution=function(t,n){var i=n&&Or(n,this.getProjection());this.adjustResolutionInternal(t,i)},n.prototype.adjustResolutionInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.vi(this.getRotation()),s=this.hi.resolution(this.Vn*t,0,r,i);n&&(this.Jn=this.calculateCenterZoom(s,n)),this.Vn*=t,this.li()},n.prototype.adjustZoom=function(t,n){this.adjustResolution(Math.pow(this.si,-t),n)},n.prototype.adjustRotation=function(t,n){n&&(n=Or(n,this.getProjection())),this.adjustRotationInternal(t,n)},n.prototype.adjustRotationInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.hi.rotation(this.Hn+t,i);n&&(this.Jn=this.calculateCenterRotate(r,n)),this.Hn+=t,this.li()},n.prototype.setCenter=function(t){this.setCenterInternal(Or(t,this.getProjection()))},n.prototype.setCenterInternal=function(t){this.Jn=t,this.li()},n.prototype.setHint=function(t,n){return this.Yn[t]+=n,this.changed(),this.Yn[t]},n.prototype.setResolution=function(t){this.Vn=t,this.li()},n.prototype.setRotation=function(t){this.Hn=t,this.li()},n.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},n.prototype.li=function(t,n){var i=this.getAnimating()||this.getInteracting()||n,r=this.hi.rotation(this.Hn,i),s=this.vi(r),o=this.hi.resolution(this.Vn,0,s,i),u=this.hi.center(this.Jn,o,s,i,this.calculateCenterShift(this.Jn,o,r,s));this.get(be)!==r&&this.set(be,r),this.get(ye)!==o&&this.set(ye,o),this.get(pe)&&Zi(this.get(pe),u)||this.set(pe,u),this.getAnimating()&&!t&&this.cancelAnimations(),this.ti=void 0},n.prototype.resolveConstraints=function(t,n,i){var r=void 0!==t?t:200,s=n||0,o=this.hi.rotation(this.Hn),u=this.vi(o),e=this.hi.resolution(this.Vn,s,u),h=this.hi.center(this.Jn,e,u,!1,this.calculateCenterShift(this.Jn,e,o,u));if(0===r&&!this.ti)return this.Vn=e,this.Hn=o,this.Jn=h,void this.li();var f=i||(0===r?this.ti:void 0);this.ti=void 0,this.getResolution()===e&&this.getRotation()===o&&this.getCenterInternal()&&Zi(this.getCenterInternal(),h)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:h,resolution:e,duration:r,easing:dt,anchor:f}))},n.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(we,1)},n.prototype.endInteraction=function(t,n,i){var r=i&&Or(i,this.getProjection());this.endInteractionInternal(t,n,r)},n.prototype.endInteractionInternal=function(t,n,i){this.setHint(we,-1),this.resolveConstraints(t,n,i)},n.prototype.getConstrainedCenter=function(t,n){var i=this.vi(this.getRotation());return this.hi.center(t,n||this.getResolution(),i)},n.prototype.getConstrainedZoom=function(t,n){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},n.prototype.getConstrainedResolution=function(t,n){var i=n||0,r=this.vi(this.getRotation());return this.hi.resolution(t,i,r)},n}(nt);function De(t){return t[0]>0&&t[1]>0}function ze(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*n+.5|0,i[1]=t[1]*n+.5|0,i}function Ue(t,n){return Array.isArray(t)?t:(void 0===n?n=[t,t]:(n[0]=t,n[1]=t),n)}var Xe=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var Ye=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=function(t){var n=null;void 0!==t.keyboardEventTarget&&(n="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,r,s,o={},u=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Wu({layers:t.layers});o[oe]=u,o[ee]=t.target,o[he]=t.view instanceof Fe?t.view:new Fe,void 0!==t.controls&&(Array.isArray(t.controls)?i=new et(t.controls.slice()):(mt("function"==typeof t.controls.getArray,47),i=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new et(t.interactions.slice()):(mt("function"==typeof t.interactions.getArray,48),r=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?s=new et(t.overlays.slice()):(mt("function"==typeof t.overlays.getArray,49),s=t.overlays):s=new et;return{controls:i,interactions:r,keyboardEventTarget:n,overlays:s,values:o}}(n);i.wi=i.handleBrowserEvent.bind(i),i.pi=void 0!==n.maxTilesLoading?n.maxTilesLoading:16,i.dt=void 0!==n.pixelRatio?n.pixelRatio:zt,i.yi,i.bi,i._i=function(){this.bi=void 0,this.gi(Date.now())}.bind(i),i.mi=[1,0,0,1,0,0],i.Oi=[1,0,0,1,0,0],i.Mi=0,i.ji=null,i.xi=null,i.Ei=null,i.Si=null,i.Ti=null,i.Ai=document.createElement("div"),i.Ai.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.Ai.style.position="relative",i.Ai.style.overflow="hidden",i.Ai.style.width="100%",i.Ai.style.height="100%",i.Ci=document.createElement("div"),i.Ci.style.position="absolute",i.Ci.style.zIndex="0",i.Ci.style.width="100%",i.Ci.style.height="100%",i.Ci.style.pointerEvents="none",i.Ci.className="ol-overlaycontainer",i.Ai.appendChild(i.Ci),i.Ni=document.createElement("div"),i.Ni.style.position="absolute",i.Ni.style.zIndex="0",i.Ni.style.width="100%",i.Ni.style.height="100%",i.Ni.style.pointerEvents="none",i.Ni.className="ol-overlaycontainer-stopevent",i.Ai.appendChild(i.Ni),i.ki=null,i.cn=n.moveTolerance,i.Pi=r.keyboardEventTarget,i.Ii=null,i.controls=r.controls||new et,i.interactions=r.interactions||new et,i.Gi=r.overlays,i.Ri={},i.Xt=null,i.Li,i.Fi=[],i.Di=new ve(i.getTilePriority.bind(i),i.zi.bind(i)),i.addChangeListener(oe,i.Ui),i.addChangeListener(he,i.Xi),i.addChangeListener(ue,i.Yi),i.addChangeListener(ee,i.Wi),i.setProperties(r.values);var s=i;return!n.view||n.view instanceof Fe||n.view.then((function(t){s.setView(new Fe(t))})),i.controls.addEventListener(it,function(t){t.element.setMap(this)}.bind(i)),i.controls.addEventListener(rt,function(t){t.element.setMap(null)}.bind(i)),i.interactions.addEventListener(it,function(t){t.element.setMap(this)}.bind(i)),i.interactions.addEventListener(rt,function(t){t.element.setMap(null)}.bind(i)),i.Gi.addEventListener(it,function(t){this.Bi(t.element)}.bind(i)),i.Gi.addEventListener(rt,function(t){var n=t.element.getId();void 0!==n&&delete this.Ri[n.toString()],t.element.setMap(null)}.bind(i)),i.controls.forEach(function(t){t.setMap(this)}.bind(i)),i.interactions.forEach(function(t){t.setMap(this)}.bind(i)),i.Gi.forEach(i.Bi.bind(i)),i}return Xe(n,t),n.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},n.prototype.addControl=function(t){this.getControls().push(t)},n.prototype.addInteraction=function(t){this.getInteractions().push(t)},n.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},n.prototype.addOverlay=function(t){this.getOverlays().push(t)},n.prototype.Bi=function(t){var n=t.getId();void 0!==n&&(this.Ri[n.toString()]=t),t.setMap(this)},n.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},n.prototype.forEachFeatureAtPixel=function(t,n,i){if(this.ji){var r=this.getCoordinateFromPixelInternal(t),s=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,o=void 0!==i.layerFilter?i.layerFilter:O,u=!1!==i.checkWrapped;return this.Xt.forEachFeatureAtCoordinate(r,this.ji,s,u,n,null,o,null)}},n.prototype.getFeaturesAtPixel=function(t,n){var i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),n),i},n.prototype.forEachLayerAtPixel=function(t,n,i){if(this.ji){var r=i||{},s=void 0!==r.hitTolerance?r.hitTolerance:0,o=r.layerFilter||O;return this.Xt.forEachLayerAtPixel(t,this.ji,s,n,o)}},n.prototype.hasFeatureAtPixel=function(t,n){if(!this.ji)return!1;var i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).layerFilter?n.layerFilter:O,s=void 0!==n.hitTolerance?n.hitTolerance:0,o=!1!==n.checkWrapped;return this.Xt.hasFeatureAtCoordinate(i,this.ji,s,o,r,null)},n.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},n.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},n.prototype.getEventPixel=function(t){var n=this.Ai.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-n.left,i.clientY-n.top]},n.prototype.getTarget=function(){return this.get(ee)},n.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},n.prototype.getCoordinateFromPixel=function(t){return mr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},n.prototype.getCoordinateFromPixelInternal=function(t){var n=this.ji;return n?Ht(n.pixelToCoordinateTransform,t.slice()):null},n.prototype.getControls=function(){return this.controls},n.prototype.getOverlays=function(){return this.Gi},n.prototype.getOverlayById=function(t){var n=this.Ri[t.toString()];return void 0!==n?n:null},n.prototype.getInteractions=function(){return this.interactions},n.prototype.getLayerGroup=function(){return this.get(oe)},n.prototype.setLayers=function(t){var n=this.getLayerGroup();if(t instanceof et)n.setLayers(t);else{var i=n.getLayers();i.clear(),i.extend(t)}},n.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},n.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n].layer.getSource();if(r&&r.loading)return!0}return!1},n.prototype.getPixelFromCoordinate=function(t){var n=Or(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},n.prototype.getPixelFromCoordinateInternal=function(t){var n=this.ji;return n?Ht(n.coordinateToPixelTransform,t.slice(0,2)):null},n.prototype.getRenderer=function(){return this.Xt},n.prototype.getSize=function(){return this.get(ue)},n.prototype.getView=function(){return this.get(he)},n.prototype.getViewport=function(){return this.Ai},n.prototype.getOverlayContainer=function(){return this.Ci},n.prototype.getOverlayContainerStopEvent=function(){return this.Ni},n.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},n.prototype.getTilePriority=function(t,n,i,r){return le(this.ji,t,n,i,r)},n.prototype.handleBrowserEvent=function(t,n){var i=n||t.type,r=new Ju(i,this,t);this.handleMapBrowserEvent(r)},n.prototype.handleMapBrowserEvent=function(t){if(this.ji){var n=t.originalEvent,i=n.type;if(i===$u||i===B||i===z){var r=this.getOwnerDocument(),s=this.Ai.getRootNode?this.Ai.getRootNode():r,o=n.target;if(this.Ni.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(t.frameState=this.ji,!1!==this.dispatchEvent(t))for(var u=this.getInteractions().getArray().slice(),e=u.length-1;e>=0;e--){var h=u[e];if(h.getMap()===this&&h.getActive()&&this.getTargetElement())if(!h.handleEvent(t)||t.propagationStopped)break}}},n.prototype.handlePostRender=function(){var t=this.ji,n=this.Di;if(!n.isEmpty()){var i=this.pi,r=i;if(t){var s=t.viewHints;if(s[de]||s[we]){var o=Date.now()-t.time>8;i=o?0:8,r=o?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,r))}!t||!this.hasListener(Ho)||t.animate||this.Di.getTilesLoading()||this.getLoading()||this.Xt.dispatchRenderEvent(Ho,t);for(var u=this.Fi,e=0,h=u.length;e<h;++e)u[e](this,t);u.length=0},n.prototype.Yi=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},n.prototype.Wi=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.ki){for(var n=0,i=this.Ii.length;n<i;++n)J(this.Ii[n]);this.Ii=null,this.Ai.removeEventListener(I,this.wi),this.Ai.removeEventListener(B,this.wi),void 0!==this.Li&&(removeEventListener(Y,this.Li,!1),this.Li=void 0),this.ki.dispose(),this.ki=null,wo(this.Ai)}if(t){for(var r in t.appendChild(this.Ai),this.Xt||(this.Xt=this.createRenderer()),this.ki=new ne(this,this.cn),Vu)this.ki.addEventListener(Vu[r],this.handleMapBrowserEvent.bind(this));this.Ai.addEventListener(I,this.wi,!1),this.Ai.addEventListener(B,this.wi,!!Yt&&{passive:!1});var s=this.Pi?this.Pi:t;this.Ii=[q(s,z,this.handleBrowserEvent,this),q(s,U,this.handleBrowserEvent,this)],this.Li||(this.Li=this.updateSize.bind(this),window.addEventListener(Y,this.Li,!1))}else this.Xt&&(clearTimeout(this.yi),this.yi=void 0,this.Fi.length=0,this.Xt.dispose(),this.Xt=null),this.bi&&(cancelAnimationFrame(this.bi),this.bi=void 0);this.updateSize()},n.prototype.zi=function(){this.render()},n.prototype.qi=function(){this.render()},n.prototype.Xi=function(){this.Ei&&(J(this.Ei),this.Ei=null),this.Si&&(J(this.Si),this.Si=null);var t=this.getView();t&&(this.Zi(),this.Ei=q(t,v,this.qi,this),this.Si=q(t,k,this.qi,this),t.resolveConstraints(0)),this.render()},n.prototype.Ui=function(){this.Ti&&(this.Ti.forEach(J),this.Ti=null);var t=this.getLayerGroup();t&&(this.Ti=[q(t,v,this.render,this),q(t,k,this.render,this)]),this.render()},n.prototype.isRendered=function(){return!!this.ji},n.prototype.renderSync=function(){this.bi&&cancelAnimationFrame(this.bi),this._i()},n.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}},n.prototype.render=function(){this.Xt&&void 0===this.bi&&(this.bi=requestAnimationFrame(this._i))},n.prototype.removeControl=function(t){return this.getControls().remove(t)},n.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},n.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},n.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},n.prototype.gi=function(t){var n=this,i=this.getSize(),r=this.getView(),s=this.ji,o=null;if(void 0!==i&&De(i)&&r&&r.isDef()){var u=r.getHints(this.ji?this.ji.viewHints:void 0),e=r.getState();if(o={animate:!1,coordinateToPixelTransform:this.mi,declutterTree:null,extent:Xn(e.center,e.resolution,e.rotation,i),index:this.Mi++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.dt,pixelToCoordinateTransform:this.Oi,postRenderFunctions:[],size:i,tileQueue:this.Di,time:t,usedTiles:{},viewState:e,viewHints:u,wantedTiles:{}},e.nextCenter&&e.nextResolution){var h=isNaN(e.nextRotation)?e.rotation:e.nextRotation;o.nextExtent=Xn(e.nextCenter,e.nextResolution,h,i)}}if(this.ji=o,this.Xt.renderFrame(o),o){if(o.animate&&this.render(),Array.prototype.push.apply(this.Fi,o.postRenderFunctions),s)(!this.xi||!Vn(this.xi)&&!Tn(o.extent,this.xi))&&(this.dispatchEvent(new qu(re,this,s)),this.xi=xn(this.xi));this.xi&&!o.viewHints[de]&&!o.viewHints[we]&&!Tn(o.extent,this.xi)&&(this.dispatchEvent(new qu(se,this,o)),yn(o.extent,this.xi))}this.dispatchEvent(new qu(ie,this,o)),this.yi||(this.yi=setTimeout((function(){n.yi=void 0,n.handlePostRender()}),0))},n.prototype.setLayerGroup=function(t){this.set(oe,t)},n.prototype.setSize=function(t){this.set(ue,t)},n.prototype.setTarget=function(t){this.set(ee,t)},n.prototype.setView=function(t){if(!t||t instanceof Fe)this.set(he,t);else{this.set(he,new Fe);var n=this;t.then((function(t){n.setView(new Fe(t))}))}},n.prototype.updateSize=function(){var t=this.getTargetElement(),n=void 0;if(t){var i=getComputedStyle(t),r=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);isNaN(r)||isNaN(s)||!De(n=[r,s])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(n),this.Zi()},n.prototype.Zi=function(){var t=this.getView();if(t){var n=void 0,i=getComputedStyle(this.Ai);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}},n}(nt),We=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Be=function(t){function n(n){var i=t.call(this)||this,r=n.element;return!r||n.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),i.element=r||null,i.Ji=null,i.Bt=null,i.listenerKeys=[],n.render&&(i.render=n.render),n.target&&i.setTarget(n.target),i}return We(n,t),n.prototype.disposeInternal=function(){wo(this.element),t.prototype.disposeInternal.call(this)},n.prototype.getMap=function(){return this.Bt},n.prototype.setMap=function(t){this.Bt&&wo(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)J(this.listenerKeys[n]);(this.listenerKeys.length=0,this.Bt=t,this.Bt)&&((this.Ji?this.Ji:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==j&&this.listenerKeys.push(q(t,ie,this.render,this)),t.render())},n.prototype.render=function(t){},n.prototype.setTarget=function(t){this.Ji="string"==typeof t?document.getElementById(t):t},n}(nt),qe=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ze=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).Vi=document.createElement("ul"),i.Hi=void 0===r.collapsed||r.collapsed,i.$i=i.Hi,i.Ki=void 0!==r.collapsible,i.Qi=void 0===r.collapsible||r.collapsible,i.Qi||(i.Hi=!1);var s=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",u=void 0!==r.expandClassName?r.expandClassName:s+"-expand",e=void 0!==r.collapseLabel?r.collapseLabel:"›",h=void 0!==r.collapseClassName?r.collapseClassName:s+"-collpase";"string"==typeof e?(i.tr=document.createElement("span"),i.tr.textContent=e,i.tr.className=h):i.tr=e;var f=void 0!==r.label?r.label:"i";"string"==typeof f?(i.nr=document.createElement("span"),i.nr.textContent=f,i.nr.className=u):i.nr=f;var a=i.Qi&&!i.Hi?i.tr:i.nr;i.ir=document.createElement("button"),i.ir.setAttribute("type","button"),i.ir.setAttribute("aria-expanded",String(!i.Hi)),i.ir.title=o,i.ir.appendChild(a),i.ir.addEventListener(G,i.rr.bind(i),!1);var c=s+" "+"ol-unselectable "+cu+(i.Hi&&i.Qi?" ol-collapsed":"")+(i.Qi?"":" ol-uncollapsible"),v=i.element;return v.className=c,v.appendChild(i.ir),v.appendChild(i.Vi),i.sr=[],i.Vt=!0,i}return qe(n,t),n.prototype.ur=function(t){for(var n={},i=[],r=!0,s=t.layerStatesArray,o=0,u=s.length;o<u;++o){var e=s[o];if(tu(e,t.viewState)){var h=e.layer.getSource();if(h){var f=h.getAttributions();if(f){var a=f(t);if(a)if(r=r&&!1!==h.getAttributionsCollapsible(),Array.isArray(a))for(var c=0,v=a.length;c<v;++c)a[c]in n||(i.push(a[c]),n[a[c]]=!0);else a in n||(i.push(a),n[a]=!0)}}}}return this.Ki||this.setCollapsible(r),i},n.prototype.er=function(t){if(t){var n=this.ur(t),i=n.length>0;if(this.Vt!=i&&(this.element.style.display=i?"":"none",this.Vt=i),!g(n,this.sr)){po(this.Vi);for(var r=0,s=n.length;r<s;++r){var o=document.createElement("li");o.innerHTML=n[r],this.Vi.appendChild(o)}this.sr=n}}else this.Vt&&(this.element.style.display="none",this.Vt=!1)},n.prototype.rr=function(t){t.preventDefault(),this.hr(),this.$i=this.Hi},n.prototype.hr=function(){this.element.classList.toggle(vu),this.Hi?lo(this.tr,this.nr):lo(this.nr,this.tr),this.Hi=!this.Hi,this.ir.setAttribute("aria-expanded",String(!this.Hi))},n.prototype.getCollapsible=function(){return this.Qi},n.prototype.setCollapsible=function(t){this.Qi!==t&&(this.Qi=t,this.element.classList.toggle("ol-uncollapsible"),this.$i&&this.hr())},n.prototype.setCollapsed=function(t){this.$i=t,this.Qi&&this.Hi!==t&&this.hr()},n.prototype.getCollapsed=function(){return this.Hi},n.prototype.render=function(t){this.er(t.frameState)},n}(Be),Je=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ve=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var s=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"⇧",u=void 0!==r.compassClassName?r.compassClassName:"ol-compass";i.nr=null,"string"==typeof o?(i.nr=document.createElement("span"),i.nr.className=u,i.nr.textContent=o):(i.nr=o,i.nr.classList.add(u));var e=r.tipLabel?r.tipLabel:"Reset rotation",h=document.createElement("button");h.className=s+"-reset",h.setAttribute("type","button"),h.title=e,h.appendChild(i.nr),h.addEventListener(G,i.rr.bind(i),!1);var f=s+" "+"ol-unselectable "+cu,a=i.element;return a.className=f,a.appendChild(h),i.ar=r.resetNorth?r.resetNorth:void 0,i.cr=void 0!==r.duration?r.duration:250,i.vr=void 0===r.autoHide||r.autoHide,i.lr=void 0,i.vr&&i.element.classList.add(eu),i}return Je(n,t),n.prototype.rr=function(t){t.preventDefault(),void 0!==this.ar?this.ar():this.dr()},n.prototype.dr=function(){var t=this.getMap().getView();if(t){var n=t.getRotation();void 0!==n&&(this.cr>0&&n%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.cr,easing:dt}):t.setRotation(0))}},n.prototype.render=function(t){var n=t.frameState;if(n){var i=n.viewState.rotation;if(i!=this.lr){var r="rotate("+i+"rad)";if(this.vr){var s=this.element.classList.contains(eu);s||0!==i?s&&0!==i&&this.element.classList.remove(eu):this.element.classList.add(eu)}this.nr.style.transform=r}this.lr=i}},n}(Be),He=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$e=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),target:r.target})||this;var s=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,u=void 0!==r.zoomInClassName?r.zoomInClassName:s+"-in",e=void 0!==r.zoomOutClassName?r.zoomOutClassName:s+"-out",h=void 0!==r.zoomInLabel?r.zoomInLabel:"+",f=void 0!==r.zoomOutLabel?r.zoomOutLabel:"–",a=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",c=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",v=document.createElement("button");v.className=u,v.setAttribute("type","button"),v.title=a,v.appendChild("string"==typeof h?document.createTextNode(h):h),v.addEventListener(G,i.rr.bind(i,o),!1);var l=document.createElement("button");l.className=e,l.setAttribute("type","button"),l.title=c,l.appendChild("string"==typeof f?document.createTextNode(f):f),l.addEventListener(G,i.rr.bind(i,-o),!1);var d=s+" "+"ol-unselectable "+cu,w=i.element;return w.className=d,w.appendChild(v),w.appendChild(l),i.cr=void 0!==r.duration?r.duration:250,i}return He(n,t),n.prototype.rr=function(t,n){n.preventDefault(),this.wr(t)},n.prototype.wr=function(t){var n=this.getMap().getView();if(n){var i=n.getZoom();if(void 0!==i){var r=n.getConstrainedZoom(i+t);this.cr>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.cr,easing:dt})):n.setZoom(r)}}},n}(Be);function Ke(t){var n=t||{},i=new et;return(void 0===n.zoom||n.zoom)&&i.push(new $e(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&i.push(new Ve(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&i.push(new Ze(n.attributionOptions)),i}var Qe="active",th=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function nh(t,n,i){var r=t.getCenterInternal();if(r){var s=[r[0]+n[0],r[1]+n[1]];t.animateInternal({duration:void 0!==i?i:250,easing:pt,center:t.getConstrainedCenter(s)})}}function ih(t,n,i,r){var s=t.getZoom();if(void 0!==s){var o=t.getConstrainedZoom(s+n),u=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:u,anchor:i,duration:void 0!==r?r:250,easing:dt})}}var rh=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,n&&n.handleEvent&&(i.handleEvent=n.handleEvent),i.Bt=null,i.setActive(!0),i}return th(n,t),n.prototype.getActive=function(){return this.get(Qe)},n.prototype.getMap=function(){return this.Bt},n.prototype.handleEvent=function(t){return!0},n.prototype.setActive=function(t){this.set(Qe,t)},n.prototype.setMap=function(t){this.Bt=t},n}(nt),sh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),oh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.pr=r.delta?r.delta:1,i.cr=void 0!==r.duration?r.duration:250,i}return sh(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==Vu.DBLCLICK){var i=t.originalEvent,r=t.map,s=t.coordinate,o=i.shiftKey?-this.pr:this.pr;ih(r.getView(),o,s,this.cr),i.preventDefault(),n=!0}return!n},n}(rh),uh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function eh(t){for(var n=t.length,i=0,r=0,s=0;s<n;s++)i+=t[s].clientX,r+=t[s].clientY;return[i/n,r/n]}var hh=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,r)||this,r.handleDownEvent&&(i.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(i.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(i.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(i.handleUpEvent=r.handleUpEvent),r.stopDown&&(i.stopDown=r.stopDown),i.handlingDownUpSequence=!1,i.yr={},i.targetPointers=[],i}return uh(n,t),n.prototype.getPointerCount=function(){return this.targetPointers.length},n.prototype.handleDownEvent=function(t){return!1},n.prototype.handleDragEvent=function(t){},n.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.br(t),this.handlingDownUpSequence){if(t.type==Vu.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Vu.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Vu.POINTERDOWN){var r=this.handleDownEvent(t);this.handlingDownUpSequence=r,n=this.stopDown(r)}else t.type==Vu.POINTERMOVE&&this.handleMoveEvent(t);return!n},n.prototype.handleMoveEvent=function(t){},n.prototype.handleUpEvent=function(t){return!1},n.prototype.stopDown=function(t){return t},n.prototype.br=function(t){if(function(t){var n=t.type;return n===Vu.POINTERDOWN||n===Vu.POINTERDRAG||n===Vu.POINTERUP}(t)){var n=t.originalEvent,i=n.pointerId.toString();t.type==Vu.POINTERUP?delete this.yr[i]:(t.type==Vu.POINTERDOWN||i in this.yr)&&(this.yr[i]=n),this.targetPointers=T(this.yr)}},n}(rh);function fh(t){var n=arguments;return function(t){for(var i=!0,r=0,s=n.length;r<s&&(i=i&&n[r](t));++r);return i}}var ah=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},ch=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},vh=function(t){return t.target.getTargetElement().contains(document.activeElement)},lh=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||vh(t)},dh=O,wh=function(t){var n=t.originalEvent;return 0==n.button&&!(Ft&&Dt&&n.ctrlKey)},ph=M,yh=function(t){return t.type==Vu.SINGLECLICK},bh=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},_h=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},gh=function(t){var n=t.originalEvent.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n},mh=function(t){var n=t.originalEvent;return mt(void 0!==n,56),"mouse"==n.pointerType},Oh=function(t){var n=t.originalEvent;return mt(void 0!==n,56),n.isPrimary&&0===n.button},Mh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jh=function(t){function n(n){var i=t.call(this,{stopDown:M})||this,r=n||{};i._r=r.kinetic,i.lastCentroid=null,i.gr,i.mr=!1;var s=r.condition?r.condition:fh(bh,Oh);return i.Mr=r.onFocusOnly?fh(lh,s):s,i.jr=!1,i}return Mh(n,t),n.prototype.handleDragEvent=function(t){this.mr||(this.mr=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=eh(n);if(n.length==this.gr){if(this._r&&this._r.update(i[0],i[1]),this.lastCentroid){var r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=t.map.getView();Vi(r,s.getResolution()),Ji(r,s.getRotation()),s.adjustCenterInternal(r)}}else this._r&&this._r.begin();this.lastCentroid=i,this.gr=n.length,t.originalEvent.preventDefault()},n.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(0===this.targetPointers.length){if(!this.jr&&this._r&&this._r.end()){var r=this._r.getDistance(),s=this._r.getAngle(),o=i.getCenterInternal(),u=n.getPixelFromCoordinateInternal(o),e=n.getCoordinateFromPixelInternal([u[0]-r*Math.cos(s),u[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(e),duration:500,easing:dt})}return this.mr&&(this.mr=!1,i.endInteraction()),!1}return this._r&&this._r.begin(),this.lastCentroid=null,!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.Mr(t)){var n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this._r&&this._r.begin(),this.jr=this.targetPointers.length>1,!0}return!1},n}(hh),xh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Eh=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,{stopDown:M})||this).Mr=r.condition?r.condition:ch,i.Er=void 0,i.cr=void 0!==r.duration?r.duration:250,i}return xh(n,t),n.prototype.handleDragEvent=function(t){if(mh(t)){var n=t.map,i=n.getView();if(i.getConstraints().rotation!==Se){var r=n.getSize(),s=t.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(void 0!==this.Er){var u=o-this.Er;i.adjustRotationInternal(-u)}this.Er=o}}},n.prototype.handleUpEvent=function(t){return!mh(t)||(t.map.getView().endInteraction(this.cr),!1)},n.prototype.handleDownEvent=function(t){return!!mh(t)&&(!(!wh(t)||!this.Mr(t))&&(t.map.getView().beginInteraction(),this.Er=void 0,!0))},n}(hh),Sh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Th=function(t){function n(n){var i=t.call(this)||this;return i.Sr=null,i.Zt=document.createElement("div"),i.Zt.style.position="absolute",i.Zt.style.pointerEvents="auto",i.Zt.className="ol-box "+n,i.Bt=null,i.Tr=null,i.Ar=null,i}return Sh(n,t),n.prototype.disposeInternal=function(){this.setMap(null)},n.prototype.Cr=function(){var t=this.Tr,n=this.Ar,i="px",r=this.Zt.style;r.left=Math.min(t[0],n[0])+i,r.top=Math.min(t[1],n[1])+i,r.width=Math.abs(n[0]-t[0])+i,r.height=Math.abs(n[1]-t[1])+i},n.prototype.setMap=function(t){if(this.Bt){this.Bt.getOverlayContainer().removeChild(this.Zt);var n=this.Zt.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.Bt=t,this.Bt&&this.Bt.getOverlayContainer().appendChild(this.Zt)},n.prototype.setPixels=function(t,n){this.Tr=t,this.Ar=n,this.createOrUpdateGeometry(),this.Cr()},n.prototype.createOrUpdateGeometry=function(){var t=this.Tr,n=this.Ar,i=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.Bt.getCoordinateFromPixelInternal,this.Bt);i[4]=i[0].slice(),this.Sr?this.Sr.setCoordinates([i]):this.Sr=new Is([i])},n.prototype.getGeometry=function(){return this.Sr},n}(l),Ah=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ch="boxstart",Nh="boxdrag",kh="boxend",Ph="boxcancel",Ih=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.coordinate=i,s.mapBrowserEvent=r,s}return Ah(n,t),n}(c),Gh=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.Nr=new Th(r.className||"ol-dragbox"),i.kr=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(i.onBoxEnd=r.onBoxEnd),i.Tr=null,i.Mr=r.condition?r.condition:wh,i.Pr=r.boxEndCondition?r.boxEndCondition:i.defaultBoxEndCondition,i}return Ah(n,t),n.prototype.defaultBoxEndCondition=function(t,n,i){var r=i[0]-n[0],s=i[1]-n[1];return r*r+s*s>=this.kr},n.prototype.getGeometry=function(){return this.Nr.getGeometry()},n.prototype.handleDragEvent=function(t){this.Nr.setPixels(this.Tr,t.pixel),this.dispatchEvent(new Ih(Nh,t.coordinate,t))},n.prototype.handleUpEvent=function(t){this.Nr.setMap(null);var n=this.Pr(t,this.Tr,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new Ih(n?kh:Ph,t.coordinate,t)),!1},n.prototype.handleDownEvent=function(t){return!!this.Mr(t)&&(this.Tr=t.pixel,this.Nr.setMap(t.map),this.Nr.setPixels(this.Tr,this.Tr),this.dispatchEvent(new Ih(Ch,t.coordinate,t)),!0)},n.prototype.onBoxEnd=function(t){},n}(hh),Rh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Lh=function(t){function n(n){var i=this,r=n||{},s=r.condition?r.condition:_h;return(i=t.call(this,{condition:s,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).cr=void 0!==r.duration?r.duration:200,i.Ir=void 0!==r.out&&r.out,i}return Rh(n,t),n.prototype.onBoxEnd=function(t){var n=this.getMap().getView(),i=this.getGeometry();if(this.Ir){var r=n.rotatedExtentForGeometry(i),s=n.getResolutionForExtentInternal(r),o=n.getResolution()/s;(i=i.clone()).scale(o*o)}n.fitInternal(i,{duration:this.cr,easing:dt})},n}(Gh),Fh=37,Dh=38,zh=39,Uh=40,Xh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Gr=function(t){return bh(t)&&gh(t)},i.Mr=void 0!==r.condition?r.condition:i.Gr,i.cr=void 0!==r.duration?r.duration:100,i.Rr=void 0!==r.pixelDelta?r.pixelDelta:128,i}return Xh(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==z){var i=t.originalEvent,r=i.keyCode;if(this.Mr(t)&&(r==Uh||r==Fh||r==zh||r==Dh)){var s=t.map.getView(),o=s.getResolution()*this.Rr,u=0,e=0;r==Uh?e=-o:r==Fh?u=-o:r==zh?u=o:e=o;var h=[u,e];Ji(h,s.getRotation()),nh(s,h,this.cr),i.preventDefault(),n=!0}}return!n},n}(rh),Wh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Mr=r.condition?r.condition:gh,i.pr=r.delta?r.delta:1,i.cr=void 0!==r.duration?r.duration:100,i}return Wh(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==z||t.type==U){var i=t.originalEvent,r=i.charCode;if(this.Mr(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var s=t.map,o=r=="+".charCodeAt(0)?this.pr:-this.pr;ih(s.getView(),o,void 0,this.cr),i.preventDefault(),n=!0}}return!n},n}(rh),qh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Zh="trackpad",Jh="wheel",Vh=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,r)||this).Lr=0,i.Fr=0,i.K=void 0!==r.maxDelta?r.maxDelta:1,i.cr=void 0!==r.duration?r.duration:250,i.Dr=void 0!==r.timeout?r.timeout:80,i.zr=void 0===r.useAnchor||r.useAnchor,i.Ur=void 0!==r.constrainResolution&&r.constrainResolution;var s=r.condition?r.condition:dh;return i.Mr=r.onFocusOnly?fh(lh,s):s,i.Xr=null,i.Yr=void 0,i.Wr,i.Br=void 0,i.qr=400,i.Zr,i.Jr=300,i}return qh(n,t),n.prototype.Vr=function(){this.Zr=void 0,this.getMap().getView().endInteraction(void 0,this.Fr?this.Fr>0?1:-1:0,this.Xr)},n.prototype.handleEvent=function(t){if(!this.Mr(t))return!0;if(t.type!==B)return!0;var n,i=t.map,r=t.originalEvent;if(r.preventDefault(),this.zr&&(this.Xr=t.coordinate),t.type==B&&(n=r.deltaY,Rt&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=zt),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.Fr=n;var s=Date.now();void 0===this.Yr&&(this.Yr=s),(!this.Br||s-this.Yr>this.qr)&&(this.Br=Math.abs(n)<4?Zh:Jh);var o=i.getView();if(this.Br===Zh&&!o.getConstrainResolution()&&!this.Ur)return this.Zr?clearTimeout(this.Zr):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.Zr=setTimeout(this.Vr.bind(this),this.Dr),o.adjustZoom(-n/this.Jr,this.Xr),this.Yr=s,!1;this.Lr+=n;var u=Math.max(this.Dr-(s-this.Yr),0);return clearTimeout(this.Wr),this.Wr=setTimeout(this.Hr.bind(this,i),u),!1},n.prototype.Hr=function(t){var n=t.getView();n.getAnimating()&&n.cancelAnimations();var i=-ii(this.Lr,-this.K*this.Jr,this.K*this.Jr)/this.Jr;(n.getConstrainResolution()||this.Ur)&&(i=i?i>0?1:-1:0),ih(n,i,this.Xr,this.cr),this.Br=void 0,this.Lr=0,this.Xr=null,this.Yr=void 0,this.Wr=void 0},n.prototype.setMouseAnchor=function(t){this.zr=t,t||(this.Xr=null)},n}(rh),Hh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$h=function(t){function n(n){var i=this,r=n||{},s=r;return s.stopDown||(s.stopDown=M),(i=t.call(this,s)||this).$r=null,i.Er=void 0,i.Kr=!1,i.Qr=0,i.ts=void 0!==r.threshold?r.threshold:.3,i.cr=void 0!==r.duration?r.duration:250,i}return Hh(n,t),n.prototype.handleDragEvent=function(t){var n=0,i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.Er){var o=s-this.Er;this.Qr+=o,!this.Kr&&Math.abs(this.Qr)>this.ts&&(this.Kr=!0),n=o}this.Er=s;var u=t.map,e=u.getView();if(e.getConstraints().rotation!==Se){var h=u.getViewport().getBoundingClientRect(),f=eh(this.targetPointers);f[0]-=h.left,f[1]-=h.top,this.$r=u.getCoordinateFromPixelInternal(f),this.Kr&&(u.render(),e.adjustRotationInternal(n,this.$r))}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.cr),!1)},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.$r=null,this.Er=void 0,this.Kr=!1,this.Qr=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(hh),Kh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qh=function(t){function n(n){var i=this,r=n||{},s=r;return s.stopDown||(s.stopDown=M),(i=t.call(this,s)||this).$r=null,i.cr=void 0!==r.duration?r.duration:400,i.ns=void 0,i.rs=1,i}return Kh(n,t),n.prototype.handleDragEvent=function(t){var n=1,i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,u=Math.sqrt(s*s+o*o);void 0!==this.ns&&(n=this.ns/u),this.ns=u;var e=t.map,h=e.getView();1!=n&&(this.rs=n);var f=e.getViewport().getBoundingClientRect(),a=eh(this.targetPointers);a[0]-=f.left,a[1]-=f.top,this.$r=e.getCoordinateFromPixelInternal(a),e.render(),h.adjustResolutionInternal(n,this.$r)},n.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map.getView(),i=this.rs>1?1:-1;return n.endInteraction(this.cr,i),!1}return!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.$r=null,this.ns=void 0,this.rs=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(hh);function tf(t){var n=t||{},i=new et,r=new go(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&i.push(new Eh),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&i.push(new oh({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&i.push(new jh({onFocusOnly:n.onFocusOnly,kinetic:r})),(void 0===n.pinchRotate||n.pinchRotate)&&i.push(new $h),(void 0===n.pinchZoom||n.pinchZoom)&&i.push(new Qh({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(i.push(new Yh),i.push(new Bh({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&i.push(new Vh({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&i.push(new Lh({duration:n.zoomDuration})),i}var nf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rf=function(t){function n(n){return(n=E({},n)).controls||(n.controls=Ke()),n.interactions||(n.interactions=tf({onFocusOnly:!0})),t.call(this,n)||this}return nf(n,t),n.prototype.createRenderer=function(){return new Uu(this)},n}(Ye),sf="bottom-left",of="bottom-center",uf="bottom-right",ef="center-left",hf="center-center",ff="center-right",af="top-left",cf="top-center",vf="top-right";function lf(t){return(lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var df=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wf="element",pf="map",yf="offset",bf="position",_f="positioning",gf=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un,i.options=n,i.id=n.id,i.insertFirst=void 0===n.insertFirst||n.insertFirst,i.stopEvent=void 0===n.stopEvent||n.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==n.className?n.className:"ol-overlay-container ol-selectable",i.element.style.position="absolute",i.element.style.pointerEvents="auto";var r=n.autoPan;return r&&"object"!==lf(r)&&(r={animation:n.autoPanAnimation,margin:n.autoPanMargin}),i.autoPan=r||!1,i.rendered={et:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(wf,i.handleElementChanged),i.addChangeListener(pf,i.handleMapChanged),i.addChangeListener(yf,i.handleOffsetChanged),i.addChangeListener(bf,i.handlePositionChanged),i.addChangeListener(_f,i.handlePositioningChanged),void 0!==n.element&&i.setElement(n.element),i.setOffset(void 0!==n.offset?n.offset:[0,0]),i.setPositioning(void 0!==n.positioning?n.positioning:af),void 0!==n.position&&i.setPosition(n.position),i}return df(n,t),n.prototype.getElement=function(){return this.get(wf)},n.prototype.getId=function(){return this.id},n.prototype.getMap=function(){return this.get(pf)},n.prototype.getOffset=function(){return this.get(yf)},n.prototype.getPosition=function(){return this.get(bf)},n.prototype.getPositioning=function(){return this.get(_f)},n.prototype.handleElementChanged=function(){po(this.element);var t=this.getElement();t&&this.element.appendChild(t)},n.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(wo(this.element),J(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=q(t,ie,this.render,this),this.updatePixelPosition();var n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}},n.prototype.render=function(){this.updatePixelPosition()},n.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},n.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},n.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},n.prototype.setElement=function(t){this.set(wf,t)},n.prototype.setMap=function(t){this.set(pf,t)},n.prototype.setOffset=function(t){this.set(yf,t)},n.prototype.setPosition=function(t){this.set(bf,t)},n.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},n.prototype.panIntoView=function(t){var n=this.getMap();if(n&&n.getTargetElement()&&this.get(bf)){var i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),s=this.getRect(r,[co(r),vo(r)]),o=t||{},u=void 0===o.margin?20:o.margin;if(!gn(i,s)){var e=s[0]-i[0],h=i[2]-s[2],f=s[1]-i[1],a=i[3]-s[3],c=[0,0];if(e<0?c[0]=e-u:h<0&&(c[0]=Math.abs(h)+u),f<0?c[1]=f-u:a<0&&(c[1]=Math.abs(a)+u),0!==c[0]||0!==c[1]){var v=n.getView().getCenterInternal(),l=n.getPixelFromCoordinateInternal(v);if(!l)return;var d=[l[0]+c[0],l[1]+c[1]],w=o.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(d),duration:w.duration,easing:w.easing})}}}},n.prototype.getRect=function(t,n){var i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+n[0],s+n[1]]},n.prototype.setPositioning=function(t){this.set(_f,t)},n.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},n.prototype.updatePixelPosition=function(){var t=this.getMap(),n=this.getPosition();if(t&&t.isRendered()&&n){var i=t.getPixelFromCoordinate(n),r=t.getSize();this.updateRenderedPosition(i,r)}else this.setVisible(!1)},n.prototype.updateRenderedPosition=function(t,n){var i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+r[0])+"px",u=Math.round(t[1]+r[1])+"px",e="0%",h="0%";s==uf||s==ff||s==vf?e="-100%":s!=of&&s!=hf&&s!=cf||(e="-50%"),s==sf||s==of||s==uf?h="-100%":s!=ef&&s!=hf&&s!=ff||(h="-50%");var f="translate("+e+", "+h+") translate("+o+", "+u+")";this.rendered.et!=f&&(this.rendered.et=f,i.transform=f,i.msTransform=f)},n.prototype.getOptions=function(){return this.options},n}(nt),mf=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.ss=0,this.os={},this.us=null,this.es=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.ss=0,this.os={},this.us=null,this.es=null},t.prototype.containsKey=function(t){return this.os.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var n=this.us;n;)t(n.hs,n.fs,this),n=n.newer},t.prototype.get=function(t,n){var i=this.os[t];return mt(void 0!==i,15),i===this.es||(i===this.us?(this.us=this.us.newer,this.us.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.es,this.es.newer=i,this.es=i),i.hs},t.prototype.remove=function(t){var n=this.os[t];return mt(void 0!==n,15),n===this.es?(this.es=n.older,this.es&&(this.es.newer=null)):n===this.us?(this.us=n.newer,this.us&&(this.us.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.os[t],--this.ss,n.hs},t.prototype.getCount=function(){return this.ss},t.prototype.getKeys=function(){var t,n=new Array(this.ss),i=0;for(t=this.es;t;t=t.older)n[i++]=t.fs;return n},t.prototype.getValues=function(){var t,n=new Array(this.ss),i=0;for(t=this.es;t;t=t.older)n[i++]=t.hs;return n},t.prototype.peekLast=function(){return this.us.hs},t.prototype.peekLastKey=function(){return this.us.fs},t.prototype.peekFirstKey=function(){return this.es.fs},t.prototype.pop=function(){var t=this.us;return delete this.os[t.fs],t.newer&&(t.newer.older=null),this.us=t.newer,this.us||(this.es=null),--this.ss,t.hs},t.prototype.replace=function(t,n){this.get(t),this.os[t].hs=n},t.prototype.set=function(t,n){mt(!(t in this.os),16);var i={fs:t,newer:null,older:this.es,hs:n};this.es?this.es.newer=i:this.us=i,this.es=i,this.os[t]=i,++this.ss},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function Of(t,n,i,r){return void 0!==r?(r[0]=t,r[1]=n,r[2]=i,r):[t,n,i]}function Mf(t,n,i){return t+"/"+n+"/"+i}function jf(t){return Mf(t[0],t[1],t[2])}function xf(t){return t.split("/").map(Number)}function Ef(t){return(t[1]<<t[0])+t[2]}function Sf(t,n){var i=t[0],r=t[1],s=t[2];if(n.getMinZoom()>i||i>n.getMaxZoom())return!1;var o=n.getFullTileRange(i);return!o||o.containsXY(r,s)}var Tf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Af=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Tf(n,t),n.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},n.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=xf(this.peekFirstKey())[0];this.forEach(function(n){n.tileCoord[0]!==t&&(this.remove(jf(n.tileCoord)),n.release())}.bind(this))}},n}(mf),Cf=function(){function t(t,n,i,r){this.minX=t,this.maxX=n,this.minY=i,this.maxY=r}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function Nf(t,n,i,r,s){return void 0!==s?(s.minX=t,s.maxX=n,s.minY=i,s.maxY=r,s):new Cf(t,n,i,r)}var kf=Cf,Pf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),If=[],Gf=function(t){function n(n,i,r,s){var o=t.call(this,n,i,{transition:0})||this;return o.cs={},o.executorGroups={},o.declutterExecutorGroups={},o.loadingSourceTiles=0,o.hitDetectionImageData={},o.vs={},o.sourceTiles=[],o.errorTileKeys={},o.wantedResolution,o.getSourceTiles=s.bind(void 0,o),o.wrappedTileCoord=r,o}return Pf(n,t),n.prototype.getContext=function(t){var n=o(t);return n in this.cs||(this.cs[n]=ao(1,1,If)),this.cs[n]},n.prototype.hasContext=function(t){return o(t)in this.cs},n.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},n.prototype.getReplayState=function(t){var n=o(t);return n in this.vs||(this.vs[n]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.vs[n]},n.prototype.load=function(){this.getSourceTiles()},n.prototype.release=function(){for(var n in this.cs)If.push(this.cs[n].canvas),delete this.cs[n];t.prototype.release.call(this)},n}(bt);function Rf(t){return Array.isArray(t)?To(t):t}var Lf="arraybuffer",Ff="json",Df="text",zf="xml",Uf=!1;function Xf(t,n,i,r,s,o,u){var e=new XMLHttpRequest;e.open("GET","function"==typeof t?t(i,r,s):t,!0),n.getType()==Lf&&(e.responseType="arraybuffer"),e.withCredentials=Uf,e.onload=function(t){if(!e.status||e.status>=200&&e.status<300){var r=n.getType(),h=void 0;r==Ff||r==Df?h=e.responseText:r==zf?(h=e.responseXML)||(h=(new DOMParser).parseFromString(e.responseText,"application/xml")):r==Lf&&(h=e.response),h?o(n.readFeatures(h,{extent:i,featureProjection:s}),n.readProjection(h)):u()}else u()},e.onerror=u,e.send()}function Yf(t,n){return function(i,r,s,o,u){var e=this;Xf(t,n,i,r,s,(function(t,n){e.addFeatures(t),void 0!==o&&o(t)}),u||j)}}function Wf(t,n){return[[-1/0,-1/0,1/0,1/0]]}var Bf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var qf,Zf=function(t){function n(n){var i=this,r="Unexpected response status: "+n.status;return(i=t.call(this,r)||this).name="ResponseError",i.response=n,i}return Bf(n,t),n}(Error),Jf=function(t){function n(n){var i=t.call(this,"Failed to issue request")||this;return i.name="ClientError",i.client=n,i}return Bf(n,t),n}(Error);var Vf=function(){function t(){}return t.prototype.drawCustom=function(t,n,i,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,n){},t.prototype.drawFeature=function(t,n){},t.prototype.drawGeometryCollection=function(t,n){},t.prototype.drawLineString=function(t,n){},t.prototype.drawMultiLineString=function(t,n){},t.prototype.drawMultiPoint=function(t,n){},t.prototype.drawMultiPolygon=function(t,n){},t.prototype.drawPoint=function(t,n){},t.prototype.drawPolygon=function(t,n){},t.prototype.drawText=function(t,n){},t.prototype.setFillStrokeStyle=function(t,n){},t.prototype.setImageStyle=function(t,n){},t.prototype.setTextStyle=function(t,n){},t}(),Hf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$f=function(t){function n(n,i,r,s,o,u,e){var h=t.call(this)||this;return h.cs=n,h.dt=i,h.D=r,h.et=s,h.ls=o,h.ds=u,h.ws=e,h.ps=null,h.ys=null,h.bs=null,h._s=null,h.gs=null,h.yt=null,h.Os=0,h.Ms=0,h.js=0,h.xs=0,h.Es=0,h.Ss=0,h.Ts=!1,h.As=0,h.Cs=[0,0],h.Ns=0,h.ks="",h.Ps=0,h.Is=0,h.Gs=!1,h.Rs=0,h.Ls=[0,0],h.Fs=null,h.Ds=null,h.zs=null,h.Us=[],h.Xs=[1,0,0,1,0,0],h}return Hf(n,t),n.prototype.Ys=function(t,n,i,r){if(this.yt){var s=Ar(t,n,i,r,this.et,this.Us),o=this.cs,u=this.Xs,e=o.globalAlpha;1!=this.xs&&(o.globalAlpha=e*this.xs);var h=this.As;this.Ts&&(h+=this.ls);for(var f=0,a=s.length;f<a;f+=2){var c=s[f]-this.Os,v=s[f+1]-this.Ms;if(0!==h||1!=this.Cs[0]||1!=this.Cs[1]){var l=c+this.Os,d=v+this.Ms;tn(u,l,d,1,1,h,-l,-d),o.setTransform.apply(o,u),o.translate(l,d),o.scale(this.Cs[0],this.Cs[1]),o.drawImage(this.yt,this.Es,this.Ss,this.Ns,this.js,-this.Os,-this.Ms,this.Ns,this.js),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.yt,this.Es,this.Ss,this.Ns,this.js,c,v,this.Ns,this.js)}1!=this.xs&&(o.globalAlpha=e)}},n.prototype.Ws=function(t,n,i,r){if(this.zs&&""!==this.ks){this.Fs&&this.Bs(this.Fs),this.Ds&&this.qs(this.Ds),this.Zs(this.zs);var s=Ar(t,n,i,r,this.et,this.Us),o=this.cs,u=this.Rs;for(this.Gs&&(u+=this.ls);n<i;n+=r){var e=s[n]+this.Ps,h=s[n+1]+this.Is;if(0!==u||1!=this.Ls[0]||1!=this.Ls[1]){var f=tn(this.Xs,e,h,1,1,u,-e,-h);o.setTransform.apply(o,f),o.translate(e,h),o.scale(this.Ls[0],this.Ls[1]),this.Ds&&o.strokeText(this.ks,0,0),this.Fs&&o.fillText(this.ks,0,0),o.setTransform(1,0,0,1,0,0)}else this.Ds&&o.strokeText(this.ks,e,h),this.Fs&&o.fillText(this.ks,e,h)}}},n.prototype.Js=function(t,n,i,r,s){var o=this.cs,u=Ar(t,n,i,r,this.et,this.Us);o.moveTo(u[0],u[1]);var e=u.length;s&&(e-=2);for(var h=2;h<e;h+=2)o.lineTo(u[h],u[h+1]);return s&&o.closePath(),i},n.prototype.Vs=function(t,n,i,r){for(var s=0,o=i.length;s<o;++s)n=this.Js(t,n,i[s],r,!0);return n},n.prototype.drawCircle=function(t){if(Jn(this.D,t.getExtent())){if(this._s||this.gs){this._s&&this.Bs(this._s),this.gs&&this.qs(this.gs);var n=Fr(t,this.et,this.Us),i=n[2]-n[0],r=n[3]-n[1],s=Math.sqrt(i*i+r*r),o=this.cs;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this._s&&o.fill(),this.gs&&o.stroke()}""!==this.ks&&this.Ws(t.getCenter(),0,2,2)}},n.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},n.prototype.setTransform=function(t){this.et=t},n.prototype.drawGeometry=function(t){switch(t.getType()){case At.POINT:this.drawPoint(t);break;case At.LINE_STRING:this.drawLineString(t);break;case At.POLYGON:this.drawPolygon(t);break;case At.MULTI_POINT:this.drawMultiPoint(t);break;case At.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case At.MULTI_POLYGON:this.drawMultiPolygon(t);break;case At.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case At.CIRCLE:this.drawCircle(t)}},n.prototype.drawFeature=function(t,n){var i=n.getGeometryFunction()(t);i&&Jn(this.D,i.getExtent())&&(this.setStyle(n),this.drawGeometry(i))},n.prototype.drawGeometryCollection=function(t){for(var n=t.getGeometriesArray(),i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])},n.prototype.drawPoint=function(t){this.ds&&(t=t.simplifyTransformed(this.ds,this.ws));var n=t.getFlatCoordinates(),i=t.getStride();this.yt&&this.Ys(n,0,n.length,i),""!==this.ks&&this.Ws(n,0,n.length,i)},n.prototype.drawMultiPoint=function(t){this.ds&&(t=t.simplifyTransformed(this.ds,this.ws));var n=t.getFlatCoordinates(),i=t.getStride();this.yt&&this.Ys(n,0,n.length,i),""!==this.ks&&this.Ws(n,0,n.length,i)},n.prototype.drawLineString=function(t){if(this.ds&&(t=t.simplifyTransformed(this.ds,this.ws)),Jn(this.D,t.getExtent())){if(this.gs){this.qs(this.gs);var n=this.cs,i=t.getFlatCoordinates();n.beginPath(),this.Js(i,0,i.length,t.getStride(),!1),n.stroke()}if(""!==this.ks){var r=t.getFlatMidpoint();this.Ws(r,0,2,2)}}},n.prototype.drawMultiLineString=function(t){this.ds&&(t=t.simplifyTransformed(this.ds,this.ws));var n=t.getExtent();if(Jn(this.D,n)){if(this.gs){this.qs(this.gs);var i=this.cs,r=t.getFlatCoordinates(),s=0,o=t.getEnds(),u=t.getStride();i.beginPath();for(var e=0,h=o.length;e<h;++e)s=this.Js(r,s,o[e],u,!1);i.stroke()}if(""!==this.ks){var f=t.getFlatMidpoints();this.Ws(f,0,f.length,2)}}},n.prototype.drawPolygon=function(t){if(this.ds&&(t=t.simplifyTransformed(this.ds,this.ws)),Jn(this.D,t.getExtent())){if(this.gs||this._s){this._s&&this.Bs(this._s),this.gs&&this.qs(this.gs);var n=this.cs;n.beginPath(),this.Vs(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this._s&&n.fill(),this.gs&&n.stroke()}if(""!==this.ks){var i=t.getFlatInteriorPoint();this.Ws(i,0,2,2)}}},n.prototype.drawMultiPolygon=function(t){if(this.ds&&(t=t.simplifyTransformed(this.ds,this.ws)),Jn(this.D,t.getExtent())){if(this.gs||this._s){this._s&&this.Bs(this._s),this.gs&&this.qs(this.gs);var n=this.cs,i=t.getOrientedFlatCoordinates(),r=0,s=t.getEndss(),o=t.getStride();n.beginPath();for(var u=0,e=s.length;u<e;++u){var h=s[u];r=this.Vs(i,r,h,o)}this._s&&n.fill(),this.gs&&n.stroke()}if(""!==this.ks){var f=t.getFlatInteriorPoints();this.Ws(f,0,f.length,2)}}},n.prototype.Bs=function(t){var n=this.cs,i=this.ps;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.ps={fillStyle:t.fillStyle})},n.prototype.qs=function(t){var n=this.cs,i=this.ys;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),n.setLineDash&&(g(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.ys={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},n.prototype.Zs=function(t){var n=this.cs,i=this.bs,r=t.textAlign?t.textAlign:ju;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=r,n.textBaseline=t.textBaseline,this.bs={font:t.font,textAlign:r,textBaseline:t.textBaseline})},n.prototype.setFillStrokeStyle=function(t,n){var i=this;if(t){var r=t.getColor();this._s={fillStyle:Rf(r||bu)}}else this._s=null;if(n){var s=n.getColor(),o=n.getLineCap(),u=n.getLineDash(),e=n.getLineDashOffset(),h=n.getLineJoin(),f=n.getWidth(),a=n.getMiterLimit(),c=u||gu;this.gs={lineCap:void 0!==o?o:_u,lineDash:1===this.dt?c:c.map((function(t){return t*i.dt})),lineDashOffset:(e||0)*this.dt,lineJoin:void 0!==h?h:mu,lineWidth:(void 0!==f?f:1)*this.dt,miterLimit:void 0!==a?a:Ou,strokeStyle:Rf(s||Mu)}}else this.gs=null},n.prototype.setImageStyle=function(t){var n;if(t&&(n=t.getSize())){var i=t.getAnchor(),r=t.getOrigin();this.yt=t.getImage(this.dt),this.Os=i[0]*this.dt,this.Ms=i[1]*this.dt,this.js=n[1]*this.dt,this.xs=t.getOpacity(),this.Es=r[0],this.Ss=r[1],this.Ts=t.getRotateWithView(),this.As=t.getRotation(),this.Cs=t.getScaleArray(),this.Ns=n[0]*this.dt}else this.yt=null},n.prototype.setTextStyle=function(t){if(t){var n=t.getFill();if(n){var i=n.getColor();this.Fs={fillStyle:Rf(i||bu)}}else this.Fs=null;var r=t.getStroke();if(r){var s=r.getColor(),o=r.getLineCap(),u=r.getLineDash(),e=r.getLineDashOffset(),h=r.getLineJoin(),f=r.getWidth(),a=r.getMiterLimit();this.Ds={lineCap:void 0!==o?o:_u,lineDash:u||gu,lineDashOffset:e||0,lineJoin:void 0!==h?h:mu,lineWidth:void 0!==f?f:1,miterLimit:void 0!==a?a:Ou,strokeStyle:Rf(s||Mu)}}else this.Ds=null;var c=t.getFont(),v=t.getOffsetX(),l=t.getOffsetY(),d=t.getRotateWithView(),w=t.getRotation(),p=t.getScaleArray(),y=t.getText(),b=t.getTextAlign(),_=t.getTextBaseline();this.zs={font:void 0!==c?c:yu,textAlign:void 0!==b?b:ju,textBaseline:void 0!==_?_:xu},this.ks=void 0!==y?y:"",this.Ps=void 0!==v?this.dt*v:0,this.Is=void 0!==l?this.dt*l:0,this.Gs=void 0!==d&&d,this.Rs=void 0!==w?w:0,this.Ls=[this.dt*p[0],this.dt*p[1]]}else this.ks=""},n}(Vf),Kf="Circle",Qf="Default",ta="Image",na="LineString",ia="Polygon",ra="Text",sa={Point:function(t,n,i,r,s){var o,u=i.getImage(),e=i.getText();s&&(t=s,o=u&&e&&e.getText()?{}:void 0);if(u){if(u.getImageState()!=io)return;var h=t.getBuilder(i.getZIndex(),ta);h.setImageStyle(u,o),h.drawPoint(n,r)}if(e&&e.getText()){var f=t.getBuilder(i.getZIndex(),ra);f.setTextStyle(e,o),f.drawText(n,r)}},LineString:function(t,n,i,r,s){var o=i.getStroke();if(o){var u=t.getBuilder(i.getZIndex(),na);u.setFillStrokeStyle(null,o),u.drawLineString(n,r)}var e=i.getText();if(e&&e.getText()){var h=(s||t).getBuilder(i.getZIndex(),ra);h.setTextStyle(e),h.drawText(n,r)}},Polygon:function(t,n,i,r,s){var o=i.getFill(),u=i.getStroke();if(o||u){var e=t.getBuilder(i.getZIndex(),ia);e.setFillStrokeStyle(o,u),e.drawPolygon(n,r)}var h=i.getText();if(h&&h.getText()){var f=(s||t).getBuilder(i.getZIndex(),ra);f.setTextStyle(h),f.drawText(n,r)}},MultiPoint:function(t,n,i,r,s){var o,u=i.getImage(),e=i.getText();s&&(t=s,o=u&&e&&e.getText()?{}:void 0);if(u){if(u.getImageState()!=io)return;var h=t.getBuilder(i.getZIndex(),ta);h.setImageStyle(u,o),h.drawMultiPoint(n,r)}if(e&&e.getText()){var f=(s||t).getBuilder(i.getZIndex(),ra);f.setTextStyle(e,o),f.drawText(n,r)}},MultiLineString:function(t,n,i,r,s){var o=i.getStroke();if(o){var u=t.getBuilder(i.getZIndex(),na);u.setFillStrokeStyle(null,o),u.drawMultiLineString(n,r)}var e=i.getText();if(e&&e.getText()){var h=(s||t).getBuilder(i.getZIndex(),ra);h.setTextStyle(e),h.drawText(n,r)}},MultiPolygon:function(t,n,i,r,s){var o=i.getFill(),u=i.getStroke();if(u||o){var e=t.getBuilder(i.getZIndex(),ia);e.setFillStrokeStyle(o,u),e.drawMultiPolygon(n,r)}var h=i.getText();if(h&&h.getText()){var f=(s||t).getBuilder(i.getZIndex(),ra);f.setTextStyle(h),f.drawText(n,r)}},GeometryCollection:function(t,n,i,r,s){var o,u,e=n.getGeometriesArray();for(o=0,u=e.length;o<u;++o){(0,sa[e[o].getType()])(t,e[o],i,r,s)}},Circle:function(t,n,i,r,s){var o=i.getFill(),u=i.getStroke();if(o||u){var e=t.getBuilder(i.getZIndex(),Kf);e.setFillStrokeStyle(o,u),e.drawCircle(n,r)}var h=i.getText();if(h&&h.getText()){var f=(s||t).getBuilder(i.getZIndex(),ra);f.setTextStyle(h),f.drawText(n,r)}}};function oa(t,n){return parseInt(o(t),10)-parseInt(o(n),10)}function ua(t,n){var i=ea(t,n);return i*i}function ea(t,n){return.5*t/n}function ha(t,n,i,r,s,o,u){var e=!1,h=i.getImage();if(h){var f=h.getImageState();f==io||f==ro?h.unlistenImageChange(s):(f==to&&h.load(),f=h.getImageState(),h.listenImageChange(s),e=!0)}return function(t,n,i,r,s,o){var u=i.getGeometryFunction()(n);if(!u)return;var e=u.simplifyTransformed(r,s);if(i.getRenderer())fa(t,e,i,n);else{(0,sa[e.getType()])(t,e,i,n,o)}}(t,n,i,r,o,u),e}function fa(t,n,i,r){if(n.getType()!=At.GEOMETRY_COLLECTION)t.getBuilder(i.getZIndex(),Qf).drawCustom(n,r,i.getRenderer(),i.getHitDetectionRenderer());else for(var s=n.getGeometries(),o=0,u=s.length;o<u;++o)fa(t,s[o],i,r)}function aa(t){var n,i=t.inversePixelTransform[0],r=t.frameState,s=Zt(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),o=ua(r.viewState.resolution,i),u=gr();return u&&(n=dr(u,r.viewState.projection)),new $f(t.context,i,r.extent,s,r.viewState.rotation,o,n)}var ca,va={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};function la(t,n,i,r,s){t.beginPath(),t.moveTo(0,0),t.lineTo(n,i),t.lineTo(r,s),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(n,r)+1,Math.max(i,s)),t.restore()}function da(t,n){return Math.abs(t[4*n]-210)>2||Math.abs(t[4*n+3]-191.25)>2}function wa(t,n,i,r){var s=pr(i,n,t),o=er(n,r,i),u=n.getMetersPerUnit();void 0!==u&&(o*=u);var e=t.getMetersPerUnit();void 0!==e&&(o/=e);var h=t.getExtent();if(!h||_n(h,s)){var f=er(t,o,s)/o;isFinite(f)&&f>0&&(o/=f)}return o}function pa(t,n,i,r){var s=zn(i),o=wa(t,n,s,r);return(!isFinite(o)||o<=0)&&Rn(i,(function(i){return o=wa(t,n,i,r),isFinite(o)&&o>0})),o}function ya(t,n,i,r,s,o,u,e,h,f,a,c){var v=ao(Math.round(i*t),Math.round(i*n));if(E(v,c),0===h.length)return v.canvas;function l(t){return Math.round(t*i)/i}v.scale(i,i),v.globalCompositeOperation="lighter";var d=[1/0,1/0,-1/0,-1/0];h.forEach((function(t,n,i){Cn(d,t.extent)}));var w=Zn(d),p=Yn(d),y=ao(Math.round(i*w/r),Math.round(i*p/r));E(y,c);var b=i/r;h.forEach((function(t,n,i){var r=t.extent[0]-d[0],s=-(t.extent[3]-d[3]),o=Zn(t.extent),u=Yn(t.extent);t.image.width>0&&t.image.height>0&&y.drawImage(t.image,f,f,t.image.width-2*f,t.image.height-2*f,r*b,s*b,o*b,u*b)}));var _=Bn(u);return e.getTriangles().forEach((function(t,n,s){var u=t.source,e=t.target,h=u[0][0],f=u[0][1],a=u[1][0],w=u[1][1],p=u[2][0],b=u[2][1],g=l((e[0][0]-_[0])/o),m=l(-(e[0][1]-_[1])/o),O=l((e[1][0]-_[0])/o),M=l(-(e[1][1]-_[1])/o),j=l((e[2][0]-_[0])/o),x=l(-(e[2][1]-_[1])/o),E=h,S=f;h=0,f=0;var T=ei([[a-=E,w-=S,0,0,O-g],[p-=E,b-=S,0,0,j-g],[0,0,a,w,M-m],[0,0,p,b,x-m]]);if(T){if(v.save(),v.beginPath(),function(){if(void 0===ca){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",la(t,4,5,4,0),la(t,4,5,0,5);var n=t.getImageData(0,0,3,3).data;ca=da(n,0)||da(n,4)||da(n,8)}return ca}()||c===va){v.moveTo(O,M);for(var A=g-O,C=m-M,N=0;N<4;N++)v.lineTo(O+l((N+1)*A/4),M+l(N*C/3)),3!=N&&v.lineTo(O+l((N+1)*A/4),M+l((N+1)*C/3));v.lineTo(j,x)}else v.moveTo(O,M),v.lineTo(g,m),v.lineTo(j,x);v.clip(),v.transform(T[0],T[2],T[1],T[3],g,m),v.translate(d[0]-E,d[3]-S),v.scale(r/i,-r/i),v.drawImage(y.canvas,0,0),v.restore()}})),a&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,e.getTriangles().forEach((function(t,n,i){var r=t.target,s=(r[0][0]-_[0])/o,u=-(r[0][1]-_[1])/o,e=(r[1][0]-_[0])/o,h=-(r[1][1]-_[1])/o,f=(r[2][0]-_[0])/o,a=-(r[2][1]-_[1])/o;v.beginPath(),v.moveTo(e,h),v.lineTo(s,u),v.lineTo(f,a),v.closePath(),v.stroke()})),v.restore()),v.canvas}var ba=[0,0,0],_a=function(){function t(t){var n;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.oi=t.resolutions,mt(m(this.oi,(function(t,n){return n-t}),!0),17),!t.origins)for(var i=0,r=this.oi.length-1;i<r;++i)if(n){if(this.oi[i]/this.oi[i+1]!==n){n=void 0;break}}else n=this.oi[i]/this.oi[i+1];this.si=n,this.maxZoom=this.oi.length-1,this.Hs=void 0!==t.origin?t.origin:null,this.$s=null,void 0!==t.origins&&(this.$s=t.origins,mt(this.$s.length==this.oi.length,20));var s=t.extent;void 0===s||this.Hs||this.$s||(this.Hs=Bn(s)),mt(!this.Hs&&this.$s||this.Hs&&!this.$s,18),this.Ks=null,void 0!==t.tileSizes&&(this.Ks=t.tileSizes,mt(this.Ks.length==this.oi.length,19)),this.Qs=void 0!==t.tileSize?t.tileSize:this.Ks?null:_e,mt(!this.Qs&&this.Ks||this.Qs&&!this.Ks,22),this.D=void 0!==s?s:null,this.no=null,this.io=[0,0],this.ro=[0,0,0,0],void 0!==t.sizes?this.no=t.sizes.map((function(t,n){var i=new kf(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(s){var r=this.getTileRangeForExtentAndZ(s,n);i.minX=Math.max(r.minX,i.minX),i.maxX=Math.min(r.maxX,i.maxX),i.minY=Math.max(r.minY,i.minY),i.maxY=Math.min(r.maxY,i.maxY)}return i}),this):s&&this.so(s)}return t.prototype.forEachTileCoord=function(t,n,i){for(var r=this.getTileRangeForExtentAndZ(t,n),s=r.minX,o=r.maxX;s<=o;++s)for(var u=r.minY,e=r.maxY;u<=e;++u)i([n,s,u])},t.prototype.forEachTileCoordParentTileRange=function(t,n,i,r){var s,o,u=null,e=t[0]-1;for(2===this.si?(s=t[1],o=t[2]):u=this.getTileCoordExtent(t,r);e>=this.minZoom;){if(n(e,2===this.si?Nf(s=Math.floor(s/2),s,o=Math.floor(o/2),o,i):this.getTileRangeForExtentAndZ(u,e,i)))return!0;--e}return!1},t.prototype.getExtent=function(){return this.D},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.Hs?this.Hs:this.$s[t]},t.prototype.getResolution=function(t){return this.oi[t]},t.prototype.getResolutions=function(){return this.oi},t.prototype.getTileCoordChildTileRange=function(t,n,i){if(t[0]<this.maxZoom){if(2===this.si){var r=2*t[1],s=2*t[2];return Nf(r,r+1,s,s+1,n)}var o=this.getTileCoordExtent(t,i||this.ro);return this.getTileRangeForExtentAndZ(o,t[0]+1,n)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;var r=t[0],s=t[1],o=t[2];if(n===r)return Nf(s,o,s,o,i);if(this.si){var u=Math.pow(this.si,n-r),e=Math.floor(s*u),h=Math.floor(o*u);return n<r?Nf(e,e,h,h,i):Nf(e,Math.floor(u*(s+1))-1,h,Math.floor(u*(o+1))-1,i)}var f=this.getTileCoordExtent(t,this.ro);return this.getTileRangeForExtentAndZ(f,n,i)},t.prototype.getTileRangeExtent=function(t,n,i){var r=this.getOrigin(t),s=this.getResolution(t),o=Ue(this.getTileSize(t),this.io),u=r[0]+n.minX*o[0]*s,e=r[0]+(n.maxX+1)*o[0]*s;return jn(u,r[1]+n.minY*o[1]*s,e,r[1]+(n.maxY+1)*o[1]*s,i)},t.prototype.getTileRangeForExtentAndZ=function(t,n,i){var r=ba;this.oo(t[0],t[3],n,!1,r);var s=r[1],o=r[2];return this.oo(t[2],t[1],n,!0,r),Nf(s,r[1],o,r[2],i)},t.prototype.getTileCoordCenter=function(t){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Ue(this.getTileSize(t[0]),this.io);return[n[0]+(t[1]+.5)*r[0]*i,n[1]-(t[2]+.5)*r[1]*i]},t.prototype.getTileCoordExtent=function(t,n){var i=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=Ue(this.getTileSize(t[0]),this.io),o=i[0]+t[1]*s[0]*r,u=i[1]-(t[2]+1)*s[1]*r;return jn(o,u,o+s[0]*r,u+s[1]*r,n)},t.prototype.getTileCoordForCoordAndResolution=function(t,n,i){return this.uo(t[0],t[1],n,!1,i)},t.prototype.uo=function(t,n,i,r,s){var o=this.getZForResolution(i),u=i/this.getResolution(o),e=this.getOrigin(o),h=Ue(this.getTileSize(o),this.io),f=r?.5:0,a=r?.5:0,c=Math.floor((t-e[0])/i+f),v=Math.floor((e[1]-n)/i+a),l=u*c/h[0],d=u*v/h[1];return r?(l=Math.ceil(l)-1,d=Math.ceil(d)-1):(l=Math.floor(l),d=Math.floor(d)),Of(o,l,d,s)},t.prototype.oo=function(t,n,i,r,s){var o=this.getOrigin(i),u=this.getResolution(i),e=Ue(this.getTileSize(i),this.io),h=r?.5:0,f=r?.5:0,a=Math.floor((t-o[0])/u+h),c=Math.floor((o[1]-n)/u+f),v=a/e[0],l=c/e[1];return r?(v=Math.ceil(v)-1,l=Math.ceil(l)-1):(v=Math.floor(v),l=Math.floor(l)),Of(i,v,l,s)},t.prototype.getTileCoordForCoordAndZ=function(t,n,i){return this.oo(t[0],t[1],n,!1,i)},t.prototype.getTileCoordResolution=function(t){return this.oi[t[0]]},t.prototype.getTileSize=function(t){return this.Qs?this.Qs:this.Ks[t]},t.prototype.getFullTileRange=function(t){return this.no?this.no[t]:this.D?this.getTileRangeForExtentAndZ(this.D,t):null},t.prototype.getZForResolution=function(t,n){return ii(y(this.oi,t,n||0),this.minZoom,this.maxZoom)},t.prototype.so=function(t){for(var n=this.oi.length,i=new Array(n),r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.no=i},t}();function ga(t){var n=t.getDefaultTileGrid();return n||(n=xa(t),t.setDefaultTileGrid(n)),n}function ma(t,n,i){var r=n[0],s=t.getTileCoordCenter(n),o=Ea(i);if(_n(o,s))return n;var u=Zn(o),e=Math.ceil((o[0]-s[0])/u);return s[0]+=u*e,t.getTileCoordForCoordAndZ(s,r)}function Oa(t,n,i,r){var s=void 0!==r?r:en,o=ja(t,n,i);return new _a({extent:t,origin:Un(t,s),resolutions:o,tileSize:i})}function Ma(t){var n=t||{},i=n.extent||ur("EPSG:3857").getExtent(),r={extent:i,minZoom:n.minZoom,tileSize:n.tileSize,resolutions:ja(i,n.maxZoom,n.tileSize,n.maxResolution)};return new _a(r)}function ja(t,n,i,r){for(var s=void 0!==n?n:42,o=Yn(t),u=Zn(t),e=Ue(void 0!==i?i:_e),h=r>0?r:Math.max(u/e[0],o/e[1]),f=s+1,a=new Array(f),c=0;c<f;++c)a[c]=h/Math.pow(2,c);return a}function xa(t,n,i,r){return Oa(Ea(t),n,i,r)}function Ea(t){var n=(t=ur(t)).getExtent();if(!n){var i=180*kt[It.DEGREES]/t.getMetersPerUnit();n=jn(-i,-i,i,i)}return n}function Sa(t,n){var i=/\{z\}/g,r=/\{x\}/g,s=/\{y\}/g,o=/\{-y\}/g;return function(u,e,h){return u?t.replace(i,u[0].toString()).replace(r,u[1].toString()).replace(s,u[2].toString()).replace(o,(function(){var t=u[0],i=n.getFullTileRange(t);return mt(i,55),(i.getHeight()-u[2]-1).toString()})):void 0}}function Ta(t,n){for(var i=t.length,r=new Array(i),s=0;s<i;++s)r[s]=Sa(t[s],n);return Aa(r)}function Aa(t){return 1===t.length?t[0]:function(n,i,r){if(n){var s=ai(Ef(n),t.length);return t[s](n,i,r)}}}function Ca(t){var n=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var r=i[1].charCodeAt(0),s=i[2].charCodeAt(0),o=void 0;for(o=r;o<=s;++o)n.push(t.replace(i[0],String.fromCharCode(o)));return n}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var u=parseInt(i[2],10),e=parseInt(i[1],10);e<=u;e++)n.push(t.replace(i[0],e.toString()));return n}return n.push(t),n}function Na(t,n){var i=[];Object.keys(n).forEach((function(t){null!==n[t]&&void 0!==n[t]&&i.push(t+"="+encodeURIComponent(n[t]))}));var r=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}var ka="http://www.w3.org/2001/XMLSchema-instance";function Pa(t,n){return Qa().createElementNS(t,n)}function Ia(t,n){return Ga(t,n,[]).join("")}function Ga(t,n,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else{var r=void 0;for(r=t.firstChild;r;r=r.nextSibling)Ga(r,n,i)}return i}function Ra(t){return"documentElement"in t}function La(t){return(new DOMParser).parseFromString(t,"application/xml")}function Fa(t,n){return function(i,r){var s=t.call(void 0!==n?n:this,i,r);void 0!==s&&r[r.length-1].push(s)}}function Da(t,n,i){return function(r,s){var o=t.call(void 0!==i?i:this,r,s);void 0!==o&&(s[s.length-1][void 0!==n?n:r.localName]=o)}}function za(t,n){return function(i,r,s){t.call(void 0!==n?n:this,i,r,s),s[s.length-1].node.appendChild(i)}}function Ua(t,n){var i,r;return function(n,s,o){if(void 0===i){i={};var u={};u[n.localName]=t,i[n.namespaceURI]=u,r=Xa(n.localName)}Ja(i,r,s,o)}}function Xa(t,n){var i=t;return function(t,r,s){var o=r[r.length-1].node,u=i;return void 0===u&&(u=s),Pa(void 0!==n?n:o.namespaceURI,u)}}var Ya=Xa();function Wa(t,n){for(var i=n.length,r=new Array(i),s=0;s<i;++s)r[s]=t[n[s]];return r}function Ba(t,n,i){var r,s,o=void 0!==i?i:{};for(r=0,s=t.length;r<s;++r)o[t[r]]=n;return o}function qa(t,n,i,r){var s;for(s=n.firstElementChild;s;s=s.nextElementSibling){var o=t[s.namespaceURI];if(void 0!==o){var u=o[s.localName];void 0!==u&&u.call(r,s,i)}}}function Za(t,n,i,r,s){return r.push(t),qa(n,i,r,s),r.pop()}function Ja(t,n,i,r,s,o){for(var u,e,h=(void 0!==s?s:i).length,f=0;f<h;++f)void 0!==(u=i[f])&&void 0!==(e=n.call(void 0!==o?o:this,u,r,void 0!==s?s[f]:void 0))&&t[e.namespaceURI][e.localName].call(o,e,u,r)}function Va(t,n,i,r,s,o,u){return s.push(t),Ja(n,i,r,s,o,u),s.pop()}var Ha=void 0;function $a(){return void 0===Ha&&"undefined"!=typeof XMLSerializer&&(Ha=new XMLSerializer),Ha}var Ka=void 0;function Qa(){return void 0===Ka&&"undefined"!=typeof document&&(Ka=document.implementation.createDocument("","",null)),Ka}function tc(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function nc(t,n){return t[0]=n[0],t[1]=n[1],t[4]=n[2],t[5]=n[3],t[12]=n[4],t[13]=n[5],t}var ic=function(){function t(t){this.eo=t.opacity,this.ho=t.rotateWithView,this.lr=t.rotation,this.fo=t.scale,this.ao=Ue(t.scale),this.co=t.displacement}return t.prototype.clone=function(){var n=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(n)?n.slice():n,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.eo},t.prototype.getRotateWithView=function(){return this.ho},t.prototype.getRotation=function(){return this.lr},t.prototype.getScale=function(){return this.fo},t.prototype.getScaleArray=function(){return this.ao},t.prototype.getDisplacement=function(){return this.co},t.prototype.getAnchor=function(){return r()},t.prototype.getImage=function(t){return r()},t.prototype.getHitDetectionImage=function(){return r()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return r()},t.prototype.getImageSize=function(){return r()},t.prototype.getOrigin=function(){return r()},t.prototype.getSize=function(){return r()},t.prototype.setOpacity=function(t){this.eo=t},t.prototype.setRotateWithView=function(t){this.ho=t},t.prototype.setRotation=function(t){this.lr=t},t.prototype.setScale=function(t){this.fo=t,this.ao=Ue(t)},t.prototype.listenImageChange=function(t){r()},t.prototype.load=function(){r()},t.prototype.unlistenImageChange=function(t){r()},t}(),rc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sc=function(t){function n(n){var i=this,r=void 0!==n.rotateWithView&&n.rotateWithView;return(i=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==n.rotation?n.rotation:0,scale:void 0!==n.scale?n.scale:1,displacement:void 0!==n.displacement?n.displacement:[0,0]})||this).jt=void 0,i.vo=null,i.lo=void 0!==n.fill?n.fill:null,i.Hs=[0,0],i.Nt=n.points,i.do=void 0!==n.radius?n.radius:n.radius1,i.wo=n.radius2,i.kt=void 0!==n.angle?n.angle:0,i.po=void 0!==n.stroke?n.stroke:null,i.$r=null,i.yo=null,i.bo=null,i.render(),i}return rc(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},n.prototype.getAnchor=function(){return this.$r},n.prototype.getAngle=function(){return this.kt},n.prototype.getFill=function(){return this.lo},n.prototype.getHitDetectionImage=function(){return this.vo||this._o(this.bo),this.vo},n.prototype.getImage=function(t){var n=this.jt[t];if(!n){var i=this.bo,r=ao(i.size*t,i.size*t);this.mo(i,r,t),n=r.canvas,this.jt[t]=n}return n},n.prototype.getPixelRatio=function(t){return t},n.prototype.getImageSize=function(){return this.yo},n.prototype.getImageState=function(){return io},n.prototype.getOrigin=function(){return this.Hs},n.prototype.getPoints=function(){return this.Nt},n.prototype.getRadius=function(){return this.do},n.prototype.getRadius2=function(){return this.wo},n.prototype.getSize=function(){return this.yo},n.prototype.getStroke=function(){return this.po},n.prototype.listenImageChange=function(t){},n.prototype.load=function(){},n.prototype.unlistenImageChange=function(t){},n.prototype.Oo=function(t,n,i){if(0===n||this.Nt===1/0||"bevel"!==t&&"miter"!==t)return n;var r=this.do,s=void 0===this.wo?r:this.wo;if(r<s){var o=r;r=s,s=o}var u=void 0===this.wo?this.Nt:2*this.Nt,e=2*Math.PI/u,h=s*Math.sin(e),f=r-Math.sqrt(s*s-h*h),a=Math.sqrt(h*h+f*f),c=a/h;if("miter"===t&&c<=i)return c*n;var v=n/2/c,l=n/2*(f/a),d=Math.sqrt((r+v)*(r+v)+l*l)-r;if(void 0===this.wo||"bevel"===t)return 2*d;var w=r*Math.sin(e),p=s-Math.sqrt(r*r-w*w),y=Math.sqrt(w*w+p*p)/w;if(y<=i){var b=y*n/2-s-r;return 2*Math.max(d,b)}return 2*d},n.prototype.createRenderOptions=function(){var t,n=mu,i=0,r=null,s=0,o=0;this.po&&(null===(t=this.po.getColor())&&(t=Mu),t=Rf(t),void 0===(o=this.po.getWidth())&&(o=1),r=this.po.getLineDash(),s=this.po.getLineDashOffset(),void 0===(n=this.po.getLineJoin())&&(n=mu),void 0===(i=this.po.getMiterLimit())&&(i=Ou));var u=this.Oo(n,o,i),e=Math.max(this.do,this.wo||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*e+u),lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}},n.prototype.render=function(){this.bo=this.createRenderOptions();var t=this.bo.size,n=this.getDisplacement();this.jt={},this.$r=[t/2-n[0],t/2+n[1]],this.yo=[t,t]},n.prototype.mo=function(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.Mo(n),this.lo){var r=this.lo.getColor();null===r&&(r=bu),n.fillStyle=Rf(r),n.fill()}this.po&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,n.setLineDash&&t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n.prototype._o=function(t){if(this.lo){var n=this.lo.getColor(),i=0;if("string"==typeof n&&(n=Eo(n)),null===n?i=1:Array.isArray(n)&&(i=4===n.length?n[3]:1),0===i){var r=ao(t.size,t.size);this.vo=r.canvas,this.jo(t,r)}}this.vo||(this.vo=this.getImage(1))},n.prototype.Mo=function(t){var n=this.Nt,i=this.do;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{var r=void 0===this.wo?i:this.wo;void 0!==this.wo&&(n*=2);for(var s=this.kt-Math.PI/2,o=2*Math.PI/n,u=0;u<n;u++){var e=s+u*o,h=u%2==0?i:r;t.lineTo(h*Math.cos(e),h*Math.sin(e))}t.closePath()}},n.prototype.jo=function(t,n){n.translate(t.size/2,t.size/2),this.Mo(n),n.fillStyle=bu,n.fill(),this.po&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n}(ic),oc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),uc=function(t){function n(n){var i=n||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return oc(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},n.prototype.setRadius=function(t){this.do=t,this.render()},n}(sc),ec=function(){function t(t){var n=t||{};this.xo=void 0!==n.color?n.color:null}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0})},t.prototype.getColor=function(){return this.xo},t.prototype.setColor=function(t){this.xo=t},t}(),hc="fraction",fc="pixels",ac="bottom-left",cc="bottom-right",vc="top-left",lc="top-right",dc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wc=null,pc=function(t){function n(n,i,r,s,o,u){var e=t.call(this)||this;return e.Eo=null,e.yt=n||new Image,null!==s&&(e.yt.crossOrigin=s),e.jt={},e.xo=u,e.bt=null,e.So=o,e.yo=r,e.wt=i,e.To,e}return dc(n,t),n.prototype.Ao=function(){if(void 0===this.To&&this.So===io){wc||(wc=ao(1,1)),wc.drawImage(this.yt,0,0);try{wc.getImageData(0,0,1,1),this.To=!1}catch(t){wc=null,this.To=!0}}return!0===this.To},n.prototype.Co=function(){this.dispatchEvent(k)},n.prototype.gt=function(){this.So=ro,this.Ot(),this.Co()},n.prototype.Mt=function(){this.So=io,this.yo?(this.yt.width=this.yo[0],this.yt.height=this.yo[1]):this.yo=[this.yt.width,this.yt.height],this.Ot(),this.Co()},n.prototype.getImage=function(t){return this.No(t),this.jt[t]?this.jt[t]:this.yt},n.prototype.getPixelRatio=function(t){return this.No(t),this.jt[t]?t:1},n.prototype.getImageState=function(){return this.So},n.prototype.getHitDetectionImage=function(){if(!this.Eo)if(this.Ao()){var t=this.yo[0],n=this.yo[1],i=ao(t,n);i.fillRect(0,0,t,n),this.Eo=i.canvas}else this.Eo=this.yt;return this.Eo},n.prototype.getSize=function(){return this.yo},n.prototype.getSrc=function(){return this.wt},n.prototype.load=function(){if(this.So==to){this.So=no;try{this.yt.src=this.wt}catch(t){this.gt()}this.bt=uo(this.yt,this.Mt.bind(this),this.gt.bind(this))}},n.prototype.No=function(t){if(this.xo&&!this.jt[t]&&this.So===io){var n=document.createElement("canvas");this.jt[t]=n,n.width=Math.ceil(this.yt.width*t),n.height=Math.ceil(this.yt.height*t);var i=n.getContext("2d");if(i.scale(t,t),i.drawImage(this.yt,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.Ao())i.fillStyle=Mo(this.xo),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this.yt,0,0);else{for(var r=i.getImageData(0,0,n.width,n.height),s=r.data,o=this.xo[0]/255,u=this.xo[1]/255,e=this.xo[2]/255,h=this.xo[3],f=0,a=s.length;f<a;f+=4)s[f]*=o,s[f+1]*=u,s[f+2]*=e,s[f+3]*=h;i.putImageData(r,0,0)}}},n.prototype.Ot=function(){this.bt&&(this.bt(),this.bt=null)},n}(N);function yc(t,n,i,r,s,o){var u=Po.get(n,r,o);return u||(u=new pc(t,n,i,r,s,o),Po.set(n,r,o,u)),u}var bc=pc,_c=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gc=function(t){function n(n){var i=this,r=n||{},s=void 0!==r.opacity?r.opacity:1,u=void 0!==r.rotation?r.rotation:0,e=void 0!==r.scale?r.scale:1,h=void 0!==r.rotateWithView&&r.rotateWithView;(i=t.call(this,{opacity:s,rotation:u,scale:e,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:h})||this).$r=void 0!==r.anchor?r.anchor:[.5,.5],i.ko=null,i.Po=void 0!==r.anchorOrigin?r.anchorOrigin:vc,i.Io=void 0!==r.anchorXUnits?r.anchorXUnits:hc,i.Go=void 0!==r.anchorYUnits?r.anchorYUnits:hc,i.Et=void 0!==r.crossOrigin?r.crossOrigin:null;var f=void 0!==r.img?r.img:null,a=void 0!==r.imgSize?r.imgSize:null,c=r.src;mt(!(void 0!==c&&f),4),mt(!f||f&&a,5),void 0!==c&&0!==c.length||!f||(c=f.src||o(f)),mt(void 0!==c&&c.length>0,6);var v=void 0!==r.src?to:io;return i.xo=void 0!==r.color?Eo(r.color):null,i.Ro=yc(f,c,a,i.Et,v,i.xo),i.Lo=void 0!==r.offset?r.offset:[0,0],i.Fo=void 0!==r.offsetOrigin?r.offsetOrigin:vc,i.Hs=null,i.yo=void 0!==r.size?r.size:null,i}return _c(n,t),n.prototype.clone=function(){var t=this.getScale();return new n({anchor:this.$r.slice(),anchorOrigin:this.Po,anchorXUnits:this.Io,anchorYUnits:this.Go,crossOrigin:this.Et,color:this.xo&&this.xo.slice?this.xo.slice():this.xo||void 0,src:this.getSrc(),offset:this.Lo.slice(),offsetOrigin:this.Fo,size:null!==this.yo?this.yo.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},n.prototype.getAnchor=function(){if(this.ko)return this.ko;var t=this.$r,n=this.getSize();if(this.Io==hc||this.Go==hc){if(!n)return null;t=this.$r.slice(),this.Io==hc&&(t[0]*=n[0]),this.Go==hc&&(t[1]*=n[1])}if(this.Po!=vc){if(!n)return null;t===this.$r&&(t=this.$r.slice()),this.Po!=lc&&this.Po!=cc||(t[0]=-t[0]+n[0]),this.Po!=ac&&this.Po!=cc||(t[1]=-t[1]+n[1])}var i=this.getDisplacement();return t[0]-=i[0],t[1]+=i[1],this.ko=t,this.ko},n.prototype.setAnchor=function(t){this.$r=t,this.ko=null},n.prototype.getColor=function(){return this.xo},n.prototype.getImage=function(t){return this.Ro.getImage(t)},n.prototype.getPixelRatio=function(t){return this.Ro.getPixelRatio(t)},n.prototype.getImageSize=function(){return this.Ro.getSize()},n.prototype.getImageState=function(){return this.Ro.getImageState()},n.prototype.getHitDetectionImage=function(){return this.Ro.getHitDetectionImage()},n.prototype.getOrigin=function(){if(this.Hs)return this.Hs;var t=this.Lo;if(this.Fo!=vc){var n=this.getSize(),i=this.Ro.getSize();if(!n||!i)return null;t=t.slice(),this.Fo!=lc&&this.Fo!=cc||(t[0]=i[0]-n[0]-t[0]),this.Fo!=ac&&this.Fo!=cc||(t[1]=i[1]-n[1]-t[1])}return this.Hs=t,this.Hs},n.prototype.getSrc=function(){return this.Ro.getSrc()},n.prototype.getSize=function(){return this.yo?this.yo:this.Ro.getSize()},n.prototype.listenImageChange=function(t){this.Ro.addEventListener(k,t)},n.prototype.load=function(){this.Ro.load()},n.prototype.unlistenImageChange=function(t){this.Ro.removeEventListener(k,t)},n}(ic),mc=function(){function t(t){var n=t||{};this.xo=void 0!==n.color?n.color:null,this.Do=n.lineCap,this.zo=void 0!==n.lineDash?n.lineDash:null,this.Uo=n.lineDashOffset,this.Xo=n.lineJoin,this.Yo=n.miterLimit,this.Wo=n.width}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.xo},t.prototype.getLineCap=function(){return this.Do},t.prototype.getLineDash=function(){return this.zo},t.prototype.getLineDashOffset=function(){return this.Uo},t.prototype.getLineJoin=function(){return this.Xo},t.prototype.getMiterLimit=function(){return this.Yo},t.prototype.getWidth=function(){return this.Wo},t.prototype.setColor=function(t){this.xo=t},t.prototype.setLineCap=function(t){this.Do=t},t.prototype.setLineDash=function(t){this.zo=t},t.prototype.setLineDashOffset=function(t){this.Uo=t},t.prototype.setLineJoin=function(t){this.Xo=t},t.prototype.setMiterLimit=function(t){this.Yo=t},t.prototype.setWidth=function(t){this.Wo=t},t}();function Oc(t){return(Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Mc=function(){function t(t){var n=t||{};this.Sr=null,this.Bo=Tc,void 0!==n.geometry&&this.setGeometry(n.geometry),this.lo=void 0!==n.fill?n.fill:null,this.yt=void 0!==n.image?n.image:null,this.Xt=void 0!==n.renderer?n.renderer:null,this.qo=void 0!==n.hitDetectionRenderer?n.hitDetectionRenderer:null,this.po=void 0!==n.stroke?n.stroke:null,this.ks=void 0!==n.text?n.text:null,this.Zo=n.zIndex}return t.prototype.clone=function(){var n=this.getGeometry();return n&&"object"===Oc(n)&&(n=n.clone()),new t({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.Xt},t.prototype.setRenderer=function(t){this.Xt=t},t.prototype.setHitDetectionRenderer=function(t){this.qo=t},t.prototype.getHitDetectionRenderer=function(){return this.qo},t.prototype.getGeometry=function(){return this.Sr},t.prototype.getGeometryFunction=function(){return this.Bo},t.prototype.getFill=function(){return this.lo},t.prototype.setFill=function(t){this.lo=t},t.prototype.getImage=function(){return this.yt},t.prototype.setImage=function(t){this.yt=t},t.prototype.getStroke=function(){return this.po},t.prototype.setStroke=function(t){this.po=t},t.prototype.getText=function(){return this.ks},t.prototype.setText=function(t){this.ks=t},t.prototype.getZIndex=function(){return this.Zo},t.prototype.setGeometry=function(t){"function"==typeof t?this.Bo=t:"string"==typeof t?this.Bo=function(n){return n.get(t)}:t?void 0!==t&&(this.Bo=function(){return t}):this.Bo=Tc,this.Sr=t},t.prototype.setZIndex=function(t){this.Zo=t},t}();function jc(t){var n;if("function"==typeof t)n=t;else{var i;if(Array.isArray(t))i=t;else mt("function"==typeof t.getZIndex,41),i=[t];n=function(){return i}}return n}var xc=null;function Ec(t,n){if(!xc){var i=new ec({color:"rgba(255,255,255,0.4)"}),r=new mc({color:"#3399CC",width:1.25});xc=[new Mc({image:new uc({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return xc}function Sc(){var t={},n=[255,255,255,1],i=[0,153,255,1];return t[At.POLYGON]=[new Mc({fill:new ec({color:[255,255,255,.5]})})],t[At.MULTI_POLYGON]=t[At.POLYGON],t[At.LINE_STRING]=[new Mc({stroke:new mc({color:n,width:5})}),new Mc({stroke:new mc({color:i,width:3})})],t[At.MULTI_LINE_STRING]=t[At.LINE_STRING],t[At.CIRCLE]=t[At.POLYGON].concat(t[At.LINE_STRING]),t[At.POINT]=[new Mc({image:new uc({radius:6,fill:new ec({color:i}),stroke:new mc({color:n,width:1.5})}),zIndex:1/0})],t[At.MULTI_POINT]=t[At.POINT],t[At.GEOMETRY_COLLECTION]=t[At.POLYGON].concat(t[At.LINE_STRING],t[At.POINT]),t}function Tc(t){return t.getGeometry()}var Ac=Mc,Cc="point",Nc="line",kc=function(){function t(t){var n=t||{};this.Jo=n.font,this.lr=n.rotation,this.ho=n.rotateWithView,this.fo=n.scale,this.ao=Ue(void 0!==n.scale?n.scale:1),this.ks=n.text,this.Vo=n.textAlign,this.Ho=n.textBaseline,this.lo=void 0!==n.fill?n.fill:new ec({color:"#333"}),this.$o=void 0!==n.maxAngle?n.maxAngle:Math.PI/4,this.Ko=void 0!==n.placement?n.placement:Cc,this.Qo=!!n.overflow,this.po=void 0!==n.stroke?n.stroke:null,this.tu=void 0!==n.offsetX?n.offsetX:0,this.nu=void 0!==n.offsetY?n.offsetY:0,this.iu=n.backgroundFill?n.backgroundFill:null,this.ru=n.backgroundStroke?n.backgroundStroke:null,this.ui=void 0===n.padding?null:n.padding}return t.prototype.clone=function(){var n=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(n)?n.slice():n,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.Qo},t.prototype.getFont=function(){return this.Jo},t.prototype.getMaxAngle=function(){return this.$o},t.prototype.getPlacement=function(){return this.Ko},t.prototype.getOffsetX=function(){return this.tu},t.prototype.getOffsetY=function(){return this.nu},t.prototype.getFill=function(){return this.lo},t.prototype.getRotateWithView=function(){return this.ho},t.prototype.getRotation=function(){return this.lr},t.prototype.getScale=function(){return this.fo},t.prototype.getScaleArray=function(){return this.ao},t.prototype.getStroke=function(){return this.po},t.prototype.getText=function(){return this.ks},t.prototype.getTextAlign=function(){return this.Vo},t.prototype.getTextBaseline=function(){return this.Ho},t.prototype.getBackgroundFill=function(){return this.iu},t.prototype.getBackgroundStroke=function(){return this.ru},t.prototype.getPadding=function(){return this.ui},t.prototype.setOverflow=function(t){this.Qo=t},t.prototype.setFont=function(t){this.Jo=t},t.prototype.setMaxAngle=function(t){this.$o=t},t.prototype.setOffsetX=function(t){this.tu=t},t.prototype.setOffsetY=function(t){this.nu=t},t.prototype.setPlacement=function(t){this.Ko=t},t.prototype.setRotateWithView=function(t){this.ho=t},t.prototype.setFill=function(t){this.lo=t},t.prototype.setRotation=function(t){this.lr=t},t.prototype.setScale=function(t){this.fo=t,this.ao=Ue(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.po=t},t.prototype.setText=function(t){this.ks=t},t.prototype.setTextAlign=function(t){this.Vo=t},t.prototype.setTextBaseline=function(t){this.Ho=t},t.prototype.setBackgroundFill=function(t){this.iu=t},t.prototype.setBackgroundStroke=function(t){this.ru=t},t.prototype.setPadding=function(t){this.ui=t},t}(),Pc=34962,Ic=34963,Gc=35044,Rc=35048,Lc=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Fc(t,n){for(var i=Lc.length,r=0;r<i;++r)try{var s=t.getContext(Lc[r],n);if(s)return s}catch(t){}return null}var Dc=Gc;function zc(t){switch(t){case Pc:return Float32Array;case Ic:return Uint32Array;default:return Float32Array}}var Uc=function(){function t(t,n){this.array=null,this.type=t,mt(t===Pc||t===Ic,62),this.usage=void 0!==n?n:Dc}return t.prototype.ofSize=function(t){this.array=new(zc(this.type))(t)},t.prototype.fromArray=function(t){var n=zc(this.type);this.array=n.from?n.from(t):new n(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(zc(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),Xc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Yc(t,n){t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)}function Wc(t,n,i,r,s){var o,u,e=t.getGL();switch(Yc(e,n),s){case 1:o=e.LUMINANCE;break;case 2:o=e.LUMINANCE_ALPHA;break;case 3:o=e.RGB;break;case 4:o=e.RGBA;break;default:throw new Error("Unsupported number of bands: "+s)}i instanceof Float32Array?(u=e.FLOAT,t.getExtension("OES_texture_float"),t.getExtension("OES_texture_float_linear")):u=e.UNSIGNED_BYTE,e.texImage2D(e.TEXTURE_2D,0,o,r[0],r[1],0,o,u,i)}var Bc=function(t){function n(n,i,r){var s=t.call(this)||this;s.tile,s.textures=[],s.zi=s.zi.bind(s),s.size=Ue(i.getTileSize(n.tileCoord[0])),s.bandCount=NaN,s.su=r;var o=new Uc(Pc,Gc);return o.fromArray([0,1,1,1,1,0,0,0]),r.flushBufferData(o),s.coords=o,s.setTile(n),s}return Xc(n,t),n.prototype.setTile=function(t){t!==this.tile&&(this.tile&&this.tile.removeEventListener(k,this.zi),this.tile=t,this.textures.length=0,this.loaded=t.getState()===at,this.loaded?this.ou():t.addEventListener(k,this.zi))},n.prototype.ou=function(){var t=this.su,n=t.getGL(),i=this.tile;if(i instanceof _o){var r=n.createTexture();return this.textures.push(r),this.bandCount=4,void function(t,n,i){Yc(t,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)}(n,r,i.getImage())}var s=i.getData(),o=s instanceof Float32Array,u=this.size[0]*this.size[1];this.bandCount=s.byteLength/(o?4:1)/u;var e=Math.ceil(this.bandCount/4);if(1===e){r=n.createTexture();return this.textures.push(r),void Wc(t,r,s,this.size,this.bandCount)}for(var h=o?Float32Array:Uint8Array,f=new Array(e),a=0;a<e;++a){r=n.createTexture();this.textures.push(r);var c=a<e-1?4:this.bandCount%4;f[a]=new h(u*c)}for(var v=u*this.bandCount,l=0;l<v;++l){var d=l%this.bandCount,w=d%4,p=(c=(a=Math.floor(d/4))<e-1?4:this.bandCount%4,Math.floor(l/this.bandCount));f[a][p*c+w]=s[l]}for(a=0;a<e;++a){c=a<e-1?4:this.bandCount%4;Wc(t,r=this.textures[a],f[a],this.size,c)}},n.prototype.zi=function(){this.tile.getState()===at&&(this.loaded=!0,this.ou(),this.dispatchEvent(k))},n.prototype.disposeInternal=function(){var t=this.su.getGL();this.su.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)t.deleteTexture(this.textures[n]);this.tile.removeEventListener(k,this.zi)},n}(N),qc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Zc=function(t){function n(n){var i=t.call(this)||this;return i.uu=i.eu.bind(i),i.hu=n,i.declutterExecutorGroup=null,i}return qc(n,t),n.prototype.getFeatures=function(t){return r()},n.prototype.prepareFrame=function(t){return r()},n.prototype.renderFrame=function(t,n){return r()},n.prototype.loadedTileCallback=function(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i},n.prototype.createLoadedTileFinder=function(t,n,i){return function(r,s){var o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(n,r,s,o)}.bind(this)},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s){},n.prototype.getDataAtPixel=function(t,n,i){return null},n.prototype.getLayer=function(){return this.hu},n.prototype.handleFontsChanged=function(){},n.prototype.eu=function(t){t.target.getState()===io&&this.renderIfReadyAndVisible()},n.prototype.loadImage=function(t){var n=t.getState();return n!=io&&n!=ro&&t.addEventListener(k,this.uu),n==to&&(t.load(),n=t.getState()),n==io},n.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Ko&&t.changed()},n}(K),Jc="webglcontextlost",Vc="webglcontextrestored",Hc=function(){function t(t){this.fu=t.webGlContext;var n=this.fu;this.au=t.scaleRatio||1,this.cu=n.createTexture(),this.vu=null,this.lu=n.createFramebuffer();var i=n.createShader(n.VERTEX_SHADER);n.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),n.compileShader(i);var r=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(r,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n"),n.compileShader(r),this.du=n.createProgram(),n.attachShader(this.du,i),n.attachShader(this.du,r),n.linkProgram(this.du),this.wu=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,this.wu),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),n.STATIC_DRAW),this.pu=n.getAttribLocation(this.du,"a_position"),this.yu=n.getUniformLocation(this.du,"u_screenSize"),this.bu=n.getUniformLocation(this.du,"u_image"),this._u=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(i){this._u.push({value:t.uniforms[i],location:n.getUniformLocation(this.du,i)})}.bind(this))}return t.prototype.getGL=function(){return this.fu},t.prototype.init=function(t){var n=this.getGL(),i=[n.drawingBufferWidth*this.au,n.drawingBufferHeight*this.au];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.viewport(0,0,i[0],i[1]),!this.vu||this.vu[0]!==i[0]||this.vu[1]!==i[1]){this.vu=i;var r=n.RGBA,s=n.RGBA,o=n.UNSIGNED_BYTE;n.bindTexture(n.TEXTURE_2D,this.cu),n.texImage2D(n.TEXTURE_2D,0,r,i[0],i[1],0,s,o,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.cu,0)}},t.prototype.apply=function(t,n){var i=this.getGL(),r=t.size;i.bindFramebuffer(i.FRAMEBUFFER,n?n.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.cu),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.wu),i.useProgram(this.du),i.enableVertexAttribArray(this.pu),i.vertexAttribPointer(this.pu,2,i.FLOAT,!1,0,0),i.uniform2f(this.yu,r[0],r[1]),i.uniform1i(this.bu,0),this.applyUniforms(t),i.drawArrays(i.TRIANGLES,0,6)},t.prototype.getFrameBuffer=function(){return this.lu},t.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=1;this._u.forEach((function(s){if((n="function"==typeof s.value?s.value(t):s.value)instanceof HTMLCanvasElement||n instanceof ImageData)s.texture||(s.texture=i.createTexture()),i.activeTexture(i["TEXTURE"+r]),i.bindTexture(i.TEXTURE_2D,s.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),n instanceof ImageData?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,n.width,n.height,0,i.UNSIGNED_BYTE,new Uint8Array(n.data)):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),i.uniform1i(s.location,r++);else if(Array.isArray(n))switch(n.length){case 2:return void i.uniform2f(s.location,n[0],n[1]);case 3:return void i.uniform3f(s.location,n[0],n[1],n[2]);case 4:return void i.uniform4f(s.location,n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&i.uniform1f(s.location,n)}))},t}(),$c=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Kc="u_projectionMatrix",Qc="u_offsetScaleMatrix",tv="u_offsetRotateMatrix",nv="u_time",iv="u_zoom",rv="u_resolution",sv={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function ov(t){switch(t){case sv.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case sv.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case sv.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case sv.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var uv=function(t){function n(n){var i=t.call(this)||this,r=n||{};i.gu=i.handleWebGLContextLost.bind(i),i.mu=i.handleWebGLContextRestored.bind(i),i.jt=document.createElement("canvas"),i.jt.style.position="absolute",i.jt.style.left="0",i.fu=Fc(i.jt);var s=i.getGL();if(i.Ou={},i.Mu={},i.ju=null,i.jt.addEventListener(Jc,i.gu),i.jt.addEventListener(Vc,i.mu),i.xu=[1,0,0,1,0,0],i.Eu=[1,0,0,1,0,0],i.Su=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i.Tu={},i.Au={},i._u=[],r.uniforms)for(var o in r.uniforms)i._u.push({name:o,value:r.uniforms[o]});return i.Cu=r.postProcesses?r.postProcesses.map((function(t){return new Hc({webGlContext:s,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new Hc({webGlContext:s})],i.Nu=null,i.Yr=Date.now(),i}return $c(n,t),n.prototype.getExtension=function(t){if(t in this.Mu)return this.Mu[t];var n=this.fu.getExtension(t);return this.Mu[t]=n,n},n.prototype.bindBuffer=function(t){var n=this.getGL(),i=o(t),r=this.Ou[i];r||(r={buffer:t,webGlBuffer:n.createBuffer()},this.Ou[i]=r);n.bindBuffer(t.getType(),r.webGlBuffer)},n.prototype.flushBufferData=function(t){var n=this.getGL();this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())},n.prototype.deleteBuffer=function(t){var n=this.getGL(),i=o(t),r=this.Ou[i];r&&!n.isContextLost()&&n.deleteBuffer(r.webGlBuffer),delete this.Ou[i]},n.prototype.disposeInternal=function(){this.jt.removeEventListener(Jc,this.gu),this.jt.removeEventListener(Vc,this.mu);var t=this.fu.getExtension("WEBGL_lose_context");t&&t.loseContext(),delete this.fu,delete this.jt},n.prototype.prepareDraw=function(t,n){var i=this.getGL(),r=this.getCanvas(),s=t.size,o=t.pixelRatio;r.width=s[0]*o,r.height=s[1]*o,r.style.width=s[0]+"px",r.style.height=s[1]+"px",i.useProgram(this.ju);for(var u=this.Cu.length-1;u>=0;u--)this.Cu[u].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.ju),this.applyFrameState(t),this.applyUniforms(t)},n.prototype.prepareDrawToRenderTarget=function(t,n,i){var r=this.getGL(),s=n.getSize();r.bindFramebuffer(r.FRAMEBUFFER,n.getFramebuffer()),r.viewport(0,0,s[0],s[1]),r.bindTexture(r.TEXTURE_2D,n.getTexture()),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,i?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.ju),this.applyFrameState(t),this.applyUniforms(t)},n.prototype.drawElements=function(t,n){var i=this.getGL();this.getExtension("OES_element_index_uint");var r=i.UNSIGNED_INT,s=n-t,o=4*t;i.drawElements(i.TRIANGLES,s,r,o)},n.prototype.finalizeDraw=function(t){for(var n=0;n<this.Cu.length;n++)this.Cu[n].apply(t,this.Cu[n+1]||null)},n.prototype.getCanvas=function(){return this.jt},n.prototype.getGL=function(){return this.fu},n.prototype.applyFrameState=function(t){var n=t.size,i=t.viewState.rotation,r=qt(this.Eu);Kt(r,2/n[0],2/n[1]);var s=qt(this.xu);0!==i&&$t(s,-i),this.setUniformMatrixValue(Qc,nc(this.Su,r)),this.setUniformMatrixValue(tv,nc(this.Su,s)),this.setUniformFloatValue(nv,.001*(Date.now()-this.Yr)),this.setUniformFloatValue(iv,t.viewState.zoom),this.setUniformFloatValue(rv,t.viewState.resolution)},n.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=0;this._u.forEach(function(s){if((n="function"==typeof s.value?s.value(t):s.value)instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData)s.texture||(s.prevValue=void 0,s.texture=i.createTexture()),i.activeTexture(i["TEXTURE"+r]),i.bindTexture(i.TEXTURE_2D,s.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(!(n instanceof HTMLImageElement)||n.complete)&&s.prevValue!==n&&(s.prevValue=n,i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n)),i.uniform1i(this.getUniformLocation(s.name),r++);else if(Array.isArray(n)&&6===n.length)this.setUniformMatrixValue(s.name,nc(this.Su,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:return void i.uniform2f(this.getUniformLocation(s.name),n[0],n[1]);case 3:return void i.uniform3f(this.getUniformLocation(s.name),n[0],n[1],n[2]);case 4:return void i.uniform4f(this.getUniformLocation(s.name),n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&i.uniform1f(this.getUniformLocation(s.name),n)}.bind(this))},n.prototype.useProgram=function(t){return t!=this.ju&&(this.getGL().useProgram(t),this.ju=t,this.Tu={},this.Au={},!0)},n.prototype.compileShader=function(t,n){var i=this.getGL(),r=i.createShader(n);return i.shaderSource(r,t),i.compileShader(r),r},n.prototype.getProgram=function(t,n){var i=this.getGL(),r=this.compileShader(t,i.FRAGMENT_SHADER),s=this.compileShader(n,i.VERTEX_SHADER),o=i.createProgram();if(i.attachShader(o,r),i.attachShader(o,s),i.linkProgram(o),!i.getShaderParameter(r,i.COMPILE_STATUS)){var u="Fragment shader compliation failed: "+i.getShaderInfoLog(r);throw new Error(u)}if(i.deleteShader(r),!i.getShaderParameter(s,i.COMPILE_STATUS)){u="Vertex shader compilation failed: "+i.getShaderInfoLog(s);throw new Error(u)}if(i.deleteShader(s),!i.getProgramParameter(o,i.LINK_STATUS)){u="GL program linking failed: "+i.getShaderInfoLog(s);throw new Error(u)}return o},n.prototype.getUniformLocation=function(t){return void 0===this.Tu[t]&&(this.Tu[t]=this.getGL().getUniformLocation(this.ju,t)),this.Tu[t]},n.prototype.getAttributeLocation=function(t){return void 0===this.Au[t]&&(this.Au[t]=this.getGL().getAttribLocation(this.ju,t)),this.Au[t]},n.prototype.makeProjectionTransform=function(t,n){var i=t.size,r=t.viewState.rotation,s=t.viewState.resolution,o=t.viewState.center;return qt(n),tn(n,0,0,2/(s*i[0]),2/(s*i[1]),-r,-o[0],-o[1]),n},n.prototype.setUniformFloatValue=function(t,n){this.getGL().uniform1f(this.getUniformLocation(t),n)},n.prototype.setUniformMatrixValue=function(t,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,n)},n.prototype.ku=function(t,n,i,r,s){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,n,i,!1,r,s))},n.prototype.enableAttributes=function(t){for(var n=function(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];n+=r.size*ov(r.type)}return n}(t),i=0,r=0;r<t.length;r++){var s=t[r];this.ku(s.name,s.size,s.type||5126,n,i),i+=s.size*ov(s.type)}},n.prototype.handleWebGLContextLost=function(){S(this.Ou),this.ju=null},n.prototype.handleWebGLContextRestored=function(){},n.prototype.createTexture=function(t,n,i){var r=this.getGL(),s=i||r.createTexture(),o=r.RGBA,u=r.RGBA,e=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,s),n?r.texImage2D(r.TEXTURE_2D,0,o,u,e,n):r.texImage2D(r.TEXTURE_2D,0,o,t[0],t[1],0,u,e,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),s},n}(l),ev=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hv="GENERATE_BUFFERS",fv=function(t){function n(n,i){var r=t.call(this,n)||this,s=i||{};return r.helper=new uv({postProcesses:s.postProcesses,uniforms:s.uniforms}),void 0!==s.className&&(r.helper.getCanvas().className=s.className),r}return ev(n,t),n.prototype.disposeInternal=function(){this.helper.dispose(),delete this.helper,t.prototype.disposeInternal.call(this)},n.prototype.Pu=function(t,n){var i=this.getLayer();if(i.hasListener(t)){var r=new uu(t,null,n,null);i.dispatchEvent(r)}},n.prototype.preRender=function(t){this.Pu(qo,t)},n.prototype.postRender=function(t){this.Pu(Zo,t)},n}(Zc);var av=fv,cv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vv="u_tileTexture",lv="u_tileTransform",dv="u_transitionAlpha",wv="u_depth",pv="u_texturePixelWidth",yv="u_texturePixelHeight",bv="u_resolution",_v="u_zoom",gv=[{name:"a_textureCoord",size:2,type:sv.FLOAT}],mv={};function Ov(t){return 2*(1-1/(t+1))-1}function Mv(t,n,i){i in t||(t[i]=[]),t[i].push(n)}function jv(t,n){var i=t.layerStatesArray[t.layerIndex];return i.extent&&(n=Wn(n,jr(i.extent,t.viewState.projection))),n}var xv=function(t){function n(n,i){var r=t.call(this,n,{uniforms:i.uniforms,className:i.className})||this;r.Iu=[1,0,0,1,0,0],r.Gu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.Ru=new kf(0,0,0,0),r.Lu=Of(0,0,0),r.Fu=[0,0],r.Du=r.helper.getProgram(i.fragmentShader,i.vertexShader);var s=new Uc(Ic,Gc);s.fromArray([0,1,3,1,2,3]),r.helper.flushBufferData(s),r.zu=s;var o=void 0!==i.cacheSize?i.cacheSize:512;return r.Uu=new mf(o),r.Xu=NaN,r}return cv(n,t),n.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==at||i==vt||i==ct&&!r},n.prototype.prepareFrame=function(t){if(Vn(jv(t,t.extent)))return!1;var n=this.getLayer().getSource();return!!n&&n.getState()===Ko},n.prototype.enqueueTiles=function(t,n,i,r){var s=t.viewState,u=this.getLayer().getSource(),e=u.getTileGridForProjection(s.projection),h=this.Uu,f=e.getTileRangeForExtentAndZ(n,i),a=o(u);a in t.wantedTiles||(t.wantedTiles[a]={});for(var c=t.wantedTiles[a],v=e.getResolution(i),l=f.minX;l<=f.maxX;++l)for(var d=f.minY;d<=f.maxY;++d){var w=Of(i,l,d,this.Lu),p=jf(w),y=void 0,b=void 0;h.containsKey(p)&&(b=(y=h.get(p)).tile),y&&y.tile.key===u.getKey()||(b=u.getTile(i,l,d,t.pixelRatio,s.projection),y?y.setTile(this.isDrawableTile(b)?b:b.getInterimTile()):(y=new Bc(b,e,this.helper),h.set(p,y))),Mv(r,y,i);var _=b.getKey();c[_]=!0,b.getState()===ht&&(t.tileQueue.isKeyQueued(_)||t.tileQueue.enqueue([b,a,e.getTileCoordCenter(w),v]))}},n.prototype.renderFrame=function(t){this.preRender(t);var n=t.viewState,i=t.layerStatesArray[t.layerIndex],r=jv(t,t.extent),s=this.getLayer().getSource(),u=s.getTileGridForProjection(n.projection),e=u.getZForResolution(n.resolution,s.zDirection),h={};if(t.nextExtent){var f=u.getZForResolution(n.nextResolution,s.zDirection),a=jv(t,t.nextExtent);this.enqueueTiles(t,a,f,h)}this.enqueueTiles(t,r,e,h);for(var c={},v=o(this),l=t.time,d=!1,p=h[e],y=0,b=p.length;y<b;++y){var _=(R=(Z=p[y]).tile).tileCoord;if(Z.loaded){if(1===(L=R.getAlpha(v,l))){R.endTransition(v);continue}d=!0,c[F=jf(_)]=L}if(!this.Yu(u,_,e+1,h))for(var g=e-1;g>=u.minZoom;--g){if(this.Yu(u,_,g,h))break}}this.helper.useProgram(this.Du),this.helper.prepareDraw(t,!d);for(var m=Object.keys(h).map(Number).sort(w),O=this.helper.getGL(),M=n.center[0],j=n.center[1],x=0,E=m.length;x<E;++x){var S=m[x],T=u.getResolution(S),A=Ue(u.getTileSize(S),this.Fu),C=u.getOrigin(S),N=(M-C[0])/(A[0]*T),k=(C[1]-j)/(A[1]*T),P=n.resolution/T,I=Ov(S),G=h[S];for(y=0,b=G.length;y<b;++y){if((Z=G[y]).loaded){var R,L,F=jf(_=(R=Z.tile).tileCoord),D=_[1],z=_[2];tn(this.Iu,0,0,2/(t.size[0]*P/A[0]),-2/(t.size[1]*P/A[1]),n.rotation,-(N-D),-(k-z)),this.helper.setUniformMatrixValue(lv,nc(this.Gu,this.Iu)),this.helper.bindBuffer(Z.coords),this.helper.bindBuffer(this.zu),this.helper.enableAttributes(gv);for(var U=0;U<Z.textures.length;++U){var X="TEXTURE"+U,Y=vv+U;O.activeTexture(O[X]),O.bindTexture(O.TEXTURE_2D,Z.textures[U]),O.uniform1i(this.helper.getUniformLocation(Y),U)}(L=F in c?c[F]:1)<1&&(t.animate=!0),this.helper.setUniformFloatValue(dv,L),this.helper.setUniformFloatValue(wv,I),this.helper.setUniformFloatValue(pv,A[0]),this.helper.setUniformFloatValue(yv,A[1]),this.helper.setUniformFloatValue(bv,n.resolution),this.helper.setUniformFloatValue(_v,n.zoom),this.helper.drawElements(0,this.zu.getSize())}}}this.helper.finalizeDraw(t);var W=this.helper.getCanvas(),B=i.opacity;this.Xu!==B&&(W.style.opacity=String(B),this.Xu=B);for(var q=this.Uu;q.canExpireCache();){var Z;(Z=q.pop()).dispose()}return t.postRenderFunctions.push((function(t,n){s.expireCache(s.getProjection(),mv)})),this.postRender(t),W},n.prototype.Yu=function(t,n,i,r){var s=t.getTileRangeForTileCoordAndZ(n,i,this.Ru);if(!s)return!1;for(var o=!0,u=this.Uu,e=s.minX;e<=s.maxX;++e)for(var h=s.minY;h<=s.maxY;++h){var f=Mf(i,e,h),a=!1;if(u.containsKey(f)){var c=u.get(f);c.loaded&&(Mv(r,c,i),a=!0)}a||(o=!1)}return o},n.prototype.disposeInternal=function(){var n=this.helper,i=n.getGL();n.deleteBuffer(this.zu),delete this.zu,i.deleteProgram(this.Du),delete this.Du;var r=this.Uu;r.forEach((function(t){t.dispose()})),r.clear(),delete this.Uu,t.prototype.disposeInternal.call(this)},n}(av);xv.prototype.getLayer;var Ev=1,Sv=2,Tv=4,Av=8,Cv=16,Nv=31,kv=0,Pv={};function Iv(t){if("number"==typeof t)return Ev;if("boolean"==typeof t)return Av;if("string"==typeof t)return Ao(t)?Tv|Sv:Sv;if(!Array.isArray(t))throw new Error("Unhandled value type: "+JSON.stringify(t));var n=t;if(n.every((function(t){return"number"==typeof t})))return 3===n.length||4===n.length?Tv|Cv:Cv;if("string"!=typeof n[0])throw new Error("Expected an expression operator but received: "+JSON.stringify(n));var i=Pv[n[0]];if(void 0===i)throw new Error("Unrecognized expression operator: "+JSON.stringify(n));return i.getReturnType(n.slice(1))}function Gv(t){return si(t)%1==0}function Rv(t){var n=t.toString();return-1===n.indexOf(".")?n+".0":n}function Lv(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec"+t.length+"("+t.map(Rv).join(", ")+")"}function Fv(t){var n=Eo(t).slice();return n.length<4&&n.push(1),Lv(n.map((function(t,n){return n<3?t/255:t})))}function Dv(t,n){return void 0===t.stringLiteralsMap[n]&&(t.stringLiteralsMap[n]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[n]}function zv(t,n){return Rv(Dv(t,n))}function Uv(t,n,i){if(Array.isArray(n)&&"string"==typeof n[0]){var r=Pv[n[0]];if(void 0===r)throw new Error("Unrecognized expression operator: "+JSON.stringify(n));return r.toGlsl(t,n.slice(1),i)}var s=Iv(n);if((s&Ev)>0)return Rv(n);if((s&Av)>0)return n.toString();if((s&Sv)>0&&(void 0===i||i==Sv))return zv(t,n.toString());if((s&Tv)>0&&(void 0===i||i==Tv))return Fv(n);if((s&Cv)>0)return Lv(n);throw new Error("Unexpected expression "+n+" (expected type "+i+")")}function Xv(t){if(!(Iv(t)&Ev))throw new Error("A numeric value was expected, got "+JSON.stringify(t)+" instead")}function Yv(t){for(var n=0;n<t.length;n++)Xv(t[n])}function Wv(t){if(!(Iv(t)&Sv))throw new Error("A string value was expected, got "+JSON.stringify(t)+" instead")}function Bv(t){if(!(Iv(t)&Av))throw new Error("A boolean value was expected, got "+JSON.stringify(t)+" instead")}function qv(t,n){if(t.length!==n)throw new Error("Exactly "+n+" arguments were expected, got "+t.length+" instead")}function Zv(t,n){if(t.length<n)throw new Error("At least "+n+" arguments were expected, got "+t.length+" instead")}function Jv(t,n){if(t.length>n)throw new Error("At most "+n+" arguments were expected, got "+t.length+" instead")}function Vv(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got "+t+" instead")}function Hv(t,n){if(!Gv(n))throw new Error("Could not infer only one type from the following expression: "+JSON.stringify(t))}function $v(t){return"u_var_"+t}function Kv(t){return{getReturnType:function(t){return Av},toGlsl:function(n,i){qv(i,2);for(var r=Nv,s=0;s<i.length;s++)r&=Iv(i[s]);if(r===kv)throw new Error("All arguments should be of compatible type, got "+JSON.stringify(i)+" instead");return r&=~Tv,"("+Uv(n,i[0],r)+" "+t+" "+Uv(n,i[1],r)+")"}}}function Qv(t){return{getReturnType:function(t){return Av},toGlsl:function(n,i){Zv(i,2);for(var r=0;r<i.length;r++)Bv(i[r]);return"("+i.map((function(t){return Uv(n,t)})).join(" "+t+" ")+")"}}}Pv.get={getReturnType:function(t){return Nv},toGlsl:function(t,n){qv(n,1),Wv(n[0]);var i=n[0].toString();return-1===t.attributes.indexOf(i)&&t.attributes.push(i),(t.inFragmentShader?"v_":"a_")+i}},Pv.var={getReturnType:function(t){return Nv},toGlsl:function(t,n){qv(n,1),Wv(n[0]);var i=n[0].toString();return-1===t.variables.indexOf(i)&&t.variables.push(i),$v(i)}},Pv.band={getReturnType:function(t){return Ev},toGlsl:function(t,n){Zv(n,1),Jv(n,3);var i=n[0];if("number"!=typeof i)throw new Error("Band index must be a number");var r=i-1,s=Math.floor(r/4),o=r%4;if(i===t.bandCount&&1===o&&(o=3),1===n.length)return"color"+s+"["+o+"]";var u=n[1],e=n[2]||0;return Xv(u),Xv(e),"texture2D("+(vv+s)+", v_textureCoord + vec2("+Uv(t,u)+" / "+pv+", "+Uv(t,e)+" / "+yv+"))["+o+"]"}},Pv.time={getReturnType:function(t){return Ev},toGlsl:function(t,n){return qv(n,0),"u_time"}},Pv.zoom={getReturnType:function(t){return Ev},toGlsl:function(t,n){return qv(n,0),"u_zoom"}},Pv.resolution={getReturnType:function(t){return Ev},toGlsl:function(t,n){return qv(n,0),"u_resolution"}},Pv["*"]={getReturnType:function(t){return Ev},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" * "+Uv(t,n[1])+")"}},Pv["/"]={getReturnType:function(t){return Ev},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" / "+Uv(t,n[1])+")"}},Pv["+"]={getReturnType:function(t){return Ev},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" + "+Uv(t,n[1])+")"}},Pv["-"]={getReturnType:function(t){return Ev},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" - "+Uv(t,n[1])+")"}},Pv.clamp={getReturnType:function(t){return Ev},toGlsl:function(t,n){qv(n,3),Yv(n);var i=Uv(t,n[1]),r=Uv(t,n[2]);return"clamp("+Uv(t,n[0])+", "+i+", "+r+")"}},Pv["%"]={getReturnType:function(t){return Ev},toGlsl:function(t,n){return qv(n,2),Yv(n),"mod("+Uv(t,n[0])+", "+Uv(t,n[1])+")"}},Pv["^"]={getReturnType:function(t){return Ev},toGlsl:function(t,n){return qv(n,2),Yv(n),"pow("+Uv(t,n[0])+", "+Uv(t,n[1])+")"}},Pv.abs={getReturnType:function(t){return Ev},toGlsl:function(t,n){return qv(n,1),Yv(n),"abs("+Uv(t,n[0])+")"}},Pv.sin={getReturnType:function(t){return Ev},toGlsl:function(t,n){return qv(n,1),Yv(n),"sin("+Uv(t,n[0])+")"}},Pv.cos={getReturnType:function(t){return Ev},toGlsl:function(t,n){return qv(n,1),Yv(n),"cos("+Uv(t,n[0])+")"}},Pv.atan={getReturnType:function(t){return Ev},toGlsl:function(t,n){return Zv(n,1),Jv(n,2),Yv(n),2===n.length?"atan("+Uv(t,n[0])+", "+Uv(t,n[1])+")":"atan("+Uv(t,n[0])+")"}},Pv[">"]={getReturnType:function(t){return Av},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" > "+Uv(t,n[1])+")"}},Pv[">="]={getReturnType:function(t){return Av},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" >= "+Uv(t,n[1])+")"}},Pv["<"]={getReturnType:function(t){return Av},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" < "+Uv(t,n[1])+")"}},Pv["<="]={getReturnType:function(t){return Av},toGlsl:function(t,n){return qv(n,2),Yv(n),"("+Uv(t,n[0])+" <= "+Uv(t,n[1])+")"}},Pv["=="]=Kv("=="),Pv["!="]=Kv("!="),Pv["!"]={getReturnType:function(t){return Av},toGlsl:function(t,n){return qv(n,1),Bv(n[0]),"(!"+Uv(t,n[0])+")"}},Pv.all=Qv("&&"),Pv.any=Qv("||"),Pv.between={getReturnType:function(t){return Av},toGlsl:function(t,n){qv(n,3),Yv(n);var i=Uv(t,n[1]),r=Uv(t,n[2]),s=Uv(t,n[0]);return"("+s+" >= "+i+" && "+s+" <= "+r+")"}},Pv.array={getReturnType:function(t){return Cv},toGlsl:function(t,n){Zv(n,2),Jv(n,4),Yv(n);var i=n.map((function(n){return Uv(t,n,Ev)}));return"vec"+n.length+"("+i.join(", ")+")"}},Pv.color={getReturnType:function(t){return Tv},toGlsl:function(t,n){Zv(n,3),Jv(n,4),Yv(n);var i=n;3===n.length&&i.push(1);var r=n.map((function(n,i){return Uv(t,n,Ev)+(i<3?" / 255.0":"")}));return"vec"+n.length+"("+r.join(", ")+")"}},Pv.interpolate={getReturnType:function(t){for(var n=Tv|Ev,i=3;i<t.length;i+=2)n&=Iv(t[i]);return n},toGlsl:function(t,n,i){Vv(n),Zv(n,6);var r,s=n[0];switch(s[0]){case"linear":r=1;break;case"exponential":r=s[1];break;default:r=null}if(!r)throw new Error('Invalid interpolation type for "interpolate" operator, received: '+JSON.stringify(s));var o=void 0!==i?i:Nv,u=Pv.interpolate.getReturnType(n)&o;Hv(n,u);for(var e=Uv(t,n[1]),h=Rv(r),f="",a=2;a<n.length-2;a+=2){var c=Uv(t,n[a]),v=f||Uv(t,n[a+1],u),l=Uv(t,n[a+2]);f="mix("+v+", "+Uv(t,n[a+3],u)+", pow(clamp(("+e+" - "+c+") / ("+l+" - "+c+"), 0.0, 1.0), "+h+"))"}return f}},Pv.match={getReturnType:function(t){for(var n=Nv,i=2;i<t.length;i+=2)n&=Iv(t[i]);return n&=Iv(t[t.length-1])},toGlsl:function(t,n,i){Vv(n),Zv(n,4);var r=void 0!==i?i:Nv,s=Pv.match.getReturnType(n)&r;Hv(n,s);for(var o=Uv(t,n[0]),u=Uv(t,n[n.length-1],s),e=null,h=n.length-3;h>=1;h-=2){e="("+o+" == "+Uv(t,n[h])+" ? "+Uv(t,n[h+1],s)+" : "+(e||u)+")"}return e}},Pv.case={getReturnType:function(t){for(var n=Nv,i=1;i<t.length;i+=2)n&=Iv(t[i]);return n&=Iv(t[t.length-1])},toGlsl:function(t,n,i){!function(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got "+t+" instead")}(n),Zv(n,3);var r=void 0!==i?i:Nv,s=Pv.case.getReturnType(n)&r;Hv(n,s);for(var o=0;o<n.length-1;o+=2)Bv(n[o]);var u=Uv(t,n[n.length-1],s),e=null;for(o=n.length-3;o>=0;o-=2){e="("+Uv(t,n[o])+" ? "+Uv(t,n[o+1],s)+" : "+(e||u)+")"}return e}};var tl=function(){function t(t){this.Wu,this.Bu,this.qu,this.Zu=void 0===t||t,this.Ju=0}return t.prototype.insertItem=function(t){var n={prev:void 0,next:void 0,data:t},i=this.qu;if(i){var r=i.next;n.prev=i,n.next=r,i.next=n,r&&(r.prev=n),i===this.Bu&&(this.Bu=n)}else this.Wu=n,this.Bu=n,this.Zu&&(n.next=n,n.prev=n);this.qu=n,this.Ju++},t.prototype.removeItem=function(){var t=this.qu;if(t){var n=t.next,i=t.prev;n&&(n.prev=i),i&&(i.next=n),this.qu=n||i,this.Wu===this.Bu?(this.qu=void 0,this.Wu=void 0,this.Bu=void 0):this.Wu===t?this.Wu=this.qu:this.Bu===t&&(this.Bu=i?this.qu.prev:this.qu),this.Ju--}},t.prototype.firstItem=function(){if(this.qu=this.Wu,this.qu)return this.qu.data},t.prototype.lastItem=function(){if(this.qu=this.Bu,this.qu)return this.qu.data},t.prototype.nextItem=function(){if(this.qu&&this.qu.next)return this.qu=this.qu.next,this.qu.data},t.prototype.getNextItem=function(){if(this.qu&&this.qu.next)return this.qu.next.data},t.prototype.prevItem=function(){if(this.qu&&this.qu.prev)return this.qu=this.qu.prev,this.qu.data},t.prototype.getPrevItem=function(){if(this.qu&&this.qu.prev)return this.qu.prev.data},t.prototype.getCurrItem=function(){if(this.qu)return this.qu.data},t.prototype.setFirstItem=function(){this.Zu&&this.qu&&(this.Wu=this.qu,this.Bu=this.qu.prev)},t.prototype.concat=function(t){if(t.qu){if(this.qu){var n=this.qu.next;this.qu.next=t.Wu,t.Wu.prev=this.qu,n.prev=t.Bu,t.Bu.next=n,this.Ju+=t.Ju}else this.qu=t.qu,this.Wu=t.Wu,this.Bu=t.Bu,this.Ju=t.Ju;t.qu=void 0,t.Wu=void 0,t.Bu=void 0,t.Ju=0}},t.prototype.getLength=function(){return this.Ju},t}(),nl=i(72),il=function(){function t(t){this.Vu=new nl(t),this.Hu={}}return t.prototype.insert=function(t,n){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.Vu.insert(i),this.Hu[o(n)]=i},t.prototype.load=function(t,n){for(var i=new Array(n.length),r=0,s=n.length;r<s;r++){var u=t[r],e=n[r],h={minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:e};i[r]=h,this.Hu[o(e)]=h}this.Vu.load(i)},t.prototype.remove=function(t){var n=o(t),i=this.Hu[n];return delete this.Hu[n],null!==this.Vu.remove(i)},t.prototype.update=function(t,n){var i=this.Hu[o(n)];Tn([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(n),this.insert(t,n))},t.prototype.getAll=function(){return this.Vu.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.Vu.search(n).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.$u(this.getAll(),t)},t.prototype.forEachInExtent=function(t,n){return this.$u(this.getInExtent(t),n)},t.prototype.$u=function(t,n){for(var i,r=0,s=t.length;r<s;r++)if(i=n(t[r]))return i;return i},t.prototype.isEmpty=function(){return A(this.Hu)},t.prototype.clear=function(){this.Vu.clear(),this.Hu={}},t.prototype.getExtent=function(t){var n=this.Vu.toJSON();return jn(n.minX,n.minY,n.maxX,n.maxY,t)},t.prototype.concat=function(t){for(var n in this.Vu.load(t.Vu.all()),t.Hu)this.Hu[n]=t.Hu[n]},t}(),rl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function sl(t){return t?Array.isArray(t)?function(n){return t}:"function"==typeof t?t:function(n){return[t]}:null}var ol=function(t){function n(n){var i=t.call(this)||this;i.projection=ur(n.projection),i.Ku=sl(n.attributions),i.Qu=void 0===n.attributionsCollapsible||n.attributionsCollapsible,i.loading=!1,i.Ft=void 0!==n.state?n.state:Ko,i.te=void 0!==n.wrapX&&n.wrapX,i.viewResolver=null,i.viewRejector=null;var r=i;return i.ne=new Promise((function(t,n){r.viewResolver=t,r.viewRejector=n})),i}return rl(n,t),n.prototype.getAttributions=function(){return this.Ku},n.prototype.getAttributionsCollapsible=function(){return this.Qu},n.prototype.getProjection=function(){return this.projection},n.prototype.getResolutions=function(){return r()},n.prototype.getView=function(){return this.ne},n.prototype.getState=function(){return this.Ft},n.prototype.getWrapX=function(){return this.te},n.prototype.getContextOptions=function(){},n.prototype.refresh=function(){this.changed()},n.prototype.setAttributions=function(t){this.Ku=sl(t),this.changed()},n.prototype.setState=function(t){this.Ft=t,this.changed()},n}(nt),ul="addfeature",el="changefeature",hl="clear",fl="removefeature",al="featuresloadstart",cl="featuresloadend",vl="featuresloaderror",ll=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dl=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.feature=i,s.features=r,s}return ll(n,t),n}(c),wl=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{attributions:r.attributions,projection:void 0,state:Ko,wrapX:void 0===r.wrapX||r.wrapX})||this).on,i.once,i.un,i.S=j,i.ie=r.format,i.re=void 0===r.overlaps||r.overlaps,i.se=r.url,void 0!==r.loader?i.S=r.loader:void 0!==i.se&&(mt(i.ie,7),i.S=Yf(i.se,i.ie)),i.oe=void 0!==r.strategy?r.strategy:Wf;var s,o,u=void 0===r.useSpatialIndex||r.useSpatialIndex;return i.ue=u?new il:null,i.ee=new il,i.he=0,i.fe={},i.ae={},i.ce={},i.ve={},i.le=null,Array.isArray(r.features)?o=r.features:r.features&&(o=(s=r.features).getArray()),u||void 0!==s||(s=new et(o)),void 0!==o&&i.addFeaturesInternal(o),void 0!==s&&i.de(s),i}return ll(n,t),n.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},n.prototype.addFeatureInternal=function(t){var n=o(t);if(this.we(n,t)){this.pe(n,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.ue&&this.ue.insert(r,t)}else this.fe[n]=t;this.dispatchEvent(new dl(ul,t))}else this.le&&this.le.remove(t)},n.prototype.pe=function(t,n){this.ve[t]=[q(n,k,this.ye,this),q(n,v,this.ye,this)]},n.prototype.we=function(t,n){var i=!0,r=n.getId();return void 0!==r&&(r.toString()in this.ae?i=!1:this.ae[r.toString()]=n),i&&(mt(!(t in this.ce),30),this.ce[t]=n),i},n.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},n.prototype.addFeaturesInternal=function(t){for(var n=[],i=[],r=[],s=0,u=t.length;s<u;s++){var e=o(f=t[s]);this.we(e,f)&&i.push(f)}s=0;for(var h=i.length;s<h;s++){var f;e=o(f=i[s]);this.pe(e,f);var a=f.getGeometry();if(a){var c=a.getExtent();n.push(c),r.push(f)}else this.fe[e]=f}this.ue&&this.ue.load(n,r);s=0;for(var v=i.length;s<v;s++)this.dispatchEvent(new dl(ul,i[s]))},n.prototype.de=function(t){var n=!1;this.addEventListener(ul,(function(i){n||(n=!0,t.push(i.feature),n=!1)})),this.addEventListener(fl,(function(i){n||(n=!0,t.remove(i.feature),n=!1)})),t.addEventListener(it,function(t){n||(n=!0,this.addFeature(t.element),n=!1)}.bind(this)),t.addEventListener(rt,function(t){n||(n=!0,this.removeFeature(t.element),n=!1)}.bind(this)),this.le=t},n.prototype.clear=function(t){if(t){for(var n in this.ve){this.ve[n].forEach(J)}this.le||(this.ve={},this.ae={},this.ce={})}else if(this.ue)for(var i in this.ue.forEach(this.removeFeatureInternal.bind(this)),this.fe)this.removeFeatureInternal(this.fe[i]);this.le&&this.le.clear(),this.ue&&this.ue.clear(),this.fe={};var r=new dl(hl);this.dispatchEvent(r),this.changed()},n.prototype.forEachFeature=function(t){if(this.ue)return this.ue.forEach(t);this.le&&this.le.forEach(t)},n.prototype.forEachFeatureAtCoordinateDirect=function(t,n){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){return i.getGeometry().intersectsCoordinate(t)?n(i):void 0}))},n.prototype.forEachFeatureInExtent=function(t,n){if(this.ue)return this.ue.forEachInExtent(t,n);this.le&&this.le.forEach(n)},n.prototype.forEachFeatureIntersectingExtent=function(t,n){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){var r=n(i);if(r)return r}}))},n.prototype.getFeaturesCollection=function(){return this.le},n.prototype.getFeatures=function(){var t;return this.le?t=this.le.getArray().slice(0):this.ue&&(t=this.ue.getAll(),A(this.fe)||_(t,T(this.fe))),t},n.prototype.getFeaturesAtCoordinate=function(t){var n=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){n.push(t)})),n},n.prototype.getFeaturesInExtent=function(t){return this.ue?this.ue.getInExtent(t):this.le?this.le.getArray().slice(0):[]},n.prototype.getClosestFeatureToCoordinate=function(t,n){var i=t[0],r=t[1],s=null,o=[NaN,NaN],u=1/0,e=[-1/0,-1/0,1/0,1/0],h=n||O;return this.ue.forEachInExtent(e,(function(t){if(h(t)){var n=t.getGeometry(),f=u;if((u=n.closestPointXY(i,r,o,u))<f){s=t;var a=Math.sqrt(u);e[0]=i-a,e[1]=r-a,e[2]=i+a,e[3]=r+a}}})),s},n.prototype.getExtent=function(t){return this.ue.getExtent(t)},n.prototype.getFeatureById=function(t){var n=this.ae[t.toString()];return void 0!==n?n:null},n.prototype.getFeatureByUid=function(t){var n=this.ce[t];return void 0!==n?n:null},n.prototype.getFormat=function(){return this.ie},n.prototype.getOverlaps=function(){return this.re},n.prototype.getUrl=function(){return this.se},n.prototype.ye=function(t){var n=t.target,i=o(n),r=n.getGeometry();if(r){var s=r.getExtent();i in this.fe?(delete this.fe[i],this.ue&&this.ue.insert(s,n)):this.ue&&this.ue.update(s,n)}else i in this.fe||(this.ue&&this.ue.remove(n),this.fe[i]=n);var u=n.getId();if(void 0!==u){var e=u.toString();this.ae[e]!==n&&(this.be(n),this.ae[e]=n)}else this.be(n),this.ce[i]=n;this.changed(),this.dispatchEvent(new dl(el,n))},n.prototype.hasFeature=function(t){var n=t.getId();return void 0!==n?n in this.ae:o(t)in this.ce},n.prototype.isEmpty=function(){return this.ue.isEmpty()&&A(this.fe)},n.prototype.loadFeatures=function(t,n,i){for(var r=this.ee,s=this.oe(t,n,i),o=function(t,o){var e=s[t];r.forEachInExtent(e,(function(t){return gn(t.extent,e)}))||(++u.he,u.dispatchEvent(new dl(al)),u.S.call(u,e,n,i,function(t){--this.he,this.dispatchEvent(new dl(cl,void 0,t))}.bind(u),function(){--this.he,this.dispatchEvent(new dl(vl))}.bind(u)),r.insert(e,{extent:e.slice()}))},u=this,e=0,h=s.length;e<h;++e)o(e);this.loading=!(this.S.length<4)&&this.he>0},n.prototype.refresh=function(){this.clear(!0),this.ee.clear(),t.prototype.refresh.call(this)},n.prototype.removeLoadedExtent=function(t){var n,i=this.ee;i.forEachInExtent(t,(function(i){if(Tn(i.extent,t))return n=i,!0})),n&&i.remove(n)},n.prototype.removeFeature=function(t){var n=o(t);n in this.fe?delete this.fe[n]:this.ue&&this.ue.remove(t),this.removeFeatureInternal(t),this.changed()},n.prototype.removeFeatureInternal=function(t){var n=o(t);this.ve[n].forEach(J),delete this.ve[n];var i=t.getId();void 0!==i&&delete this.ae[i.toString()],delete this.ce[n],this.dispatchEvent(new dl(fl,t))},n.prototype.be=function(t){var n=!1;for(var i in this.ae)if(this.ae[i]===t){delete this.ae[i],n=!0;break}return n},n.prototype.setLoader=function(t){this.S=t},n.prototype.setUrl=function(t){mt(this.ie,7),this.se=t,this.setLoader(Yf(t,this.ie))},n}(ol),pl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yl=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,wrapX:n.wrapX})||this;return i.resolution=void 0,i.distance=void 0!==n.distance?n.distance:20,i.minDistance=n.minDistance||0,i.interpolationRatio=0,i.features=[],i.geometryFunction=n.geometryFunction||function(t){var n=t.getGeometry();return mt(n.getType()==At.POINT,10),n},i._e=n.createCluster,i.source=null,i.ge=i.refresh.bind(i),i.updateDistance(i.distance,i.minDistance),i.setSource(n.source||null),i}return pl(n,t),n.prototype.clear=function(n){this.features.length=0,t.prototype.clear.call(this,n)},n.prototype.getDistance=function(){return this.distance},n.prototype.getSource=function(){return this.source},n.prototype.loadFeatures=function(t,n,i){this.source.loadFeatures(t,n,i),n!==this.resolution&&(this.resolution=n,this.refresh())},n.prototype.setDistance=function(t){this.updateDistance(t,this.minDistance)},n.prototype.setMinDistance=function(t){this.updateDistance(this.distance,t)},n.prototype.getMinDistance=function(){return this.minDistance},n.prototype.setSource=function(t){this.source&&this.source.removeEventListener(k,this.ge),this.source=t,t&&t.addEventListener(k,this.ge),this.refresh()},n.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},n.prototype.updateDistance=function(t,n){var i=0===t?0:Math.min(n,t)/t,r=t!==this.distance||this.interpolationRatio!==i;this.distance=t,this.minDistance=n,this.interpolationRatio=i,r&&this.refresh()},n.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],n=this.distance*this.resolution,i=this.source.getFeatures(),r={},s=0,u=i.length;s<u;s++){var e=i[s];if(!(o(e)in r)){var h=this.geometryFunction(e);if(h){En(h.getCoordinates(),t),pn(t,n,t);var f=this.source.getFeaturesInExtent(t).filter((function(t){var n=o(t);return!(n in r)&&(r[n]=!0,!0)}));this.features.push(this.createCluster(f,t))}}}},n.prototype.createCluster=function(t,n){for(var i=[0,0],r=t.length-1;r>=0;--r){var s=this.geometryFunction(t[r]);s?Xi(i,s.getCoordinates()):t.splice(r,1)}Vi(i,1/t.length);var o=zn(n),u=this.interpolationRatio,e=new ls([i[0]*(1-u)+o[0]*u,i[1]*(1-u)+o[1]*u]);return this._e?this._e(e,t):new jt({geometry:e,features:t})},n}(wl),bl="tileloadstart",_l="tileloadend",gl="tileloaderror",ml=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ol=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:n.projection,state:n.state,wrapX:n.wrapX})||this;i.on,i.once,i.un,i.me=void 0!==n.opaque&&n.opaque,i.Oe=void 0!==n.tilePixelRatio?n.tilePixelRatio:1,i.tileGrid=void 0!==n.tileGrid?n.tileGrid:null;var r=n.tileGrid;return r&&Ue(r.getTileSize(r.getMinZoom()),[256,256]),i.tileCache=new Af(n.cacheSize||0),i.tmpSize=[0,0],i.fs=n.key||"",i.tileOptions={transition:n.transition},i.zDirection=n.zDirection?n.zDirection:0,i}return ml(n,t),n.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);i&&i.expireCache(n)},n.prototype.forEachLoadedTile=function(t,n,i,r){var s=this.getTileCacheForProjection(t);if(!s)return!1;for(var o,u,e,h=!0,f=i.minX;f<=i.maxX;++f)for(var a=i.minY;a<=i.maxY;++a)u=Mf(n,f,a),e=!1,s.containsKey(u)&&(e=(o=s.get(u)).getState()===at)&&(e=!1!==r(o)),e||(h=!1);return h},n.prototype.getGutterForProjection=function(t){return 0},n.prototype.getKey=function(){return this.fs},n.prototype.setKey=function(t){this.fs!==t&&(this.fs=t,this.changed())},n.prototype.getOpaque=function(t){return this.me},n.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},n.prototype.getTile=function(t,n,i,s,o){return r()},n.prototype.getTileGrid=function(){return this.tileGrid},n.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:ga(t)},n.prototype.getTileCacheForProjection=function(t){return mt(lr(this.getProjection(),t),68),this.tileCache},n.prototype.getTilePixelRatio=function(t){return this.Oe},n.prototype.getTilePixelSize=function(t,n,i){var r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(n),o=Ue(r.getTileSize(t),this.tmpSize);return 1==s?o:ze(o,s,this.tmpSize)},n.prototype.getTileCoordForTileUrlFunction=function(t,n){var i=void 0!==n?n:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=ma(r,t,i)),Sf(t,r)?t:null},n.prototype.clear=function(){this.tileCache.clear()},n.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},n.prototype.updateCacheSize=function(t,n){var i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)},n.prototype.useTile=function(t,n,i,r){},n}(ol),Ml=function(t){function n(n,i){var r=t.call(this,n)||this;return r.tile=i,r}return ml(n,t),n}(c),jl=Ol,xl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),El=function(t){function n(n){var i=this,r=void 0===n.projection?"EPSG:3857":n.projection,s=n.tileGrid;return void 0===s&&r&&(s=Ma({extent:Ea(r),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize})),(i=t.call(this,{cacheSize:.1,projection:r,tileGrid:s,opaque:n.opaque,state:n.state,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition})||this).Me={},i.S=n.loader,i.zi=i.zi.bind(i),i.bandCount=void 0===n.bandCount?4:n.bandCount,i}return xl(n,t),n.prototype.setLoader=function(t){this.S=t},n.prototype.getTile=function(t,n,i,r,s){var o=Mf(t,n,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var u=this.S;var e=new gt(E({tileCoord:[t,n,i],loader:function(){return u(t,n,i)}},this.tileOptions));return e.key=this.getKey(),e.addEventListener(k,this.zi),this.tileCache.set(o,e),e},n.prototype.zi=function(t){var n,i=t.target,r=o(i),s=i.getState();s==ft?(this.Me[r]=!0,n=bl):r in this.Me&&(delete this.Me[r],n=s==ct?gl:s==at?_l:void 0),n&&this.dispatchEvent(new Ml(n,i))},n}(jl),Sl=!0,Tl=function(){function t(t,n,i,r,s,o){this.je=t,this.xe=n;var u={},e=wr(this.xe,this.je);this.Ee=function(t){var n=t[0]+"/"+t[1];return u[n]||(u[n]=e(t)),u[n]},this.Se=r,this.Te=s*s,this.Ae=[],this.Ce=!1,this.Ne=this.je.canWrapX()&&!!r&&!!this.je.getExtent()&&Zn(r)==Zn(this.je.getExtent()),this.ke=this.je.getExtent()?Zn(this.je.getExtent()):null,this.Pe=this.xe.getExtent()?Zn(this.xe.getExtent()):null;var h=Bn(i),f=qn(i),a=Dn(i),c=Fn(i),v=this.Ee(h),l=this.Ee(f),d=this.Ee(a),w=this.Ee(c),p=10+(o?Math.max(0,Math.ceil(si(Ln(i)/(o*o*256*256)))):0);if(this.Ie(h,f,a,c,v,l,d,w,p),this.Ce){var y=1/0;this.Ae.forEach((function(t,n,i){y=Math.min(y,t.source[0][0],t.source[1][0],t.source[2][0])})),this.Ae.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-y>this.ke/2){var n=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];n[0][0]-y>this.ke/2&&(n[0][0]-=this.ke),n[1][0]-y>this.ke/2&&(n[1][0]-=this.ke),n[2][0]-y>this.ke/2&&(n[2][0]-=this.ke);var i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.ke/2&&(t.source=n)}}.bind(this))}u={}}return t.prototype.Ge=function(t,n,i,r,s,o){this.Ae.push({source:[r,s,o],target:[t,n,i]})},t.prototype.Ie=function(t,n,i,r,s,o,u,e,h){var f=wn([s,o,u,e]),a=this.ke?Zn(f)/this.ke:null,c=this.ke,v=this.je.canWrapX()&&a>.5&&a<1,l=!1;if(h>0){if(this.xe.isGlobal()&&this.Pe)l=Zn(wn([t,n,i,r]))/this.Pe>.25||l;!v&&this.je.isGlobal()&&a&&(l=a>.25||l)}if(!(!l&&this.Se&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3]))||Jn(f,this.Se)){var d=0;if(!(l||isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(e[0])&&isFinite(e[1])))if(h>0)l=!0;else if(1!=(d=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(u[0])&&isFinite(u[1])?0:2)+(isFinite(e[0])&&isFinite(e[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(h>0){if(!l){var w=[(t[0]+i[0])/2,(t[1]+i[1])/2],p=this.Ee(w),y=void 0;if(v)y=(ai(s[0],c)+ai(u[0],c))/2-ai(p[0],c);else y=(s[0]+u[0])/2-p[0];var b=(s[1]+u[1])/2-p[1];l=y*y+b*b>this.Te}if(l){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var _=[(n[0]+i[0])/2,(n[1]+i[1])/2],g=this.Ee(_),m=[(r[0]+t[0])/2,(r[1]+t[1])/2],O=this.Ee(m);this.Ie(t,n,_,m,s,o,g,O,h-1),this.Ie(m,_,i,r,O,g,u,e,h-1)}else{var M=[(t[0]+n[0])/2,(t[1]+n[1])/2],j=this.Ee(M),x=[(i[0]+r[0])/2,(i[1]+r[1])/2],E=this.Ee(x);this.Ie(t,M,x,r,s,j,E,e,h-1),this.Ie(M,n,i,x,j,o,u,E,h-1)}return}}if(v){if(!this.Ne)return;this.Ce=!0}0==(11&d)&&this.Ge(t,i,r,s,u,e),0==(14&d)&&this.Ge(t,i,n,s,u,o),d&&(0==(13&d)&&this.Ge(n,r,t,o,e,s),0==(7&d)&&this.Ge(n,r,i,o,e,u))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.Ae.forEach((function(n,i,r){var s=n.source;Nn(t,s[0]),Nn(t,s[1]),Nn(t,s[2])})),t},t.prototype.getTriangles=function(){return this.Ae},t}(),Al=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Cl=function(t){function n(n,i,r,s,o,u,e){var h=this,f=n.getExtent(),a=i.getExtent(),c=a?Wn(r,a):r,v=wa(n,i,zn(c),s),l=new Tl(n,i,c,f,.5*v,s),d=u(l.calculateSourceExtent(),v,o),w=d?to:so,p=d?d.getPixelRatio():1;return(h=t.call(this,r,s,p,w)||this).xe=i,h.Se=f,h.Re=l,h.Vn=s,h.Le=r,h.Fe=d,h.De=p,h.ze=e,h.jt=null,h.Ue=null,h}return Al(n,t),n.prototype.disposeInternal=function(){this.state==no&&this.Xe(),t.prototype.disposeInternal.call(this)},n.prototype.getImage=function(){return this.jt},n.prototype.getProjection=function(){return this.xe},n.prototype.Ye=function(){var t=this.Fe.getState();if(t==io){var n=Zn(this.Le)/this.Vn,i=Yn(this.Le)/this.Vn;this.jt=ya(n,i,this.De,this.Fe.getResolution(),this.Se,this.Vn,this.Le,this.Re,[{extent:this.Fe.getExtent(),image:this.Fe.getImage()}],0,void 0,this.ze)}this.state=t,this.changed()},n.prototype.load=function(){if(this.state==to){this.state=no,this.changed();var t=this.Fe.getState();t==io||t==ro?this.Ye():(this.Ue=q(this.Fe,k,(function(t){var n=this.Fe.getState();n!=io&&n!=ro||(this.Xe(),this.Ye())}),this),this.Fe.load())}},n.prototype.Xe=function(){J(this.Ue),this.Ue=null},n}(Qs),Nl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kl="imageloadstart",Pl="imageloadend",Il="imageloaderror",Gl=function(t){function n(n,i){var r=t.call(this,n)||this;return r.image=i,r}return Nl(n,t),n}(c);function Rl(t,n){t.getImage().src=n}var Ll=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,projection:n.projection,state:n.state})||this;return i.on,i.once,i.un,i.oi=void 0!==n.resolutions?n.resolutions:null,i.We=null,i.Be=0,i.ze=!1===n.imageSmoothing?va:void 0,i}return Nl(n,t),n.prototype.getResolutions=function(){return this.oi},n.prototype.getContextOptions=function(){return this.ze},n.prototype.findNearestResolution=function(t){if(this.oi){var n=y(this.oi,t,0);t=this.oi[n]}return t},n.prototype.getImage=function(t,n,i,r){var s=this.getProjection();if(s&&r&&!lr(s,r)){if(this.We){if(this.Be==this.getRevision()&&lr(this.We.getProjection(),r)&&this.We.getResolution()==n&&Tn(this.We.getExtent(),t))return this.We;this.We.dispose(),this.We=null}return this.We=new Cl(s,r,t,n,i,function(t,n,i){return this.getImageInternal(t,n,i,s)}.bind(this),this.ze),this.Be=this.getRevision(),this.We}return s&&(r=s),this.getImageInternal(t,n,i,r)},n.prototype.getImageInternal=function(t,n,i,s){return r()},n.prototype.handleImageChange=function(t){var n=t.target;switch(n.getState()){case no:this.loading=!0,this.dispatchEvent(new Gl(kl,n));break;case io:this.loading=!1,this.dispatchEvent(new Gl(Pl,n));break;case ro:this.loading=!1,this.dispatchEvent(new Gl(Il,n))}},n}(ol),Fl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Dl=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,{attributions:r.attributions,imageSmoothing:r.imageSmoothing,projection:r.projection,resolutions:r.resolutions,state:r.state})||this).qe=r.canvasFunction,i.jt=null,i.Ze=0,i.Je=void 0!==r.ratio?r.ratio:1.5,i}return Fl(n,t),n.prototype.getImageInternal=function(t,n,i,r){n=this.findNearestResolution(n);var s=this.jt;if(s&&this.Ze==this.getRevision()&&s.getResolution()==n&&s.getPixelRatio()==i&&gn(s.getExtent(),t))return s;$n(t=t.slice(),this.Je);var o=[Zn(t)/n*i,Yn(t)/n*i],u=this.qe.call(this,t,n,i,o,r);return u&&(s=new fo(t,n,i,u)),this.jt=s,this.Ze=this.getRevision(),s},n}(Ll),zl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var Ul=function(t){function n(n){var i=t.call(this,{imageSmoothing:n.imageSmoothing,projection:n.projection,resolutions:n.resolutions})||this;return i.Et=void 0!==n.crossOrigin?n.crossOrigin:null,i.Ve=void 0!==n.displayDpi?n.displayDpi:96,i.He=n.params||{},i.se=n.url,i._t=void 0!==n.imageLoadFunction?n.imageLoadFunction:Rl,i.$e=void 0===n.hidpi||n.hidpi,i.H=void 0!==n.metersPerUnit?n.metersPerUnit:1,i.Je=void 0!==n.ratio?n.ratio:1,i.Ke=void 0!==n.useOverlay&&n.useOverlay,i.yt=null,i.Ze=0,i}return zl(n,t),n.prototype.getParams=function(){return this.He},n.prototype.getImageInternal=function(t,n,i,r){n=this.findNearestResolution(n),i=this.$e?i:1;var s=this.yt;if(s&&this.Ze==this.getRevision()&&s.getResolution()==n&&s.getPixelRatio()==i&&gn(s.getExtent(),t))return s;1!=this.Je&&$n(t=t.slice(),this.Je);var o=[Zn(t)/n*i,Yn(t)/n*i];if(void 0!==this.se){var u=this.getUrl(this.se,this.He,t,o,r);(s=new eo(t,n,i,u,this.Et,this._t)).addEventListener(k,this.handleImageChange.bind(this))}else s=null;return this.yt=s,this.Ze=this.getRevision(),s},n.prototype.getImageLoadFunction=function(){return this._t},n.prototype.updateParams=function(t){E(this.He,t),this.changed()},n.prototype.getUrl=function(t,n,i,r,s){var o=function(t,n,i,r){var s=Zn(t),o=Yn(t),u=n[0],e=n[1],h=.0254/r;return e*s>u*o?s*i/(u*h):o*i/(e*h)}(i,r,this.H,this.Ve),u=zn(i),e={OPERATION:this.Ke?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.Ve,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:o,SETVIEWCENTERX:u[0],SETVIEWCENTERY:u[1]};return E(e,n),Na(t,e)},n.prototype.setImageLoadFunction=function(t){this.yt=null,this._t=t,this.changed()},n}(Ll),Xl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yl=function(t){function n(n){var i=this,r=void 0!==n.crossOrigin?n.crossOrigin:null,s=void 0!==n.imageLoadFunction?n.imageLoadFunction:Rl;return(i=t.call(this,{attributions:n.attributions,imageSmoothing:n.imageSmoothing,projection:ur(n.projection)})||this).se=n.url,i.Qe=n.imageExtent,i.yt=new eo(i.Qe,void 0,1,i.se,r,s),i.th=n.imageSize?n.imageSize:null,i.yt.addEventListener(k,i.handleImageChange.bind(i)),i}return Xl(n,t),n.prototype.getImageExtent=function(){return this.Qe},n.prototype.getImageInternal=function(t,n,i,r){return Jn(t,this.yt.getExtent())?this.yt:null},n.prototype.getUrl=function(){return this.se},n.prototype.handleImageChange=function(n){if(this.yt.getState()==io){var i=this.yt.getExtent(),r=this.yt.getImage(),s=void 0,o=void 0;this.th?(s=this.th[0],o=this.th[1]):(s=r.width,o=r.height);var u=Zn(i),e=Yn(i),h=u/s,f=e/o,a=s,c=o;if(h>f?a=Math.round(u/f):c=Math.round(e/h),a!==s||c!==o){var v=ao(a,c);E(v,this.getContextOptions());var l=v.canvas;v.drawImage(r,0,0,s,o,0,0,l.width,l.height),this.yt.setImage(l)}}t.prototype.handleImageChange.call(this,n)},n}(Ll),Wl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bl=function(t){function n(n,i,r,s,o,u,e,h,f,a,c,v){var l=t.call(this,o,ht)||this;l.nh=void 0!==c&&c,l.ze=v,l.dt=e,l.ih=h,l.jt=null,l.rh=i,l.sh=s,l.oh=u||o,l.uh=[],l.eh=null,l.hh=0;var d=s.getTileCoordExtent(l.oh),w=l.sh.getExtent(),p=l.rh.getExtent(),y=w?Wn(d,w):d;if(0===Ln(y))return l.state=vt,l;var b=n.getExtent();b&&(p=p?Wn(p,b):b);var _=s.getResolution(l.oh[0]),g=pa(n,r,y,_);if(!isFinite(g)||g<=0)return l.state=vt,l;var m=void 0!==a?a:.5;if(l.Re=new Tl(n,r,y,p,g*m,_),0===l.Re.getTriangles().length)return l.state=vt,l;l.hh=i.getZForResolution(g);var O=l.Re.calculateSourceExtent();if(p&&(n.canWrapX()?(O[1]=ii(O[1],p[1],p[3]),O[3]=ii(O[3],p[1],p[3])):O=Wn(O,p)),Ln(O)){for(var M=i.getTileRangeForExtentAndZ(O,l.hh),j=M.minX;j<=M.maxX;j++)for(var x=M.minY;x<=M.maxY;x++){var E=f(l.hh,j,x,e);E&&l.uh.push(E)}0===l.uh.length&&(l.state=vt)}else l.state=vt;return l}return Wl(n,t),n.prototype.getImage=function(){return this.jt},n.prototype.Ye=function(){var t=[];if(this.uh.forEach(function(n,i,r){n&&n.getState()==at&&t.push({extent:this.rh.getTileCoordExtent(n.tileCoord),image:n.getImage()})}.bind(this)),this.uh.length=0,0===t.length)this.state=ct;else{var n=this.oh[0],i=this.sh.getTileSize(n),r="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],o=this.sh.getResolution(n),u=this.rh.getResolution(this.hh),e=this.sh.getTileCoordExtent(this.oh);this.jt=ya(r,s,this.dt,u,this.rh.getExtent(),o,e,this.Re,t,this.ih,this.nh,this.ze),this.state=at}this.changed()},n.prototype.load=function(){if(this.state==ht){this.state=ft,this.changed();var t=0;this.eh=[],this.uh.forEach(function(n,i,r){var s=n.getState();if(s==ht||s==ft){t++;var o=q(n,k,(function(i){var r=n.getState();r!=at&&r!=ct&&r!=vt||(J(o),0===--t&&(this.fh(),this.Ye()))}),this);this.eh.push(o)}}.bind(this)),0===t?setTimeout(this.Ye.bind(this),0):this.uh.forEach((function(t,n,i){t.getState()==ht&&t.load()}))}},n.prototype.fh=function(){this.eh.forEach(J),this.eh=null},n}(bt),ql=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Zl=function(t){function n(i){var r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this;return r.ah=r.tileUrlFunction===n.prototype.tileUrlFunction,r.tileLoadFunction=i.tileLoadFunction,i.tileUrlFunction&&(r.tileUrlFunction=i.tileUrlFunction),r.urls=null,i.urls?r.setUrls(i.urls):i.url&&r.setUrl(i.url),r.Me={},r}return ql(n,t),n.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},n.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},n.prototype.getUrls=function(){return this.urls},n.prototype.handleTileChange=function(t){var n,i=t.target,r=o(i),s=i.getState();s==ft?(this.Me[r]=!0,n=bl):r in this.Me&&(delete this.Me[r],n=s==ct?gl:s==at?_l:void 0),null!=n&&this.dispatchEvent(new Ml(n,i))},n.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},n.prototype.setTileUrlFunction=function(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==n?this.setKey(n):this.changed()},n.prototype.setUrl=function(t){var n=Ca(t);this.urls=n,this.setUrls(n)},n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.ah?this.setTileUrlFunction(Ta(t,this.tileGrid),n):this.setKey(n)},n.prototype.tileUrlFunction=function(t,n,i){},n.prototype.useTile=function(t,n,i){var r=Mf(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},n}(jl),Jl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Vl(t,n){t.getImage().src=n}var Hl=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:Vl,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX,transition:n.transition,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this;return i.crossOrigin=void 0!==n.crossOrigin?n.crossOrigin:null,i.tileClass=void 0!==n.tileClass?n.tileClass:_o,i.tileCacheForProjection={},i.tileGridForProjection={},i.lh=n.reprojectionErrorThreshold,i.ze=!1===n.imageSmoothing?va:void 0,i.dh=!1,i}return Jl(n,t),n.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==i?n:{}),this.tileCacheForProjection){var s=this.tileCacheForProjection[r];s.expireCache(s==i?n:{})}},n.prototype.getContextOptions=function(){return this.ze},n.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!lr(this.getProjection(),t)?0:this.getGutter()},n.prototype.getGutter=function(){return 0},n.prototype.getKey=function(){return t.prototype.getKey.call(this)+(this.ze?"\n"+JSON.stringify(this.ze):"")},n.prototype.getOpaque=function(n){return!(this.getProjection()&&n&&!lr(this.getProjection(),n))&&t.prototype.getOpaque.call(this,n)},n.prototype.getTileGridForProjection=function(t){var n=this.getProjection();if(!this.tileGrid||n&&!lr(n,t)){var i=o(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=ga(t)),this.tileGridForProjection[i]}return this.tileGrid},n.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();if(!n||lr(n,t))return this.tileCache;var i=o(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Af(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},n.prototype.wh=function(t,n,i,r,s,o){var u=[t,n,i],e=this.getTileCoordForTileUrlFunction(u,s),h=e?this.tileUrlFunction(e,r,s):void 0,f=new this.tileClass(u,void 0!==h?ht:vt,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=o,f.addEventListener(k,this.handleTileChange.bind(this)),f},n.prototype.getTile=function(t,n,i,r,s){var o=this.getProjection();if(o&&s&&!lr(o,s)){var u=this.getTileCacheForProjection(s),e=[t,n,i],h=void 0,f=jf(e);u.containsKey(f)&&(h=u.get(f));var a=this.getKey();if(h&&h.key==a)return h;var c=this.getTileGridForProjection(o),v=this.getTileGridForProjection(s),l=this.getTileCoordForTileUrlFunction(e,s),d=new Bl(o,c,s,v,e,l,this.getTilePixelRatio(r),this.getGutter(),function(t,n,i,r){return this.getTileInternal(t,n,i,r,o)}.bind(this),this.lh,this.dh,this.ze);return d.key=a,h?(d.interimTile=h,d.refreshInterimChain(),u.replace(f,d)):u.set(f,d),d}return this.getTileInternal(t,n,i,r,o||s)},n.prototype.getTileInternal=function(t,n,i,r,s){var o=null,u=Mf(t,n,i),e=this.getKey();if(this.tileCache.containsKey(u)){if((o=this.tileCache.get(u)).key!=e){var h=o;o=this.wh(t,n,i,r,s,e),h.getState()==ht?o.interimTile=h.interimTile:o.interimTile=h,o.refreshInterimChain(),this.tileCache.replace(u,o)}}else o=this.wh(t,n,i,r,s,e),this.tileCache.set(u,o);return o},n.prototype.setRenderReprojectionEdges=function(t){if(this.dh!=t){for(var n in this.dh=t,this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},n.prototype.setTileGridForProjection=function(t,n){var i=ur(t);if(i){var r=o(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}},n}(Zl),$l=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Kl=function(t){function n(n){var i=n||{},r=void 0!==i.projection?i.projection:"EPSG:3857",s=void 0!==i.tileGrid?i.tileGrid:Ma({extent:Ea(r),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,imageSmoothing:i.imageSmoothing,opaque:i.opaque,projection:r,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:s,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this}return $l(n,t),n}(Hl),Ql=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),td='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',nd=function(t){function n(n){var i,r=n||{};i=void 0!==r.attributions?r.attributions:[td];var s=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",o=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:i,attributionsCollapsible:!1,cacheSize:r.cacheSize,crossOrigin:s,imageSmoothing:r.imageSmoothing,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,opaque:void 0===r.opaque||r.opaque,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,transition:r.transition,url:o,wrapX:r.wrapX,zDirection:r.zDirection})||this}return Ql(n,t),n}(Kl),id=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rd=function(t){function n(n){var i=n||{};return t.call(this,i)||this}return id(n,t),n}(nu),sd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),od=function(t){function n(n){var i=t.call(this,n)||this;return i.container=null,i.renderedResolution,i.tempTransform=[1,0,0,1,0,0],i.pixelTransform=[1,0,0,1,0,0],i.inversePixelTransform=[1,0,0,1,0,0],i.context=null,i.containerReused=!1,i}return sd(n,t),n.prototype.useContainer=function(t,n,i){var r,s,o=this.getLayer().getClassName();t&&t.style.opacity===pu(i)&&t.className===o&&((e=t.firstElementChild)instanceof HTMLCanvasElement&&(s=e.getContext("2d")));if(s&&s.canvas.style.transform===n?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(r=document.createElement("div")).className=o;var u=r.style;u.position="absolute",u.width="100%",u.height="100%";var e=(s=ao()).canvas;r.appendChild(e),(u=e.style).position="absolute",u.left="0",u.transformOrigin="top left",this.container=r,this.context=s}},n.prototype.clipUnrotated=function(t,n,i){var r=Bn(i),s=qn(i),o=Dn(i),u=Fn(i);Ht(n.coordinateToPixelTransform,r),Ht(n.coordinateToPixelTransform,s),Ht(n.coordinateToPixelTransform,o),Ht(n.coordinateToPixelTransform,u);var e=this.inversePixelTransform;Ht(e,r),Ht(e,s),Ht(e,o),Ht(e,u),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(u[0]),Math.round(u[1])),t.clip()},n.prototype.Pu=function(t,n,i){var r=this.getLayer();if(r.hasListener(t)){var s=new uu(t,this.inversePixelTransform,i,n);r.dispatchEvent(s)}},n.prototype.preRender=function(t,n){this.Pu(qo,t,n)},n.prototype.postRender=function(t,n){this.Pu(Zo,t,n)},n.prototype.getRenderTransform=function(t,n,i,r,s,o,u){var e=s/2,h=o/2,f=r/n,a=-f,c=-t[0]+u,v=-t[1];return tn(this.tempTransform,e,h,f,a,-i,c,v)},n.prototype.getDataAtPixel=function(t,n,i){var r,s=Ht(this.inversePixelTransform,t.slice()),o=this.context,u=this.getLayer().getExtent();if(u&&!_n(u,Ht(n.pixelToCoordinateTransform,t.slice())))return null;try{var e=Math.round(s[0]),h=Math.round(s[1]),f=document.createElement("canvas"),a=f.getContext("2d");f.width=1,f.height=1,a.clearRect(0,0,1,1),a.drawImage(o.canvas,e,h,1,1,0,0,1,1),r=a.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:r}return 0===r[3]?null:r},n}(Zc),ud=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ed=function(t){function n(n){var i=t.call(this,n)||this;return i.yt=null,i}return ud(n,t),n.prototype.getImage=function(){return this.yt?this.yt.getImage():null},n.prototype.prepareFrame=function(t){var n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,r=t.viewState,s=r.resolution,o=this.getLayer().getSource(),u=t.viewHints,e=t.extent;if(void 0!==n.extent&&(e=Wn(e,jr(n.extent,r.projection))),!u[de]&&!u[we]&&!Vn(e))if(o){var h=r.projection,f=o.getImage(e,s,i,h);f&&this.loadImage(f)&&(this.yt=f)}else this.yt=null;return!!this.yt},n.prototype.renderFrame=function(t,n){var i=this.yt,r=i.getExtent(),s=i.getResolution(),o=i.getPixelRatio(),u=t.layerStatesArray[t.layerIndex],e=t.pixelRatio,h=t.viewState,f=h.center,a=h.resolution,c=t.size,v=e*s/(a*o),l=Math.round(c[0]*e),d=Math.round(c[1]*e),w=h.rotation;if(w){var p=Math.round(Math.sqrt(l*l+d*d));l=p,d=p}tn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/e,1/e,w,-l/2,-d/2),nn(this.inversePixelTransform,this.pixelTransform);var y=sn(this.pixelTransform);this.useContainer(n,y,u.opacity);var b=this.context,_=b.canvas;_.width!=l||_.height!=d?(_.width=l,_.height=d):this.containerReused||b.clearRect(0,0,l,d);var g=!1,m=!0;if(u.extent){var O=jr(u.extent,h.projection);(g=(m=Jn(O,t.extent))&&!gn(O,t.extent))&&this.clipUnrotated(b,t,O)}var M=i.getImage(),j=tn(this.tempTransform,l/2,d/2,v,v,0,o*(r[0]-f[0])/s,o*(f[1]-r[3])/s);this.renderedResolution=s*e/o;var x=M.width*j[0],S=M.height*j[3];if(E(b,this.getLayer().getSource().getContextOptions()),this.preRender(b,t),m&&x>=.5&&S>=.5){var T=j[4],A=j[5],C=u.opacity,N=void 0;1!==C&&(N=b.globalAlpha,b.globalAlpha=C),b.drawImage(M,0,0,+M.width,+M.height,Math.round(T),Math.round(A),Math.round(x),Math.round(S)),1!==C&&(b.globalAlpha=N)}return this.postRender(b,t),g&&b.restore(),y!==_.style.transform&&(_.style.transform=y),this.container},n}(od),hd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fd=function(t){function n(n){return t.call(this,n)||this}return hd(n,t),n.prototype.createRenderer=function(){return new ed(this)},n}(rd),ad="preload",cd="useInterimTilesOnError",vd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ld=function(t){function n(n){var i=this,r=n||{},s=E({},r);return delete s.preload,delete s.useInterimTilesOnError,(i=t.call(this,s)||this).on,i.once,i.un,i.setPreload(void 0!==r.preload?r.preload:0),i.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),i}return vd(n,t),n.prototype.getPreload=function(){return this.get(ad)},n.prototype.setPreload=function(t){this.set(ad,t)},n.prototype.getUseInterimTilesOnError=function(){return this.get(cd)},n.prototype.setUseInterimTilesOnError=function(t){this.set(cd,t)},n}(nu),dd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wd=function(t){function n(n){var i=t.call(this,n)||this;return i.extentChanged=!0,i.ph=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.yh=!1,i.tmpExtent=[1/0,1/0,-1/0,-1/0],i.bh=new kf(0,0,0,0),i}return dd(n,t),n.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==at||i==vt||i==ct&&!r},n.prototype.getTile=function(t,n,i,r){var s=r.pixelRatio,o=r.viewState.projection,u=this.getLayer(),e=u.getSource().getTile(t,n,i,s,o);return e.getState()==ct&&(u.getUseInterimTilesOnError()?u.getPreload()>0&&(this.yh=!0):e.setState(at)),this.isDrawableTile(e)||(e=e.getInterimTile()),e},n.prototype.loadedTileCallback=function(n,i,r){return!!this.isDrawableTile(r)&&t.prototype.loadedTileCallback.call(this,n,i,r)},n.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},n.prototype.renderFrame=function(t,n){var i=t.layerStatesArray[t.layerIndex],r=t.viewState,s=r.projection,u=r.resolution,e=r.center,h=r.rotation,f=t.pixelRatio,a=this.getLayer(),c=a.getSource(),v=c.getRevision(),l=c.getTileGridForProjection(s),d=l.getZForResolution(u,c.zDirection),p=l.getResolution(d),y=t.extent,b=i.extent&&jr(i.extent,s);b&&(y=Wn(y,jr(i.extent,s)));var _=c.getTilePixelRatio(f),g=Math.round(t.size[0]*_),m=Math.round(t.size[1]*_);if(h){var O=Math.round(Math.sqrt(g*g+m*m));g=O,m=O}var M=p*g/2/_,j=p*m/2/_,x=[e[0]-M,e[1]-j,e[0]+M,e[1]+j],S=l.getTileRangeForExtentAndZ(y,d),T={};T[d]={};var A=this.createLoadedTileFinder(c,s,T),C=this.tmpExtent,N=this.bh;this.yh=!1;for(var k=S.minX;k<=S.maxX;++k)for(var P=S.minY;P<=S.maxY;++P){var I=this.getTile(d,k,P,t);if(this.isDrawableTile(I)){var G=o(this);if(I.getState()==at){T[d][I.tileCoord.toString()]=I;var R=I.inTransition(G);this.yh||!R&&-1!==this.renderedTiles.indexOf(I)||(this.yh=!0)}if(1===I.getAlpha(G,t.time))continue}var L=l.getTileCoordChildTileRange(I.tileCoord,N,C),F=!1;L&&(F=A(d+1,L)),F||l.forEachTileCoordParentTileRange(I.tileCoord,A,N,C)}var D=p/u;tn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/_,1/_,h,-g/2,-m/2);var z=sn(this.pixelTransform);this.useContainer(n,z,i.opacity);var U=this.context,X=U.canvas;nn(this.inversePixelTransform,this.pixelTransform),tn(this.tempTransform,g/2,m/2,D,D,0,-g/2,-m/2),X.width!=g||X.height!=m?(X.width=g,X.height=m):this.containerReused||U.clearRect(0,0,g,m),b&&this.clipUnrotated(U,t,b),E(U,c.getContextOptions()),this.preRender(U,t),this.renderedTiles.length=0;var Y,W,B,q=Object.keys(T).map(Number);q.sort(w),1!==i.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(Y=[],W=[]):q=q.reverse();for(var Z=q.length-1;Z>=0;--Z){var J=q[Z],V=c.getTilePixelSize(J,f,s),H=l.getResolution(J)/p,$=V[0]*H*D,K=V[1]*H*D,Q=l.getTileCoordForCoordAndZ(Bn(x),J),tt=l.getTileCoordExtent(Q),nt=Ht(this.tempTransform,[_*(tt[0]-x[0])/p,_*(x[3]-tt[3])/p]),it=_*c.getGutterForProjection(s),rt=T[J];for(var st in rt){var ot=(I=rt[st]).tileCoord,ut=Q[1]-ot[1],et=Math.round(nt[0]-(ut-1)*$),ht=Q[2]-ot[2],ft=Math.round(nt[1]-(ht-1)*K),ct=et-(k=Math.round(nt[0]-ut*$)),vt=ft-(P=Math.round(nt[1]-ht*K)),lt=d===J;if(!(R=lt&&1!==I.getAlpha(o(this),t.time)))if(Y){U.save(),B=[k,P,k+ct,P,k+ct,P+vt,k,P+vt];for(var dt=0,wt=Y.length;dt<wt;++dt)if(d!==J&&J<W[dt]){var pt=Y[dt];U.beginPath(),U.moveTo(B[0],B[1]),U.lineTo(B[2],B[3]),U.lineTo(B[4],B[5]),U.lineTo(B[6],B[7]),U.moveTo(pt[6],pt[7]),U.lineTo(pt[4],pt[5]),U.lineTo(pt[2],pt[3]),U.lineTo(pt[0],pt[1]),U.clip()}Y.push(B),W.push(J)}else U.clearRect(k,P,ct,vt);this.drawTileImage(I,t,k,P,ct,vt,it,lt),Y&&!R?(U.restore(),this.renderedTiles.unshift(I)):this.renderedTiles.push(I),this.updateUsedTiles(t.usedTiles,c,I)}}this.renderedRevision=v,this.renderedResolution=p,this.extentChanged=!this.ph||!Tn(this.ph,x),this.ph=x,this.renderedPixelRatio=f,this.renderedProjection=s,this.manageTilePyramid(t,c,l,f,s,y,d,a.getPreload()),this.scheduleExpireCache(t,c),this.postRender(U,t),i.extent&&U.restore(),z!==X.style.transform&&(X.style.transform=z);var yt=pu(i.opacity),bt=this.container;return yt!==bt.style.opacity&&(bt.style.opacity=yt),this.container},n.prototype.drawTileImage=function(t,n,i,r,s,u,e,h){var f=this.getTileImage(t);if(f){var a=o(this),c=h?t.getAlpha(a,n.time):1,v=c!==this.context.globalAlpha;v&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(f,e,e,f.width-2*e,f.height-2*e,i,r,s,u),v&&this.context.restore(),1!==c?n.animate=!0:h&&t.endTransition(a)}},n.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},n.prototype.getTileImage=function(t){return t.getImage()},n.prototype.scheduleExpireCache=function(t,n){if(n.canExpireCache()){var i=function(t,n,i){var r=o(t);r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}.bind(null,n);t.postRenderFunctions.push(i)}},n.prototype.updateUsedTiles=function(t,n,i){var r=o(n);r in t||(t[r]={}),t[r][i.getKey()]=!0},n.prototype.manageTilePyramid=function(t,n,i,r,s,u,e,h,f){var a=o(n);a in t.wantedTiles||(t.wantedTiles[a]={});var c,v,l,d,w,p,y=t.wantedTiles[a],b=t.tileQueue,_=0;for(p=i.getMinZoom();p<=e;++p)for(v=i.getTileRangeForExtentAndZ(u,p,v),l=i.getResolution(p),d=v.minX;d<=v.maxX;++d)for(w=v.minY;w<=v.maxY;++w)e-p<=h?(++_,(c=n.getTile(p,d,w,r,s)).getState()==ht&&(y[c.getKey()]=!0,b.isKeyQueued(c.getKey())||b.enqueue([c,a,i.getTileCoordCenter(c.tileCoord),l])),void 0!==f&&f(c)):n.useTile(p,d,w,s);n.updateCacheSize(_,s)},n}(od);wd.prototype.getLayer;var pd,yd=wd,bd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_d=function(t){function n(n){return t.call(this,n)||this}return bd(n,t),n.prototype.createRenderer=function(){return new yd(this)},n}(ld),gd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),md=!0;try{new ImageData(10,10)}catch(t){md=!1}function Od(t,n,i){if(md)return new ImageData(t,n,i);pd||(pd=document.createElement("canvas").getContext("2d"));var r=pd.createImageData(n,i);return r.data.set(t),r}function Md(t){var n=!0;try{new ImageData(10,10)}catch(t){n=!1}function i(t,i,r){return n?new ImageData(t,i,r):{data:t,width:i,height:r}}return function(n){var r=n.buffers,s=n.meta,o=n.imageOps,u=n.width,e=n.height,h=r.length,f=r[0].byteLength;if(o){for(var a=new Array(h),c=0;c<h;++c)a[c]=i(new Uint8ClampedArray(r[c]),u,e);return t(a,s).data.buffer}var v=new Uint8ClampedArray(f),l=new Array(h),d=new Array(h);for(c=0;c<h;++c)l[c]=new Uint8ClampedArray(r[c]),d[c]=[0,0,0,0];for(var w=0;w<f;w+=4){for(var p=0;p<h;++p){var y=l[p];d[p][0]=y[w],d[p][1]=y[w+1],d[p][2]=y[w+2],d[p][3]=y[w+3]}var b=t(d,s);v[w]=b[0],v[w+1]=b[1],v[w+2]=b[2],v[w+3]=b[3]}return v.buffer}}function jd(t,n){var i=Object.keys(t.lib||{}).map((function(n){return"var "+n+" = "+t.lib[n].toString()+";"})).concat(["var __minion__ = ("+Md.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Blob(i,{type:"text/javascript"}),s=URL.createObjectURL(r),o=new Worker(s);return o.addEventListener("message",n),o}var xd=function(t){function n(n){var i,r=t.call(this)||this;r._imageOps=!!n.imageOps,i=0===n.threads?0:r._imageOps?1:n.threads||1;var s=new Array(i);if(i)for(var o=0;o<i;++o)s[o]=jd(n,r._onWorkerMessage.bind(r,o));else s[0]=function(t,n){var i=Md(t.operation),r=!1;return{postMessage:function(t){setTimeout((function(){r||n({data:{buffer:i(t),meta:t.meta}})}),0)},terminate:function(){r=!0}}}(n,r._onWorkerMessage.bind(r,0));return r._workers=s,r._queue=[],r._maxQueueLength=n.queue||1/0,r._running=0,r._dataLookup={},r._job=null,r}return gd(n,t),n.prototype.process=function(t,n,i){this._enqueue({inputs:t,meta:n,callback:i}),this._dispatch()},n.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},n.prototype._dispatch=function(){if(!this._running&&0!==this._queue.length){var t=this._queue.shift();this._job=t;var n=t.inputs[0].width,i=t.inputs[0].height,r=t.inputs.map((function(t){return t.data.buffer})),s=this._workers.length;if(this._running=s,1!==s)for(var o=t.inputs[0].data.length,u=4*Math.ceil(o/4/s),e=0;e<s;++e){for(var h=e*u,f=[],a=0,c=r.length;a<c;++a)f.push(r[a].slice(h,h+u));this._workers[e].postMessage({buffers:f,meta:t.meta,imageOps:this._imageOps,width:n,height:i},f)}else this._workers[0].postMessage({buffers:r,meta:t.meta,imageOps:this._imageOps,width:n,height:i},r)}},n.prototype._onWorkerMessage=function(t,n){this.disposed||(this._dataLookup[t]=n.data,--this._running,0===this._running&&this._resolveJob())},n.prototype._resolveJob=function(){var t,n,i=this._job,r=this._workers.length;if(1===r)t=new Uint8ClampedArray(this._dataLookup[0].buffer),n=this._dataLookup[0].meta;else{var s=i.inputs[0].data.length;t=new Uint8ClampedArray(s),n=new Array(r);for(var o=4*Math.ceil(s/4/r),u=0;u<r;++u){var e=this._dataLookup[u].buffer,h=u*o;t.set(new Uint8ClampedArray(e),h),n[u]=this._dataLookup[u].meta}}this._job=null,this._dataLookup={},i.callback(null,Od(t,i.inputs[0].width,i.inputs[0].height),n),this._dispatch()},n.prototype.disposeInternal=function(){for(var t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0},n}(l),Ed="beforeoperations",Sd="afteroperations",Td="pixel",Ad="image",Cd=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.extent=i.extent,s.resolution=i.viewState.resolution/i.pixelRatio,s.data=r,s}return gd(n,t),n}(c),Nd=function(t){function n(n){var i=t.call(this,{projection:null})||this;i.on,i.once,i.un,i._h=null,i.gh=void 0!==n.operationType?n.operationType:Td,i.mh=void 0!==n.threads?n.threads:1,i.Oh=function(t){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=Id(t[r]);return i}(n.sources);for(var r,s=i.changed.bind(i),o=0,u=i.Oh.length;o<u;++o)i.Oh[o].addEventListener(k,s);return i.Di=new ve((function(){return 1}),i.changed.bind(i)),i.Mh,i.jh=null,i.Ze,i.ji={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(r=i.Oh,r.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:i.Di,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},i.setAttributions((function(t){for(var i=[],r=0,s=n.sources.length;r<s;++r){var o=n.sources[r],u=(o instanceof ol?o:o.getSource()).getAttributions();if("function"==typeof u){var e=u(t);i.push.apply(i,e)}}return 0!==i.length?i:null})),void 0!==n.operation&&i.setOperation(n.operation,n.lib),i}return gd(n,t),n.prototype.setOperation=function(t,n){this._h&&this._h.dispose(),this._h=new xd({operation:t,imageOps:this.gh===Ad,queue:1,lib:n,threads:this.mh}),this.changed()},n.prototype.xh=function(t,n,i){var r=E({},this.ji);r.viewState=E({},r.viewState);var s=zn(t);r.extent=t.slice(),r.size[0]=Math.round(Zn(t)/n),r.size[1]=Math.round(Yn(t)/n),r.time=Date.now();var o=r.viewState;return o.center=s,o.projection=i,o.resolution=n,r},n.prototype.Eh=function(){for(var t=!0,n=0,i=this.Oh.length;n<i;++n)if(this.Oh[n].getSource().getState()!==Ko){t=!1;break}return t},n.prototype.getImage=function(t,n,i,r){if(!this.Eh())return null;var s=this.xh(t,n,r);if(this.Mh=s,this.jh){var o=this.jh.getResolution(),u=this.jh.getExtent();n===o&&Tn(t,u)||(this.jh=null)}return this.jh&&this.getRevision()===this.Ze||this.Sh(),s.tileQueue.loadMoreTiles(16,16),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.jh},n.prototype.Sh=function(){for(var t=this.Mh,n=this.Oh.length,i=new Array(n),r=0;r<n;++r){t.layerIndex=r;var s=Pd(this.Oh[r],t);if(!s)return;i[r]=s}var o={};this.dispatchEvent(new Cd(Ed,t,o)),this._h.process(i,o,this.Th.bind(this,t))},n.prototype.Th=function(t,n,i,r){if(!n&&i){var s=t.extent,o=t.viewState.resolution;if(o===this.Mh.viewState.resolution&&Tn(s,this.Mh.extent)){var u;if(this.jh)u=this.jh.getImage().getContext("2d");else u=ao(Math.round(Zn(s)/o),Math.round(Yn(s)/o)),this.jh=new fo(s,o,1,u.canvas);u.putImageData(i,0,0),this.changed(),this.Ze=this.getRevision(),this.dispatchEvent(new Cd(Sd,t,r)),t.animate&&requestAnimationFrame(this.changed.bind(this))}}},n.prototype.disposeInternal=function(){this._h&&this._h.dispose(),t.prototype.disposeInternal.call(this)},n}(Ll);Nd.prototype.dispose;var kd=null;function Pd(t,n){var i=t.getRenderer();if(!i)throw new Error("Unsupported layer type: "+t);if(!i.prepareFrame(n))return null;var r=n.size[0],s=n.size[1];if(0===r||0===s)return null;var o,u=i.renderFrame(n,null);if(u&&(o=u.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===s)return o.getContext("2d").getImageData(0,0,r,s);if(kd){var e=kd.canvas;e.width!==r||e.height!==s?kd=ao(r,s):kd.clearRect(0,0,r,s)}else kd=ao(r,s);return kd.drawImage(o,0,0,r,s),kd.getImageData(0,0,r,s)}function Id(t){var n;return t instanceof ol?t instanceof jl?n=new _d({source:t}):t instanceof Ll&&(n=new fd({source:t})):n=t,n}var Gd=Nd,Rd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ld=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection,url:r.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,n){var r=t.getTileCoord()[0],s=Ue(i.tileGrid.getTileSize(r)),o=ao(s[0],s[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,s[0]+.5,s[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(n,s[0]/2,s[1]/2,s[0]),o.fillText(n,s[0]/2,s[1]/2,s[0]),t.setImage(o.canvas)}})||this}return Rd(n,t),n}(Kl),Fd={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Dd=[Fd.FILL],zd=[Fd.STROKE],Ud=[Fd.BEGIN_PATH],Xd=[Fd.CLOSE_PATH],Yd=Fd,Wd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bd=function(t){function n(n,i,r,s){var o=t.call(this)||this;return o.tolerance=n,o.maxExtent=i,o.pixelRatio=s,o.maxLineWidth=0,o.resolution=r,o.Ah=null,o.Ch=null,o.Nh=null,o.instructions=[],o.coordinates=[],o.kh=[],o.hitDetectionInstructions=[],o.state={},o}return Wd(n,t),n.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return 1==n?t:t.map((function(t){return t*n}))},n.prototype.appendFlatPointCoordinates=function(t,n){for(var i=this.getBufferedMaxExtent(),r=this.kh,s=this.coordinates,o=s.length,u=0,e=t.length;u<e;u+=n)r[0]=t[u],r[1]=t[u+1],_n(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o},n.prototype.appendFlatLineCoordinates=function(t,n,i,r,s,o){var u=this.coordinates,e=u.length,h=this.getBufferedMaxExtent();o&&(n+=r);var f,a,c,v=t[n],l=t[n+1],d=this.kh,w=!0;for(f=n+r;f<i;f+=r)d[0]=t[f],d[1]=t[f+1],(c=On(h,d))!==a?(w&&(u[e++]=v,u[e++]=l,w=!1),u[e++]=d[0],u[e++]=d[1]):c===an?(u[e++]=d[0],u[e++]=d[1],w=!1):w=!0,v=d[0],l=d[1],a=c;return(s&&w||f===n+r)&&(u[e++]=v,u[e++]=l),e},n.prototype.Ph=function(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o],h=this.appendFlatLineCoordinates(t,n,e,r,!1,!1);s.push(h),n=e}return n},n.prototype.drawCustom=function(t,n,i,r){this.beginGeometry(t,n);var s,o,u,e,h,f=t.getType(),a=t.getStride(),c=this.coordinates.length;switch(f){case At.MULTI_POLYGON:s=t.getOrientedFlatCoordinates(),e=[];var v=t.getEndss();h=0;for(var l=0,d=v.length;l<d;++l){var w=[];h=this.Ph(s,h,v[l],a,w),e.push(w)}this.instructions.push([Yd.CUSTOM,c,e,t,i,us]),this.hitDetectionInstructions.push([Yd.CUSTOM,c,e,t,r||i,us]);break;case At.POLYGON:case At.MULTI_LINE_STRING:u=[],s=f==At.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.Ph(s,0,t.getEnds(),a,u),this.instructions.push([Yd.CUSTOM,c,u,t,i,os]),this.hitDetectionInstructions.push([Yd.CUSTOM,c,u,t,r||i,os]);break;case At.LINE_STRING:case At.CIRCLE:s=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(s,0,s.length,a,!1,!1),this.instructions.push([Yd.CUSTOM,c,o,t,i,ss]),this.hitDetectionInstructions.push([Yd.CUSTOM,c,o,t,r||i,ss]);break;case At.MULTI_POINT:s=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(s,a))>c&&(this.instructions.push([Yd.CUSTOM,c,o,t,i,ss]),this.hitDetectionInstructions.push([Yd.CUSTOM,c,o,t,r||i,ss]));break;case At.POINT:s=t.getFlatCoordinates(),this.coordinates.push(s[0],s[1]),o=this.coordinates.length,this.instructions.push([Yd.CUSTOM,c,o,t,i]),this.hitDetectionInstructions.push([Yd.CUSTOM,c,o,t,r||i])}this.endGeometry(n)},n.prototype.beginGeometry=function(t,n){this.Ah=[Yd.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.Ah),this.Ch=[Yd.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.Ch)},n.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},n.prototype.reverseHitDetectionInstructions=function(){var t,n=this.hitDetectionInstructions;n.reverse();var i,r,s=n.length,o=-1;for(t=0;t<s;++t)(r=(i=n[t])[0])==Yd.END_GEOMETRY?o=t:r==Yd.BEGIN_GEOMETRY&&(i[2]=t,b(this.hitDetectionInstructions,o,t),o=-1)},n.prototype.setFillStrokeStyle=function(t,n){var i=this.state;if(t){var r=t.getColor();i.fillStyle=Rf(r||bu)}else i.fillStyle=void 0;if(n){var s=n.getColor();i.strokeStyle=Rf(s||Mu);var o=n.getLineCap();i.lineCap=void 0!==o?o:_u;var u=n.getLineDash();i.lineDash=u?u.slice():gu;var e=n.getLineDashOffset();i.lineDashOffset=e||0;var h=n.getLineJoin();i.lineJoin=void 0!==h?h:mu;var f=n.getWidth();i.lineWidth=void 0!==f?f:1;var a=n.getMiterLimit();i.miterLimit=void 0!==a?a:Ou,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.Nh=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},n.prototype.createFill=function(t){var n=t.fillStyle,i=[Yd.SET_FILL_STYLE,n];return"string"!=typeof n&&i.push(!0),i},n.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},n.prototype.createStroke=function(t){return[Yd.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},n.prototype.updateFillStyle=function(t,n){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)},n.prototype.updateStrokeStyle=function(t,n){var i=t.strokeStyle,r=t.lineCap,s=t.lineDash,o=t.lineDashOffset,u=t.lineJoin,e=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||s!=t.currentLineDash&&!g(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=u||t.currentLineWidth!=e||t.currentMiterLimit!=h)&&(void 0!==i&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=u,t.currentLineWidth=e,t.currentMiterLimit=h)},n.prototype.endGeometry=function(t){this.Ah[2]=this.instructions.length,this.Ah=null,this.Ch[2]=this.hitDetectionInstructions.length,this.Ch=null;var n=[Yd.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},n.prototype.getBufferedMaxExtent=function(){if(!this.Nh&&(this.Nh=yn(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;pn(this.Nh,t,this.Nh)}return this.Nh},n}(Vf),qd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Zd=function(t){function n(n,i,r,s){var o=t.call(this,n,i,r,s)||this;return o.Eo=null,o.yt=null,o.Ih=void 0,o.Gh=void 0,o.Rh=void 0,o.Lh=void 0,o.eo=void 0,o.Fh=void 0,o.Dh=void 0,o.ho=void 0,o.lr=void 0,o.fo=void 0,o.Wo=void 0,o.zh=void 0,o}return qd(n,t),n.prototype.drawPoint=function(t,n){if(this.yt){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Yd.DRAW_IMAGE,s,o,this.yt,this.Gh*this.Ih,this.Rh*this.Ih,Math.ceil(this.Lh*this.Ih),this.eo,this.Fh,this.Dh,this.ho,this.lr,[this.fo[0]*this.pixelRatio/this.Ih,this.fo[1]*this.pixelRatio/this.Ih],Math.ceil(this.Wo*this.Ih),this.zh]),this.hitDetectionInstructions.push([Yd.DRAW_IMAGE,s,o,this.Eo,this.Gh,this.Rh,this.Lh,this.eo,this.Fh,this.Dh,this.ho,this.lr,this.fo,this.Wo,this.zh]),this.endGeometry(n)}},n.prototype.drawMultiPoint=function(t,n){if(this.yt){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Yd.DRAW_IMAGE,s,o,this.yt,this.Gh*this.Ih,this.Rh*this.Ih,Math.ceil(this.Lh*this.Ih),this.eo,this.Fh,this.Dh,this.ho,this.lr,[this.fo[0]*this.pixelRatio/this.Ih,this.fo[1]*this.pixelRatio/this.Ih],Math.ceil(this.Wo*this.Ih),this.zh]),this.hitDetectionInstructions.push([Yd.DRAW_IMAGE,s,o,this.Eo,this.Gh,this.Rh,this.Lh,this.eo,this.Fh,this.Dh,this.ho,this.lr,this.fo,this.Wo,this.zh]),this.endGeometry(n)}},n.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.Gh=void 0,this.Rh=void 0,this.Eo=null,this.yt=null,this.Ih=void 0,this.Lh=void 0,this.fo=void 0,this.eo=void 0,this.Fh=void 0,this.Dh=void 0,this.ho=void 0,this.lr=void 0,this.Wo=void 0,t.prototype.finish.call(this)},n.prototype.setImageStyle=function(t,n){var i=t.getAnchor(),r=t.getSize(),s=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),u=t.getOrigin();this.Ih=t.getPixelRatio(this.pixelRatio),this.Gh=i[0],this.Rh=i[1],this.Eo=s,this.yt=o,this.Lh=r[1],this.eo=t.getOpacity(),this.Fh=u[0]*this.Ih,this.Dh=u[1]*this.Ih,this.ho=t.getRotateWithView(),this.lr=t.getRotation(),this.fo=t.getScaleArray(),this.Wo=r[0],this.zh=n},n}(Bd),Jd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Vd=function(t){function n(n,i,r,s){return t.call(this,n,i,r,s)||this}return Jd(n,t),n.prototype.Uh=function(t,n,i,r){var s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,r,!1,!1),u=[Yd.MOVE_TO_LINE_TO,s,o];return this.instructions.push(u),this.hitDetectionInstructions.push(u),i},n.prototype.drawLineString=function(t,n){var i=this.state,r=i.strokeStyle,s=i.lineWidth;if(void 0!==r&&void 0!==s){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([Yd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,gu,0],Ud);var o=t.getFlatCoordinates(),u=t.getStride();this.Uh(o,0,o.length,u),this.hitDetectionInstructions.push(zd),this.endGeometry(n)}},n.prototype.drawMultiLineString=function(t,n){var i=this.state,r=i.strokeStyle,s=i.lineWidth;if(void 0!==r&&void 0!==s){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([Yd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Ud);for(var o=t.getEnds(),u=t.getFlatCoordinates(),e=t.getStride(),h=0,f=0,a=o.length;f<a;++f)h=this.Uh(u,h,o[f],e);this.hitDetectionInstructions.push(zd),this.endGeometry(n)}},n.prototype.finish=function(){var n=this.state;return null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&this.instructions.push(zd),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},n.prototype.applyStroke=function(n){null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&(this.instructions.push(zd),n.lastStroke=this.coordinates.length),n.lastStroke=0,t.prototype.applyStroke.call(this,n),this.instructions.push(Ud)},n}(Bd),Hd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$d=function(t){function n(n,i,r,s){return t.call(this,n,i,r,s)||this}return Hd(n,t),n.prototype.Xh=function(t,n,i,r){var s=this.state,o=void 0!==s.fillStyle,u=void 0!==s.strokeStyle,e=i.length;this.instructions.push(Ud),this.hitDetectionInstructions.push(Ud);for(var h=0;h<e;++h){var f=i[h],a=this.coordinates.length,c=this.appendFlatLineCoordinates(t,n,f,r,!0,!u),v=[Yd.MOVE_TO_LINE_TO,a,c];this.instructions.push(v),this.hitDetectionInstructions.push(v),u&&(this.instructions.push(Xd),this.hitDetectionInstructions.push(Xd)),n=f}return o&&(this.instructions.push(Dd),this.hitDetectionInstructions.push(Dd)),u&&(this.instructions.push(zd),this.hitDetectionInstructions.push(zd)),n},n.prototype.drawCircle=function(t,n){var i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0!==r||void 0!==s){this.Yh(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Yd.SET_FILL_STYLE,bu]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Yd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),u=t.getStride(),e=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,u,!1,!1);var h=[Yd.CIRCLE,e];this.instructions.push(Ud,h),this.hitDetectionInstructions.push(Ud,h),void 0!==i.fillStyle&&(this.instructions.push(Dd),this.hitDetectionInstructions.push(Dd)),void 0!==i.strokeStyle&&(this.instructions.push(zd),this.hitDetectionInstructions.push(zd)),this.endGeometry(n)}},n.prototype.drawPolygon=function(t,n){var i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0!==r||void 0!==s){this.Yh(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Yd.SET_FILL_STYLE,bu]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Yd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),u=t.getOrientedFlatCoordinates(),e=t.getStride();this.Xh(u,0,o,e),this.endGeometry(n)}},n.prototype.drawMultiPolygon=function(t,n){var i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0!==r||void 0!==s){this.Yh(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Yd.SET_FILL_STYLE,bu]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Yd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),u=t.getOrientedFlatCoordinates(),e=t.getStride(),h=0,f=0,a=o.length;f<a;++f)h=this.Xh(u,h,o[f],e);this.endGeometry(n)}},n.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var n=this.tolerance;if(0!==n)for(var i=this.coordinates,r=0,s=i.length;r<s;++r)i[r]=ts(i[r],n);return t.prototype.finish.call(this)},n.prototype.Yh=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},n}(Bd);function Kd(t,n,i,r,s){var o,u,e,h,f,a,c,v,l,d=i,w=i,p=0,y=0,b=i;for(o=i;o<r;o+=s){var _=n[o],g=n[o+1];void 0!==h&&(v=_-h,l=g-f,e=Math.sqrt(v*v+l*l),void 0!==a&&(y+=u,Math.acos((a*v+c*l)/(u*e))>t&&(y>p&&(p=y,d=b,w=o),y=0,b=o-s)),u=e,a=v,c=l),h=_,f=g}return(y+=e)>p?[b,o]:[d,w]}var Qd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tw={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},nw=function(t){function n(n,i,r,s){var o=t.call(this,n,i,r,s)||this;return o.Wh=null,o.ks="",o.Ps=0,o.Is=0,o.Gs=void 0,o.Rs=0,o.Fs=null,o.fillStates={},o.Ds=null,o.strokeStates={},o.zs={},o.textStates={},o.Bh="",o.qh="",o.Zh="",o.zh=void 0,o}return Qd(n,t),n.prototype.finish=function(){var n=t.prototype.finish.call(this);return n.textStates=this.textStates,n.fillStates=this.fillStates,n.strokeStates=this.strokeStates,n},n.prototype.drawText=function(t,n){var i=this.Fs,r=this.Ds,s=this.zs;if(""!==this.ks&&s&&(i||r)){var o=this.coordinates,u=o.length,e=t.getType(),h=null,f=t.getStride();if(s.placement!==Nc||e!=At.LINE_STRING&&e!=At.MULTI_LINE_STRING&&e!=At.POLYGON&&e!=At.MULTI_POLYGON){var a=s.overflow?null:[];switch(e){case At.POINT:case At.MULTI_POINT:h=t.getFlatCoordinates();break;case At.LINE_STRING:h=t.getFlatMidpoint();break;case At.CIRCLE:h=t.getCenter();break;case At.MULTI_LINE_STRING:h=t.getFlatMidpoints(),f=2;break;case At.POLYGON:h=t.getFlatInteriorPoint(),s.overflow||a.push(h[2]/this.resolution),f=3;break;case At.MULTI_POLYGON:var c=t.getFlatInteriorPoints();h=[];for(O=0,M=c.length;O<M;O+=3)s.overflow||a.push(c[O+2]/this.resolution),h.push(c[O],c[O+1]);if(0===h.length)return;f=2}if((C=this.appendFlatPointCoordinates(h,f))===u)return;if(a&&(C-u)/2!=h.length/f){var v=u/2;a=a.filter((function(t,n){var i=o[2*(v+n)]===h[n*f]&&o[2*(v+n)+1]===h[n*f+1];return i||--v,i}))}this.Jh(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var l=s.padding;if(l!=Eu&&(s.scale[0]<0||s.scale[1]<0)){var d=s.padding[0],w=s.padding[1],p=s.padding[2],y=s.padding[3];s.scale[0]<0&&(w=-w,y=-y),s.scale[1]<0&&(d=-d,p=-p),l=[d,w,p,y]}var b=this.pixelRatio;this.instructions.push([Yd.DRAW_IMAGE,u,C,null,NaN,NaN,NaN,1,0,0,this.Gs,this.Rs,[1,1],NaN,this.zh,l==Eu?Eu:l.map((function(t){return t*b})),!!s.backgroundFill,!!s.backgroundStroke,this.ks,this.Bh,this.Zh,this.qh,this.Ps,this.Is,a]);var _=1/b;this.hitDetectionInstructions.push([Yd.DRAW_IMAGE,u,C,null,NaN,NaN,NaN,1,0,0,this.Gs,this.Rs,[_,_],NaN,this.zh,l,!!s.backgroundFill,!!s.backgroundStroke,this.ks,this.Bh,this.Zh,this.qh,this.Ps,this.Is,a]),this.endGeometry(n)}else{if(!Jn(this.getBufferedMaxExtent(),t.getExtent()))return;var g=void 0;if(h=t.getFlatCoordinates(),e==At.LINE_STRING)g=[h.length];else if(e==At.MULTI_LINE_STRING)g=t.getEnds();else if(e==At.POLYGON)g=t.getEnds().slice(0,1);else if(e==At.MULTI_POLYGON){var m=t.getEndss();g=[];for(var O=0,M=m.length;O<M;++O)g.push(m[O][0])}this.beginGeometry(t,n);for(var j=s.textAlign,x=0,E=void 0,S=0,T=g.length;S<T;++S){if(null==j){var A=Kd(s.maxAngle,h,x,g[S],f);x=A[0],E=A[1]}else E=g[S];for(var O=x;O<E;O+=f)o.push(h[O],h[O+1]);var C=o.length;x=g[S],this.Vh(u,C),u=C}this.endGeometry(n)}}},n.prototype.Jh=function(){var t=this.Ds,n=this.zs,i=this.Fs,r=this.Zh;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var s=this.Bh;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||ju,textBaseline:n.textBaseline||xu,scale:n.scale});var o=this.qh;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},n.prototype.Vh=function(t,n){var i=this.Ds,r=this.zs,s=this.Zh,o=this.Bh,u=this.qh;this.Jh();var e=this.pixelRatio,h=tw[r.textBaseline],f=this.Is*e,a=this.ks,c=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Yd.DRAW_CHARS,t,n,h,r.overflow,u,r.maxAngle,e,f,s,c*e,a,o,1]),this.hitDetectionInstructions.push([Yd.DRAW_CHARS,t,n,h,r.overflow,u,r.maxAngle,1,f,s,c,a,o,1/e])},n.prototype.setTextStyle=function(t,n){var i,r,s;if(t){var u=t.getFill();u?((r=this.Fs)||(r={},this.Fs=r),r.fillStyle=Rf(u.getColor()||bu)):(r=null,this.Fs=r);var e=t.getStroke();if(e){(s=this.Ds)||(s={},this.Ds=s);var h=e.getLineDash(),f=e.getLineDashOffset(),a=e.getWidth(),c=e.getMiterLimit();s.lineCap=e.getLineCap()||_u,s.lineDash=h?h.slice():gu,s.lineDashOffset=void 0===f?0:f,s.lineJoin=e.getLineJoin()||mu,s.lineWidth=void 0===a?1:a,s.miterLimit=void 0===c?Ou:c,s.strokeStyle=Rf(e.getColor()||Mu)}else s=null,this.Ds=s;i=this.zs;var v=t.getFont()||yu;Pu(v);var l=t.getScaleArray();i.overflow=t.getOverflow(),i.font=v,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||xu,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Eu,i.scale=void 0===l?[1,1]:l;var d=t.getOffsetX(),w=t.getOffsetY(),p=t.getRotateWithView(),y=t.getRotation();this.ks=t.getText()||"",this.Ps=void 0===d?0:d,this.Is=void 0===w?0:w,this.Gs=void 0!==p&&p,this.Rs=void 0===y?0:y,this.Zh=s?("string"==typeof s.strokeStyle?s.strokeStyle:o(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.Bh=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.qh=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+o(r.fillStyle):""}else this.ks="";this.zh=n},n}(Bd),iw={Circle:$d,Default:Bd,Image:Zd,LineString:Vd,Polygon:$d,Text:nw},rw=function(){function t(t,n,i,r){this.Hh=t,this.$h=n,this.dt=r,this.Kh=i,this.Qh={}}return t.prototype.finish=function(){var t={};for(var n in this.Qh){t[n]=t[n]||{};var i=this.Qh[n];for(var r in i){var s=i[r].finish();t[n][r]=s}}return t},t.prototype.getBuilder=function(t,n){var i=void 0!==t?t.toString():"0",r=this.Qh[i];void 0===r&&(r={},this.Qh[i]=r);var s=r[n];void 0===s&&(s=new(0,iw[n])(this.Hh,this.$h,this.Kh,this.dt),r[n]=s);return s},t}();function sw(t,n,i,r,s,o,u,e,h,f,a,c){var v=t[n],l=t[n+1],d=0,w=0,p=0,y=0;function b(){d=v,w=l,v=t[n+=r],l=t[n+1],y+=p,p=Math.sqrt((v-d)*(v-d)+(l-w)*(l-w))}do{b()}while(n<i-r&&y+p<o);for(var _=0===p?0:(o-y)/p,g=ci(d,v,_),m=ci(w,l,_),O=n-r,M=y,j=o+e*h(f,s,a);n<i-r&&y+p<j;)b();var x,E=ci(d,v,_=0===p?0:(j-y)/p),S=ci(w,l,_);if(c){var T=[g,m,E,S];Cr(T,0,4,2,c,T,T),x=T[0]>T[2]}else x=g>E;var A,C=Math.PI,N=[],k=O+r===n;if(p=0,y=M,v=t[n=O],l=t[n+1],k){b(),A=Math.atan2(l-w,v-d),x&&(A+=A>0?-C:C);var P=(E+g)/2,I=(S+m)/2;return N[0]=[P,I,(j-o)/2,A,s],N}for(var G=0,R=s.length;G<R;){b();var L=Math.atan2(l-w,v-d);if(x&&(L+=L>0?-C:C),void 0!==A){var F=L-A;if(F+=F>C?-2*C:F<-C?2*C:0,Math.abs(F)>u)return null}A=L;for(var D=G,z=0;G<R;++G){var U=e*h(f,s[x?R-G-1:G],a);if(n+r<i&&y+p<o+z+U/2)break;z+=U}if(G!==D){var X=x?s.substring(R-D,R-G):s.substring(D,G);P=ci(d,v,_=0===p?0:(o+z/2-y)/p),I=ci(w,l,_);N.push([P,I,z/2,L,X]),o+=z}}return N}function ow(t,n,i,r){for(var s=t[n],o=t[n+1],u=0,e=n+r;e<i;e+=r){var h=t[e],f=t[e+1];u+=Math.sqrt((h-s)*(h-s)+(f-o)*(f-o)),s=h,o=f}return u}var uw=[1/0,1/0,-1/0,-1/0],ew=[],hw=[],fw=[],aw=[];function cw(t){return t[3].declutterBox}var vw=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function lw(t,n){return"start"!==n&&"end"!==n||vw.test(t)||(n="start"===n?"left":"right"),tw[n]}var dw=function(){function t(t,n,i,r){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.tf,this.instructions=r.instructions,this.coordinates=r.coordinates,this.nf={},this.if=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.Us=null,this.ls=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.rf={},this.Wh={}}return t.prototype.createLabel=function(t,n,i,r){var s=t+n+i+r;if(this.Wh[s])return this.Wh[s];var o=r?this.strokeStates[r]:null,u=i?this.fillStates[i]:null,e=this.textStates[n],h=this.pixelRatio,f=[e.scale[0]*h,e.scale[1]*h],a=lw(t,e.textAlign||ju),c=r&&o.lineWidth?o.lineWidth:0,v=t.split("\n"),l=v.length,d=[],w=Fu(e.font,v,d),p=Iu(e.font),y=w+c,b=[],_=(y+2)*f[0],g=(p*l+c)*f[1],m={width:_<0?Math.floor(_):Math.ceil(_),height:g<0?Math.floor(g):Math.ceil(g),contextInstructions:b};(1==f[0]&&1==f[1]||b.push("scale",f),b.push("font",e.font),r)&&(b.push("strokeStyle",o.strokeStyle),b.push("lineWidth",c),b.push("lineCap",o.lineCap),b.push("lineJoin",o.lineJoin),b.push("miterLimit",o.miterLimit),(Ut?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(b.push("setLineDash",[o.lineDash]),b.push("lineDashOffset",o.lineDashOffset)));i&&b.push("fillStyle",u.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");var O,M=.5-a,j=a*y+M*c;if(r)for(O=0;O<l;++O)b.push("strokeText",[v[O],j+M*d[O],.5*(c+p)+O*p]);if(i)for(O=0;O<l;++O)b.push("fillText",[v[O],j+M*d[O],.5*(c+p)+O*p]);return this.Wh[s]=m,m},t.prototype.sf=function(t,n,i,r,s,o,u){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,n),o&&(this.tf=o[2],this.lo(t)),u&&(this.uf(t,u),t.stroke())},t.prototype.ef=function(t,n,i,r,s,o,u,e,h,f,a,c,v,l,d,w){var p,y=i-(u*=c[0]),b=r-(e*=c[1]),_=s+h>t?t-h:s,g=o+f>n?n-f:o,m=l[3]+_*c[0]+l[1],O=l[0]+g*c[1]+l[2],M=y-l[3],j=b-l[0];return(d||0!==a)&&(ew[0]=M,aw[0]=M,ew[1]=j,hw[1]=j,hw[0]=M+m,fw[0]=hw[0],fw[1]=j+O,aw[1]=fw[1]),0!==a?(Ht(p=tn([1,0,0,1,0,0],i,r,1,1,a,-i,-r),ew),Ht(p,hw),Ht(p,fw),Ht(p,aw),jn(Math.min(ew[0],hw[0],fw[0],aw[0]),Math.min(ew[1],hw[1],fw[1],aw[1]),Math.max(ew[0],hw[0],fw[0],aw[0]),Math.max(ew[1],hw[1],fw[1],aw[1]),uw)):jn(Math.min(M,M+m),Math.min(j,j+O),Math.max(M,M+m),Math.max(j,j+O),uw),v&&(y=Math.round(y),b=Math.round(b)),{drawImageX:y,drawImageY:b,drawImageW:_,drawImageH:g,originX:h,originY:f,declutterBox:{minX:uw[0],minY:uw[1],maxX:uw[2],maxY:uw[3],value:w},canvasTransform:p,scale:c}},t.prototype.hf=function(t,n,i,r,s,o,u){var e=!(!o&&!u),h=r.declutterBox,f=t.canvas,a=u?u[2]*r.scale[0]/2:0;return h.minX-a<=f.width/n&&h.maxX+a>=0&&h.minY-a<=f.height/n&&h.maxY+a>=0&&(e&&this.sf(t,ew,hw,fw,aw,o,u),Du(t,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},t.prototype.lo=function(t){if(this.tf){var n=Ht(this.if,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.ls)}t.fill(),this.tf&&t.restore()},t.prototype.uf=function(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.setLineDash&&(t.lineDashOffset=n[7],t.setLineDash(n[6]))},t.prototype.ff=function(t,n,i,r){var s=this.textStates[n],o=this.createLabel(t,n,r,i),u=this.strokeStates[i],e=this.pixelRatio,h=lw(t,s.textAlign||ju),f=tw[s.textBaseline||xu],a=u&&u.lineWidth?u.lineWidth:0;return{label:o,anchorX:h*(o.width/e-2*s.scale[0])+2*(.5-h)*a,anchorY:f*o.height/e+2*(.5-f)*a}},t.prototype.af=function(t,n,i,r,s,o,u,e){var h;this.Us&&g(i,this.if)?h=this.Us:(this.Us||(this.Us=[]),h=Ar(this.coordinates,0,this.coordinates.length,2,i,this.Us),Vt(this.if,i));for(var f,a,c,v,l,d,w,p,y,b,_,m,O,M,j,x,E=0,S=r.length,T=0,A=0,C=0,N=null,k=null,P=this.nf,I=this.ls,G=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,R={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:I},L=this.instructions!=r||this.overlaps?0:200;E<S;){var F=r[E];switch(F[0]){case Yd.BEGIN_GEOMETRY:O=F[1],x=F[3],O.getGeometry()?void 0===u||Jn(u,x.getExtent())?++E:E=F[2]+1:E=F[2];break;case Yd.BEGIN_PATH:A>L&&(this.lo(t),A=0),C>L&&(t.stroke(),C=0),A||C||(t.beginPath(),v=NaN,l=NaN),++E;break;case Yd.CIRCLE:var D=h[T=F[1]],z=h[T+1],U=h[T+2]-D,X=h[T+3]-z,Y=Math.sqrt(U*U+X*X);t.moveTo(D+Y,z),t.arc(D,z,Y,0,2*Math.PI,!0),++E;break;case Yd.CLOSE_PATH:t.closePath(),++E;break;case Yd.CUSTOM:T=F[1],f=F[2];var W=F[3],B=F[4],q=6==F.length?F[5]:void 0;R.geometry=W,R.feature=O,E in P||(P[E]=[]);var Z=P[E];q?q(h,T,f,2,Z):(Z[0]=h[T],Z[1]=h[T+1],Z.length=2),B(Z,R),++E;break;case Yd.DRAW_IMAGE:T=F[1],f=F[2],p=F[3],a=F[4],c=F[5];var J=F[6],V=F[7],H=F[8],$=F[9],K=F[10],Q=F[11],tt=F[12],nt=F[13],it=F[14];if(!p&&F.length>=19){y=F[18],b=F[19],_=F[20],m=F[21];var rt=this.ff(y,b,_,m);p=rt.label,F[3]=p;var st=F[22];a=(rt.anchorX-st)*this.pixelRatio,F[4]=a;var ot=F[23];c=(rt.anchorY-ot)*this.pixelRatio,F[5]=c,J=p.height,F[6]=J,nt=p.width,F[13]=nt}var ut=void 0;F.length>24&&(ut=F[24]);var et=void 0,ht=void 0,ft=void 0;F.length>16?(et=F[15],ht=F[16],ft=F[17]):(et=Eu,ht=!1,ft=!1),K&&G?Q+=I:K||G||(Q-=I);for(var at=0;T<f;T+=2)if(!(ut&&ut[at++]<nt/this.pixelRatio)){var ct=[t,n,p,Ft=this.ef(p.width,p.height,h[T],h[T+1],nt,J,a,c,H,$,Q,tt,s,et,ht||ft,O),V,ht?N:null,ft?k:null],vt=void 0,lt=void 0;if(e&&it){var dt=f-T;if(!it[dt]){it[dt]=ct;continue}if(vt=it[dt],delete it[dt],lt=cw(vt),e.collides(lt))continue}e&&e.collides(Ft.declutterBox)||(vt&&(e&&e.insert(lt),this.hf.apply(this,vt)),e&&e.insert(Ft.declutterBox),this.hf.apply(this,ct))}++E;break;case Yd.DRAW_CHARS:var wt=F[1],pt=F[2],yt=F[3],bt=F[4];m=F[5];var _t=F[6],gt=F[7],mt=F[8];_=F[9];var Ot=F[10];y=F[11],b=F[12];var Mt=[F[13],F[13]],jt=this.textStates[b],xt=jt.font,Et=[jt.scale[0]*gt,jt.scale[1]*gt],St=void 0;xt in this.rf?St=this.rf[xt]:(St={},this.rf[xt]=St);var Tt=ow(h,wt,pt,2),At=Math.abs(Et[0])*Lu(xt,y,St);if(bt||At<=Tt){var Ct=this.textStates[b].textAlign,Nt=sw(h,wt,pt,2,y,(Tt-At)*tw[Ct],_t,Math.abs(Et[0]),Lu,xt,St,G?0:this.ls);t:if(Nt){var kt=[],Pt=void 0,It=void 0,Gt=void 0,Rt=void 0,Lt=void 0;if(_)for(Pt=0,It=Nt.length;Pt<It;++Pt){Gt=(Lt=Nt[Pt])[4],Rt=this.createLabel(Gt,b,"",_),a=Lt[2]+(Et[0]<0?-Ot:Ot),c=yt*Rt.height+2*(.5-yt)*Ot*Et[1]/Et[0]-mt;var Ft=this.ef(Rt.width,Rt.height,Lt[0],Lt[1],Rt.width,Rt.height,a,c,0,0,Lt[3],Mt,!1,Eu,!1,O);if(e&&e.collides(Ft.declutterBox))break t;kt.push([t,n,Rt,Ft,1,null,null])}if(m)for(Pt=0,It=Nt.length;Pt<It;++Pt){Gt=(Lt=Nt[Pt])[4],Rt=this.createLabel(Gt,b,m,""),a=Lt[2],c=yt*Rt.height-mt;Ft=this.ef(Rt.width,Rt.height,Lt[0],Lt[1],Rt.width,Rt.height,a,c,0,0,Lt[3],Mt,!1,Eu,!1,O);if(e&&e.collides(Ft.declutterBox))break t;kt.push([t,n,Rt,Ft,1,null,null])}e&&e.load(kt.map(cw));for(var Dt=0,zt=kt.length;Dt<zt;++Dt)this.hf.apply(this,kt[Dt])}}++E;break;case Yd.END_GEOMETRY:if(void 0!==o){var Ut=o(O=F[1],x);if(Ut)return Ut}++E;break;case Yd.FILL:L?A++:this.lo(t),++E;break;case Yd.MOVE_TO_LINE_TO:for(T=F[1],f=F[2],M=h[T],w=(j=h[T+1])+.5|0,(d=M+.5|0)===v&&w===l||(t.moveTo(M,j),v=d,l=w),T+=2;T<f;T+=2)d=(M=h[T])+.5|0,w=(j=h[T+1])+.5|0,T!=f-2&&d===v&&w===l||(t.lineTo(M,j),v=d,l=w);++E;break;case Yd.SET_FILL_STYLE:N=F,this.tf=F[2],A&&(this.lo(t),A=0,C&&(t.stroke(),C=0)),t.fillStyle=F[1],++E;break;case Yd.SET_STROKE_STYLE:k=F,C&&(t.stroke(),C=0),this.uf(t,F),++E;break;case Yd.STROKE:L?C++:t.stroke(),++E;break;default:++E}}A&&this.lo(t),C&&t.stroke()},t.prototype.execute=function(t,n,i,r,s,o){this.ls=r,this.af(t,n,i,this.instructions,s,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,n,i,r,s){return this.ls=i,this.af(t,1,n,this.hitDetectionInstructions,!0,r,s)},t}(),ww=[ia,Kf,na,ta,ra,Qf],pw=function(){function t(t,n,i,r,s,o){this.$h=t,this.re=r,this.dt=i,this.Kh=n,this.cf=o,this.vf={},this.lf=null,this.df=[1,0,0,1,0,0],this.wf(s)}return t.prototype.clip=function(t,n){var i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.wf=function(t){for(var n in t){var i=this.vf[n];void 0===i&&(i={},this.vf[n]=i);var r=t[n];for(var s in r){var o=r[s];i[s]=new dw(this.Kh,this.dt,this.re,o)}}},t.prototype.hasExecutors=function(t){for(var n in this.vf)for(var i=this.vf[n],r=0,s=t.length;r<s;++r)if(t[r]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s,o){var u=2*(r=Math.round(r))+1,e=tn(this.df,r+.5,r+.5,1/n,-1/n,-i,-t[0],-t[1]),h=!this.lf;h&&(this.lf=ao(u,u));var f,a=this.lf;a.canvas.width!==u||a.canvas.height!==u?(a.canvas.width=u,a.canvas.height=u):h||a.clearRect(0,0,u,u),void 0!==this.cf&&(Nn(f=[1/0,1/0,-1/0,-1/0],t),pn(f,n*(this.cf+r),f));var c,v=bw(r);function l(t,n){for(var i=a.getImageData(0,0,u,u).data,e=0,h=v.length;e<h;e++)if(i[v[e]]>0){if(!o||c!==ta&&c!==ra||-1!==o.indexOf(t)){var f=(v[e]-3)/4,l=r-f%u,d=r-(f/u|0),w=s(t,n,l*l+d*d);if(w)return w}a.clearRect(0,0,u,u);break}}var d,p,y,b,_,g=Object.keys(this.vf).map(Number);for(g.sort(w),d=g.length-1;d>=0;--d){var m=g[d].toString();for(y=this.vf[m],p=ww.length-1;p>=0;--p)if(void 0!==(b=y[c=ww[p]])&&(_=b.executeHitDetection(a,e,i,l,f)))return _}},t.prototype.getClipCoords=function(t){var n=this.$h;if(!n)return null;var i=n[0],r=n[1],s=n[2],o=n[3],u=[i,r,i,o,s,o,s,r];return Ar(u,0,8,2,t,u),u},t.prototype.isEmpty=function(){return A(this.vf)},t.prototype.execute=function(t,n,i,r,s,o,u){var e=Object.keys(this.vf).map(Number);e.sort(w),this.$h&&(t.save(),this.clip(t,i));var h,f,a,c,v,l,d=o||ww;for(u&&e.reverse(),h=0,f=e.length;h<f;++h){var p=e[h].toString();for(v=this.vf[p],a=0,c=d.length;a<c;++a){void 0!==(l=v[d[a]])&&l.execute(t,n,i,r,s,u)}}this.$h&&t.restore()},t}(),yw={};function bw(t){if(void 0!==yw[t])return yw[t];for(var n=2*t+1,i=t*t,r=new Array(i+1),s=0;s<=t;++s)for(var o=0;o<=t;++o){var u=s*s+o*o;if(u>i)break;var e=r[u];e||(e=[],r[u]=e),e.push(4*((t+s)*n+(t+o))+3),s>0&&e.push(4*((t-s)*n+(t+o))+3),o>0&&(e.push(4*((t+s)*n+(t-o))+3),s>0&&e.push(4*((t-s)*n+(t-o))+3))}for(var h=[],f=(s=0,r.length);s<f;++s)r[s]&&h.push.apply(h,r[s]);return yw[t]=h,h}var _w=pw,gw=.5;function mw(t,n,i,r,s,o,u){var e=ao(t[0]*gw,t[1]*gw);e.imageSmoothingEnabled=!1;for(var h=e.canvas,f=new $f(e,gw,s,null,u),a=i.length,c=Math.floor(16777215/a),v={},l=1;l<=a;++l){var d=i[l-1],p=d.getStyleFunction()||r;if(r){var y=p(d,o);if(y){Array.isArray(y)||(y=[y]);for(var b="#"+("000000"+(l*c).toString(16)).slice(-6),_=0,g=y.length;_<g;++_){var m=y[_],O=m.getGeometryFunction()(d);if(O&&Jn(s,O.getExtent())){var M=m.clone(),j=M.getFill();j&&j.setColor(b);var x=M.getStroke();x&&(x.setColor(b),x.setLineDash(null)),M.setText(void 0);var E=m.getImage();if(E&&0!==E.getOpacity()){var S=E.getImageSize();if(!S)continue;var T=ao(S[0],S[1],void 0,{alpha:!1}),A=T.canvas;T.fillStyle=b,T.fillRect(0,0,A.width,A.height),M.setImage(new gc({img:A,imgSize:S,anchor:E.getAnchor(),anchorXUnits:fc,anchorYUnits:fc,offset:E.getOrigin(),opacity:1,size:E.getSize(),scale:E.getScale(),rotation:E.getRotation(),rotateWithView:E.getRotateWithView()}))}var C=M.getZIndex()||0;(P=v[C])||(P={},v[C]=P,P[At.POLYGON]=[],P[At.CIRCLE]=[],P[At.LINE_STRING]=[],P[At.POINT]=[]),P[O.getType().replace("Multi","")].push(O,M)}}}}}for(var N=Object.keys(v).map(Number).sort(w),k=(l=0,N.length);l<k;++l){var P=v[N[l]];for(var I in P){var G=P[I];for(_=0,g=G.length;_<g;_+=2){f.setStyle(G[_+1]);for(var R=0,L=n.length;R<L;++R)f.setTransform(n[R]),f.drawGeometry(G[_])}}}return e.getImageData(0,0,h.width,h.height)}function Ow(t,n,i){var r=[];if(i){var s=Math.floor(Math.round(t[0])*gw),o=Math.floor(Math.round(t[1])*gw),u=4*(ii(s,0,i.width-1)+ii(o,0,i.height-1)*i.width),e=i.data[u],h=i.data[u+1],f=i.data[u+2]+256*(h+256*e),a=Math.floor(16777215/n.length);f&&f%a==0&&r.push(n[f/a-1])}return r}var Mw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jw=function(t){function n(n){var i=t.call(this,n)||this;return i.pf=i.yf.bind(i),i.bf,i._f=!1,i.gf=null,i.mf=null,i.Ze=-1,i.Of=NaN,i.ph=[1/0,1/0,-1/0,-1/0],i.Mf=[1/0,1/0,-1/0,-1/0],i.jf,i.xf=null,i.Ef=null,i.Sf=null,i.Tf=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return Mw(n,t),n.prototype.useContainer=function(n,i,r){r<1&&(n=null),t.prototype.useContainer.call(this,n,i,r)},n.prototype.renderWorlds=function(t,n,i){var r=n.extent,s=n.viewState,o=s.center,u=s.resolution,e=s.projection,h=s.rotation,f=e.getExtent(),a=this.getLayer().getSource(),c=n.pixelRatio,v=n.viewHints,l=!(v[de]||v[we]),d=this.context,w=Math.round(n.size[0]*c),p=Math.round(n.size[1]*c),y=a.getWrapX()&&e.canWrapX(),b=y?Zn(f):null,_=y?Math.ceil((r[2]-f[2])/b)+1:1,g=y?Math.floor((r[0]-f[0])/b):0;do{var m=this.getRenderTransform(o,u,h,c,w,p,g*b);t.execute(d,1,m,h,l,void 0,i)}while(++g<_)},n.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},n.prototype.renderFrame=function(t,n){var i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];Qt(this.pixelTransform,1/i,1/i),nn(this.inversePixelTransform,this.pixelTransform);var s=sn(this.pixelTransform);this.useContainer(n,s,r.opacity);var o=this.context,u=o.canvas,e=this.Tf,h=this.declutterExecutorGroup;if((!e||e.isEmpty())&&(!h||h.isEmpty()))return null;var f=Math.round(t.size[0]*i),a=Math.round(t.size[1]*i);u.width!=f||u.height!=a?(u.width=f,u.height=a,u.style.transform!==s&&(u.style.transform=s)):this.containerReused||o.clearRect(0,0,f,a),this.preRender(o,t);var c=t.viewState,v=c.projection,l=!1,d=!0;if(r.extent&&this.clipping){var w=jr(r.extent,v);(l=(d=Jn(w,t.extent))&&!gn(w,t.extent))&&this.clipUnrotated(o,t,w)}d&&this.renderWorlds(e,t),l&&o.restore(),this.postRender(o,t);var p=pu(r.opacity),y=this.container;return p!==y.style.opacity&&(y.style.opacity=p),this.jf!==c.rotation&&(this.jf=c.rotation,this.gf=null),this.container},n.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.gf&&!this.bf){var i=[this.context.canvas.width,this.context.canvas.height];Ht(this.pixelTransform,i);var r=this.xf,s=this.Of,o=this.jf,u=this.Ef,e=this.Mf,h=this.getLayer(),f=[],a=i[0]*gw,c=i[1]*gw;f.push(this.getRenderTransform(r,s,o,gw,a,c,0).slice());var v=h.getSource(),l=u.getExtent();if(v.getWrapX()&&u.canWrapX()&&!gn(l,e)){for(var d=e[0],w=Zn(l),p=0,y=void 0;d<l[0];)y=w*--p,f.push(this.getRenderTransform(r,s,o,gw,a,c,y).slice()),d+=w;for(p=0,d=e[2];d>l[2];)y=w*++p,f.push(this.getRenderTransform(r,s,o,gw,a,c,y).slice()),d-=w}this.gf=mw(i,f,this.mf,h.getStyleFunction(),e,s,o)}n(Ow(t,this.mf,this.gf))}.bind(this))},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s){var u=this;if(this.Tf){var e,h=n.viewState.resolution,f=n.viewState.rotation,a=this.getLayer(),c={},v=function(t,n,i){var u=o(t),e=c[u];if(e){if(!0!==e&&i<e.distanceSq){if(0===i)return c[u]=!0,s.splice(s.lastIndexOf(e),1),r(t,a,n);e.geometry=n,e.distanceSq=i}}else{if(0===i)return c[u]=!0,r(t,a,n);s.push(c[u]={feature:t,layer:a,geometry:n,distanceSq:i,callback:r})}},l=[this.Tf];return this.declutterExecutorGroup&&l.push(this.declutterExecutorGroup),l.some((function(r){return e=r.forEachFeatureAtCoordinate(t,h,f,i,v,r===u.declutterExecutorGroup?n.declutterTree.all().map((function(t){return t.value})):null)})),e}},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.Tf&&t.changed()},n.prototype.yf=function(t){this.renderIfReadyAndVisible()},n.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource();if(!i)return!1;var r=t.viewHints[de],s=t.viewHints[we],o=n.getUpdateWhileAnimating(),u=n.getUpdateWhileInteracting();if(!this._f&&!o&&r||!u&&s)return this.bf=!0,!0;this.bf=!1;var e=t.extent,h=t.viewState,f=h.projection,a=h.resolution,c=t.pixelRatio,v=n.getRevision(),l=n.getRenderBuffer(),d=n.getRenderOrder();void 0===d&&(d=oa);var w=h.center.slice(),p=pn(e,l*a),y=p.slice(),b=[p.slice()],_=f.getExtent();if(i.getWrapX()&&f.canWrapX()&&!gn(_,t.extent)){var m=Zn(_),O=Math.max(Zn(p)/2,m);p[0]=_[0]-O,p[2]=_[2]+O,tr(w,f);var M=ti(b[0],f);M[0]<_[0]&&M[2]<_[2]?b.push([M[0]+m,M[1],M[2]+m,M[3]]):M[0]>_[0]&&M[2]>_[2]&&b.push([M[0]-m,M[1],M[2]-m,M[3]])}if(!this._f&&this.Of==a&&this.Ze==v&&this.Sf==d&&gn(this.Mf,p))return g(this.ph,y)||(this.gf=null,this.ph=y),this.xf=w,this.replayGroupChanged=!1,!0;this.Tf=null,this._f=!1;var j,x=new rw(ea(a,c),p,a,c);this.getLayer().getDeclutter()&&(j=new rw(ea(a,c),p,a,c));var E,S=gr();if(S){for(var T=0,A=b.length;T<A;++T){var C=Mr(b[T],f);i.loadFeatures(C,xr(a,f),S)}E=dr(S,f)}else for(T=0,A=b.length;T<A;++T)i.loadFeatures(b[T],a,f);var N=ua(a,c),k=function(t){var i,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(i=r(t,a)),i){var s=this.renderFeature(t,N,i,x,E,j);this._f=this._f||s}}.bind(this),P=Mr(p,f),I=i.getFeaturesInExtent(P);d&&I.sort(d);for(T=0,A=I.length;T<A;++T)k(I[T]);this.mf=I;var G=x.finish(),R=new _w(p,a,c,i.getOverlaps(),G,n.getRenderBuffer());return j&&(this.declutterExecutorGroup=new _w(p,a,c,i.getOverlaps(),j.finish(),n.getRenderBuffer())),this.Of=a,this.Ze=v,this.Sf=d,this.ph=y,this.Mf=p,this.xf=w,this.Ef=f,this.Tf=R,this.gf=null,this.replayGroupChanged=!0,!0},n.prototype.renderFeature=function(t,n,i,r,s,o){if(!i)return!1;var u=!1;if(Array.isArray(i))for(var e=0,h=i.length;e<h;++e)u=ha(r,t,i[e],n,this.pf,s,o)||u;else u=ha(r,t,i,n,this.pf,s,o);return u},n}(od),xw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ew=function(t){function n(n){var i=t.call(this,n)||this;return i.Af=new jw(n),i.Cf=n.getImageRatio(),i.Nf=[1,0,0,1,0,0],i.kf=null,i}return xw(n,t),n.prototype.disposeInternal=function(){this.Af.dispose(),t.prototype.disposeInternal.call(this)},n.prototype.getFeatures=function(t){if(!this.Af)return new Promise((function(t){return t([])}));var n=Ht(this.Nf,Ht(this.kf,t.slice()));return this.Af.getFeatures(n)},n.prototype.handleFontsChanged=function(){this.Af.handleFontsChanged()},n.prototype.prepareFrame=function(t){var n=t.pixelRatio,i=t.viewState,r=i.resolution,s=t.viewHints,o=this.Af,u=t.extent;1!==this.Cf&&$n(u=u.slice(0),this.Cf);var e=Zn(u)/r,h=Yn(u)/r;if(!s[de]&&!s[we]&&!Vn(u)){o.useContainer(null,null,1);var f=o.context,a=E({},t,{declutterTree:new nl(9),extent:u,size:[e,h],viewState:E({},t.viewState,{rotation:0})}),c=!0,v=new fo(u,r,n,f.canvas,(function(t){o.prepareFrame(a)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(a,null)&&(o.renderDeclutter(a),c=!1),t())}));v.addEventListener(k,function(){if(v.getState()===io){this.yt=c?null:v;var t=v.getResolution(),r=v.getPixelRatio(),s=t*n/r;this.renderedResolution=s,this.Nf=tn(this.Nf,e/2,h/2,1/s,-1/s,0,-i.center[0],-i.center[1])}}.bind(this)),v.load()}return this.yt&&(this.kf=t.pixelToCoordinateTransform.slice()),!!this.yt},n.prototype.preRender=function(){},n.prototype.postRender=function(){},n.prototype.renderDeclutter=function(){},n.prototype.forEachFeatureAtCoordinate=function(n,i,r,s,o){return this.Af?this.Af.forEachFeatureAtCoordinate(n,i,r,s,o):t.prototype.forEachFeatureAtCoordinate.call(this,n,i,r,s,o)},n}(ed);function Sw(t,n,i,r,s,o,u){var e,h,f=(i-n)/r;if(1===f)e=n;else if(2===f)e=n,h=s;else if(0!==f){for(var a=t[n],c=t[n+1],v=0,l=[0],w=n+r;w<i;w+=r){var p=t[w],y=t[w+1];v+=Math.sqrt((p-a)*(p-a)+(y-c)*(y-c)),l.push(v),a=p,c=y}var b=s*v,_=d(l,b);_<0?(h=(b-l[-_-2])/(l[-_-1]-l[-_-2]),e=n+(-_-2)*r):e=n+_*r}var g=u>1?u:2,m=o||new Array(g);for(w=0;w<g;++w)m[w]=void 0===e?NaN:void 0===h?t[e+w]:ci(t[e+w],t[e+r+w],h);return m}function Tw(t,n,i,r,s,o){if(i==n)return null;var u;if(s<t[n+r-1])return o?((u=t.slice(n,n+r))[r-1]=s,u):null;if(t[i-1]<s)return o?((u=t.slice(i-r,i))[r-1]=s,u):null;if(s==t[n+r-1])return t.slice(n,n+r);for(var e=n/r,h=i/r;e<h;){var f=e+h>>1;s<t[(f+1)*r-1]?h=f:e=f+1}var a=t[e*r-1];if(s==a)return t.slice((e-1)*r,(e-1)*r+r);var c=(s-a)/(t[(e+1)*r-1]-a);u=[];for(var v=0;v<r-1;++v)u.push(ci(t[(e-1)*r+v],t[e*r+v],c));return u.push(s),u}function Aw(t,n,i,r,s,o,u){if(u)return Tw(t,n,i[i.length-1],r,s,o);var e;if(s<t[r-1])return o?((e=t.slice(0,r))[r-1]=s,e):null;if(t[t.length-1]<s)return o?((e=t.slice(t.length-r))[r-1]=s,e):null;for(var h=0,f=i.length;h<f;++h){var a=i[h];if(n!=a){if(s<t[n+r-1])return null;if(s<=t[a-1])return Tw(t,n,a,r,s,!1);n=a}}return null}function Cw(t,n,i,r){for(var s=[],o=[1/0,1/0,-1/0,-1/0],u=0,e=i.length;u<e;++u){var h=i[u];o=Sn(t,n,h[0],r),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),n=h[h.length-1]}return s}var Nw=[1,0,0,1,0,0],kw=function(){function t(t,n,i,r,s){this.D,this.C=s,this.Pf=t,this.If=n,this.Gf=null,this.Rf=null,this.nt=i,this.Lf=r}return t.prototype.get=function(t){return this.Lf[t]},t.prototype.getExtent=function(){return this.D||(this.D=this.Pf===At.POINT?En(this.If):Sn(this.If,0,this.If.length,2)),this.D},t.prototype.getFlatInteriorPoint=function(){if(!this.Gf){var t=zn(this.getExtent());this.Gf=bs(this.If,0,this.nt,2,t,0)}return this.Gf},t.prototype.getFlatInteriorPoints=function(){if(!this.Gf){var t=Cw(this.If,0,this.nt,2);this.Gf=_s(this.If,0,this.nt,2,t)}return this.Gf},t.prototype.getFlatMidpoint=function(){return this.Rf||(this.Rf=Sw(this.If,0,this.If.length,2,.5)),this.Rf},t.prototype.getFlatMidpoints=function(){if(!this.Rf){this.Rf=[];for(var t=this.If,n=0,i=this.nt,r=0,s=i.length;r<s;++r){var o=i[r],u=Sw(t,n,o,2,.5);_(this.Rf,u),n=o}}return this.Rf},t.prototype.getId=function(){return this.C},t.prototype.getOrientedFlatCoordinates=function(){return this.If},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,n){return this},t.prototype.getProperties=function(){return this.Lf},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){},t.prototype.getType=function(){return this.Pf},t.prototype.transform=function(t){var n=(t=ur(t)).getExtent(),i=t.getWorldExtent();if(n&&i){var r=Yn(i)/Yn(n);tn(Nw,i[0],i[3],r,-r,0,0,0),Ar(this.If,0,this.If.length,2,Nw,this.If)}},t.prototype.getEnds=function(){return this.nt},t}();kw.prototype.getEndss=kw.prototype.getEnds,kw.prototype.getFlatCoordinates=kw.prototype.getOrientedFlatCoordinates;var Pw=kw;var Iw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Gw="renderOrder",Rw=function(t){function n(n){var i=this,r=n||{},s=E({},r);return delete s.style,delete s.renderBuffer,delete s.updateWhileAnimating,delete s.updateWhileInteracting,(i=t.call(this,s)||this).Ff=void 0!==r.declutter&&r.declutter,i.cf=void 0!==r.renderBuffer?r.renderBuffer:100,i.k=null,i.P=void 0,i.setStyle(r.style),i.Df=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,i.zf=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,i}return Iw(n,t),n.prototype.getDeclutter=function(){return this.Ff},n.prototype.getFeatures=function(n){return t.prototype.getFeatures.call(this,n)},n.prototype.getRenderBuffer=function(){return this.cf},n.prototype.getRenderOrder=function(){return this.get(Gw)},n.prototype.getStyle=function(){return this.k},n.prototype.getStyleFunction=function(){return this.P},n.prototype.getUpdateWhileAnimating=function(){return this.Df},n.prototype.getUpdateWhileInteracting=function(){return this.zf},n.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new nl(9)),this.getRenderer().renderDeclutter(t)},n.prototype.setRenderOrder=function(t){this.set(Gw,t)},n.prototype.setStyle=function(t){this.k=void 0!==t?t:Ec,this.P=null===t?void 0:jc(this.k),this.changed()},n}(nu),Lw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Fw=function(t){function n(n,i){var r=t.call(this)||this;return r.Uf=null,r.Xf=-1,r.K=-1,r.tt=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r}return Lw(n,t),n.prototype.appendCoordinate=function(t){this.flatCoordinates?_(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.tt!=this.getRevision()&&(this.K=Math.sqrt(Ur(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.tt=this.getRevision()),Wr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.K,!1,t,n,i,r))},n.prototype.forEachSegment=function(t){return gs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinateAtM=function(t,n){if(this.layout!=St&&this.layout!=Tt)return null;var i=void 0!==n&&n;return Tw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},n.prototype.getCoordinates=function(){return ss(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinateAt=function(t,n){return Sw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)},n.prototype.getLength=function(){return ow(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getFlatMidpoint=function(){return this.Xf!=this.getRevision()&&(this.Uf=this.getCoordinateAt(.5,this.Uf),this.Xf=this.getRevision()),this.Uf},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=$r(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,xt)},n.prototype.getType=function(){return At.LINE_STRING},n.prototype.intersectsExtent=function(t){return ms(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jr(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Dr),Dw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),zw=function(t){function n(n){return t.call(this,n)||this}return Dw(n,t),n.prototype.createRenderer=function(){return new jw(this)},n}(Rw);function Uw(t,n,i){for(var r,s,o,u,e,h,f=[],a=t(0),c=t(1),v=n(a),l=n(c),d=[c,a],w=[l,v],p=[1,0],y={},b=1e5;--b>0&&p.length>0;)o=p.pop(),a=d.pop(),v=w.pop(),(h=o.toString())in y||(f.push(v[0],v[1]),y[h]=!0),u=p.pop(),c=d.pop(),l=w.pop(),oi((s=n(r=t(e=(o+u)/2)))[0],s[1],v[0],v[1],l[0],l[1])<i?(f.push(l[0],l[1]),y[h=u.toString()]=!0):(p.push(u,e,e,o),w.push(l,s,s,v),d.push(c,r,r,a));return f}function Xw(t,n,i,r,s){return Uw((function(r){return[t,n+(i-n)*r]}),wr(ur("EPSG:4326"),r),s)}function Yw(t,n,i,r,s){return Uw((function(r){return[n+(i-n)*r,t]}),wr(ur("EPSG:4326"),r),s)}var Ww=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bw=new mc({color:"rgba(0,0,0,0.2)"}),qw=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],Zw=function(t){function n(n){var i=this,r=n||{},s=E({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},r);return delete s.maxLines,delete s.strokeStyle,delete s.targetSize,delete s.showLabels,delete s.lonLabelFormatter,delete s.latLabelFormatter,delete s.lonLabelPosition,delete s.latLabelPosition,delete s.lonLabelStyle,delete s.latLabelStyle,delete s.intervals,(i=t.call(this,s)||this).qn=null,i.Yf=1/0,i.Wf=1/0,i.Bf=-1/0,i.qf=-1/0,i.Zf=1/0,i.Jf=1/0,i.Vf=-1/0,i.Hf=-1/0,i.$f=void 0!==r.targetSize?r.targetSize:100,i.Kf=void 0!==r.maxLines?r.maxLines:100,i.Qf=[],i.ta=[],i.na=void 0!==r.strokeStyle?r.strokeStyle:Bw,i.ia=void 0,i.ra=void 0,i.sa=null,i.oa=null,i.ua=null,i.ea=null,i.ha=null,i.fa=null,i.aa=null,r.showLabels&&(i.ca=null==r.lonLabelFormatter?Bi.bind(i,"EW"):r.lonLabelFormatter,i.va=null==r.latLabelFormatter?Bi.bind(i,"NS"):r.latLabelFormatter,i.la=null==r.lonLabelPosition?0:r.lonLabelPosition,i.da=null==r.latLabelPosition?1:r.latLabelPosition,i.wa=new Ac({text:void 0!==r.lonLabelStyle?r.lonLabelStyle.clone():new kc({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new ec({color:"rgba(0,0,0,1)"}),stroke:new mc({color:"rgba(255,255,255,1)",width:3})})}),i.pa=function(t){var n=t.get("graticule_label");return this.wa.getText().setText(n),this.wa}.bind(i),i.ya=new Ac({text:void 0!==r.latLabelStyle?r.latLabelStyle.clone():new kc({font:"12px Calibri,sans-serif",textAlign:"right",fill:new ec({color:"rgba(0,0,0,1)"}),stroke:new mc({color:"rgba(255,255,255,1)",width:3})})}),i.ba=function(t){var n=t.get("graticule_label");return this.ya.getText().setText(n),this.ya}.bind(i),i.fa=[],i.aa=[],i.addEventListener(Zo,i._a.bind(i))),i.ga=void 0!==r.intervals?r.intervals:qw,i.setSource(new wl({loader:i.loaderFunction.bind(i),strategy:i.strategyFunction.bind(i),features:new et,overlaps:!1,useSpatialIndex:!1,wrapX:r.wrapX})),i.ma=[],i.Oa=new Ac({stroke:i.na}),i.Ma=null,i.ph=null,i.setRenderOrder(null),i}return Ww(n,t),n.prototype.strategyFunction=function(t,n){var i=t.slice();return this.qn&&this.getSource().getWrapX()&&ti(i,this.qn),this.Ma&&(An(this.Ma,i,n)?i=this.Ma.slice():this.getSource().removeLoadedExtent(this.Ma)),[i]},n.prototype.loaderFunction=function(t,n,i){this.Ma=t;var r=this.getSource(),s=Wn(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.ph&&Tn(this.ph,s)||(this.ph=s,Vn(s)))){var o=zn(s),u=n*n/4;(!this.qn||!lr(this.qn,i))&&this.ja(i),this.xa(s,o,n,u);var e,h=this.Qf.length+this.ta.length;for(this.fa&&(h+=this.Qf.length),this.aa&&(h+=this.ta.length);h>this.ma.length;)e=new jt,this.ma.push(e);var f=r.getFeaturesCollection();f.clear();var a,c,v=0;for(a=0,c=this.Qf.length;a<c;++a)(e=this.ma[v++]).setGeometry(this.Qf[a]),e.setStyle(this.Oa),f.push(e);for(a=0,c=this.ta.length;a<c;++a)(e=this.ma[v++]).setGeometry(this.ta[a]),e.setStyle(this.Oa),f.push(e)}},n.prototype.Ea=function(t,n,i,r,s,o){var u=this.Sa(t,n,i,r,o);if(Jn(u.getExtent(),s)){if(this.fa){var e=this.ca(t);o in this.fa?this.fa[o].text=e:this.fa[o]={geom:new ls([]),text:e}}this.Qf[o++]=u}return o},n.prototype.Ta=function(t,n,i,r,s,o){var u=this.Aa(t,n,i,r,o);if(Jn(u.getExtent(),s)){if(this.aa){var e=this.va(t);o in this.aa?this.aa[o].text=e:this.aa[o]={geom:new ls([]),text:e}}this.ta[o++]=u}return o},n.prototype._a=function(t){var n=t.frameState.viewState.rotation,i=t.frameState.extent,r=zn(i),s=i;if(n){var o=Zn(i),u=Yn(i),e=Math.abs(Math.cos(n)),h=Math.abs(Math.sin(n)),f=(h*u-e*o)/(h*h-e*e),a=(h*o-e*u)/(h*h-e*e);s=[r[0]-f/2,r[1]-a/2,r[0]+f/2,r[1]+a/2]}var c=0,v=0,l=this.da<.5,d=this.qn.getExtent(),w=Zn(d);this.getSource().getWrapX()&&this.qn.canWrapX()&&!gn(d,i)&&(c=Math.floor((i[0]-d[0])/w),v=Math.ceil((i[2]-d[2])/w),l=l!==Math.abs(n)>Math.PI/2);for(var p=aa(t),y=c;y<=v;++y){var b=this.Qf.length+this.ta.length,_=void 0,g=void 0,m=void 0,O=void 0;if(this.fa)for(g=0,m=this.fa.length;g<m;++g){var M=this.Qf[g];if(n||0!==y)(j=M.clone()).translate(y*w,0),j.rotate(-n,r),(O=this.Ca(j,s,g)).rotate(n,r);else O=this.Ca(M,i,g);(_=this.ma[b++]).setGeometry(O),_.set("graticule_label",this.fa[g].text),p.drawFeature(_,this.pa(_))}if(this.aa&&(y===c&&l||y===v&&!l))for(g=0,m=this.ta.length;g<m;++g){var j;M=this.ta[g];if(n||0!==y)(j=M.clone()).translate(y*w,0),j.rotate(-n,r),(O=this.Na(j,s,g)).rotate(n,r);else O=this.Na(M,i,g);(_=this.ma[b++]).setGeometry(O),_.set("graticule_label",this.aa[g].text),p.drawFeature(_,this.ba(_))}}},n.prototype.xa=function(t,n,i,r){var s=this.ka(i);if(-1==s)return this.Qf.length=0,this.ta.length=0,this.fa&&(this.fa.length=0),void(this.aa&&(this.aa.length=0));var o=!1,u=this.qn.getExtent(),e=Zn(u);this.getSource().getWrapX()&&this.qn.canWrapX()&&!gn(u,t)&&(Zn(t)>=e?(t[0]=u[0],t[2]=u[2]):o=!0);var h=[ii(n[0],this.Vf,this.Zf),ii(n[1],this.Hf,this.Jf)],f=this.ra(h);isNaN(f[1])&&(f[1]=Math.abs(this.Yf)>=Math.abs(this.Bf)?this.Yf:this.Bf);var a,c,v,l,d=ii(f[0],this.qf,this.Wf),w=ii(f[1],this.Bf,this.Yf),p=this.Kf,y=t;o||(y=[ii(t[0],this.Vf,this.Zf),ii(t[1],this.Hf,this.Jf),ii(t[2],this.Vf,this.Zf),ii(t[3],this.Hf,this.Jf)]);var b=Qn(y,this.ra,void 0,8),_=b[3],g=b[2],m=b[1],O=b[0];if(o||(_n(y,this.oa)&&(O=this.qf,m=this.Bf),_n(y,this.ua)&&(g=this.Wf,m=this.Bf),_n(y,this.ea)&&(O=this.qf,_=this.Yf),_n(y,this.ha)&&(g=this.Wf,_=this.Yf),_=ii(_,w,this.Yf),g=ii(g,d,this.Wf),m=ii(m,this.Bf,w),O=ii(O,this.qf,d)),l=ii(d=Math.floor(d/s)*s,this.qf,this.Wf),c=this.Ea(l,m,_,r,t,0),a=0,o)for(;(l-=s)>=O&&a++<p;)c=this.Ea(l,m,_,r,t,c);else for(;l!=this.qf&&a++<p;)l=Math.max(l-s,this.qf),c=this.Ea(l,m,_,r,t,c);if(l=ii(d,this.qf,this.Wf),a=0,o)for(;(l+=s)<=g&&a++<p;)c=this.Ea(l,m,_,r,t,c);else for(;l!=this.Wf&&a++<p;)l=Math.min(l+s,this.Wf),c=this.Ea(l,m,_,r,t,c);for(this.Qf.length=c,this.fa&&(this.fa.length=c),v=ii(w=Math.floor(w/s)*s,this.Bf,this.Yf),c=this.Ta(v,O,g,r,t,0),a=0;v!=this.Bf&&a++<p;)v=Math.max(v-s,this.Bf),c=this.Ta(v,O,g,r,t,c);for(v=ii(w,this.Bf,this.Yf),a=0;v!=this.Yf&&a++<p;)v=Math.min(v+s,this.Yf),c=this.Ta(v,O,g,r,t,c);this.ta.length=c,this.aa&&(this.aa.length=c)},n.prototype.ka=function(t){for(var n=this.sa[0],i=this.sa[1],r=-1,s=Math.pow(this.$f*t,2),o=[],u=[],e=0,h=this.ga.length;e<h;++e){var f=ii(this.ga[e]/2,0,90),a=ii(i,-90+f,90-f);if(o[0]=n-f,o[1]=a-f,u[0]=n+f,u[1]=a+f,this.ia(o,o),this.ia(u,u),Math.pow(u[0]-o[0],2)+Math.pow(u[1]-o[1],2)<=s)break;r=this.ga[e]}return r},n.prototype.Sa=function(t,n,i,r,s){var o=Xw(t,n,i,this.qn,r),u=this.Qf[s];return u?(u.setFlatCoordinates(xt,o),u.changed()):(u=new Fw(o,xt),this.Qf[s]=u),u},n.prototype.Ca=function(t,n,i){var r=t.getFlatCoordinates(),s=1,o=r.length-1;r[s]>r[o]&&(s=o,o=1);var u=Math.max(n[1],r[s]),e=Math.min(n[3],r[o]),h=ii(n[1]+Math.abs(n[1]-n[3])*this.la,u,e),f=[r[s-1]+(r[o-1]-r[s-1])*(h-r[s])/(r[o]-r[s]),h],a=this.fa[i].geom;return a.setCoordinates(f),a},n.prototype.getMeridians=function(){return this.Qf},n.prototype.Aa=function(t,n,i,r,s){var o=Yw(t,n,i,this.qn,r),u=this.ta[s];return u?(u.setFlatCoordinates(xt,o),u.changed()):u=new Fw(o,xt),u},n.prototype.Na=function(t,n,i){var r=t.getFlatCoordinates(),s=0,o=r.length-2;r[s]>r[o]&&(s=o,o=0);var u=Math.max(n[0],r[s]),e=Math.min(n[2],r[o]),h=ii(n[0]+Math.abs(n[0]-n[2])*this.da,u,e),f=[h,r[s+1]+(r[o+1]-r[s+1])*(h-r[s])/(r[o]-r[s])],a=this.aa[i].geom;return a.setCoordinates(f),a},n.prototype.getParallels=function(){return this.ta},n.prototype.ja=function(t){var n=ur("EPSG:4326"),i=t.getWorldExtent();this.Yf=i[3],this.Wf=i[2],this.Bf=i[1],this.qf=i[0];var r=wr(t,n);if(this.qf<this.Wf)this.ra=r;else{var s=this.qf+this.Wf/2;this.Wf+=360,this.ra=function(t,n,i){for(var o=i||2,u=r(t,n,o),e=0,h=u.length;e<h;e+=o)u[e]<s&&(u[e]+=360);return u}}this.ia=wr(n,t);var o=Qn([this.qf,this.Bf,this.Wf,this.Yf],this.ia,void 0,8);this.Vf=o[0],this.Zf=o[2],this.Hf=o[1],this.Jf=o[3],this.oa=this.ia([this.qf,this.Bf]),this.ua=this.ia([this.Wf,this.Bf]),this.ea=this.ia([this.qf,this.Yf]),this.ha=this.ia([this.Wf,this.Yf]),this.sa=this.ra(zn(t.getExtent())),isNaN(this.sa[1])&&(this.sa[1]=Math.abs(this.Yf)>=Math.abs(this.Bf)?this.Yf:this.Bf),this.qn=t},n}(zw),Jw=new Uint8Array(4),Vw=function(){function t(t,n){this.su=t;var i=t.getGL();this.Pa=i.createTexture(),this.Ia=i.createFramebuffer(),this.yo=n||[1,1],this.T=new Uint8Array(0),this.Ga=!0,this.Ra()}return t.prototype.setSize=function(t){g(t,this.yo)||(this.yo[0]=t[0],this.yo[1]=t[1],this.Ra())},t.prototype.getSize=function(){return this.yo},t.prototype.clearCachedData=function(){this.Ga=!0},t.prototype.readAll=function(){if(this.Ga){var t=this.yo,n=this.su.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.Ia),n.readPixels(0,0,t[0],t[1],n.RGBA,n.UNSIGNED_BYTE,this.T),this.Ga=!1}return this.T},t.prototype.readPixel=function(t,n){if(t<0||n<0||t>this.yo[0]||n>=this.yo[1])return Jw[0]=0,Jw[1]=0,Jw[2]=0,Jw[3]=0,Jw;this.readAll();var i=Math.floor(t)+(this.yo[1]-Math.floor(n)-1)*this.yo[0];return Jw[0]=this.T[4*i],Jw[1]=this.T[4*i+1],Jw[2]=this.T[4*i+2],Jw[3]=this.T[4*i+3],Jw},t.prototype.getTexture=function(){return this.Pa},t.prototype.getFramebuffer=function(){return this.Ia},t.prototype.Ra=function(){var t=this.yo,n=this.su.getGL();this.Pa=this.su.createTexture(t,null,this.Pa),n.bindFramebuffer(n.FRAMEBUFFER,this.Ia),n.viewport(0,0,t[0],t[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.Pa,0),this.T=new Uint8Array(t[0]*t[1]*4)},t}(),Hw=new Blob(['var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};'],{type:"application/javascript"}),$w=URL.createObjectURL(Hw);var Kw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qw=function(t){function n(n,i){var r=this,s=i.uniforms||{},u=[1,0,0,1,0,0];s[Kc]=u,(r=t.call(this,n,{className:i.className,uniforms:s,postProcesses:i.postProcesses})||this).La=-1,r.Fa=new Uc(Pc,Rc),r.Da=new Uc(Pc,Rc),r.za=new Uc(Ic,Rc),r.Du=r.helper.getProgram(i.fragmentShader,i.vertexShader),r.Ua=!(!i.hitFragmentShader||!i.hitVertexShader),r.Xa=r.Ua&&r.helper.getProgram(i.hitFragmentShader,i.hitVertexShader);var e=i.attributes?i.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:sv.FLOAT}})):[];r.attributes=[{name:"a_position",size:2,type:sv.FLOAT},{name:"a_index",size:1,type:sv.FLOAT}].concat(e),r.hitDetectionAttributes=[{name:"a_position",size:2,type:sv.FLOAT},{name:"a_index",size:1,type:sv.FLOAT},{name:"a_hitColor",size:4,type:sv.FLOAT},{name:"a_featureUid",size:1,type:sv.FLOAT}].concat(e),r.customAttributes=i.attributes?i.attributes:[],r.xi=[1/0,1/0,-1/0,-1/0],r.Ya=u,r.Wa=[1,0,0,1,0,0],r.Ba=[1,0,0,1,0,0],r.qa=new Float32Array(0),r.Za=new Float32Array(0),r.Ja=r.Ua&&new Vw(r.helper),r.Va=new Worker($w),r.Va.addEventListener("message",function(t){var n=t.data;if(n.type===hv){var i=n.projectionTransform;n.hitDetection?(this.Da.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.Da)):(this.Fa.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.Fa)),this.za.fromArrayBuffer(n.indexBuffer),this.helper.flushBufferData(this.za),this.Wa=i,nn(this.Ba,this.Wa),n.hitDetection?this.Za=new Float32Array(t.data.renderInstructions):this.qa=new Float32Array(t.data.renderInstructions),this.getLayer().changed()}}.bind(r)),r.Ha={},r.$a=0;var h=r.getLayer().getSource();return r.Ka=[q(h,ul,r.Qa,r),q(h,el,r.tc,r),q(h,fl,r.nc,r),q(h,hl,r.ic,r)],h.forEachFeature(function(t){this.Ha[o(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.$a++}.bind(r)),r}return Kw(n,t),n.prototype.Qa=function(t){var n=t.feature;this.Ha[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()},this.$a++},n.prototype.tc=function(t){var n=t.feature;this.Ha[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()}},n.prototype.nc=function(t){var n=t.feature;delete this.Ha[o(n)],this.$a--},n.prototype.ic=function(){this.Ha={},this.$a=0},n.prototype.renderFrame=function(t){this.preRender(t);var n=this.za.getSize();this.helper.drawElements(0,n),this.helper.finalizeDraw(t);var i=this.helper.getCanvas(),r=t.layerStatesArray[t.layerIndex].opacity;return r!==parseFloat(i.style.opacity)&&(i.style.opacity=String(r)),this.Ua&&(this.renderHitDetection(t),this.Ja.clearCachedData()),this.postRender(t),i},n.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource(),r=t.viewState,s=!t.viewHints[de]&&!t.viewHints[we],o=!Tn(this.xi,t.extent),u=this.La<i.getRevision();if(u&&(this.La=i.getRevision()),s&&(o||u)){var e=r.projection,h=r.resolution,f=n instanceof Rw?n.getRenderBuffer():0,a=pn(t.extent,f*h);i.loadFeatures(a,h,e),this.rc(t),this.xi=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.Ya),Zt(this.Ya,this.Ba),this.helper.useProgram(this.Du),this.helper.prepareDraw(t),this.helper.bindBuffer(this.Fa),this.helper.bindBuffer(this.za),this.helper.enableAttributes(this.attributes),!0},n.prototype.rc=function(t){var n=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,n);var i,r,s=(2+this.customAttributes.length)*this.$a;if(this.qa&&this.qa.length===s||(this.qa=new Float32Array(s)),this.Ua){var o=(7+this.customAttributes.length)*this.$a;this.Za&&this.Za.length===o||(this.Za=new Float32Array(o))}var u,e,h,f,a,c=[],v=[],l=0,d=0;for(var w in this.Ha)if((r=(i=this.Ha[w]).geometry)&&r.getType()===At.POINT){c[0]=r.getFlatCoordinates()[0],c[1]=r.getFlatCoordinates()[1],Ht(n,c),e=d+6,h=void 0,f=void 0,a=void 0,f=256,a=255,(h=v||[])[0]=Math.floor(e/f/f/f)/a,h[1]=Math.floor(e/f/f)%f/a,h[2]=Math.floor(e/f)%f/a,h[3]=e%f/a,u=h,this.qa[l++]=c[0],this.qa[l++]=c[1],this.Ua&&(this.Za[d++]=c[0],this.Za[d++]=c[1],this.Za[d++]=u[0],this.Za[d++]=u[1],this.Za[d++]=u[2],this.Za[d++]=u[3],this.Za[d++]=Number(w));for(var p=void 0,y=0;y<this.customAttributes.length;y++)p=this.customAttributes[y].callback(i.feature,i.properties),this.qa[l++]=p,this.Ua&&(this.Za[d++]=p)}var b={type:hv,renderInstructions:this.qa.buffer,customAttributesCount:this.customAttributes.length};if(b.projectionTransform=n,this.Va.postMessage(b,[this.qa.buffer]),this.qa=null,this.Ua){var _={type:hv,renderInstructions:this.Za.buffer,customAttributesCount:5+this.customAttributes.length};_.projectionTransform=n,_.hitDetection=!0,this.Va.postMessage(_,[this.Za.buffer]),this.Za=null}},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s){if(mt(this.Ua,66),this.Za){var o=Ht(n.coordinateToPixelTransform,t.slice()),u=this.Ja.readPixel(o[0]/2,o[1]/2),e=function(t){var n=0,i=256,r=255;return n+=Math.round(t[0]*i*i*i*r),n+=Math.round(t[1]*i*i*r),n+=Math.round(t[2]*i*r),n+Math.round(t[3]*r)}([u[0]/255,u[1]/255,u[2]/255,u[3]/255]),h=this.Za[e],f=Math.floor(h).toString(),a=this.getLayer().getSource().getFeatureByUid(f);return a?r(a,this.getLayer(),null):void 0}},n.prototype.renderHitDetection=function(t){if(this.Da.getSize()){this.Ja.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.Xa),this.helper.prepareDrawToRenderTarget(t,this.Ja,!0),this.helper.bindBuffer(this.Da),this.helper.bindBuffer(this.za),this.helper.enableAttributes(this.hitDetectionAttributes);var n=this.za.getSize();this.helper.drawElements(0,n)}},n.prototype.disposeInternal=function(){this.Va.terminate(),this.hu=null,this.Ka.forEach((function(t){J(t)})),this.Ka=null,t.prototype.disposeInternal.call(this)},n}(av),tp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),np="blur",ip="gradient",rp="radius",sp=["#00f","#0ff","#0f0","#ff0","#f00"];var op=function(t){function n(n){var i=this,r=n||{},s=E({},r);delete s.gradient,delete s.radius,delete s.blur,delete s.weight,(i=t.call(this,s)||this).sc=null,i.addChangeListener(ip,i.oc),i.setGradient(r.gradient?r.gradient:sp),i.setBlur(void 0!==r.blur?r.blur:15),i.setRadius(void 0!==r.radius?r.radius:8);var o=r.weight?r.weight:"weight";return i.uc="string"==typeof o?function(t){return t.get(o)}:o,i.setRenderOrder(null),i}return tp(n,t),n.prototype.getBlur=function(){return this.get(np)},n.prototype.getGradient=function(){return this.get(ip)},n.prototype.getRadius=function(){return this.get(rp)},n.prototype.oc=function(){this.sc=function(t){for(var n=1,i=256,r=ao(n,i),s=r.createLinearGradient(0,0,n,i),o=1/(t.length-1),u=0,e=t.length;u<e;++u)s.addColorStop(u*o,t[u]);return r.fillStyle=s,r.fillRect(0,0,n,i),r.canvas}(this.getGradient())},n.prototype.setBlur=function(t){this.set(np,t)},n.prototype.setGradient=function(t){this.set(ip,t)},n.prototype.setRadius=function(t){this.set(rp,t)},n.prototype.createRenderer=function(){return new Qw(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var n=this.uc(t);return void 0!==n?ii(n,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(rp)+this.get(np))}.bind(this),u_blurSlope:function(){return this.get(rp)/Math.max(1,this.get(np))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.sc}.bind(this)}}]})},n.prototype.renderDeclutter=function(){},n}(zw),up=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ep=function(t){function n(n){var i=this,r=n||{},s=E({},r);return delete s.imageRatio,(i=t.call(this,s)||this).ec=void 0!==r.imageRatio?r.imageRatio:1,i}return up(n,t),n.prototype.getImageRatio=function(){return this.ec},n.prototype.createRenderer=function(){return new Ew(this)},n}(Rw),hp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fp="addfeatures",ap=function(t){function n(n,i,r,s){var o=t.call(this,n)||this;return o.features=r,o.file=i,o.projection=s,o}return hp(n,t),n}(c),cp=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{handleEvent:O})||this).on,i.once,i.un,i.hc=!1,i.fc=[];for(var s=r.formatConstructors?r.formatConstructors:[],o=0,u=s.length;o<u;++o){var e=s[o];"function"==typeof e&&(e=new e),i.fc.push(e),i.hc=i.hc||e.getType()===Lf}return i.qn=r.projection?ur(r.projection):null,i.ac=null,i.cc=r.source||null,i.target=r.target?r.target:null,i}return hp(n,t),n.prototype.vc=function(t,n){var i,r=n.target.result,s=this.getMap(),o=this.qn;o||(o=s.getView().getProjection());for(var u=this.fc,e=0,h=u.length;e<h;++e){var f=u[e],a=r;this.hc&&f.getType()!==Lf&&(void 0===i&&(i=(new TextDecoder).decode(r)),a=i);var c=this.lc(f,a,{featureProjection:o});if(c&&c.length>0){this.cc&&(this.cc.clear(),this.cc.addFeatures(c)),this.dispatchEvent(new ap(fp,t,c,o));break}}},n.prototype.dc=function(){var t=this.getMap();if(t){var n=this.target?this.target:t.getViewport();this.ac=[q(n,D,this.handleDrop,this),q(n,L,this.handleStop,this),q(n,F,this.handleStop,this),q(n,D,this.handleStop,this)]}},n.prototype.setActive=function(n){!this.getActive()&&n&&this.dc(),this.getActive()&&!n&&this.wc(),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.wc(),t.prototype.setMap.call(this,n),this.getActive()&&this.dc()},n.prototype.lc=function(t,n,i){try{return t.readFeatures(n,i)}catch(t){return null}},n.prototype.wc=function(){this.ac&&(this.ac.forEach(J),this.ac=null)},n.prototype.handleDrop=function(t){for(var n=t.dataTransfer.files,i=0,r=n.length;i<r;++i){var s=n.item(i),o=new FileReader;o.addEventListener(X,this.vc.bind(this,s)),this.hc?o.readAsArrayBuffer(s):o.readAsText(s)}},n.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},n}(rh),vp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),lp=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).Mr=r.condition?r.condition:_h,i.Er=void 0,i.yc=void 0,i.rs=0,i.cr=void 0!==r.duration?r.duration:400,i}return vp(n,t),n.prototype.handleDragEvent=function(t){if(mh(t)){var n=t.map,i=n.getSize(),r=t.pixel,s=r[0]-i[0]/2,o=i[1]/2-r[1],u=Math.atan2(o,s),e=Math.sqrt(s*s+o*o),h=n.getView();if(void 0!==this.Er){var f=this.Er-u;h.adjustRotationInternal(f)}this.Er=u,void 0!==this.yc&&h.adjustResolutionInternal(this.yc/e),void 0!==this.yc&&(this.rs=this.yc/e),this.yc=e}},n.prototype.handleUpEvent=function(t){if(!mh(t))return!0;var n=t.map.getView(),i=this.rs>1?1:-1;return n.endInteraction(this.cr,i),this.rs=0,!1},n.prototype.handleDownEvent=function(t){return!!mh(t)&&(!!this.Mr(t)&&(t.map.getView().beginInteraction(),this.Er=void 0,this.yc=void 0,!0))},n}(hh),dp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wp=function(t){function n(n,i,r){var s=t.call(this)||this;if(void 0!==r&&void 0===i)s.setFlatCoordinates(r,n);else{var o=i||0;s.setCenterAndRadius(n,o,r)}return s}return dp(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){var s=this.flatCoordinates,o=t-s[0],u=n-s[1],e=o*o+u*u;if(e<r){if(0===e)for(var h=0;h<this.stride;++h)i[h]=s[h];else{var f=this.getRadius()/Math.sqrt(e);i[0]=s[0]+f*o,i[1]=s[1]+f*u;for(h=2;h<this.stride;++h)i[h]=s[h]}return i.length=this.stride,e}return r},n.prototype.containsXY=function(t,n){var i=this.flatCoordinates,r=t-i[0],s=n-i[1];return r*r+s*s<=this.bc()},n.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.computeExtent=function(t){var n=this.flatCoordinates,i=n[this.stride]-n[0];return jn(n[0]-i,n[1]-i,n[0]+i,n[1]+i,t)},n.prototype.getRadius=function(){return Math.sqrt(this.bc())},n.prototype.bc=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+n*n},n.prototype.getType=function(){return At.CIRCLE},n.prototype.intersectsExtent=function(t){if(Jn(t,this.getExtent())){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||(t[1]<=n[1]&&t[3]>=n[1]||Rn(t,this.intersectsCoordinate.bind(this)))}return!1},n.prototype.setCenter=function(t){var n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],r=t.slice();r[n]=r[0]+i;for(var s=1;s<n;++s)r[n+s]=t[s];this.setFlatCoordinates(this.layout,r),this.changed()},n.prototype.setCenterAndRadius=function(t,n,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,s=Zr(r,0,t,this.stride);r[s++]=r[0]+n;for(var o=1,u=this.stride;o<u;++o)r[s++]=r[o];r.length=s,this.changed()},n.prototype.getCoordinates=function(){return null},n.prototype.setCoordinates=function(t,n){},n.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},n.prototype.rotate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(Cr(i,0,i.length,r,t,n,i)),this.changed()},n.prototype.translate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(kr(i,0,i.length,r,t,n,i)),this.changed()},n}(Dr);wp.prototype.transform;var pp=wp,yp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bp=function(t){function n(n,i,r){var s=t.call(this)||this;if(s.nt=[],s.K=-1,s.tt=-1,Array.isArray(n[0]))s.setCoordinates(n,i);else if(void 0!==i&&r)s.setFlatCoordinates(i,n),s.nt=r;else{for(var o=s.getLayout(),u=n,e=[],h=[],f=0,a=u.length;f<a;++f){var c=u[f];0===f&&(o=c.getLayout()),_(e,c.getFlatCoordinates()),h.push(e.length)}s.setFlatCoordinates(o,e),s.nt=h}return s}return yp(n,t),n.prototype.appendLineString=function(t){this.flatCoordinates?_(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.nt.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.nt.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.tt!=this.getRevision()&&(this.K=Math.sqrt(Xr(this.flatCoordinates,0,this.nt,this.stride,0)),this.tt=this.getRevision()),Br(this.flatCoordinates,0,this.nt,this.stride,this.K,!1,t,n,i,r))},n.prototype.getCoordinateAtM=function(t,n,i){if(this.layout!=St&&this.layout!=Tt||0===this.flatCoordinates.length)return null;var r=void 0!==n&&n,s=void 0!==i&&i;return Aw(this.flatCoordinates,0,this.nt,this.stride,t,r,s)},n.prototype.getCoordinates=function(){return os(this.flatCoordinates,0,this.nt,this.stride)},n.prototype.getEnds=function(){return this.nt},n.prototype.getLineString=function(t){return t<0||this.nt.length<=t?null:new Fw(this.flatCoordinates.slice(0===t?0:this.nt[t-1],this.nt[t]),this.layout)},n.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,n=this.nt,i=this.layout,r=[],s=0,o=0,u=n.length;o<u;++o){var e=n[o],h=new Fw(t.slice(s,e),i);r.push(h),s=e}return r},n.prototype.getFlatMidpoints=function(){for(var t=[],n=this.flatCoordinates,i=0,r=this.nt,s=this.stride,o=0,u=r.length;o<u;++o){var e=r[o];_(t,Sw(n,i,e,s,.5)),i=e}return t},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=Kr(this.flatCoordinates,0,this.nt,this.stride,t,i,0,r),new n(i,xt,r)},n.prototype.getType=function(){return At.MULTI_LINE_STRING},n.prototype.intersectsExtent=function(t){return Os(this.flatCoordinates,0,this.nt,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Vr(this.flatCoordinates,0,t,this.stride,this.nt);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(Dr),_p=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gp=function(t){function n(n,i){var r=t.call(this)||this;return i&&!Array.isArray(n[0])?r.setFlatCoordinates(i,n):r.setCoordinates(n,i),r}return _p(n,t),n.prototype.appendPoint=function(t){this.flatCoordinates?_(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){if(r<bn(this.getExtent(),t,n))return r;for(var s=this.flatCoordinates,o=this.stride,u=0,e=s.length;u<e;u+=o){var h=ui(t,n,s[u],s[u+1]);if(h<r){r=h;for(var f=0;f<o;++f)i[f]=s[u+f];i.length=o}}return r},n.prototype.getCoordinates=function(){return ss(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getPoint=function(t){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new ls(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},n.prototype.getPoints=function(){for(var t=this.flatCoordinates,n=this.layout,i=this.stride,r=[],s=0,o=t.length;s<o;s+=i){var u=new ls(t.slice(s,s+i),n);r.push(u)}return r},n.prototype.getType=function(){return At.MULTI_POINT},n.prototype.intersectsExtent=function(t){for(var n=this.flatCoordinates,i=this.stride,r=0,s=n.length;r<s;r+=i){if(mn(t,n[r],n[r+1]))return!0}return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jr(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Dr),mp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Op=function(t){function n(n,i,r){var s=t.call(this)||this;if(s._c=[],s.gc=-1,s.Gf=null,s.K=-1,s.tt=-1,s.st=-1,s.ot=null,!r&&!Array.isArray(n[0])){for(var o=s.getLayout(),u=n,e=[],h=[],f=0,a=u.length;f<a;++f){var c=u[f];0===f&&(o=c.getLayout());for(var v=e.length,l=c.getEnds(),d=0,w=l.length;d<w;++d)l[d]+=v;_(e,c.getFlatCoordinates()),h.push(l)}i=o,n=e,r=h}return void 0!==i&&r?(s.setFlatCoordinates(i,n),s._c=r):s.setCoordinates(n,i),s}return mp(n,t),n.prototype.appendPolygon=function(t){var n;if(this.flatCoordinates){var i=this.flatCoordinates.length;_(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,s=(n=t.getEnds().slice()).length;r<s;++r)n[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this._c.push();this._c.push(n),this.changed()},n.prototype.clone=function(){for(var t=this._c.length,i=new Array(t),r=0;r<t;++r)i[r]=this._c[r].slice();var s=new n(this.flatCoordinates.slice(),this.layout,i);return s.applyProperties(this),s},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.tt!=this.getRevision()&&(this.K=Math.sqrt(Yr(this.flatCoordinates,0,this._c,this.stride,0)),this.tt=this.getRevision()),qr(this.getOrientedFlatCoordinates(),0,this._c,this.stride,this.K,!0,t,n,i,r))},n.prototype.containsXY=function(t,n){return ys(this.getOrientedFlatCoordinates(),0,this._c,this.stride,t,n)},n.prototype.getArea=function(){return fs(this.getOrientedFlatCoordinates(),0,this._c,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?Ns(n=this.getOrientedFlatCoordinates().slice(),0,this._c,this.stride,t):n=this.flatCoordinates,us(n,0,this._c,this.stride)},n.prototype.getEndss=function(){return this._c},n.prototype.getFlatInteriorPoints=function(){if(this.gc!=this.getRevision()){var t=Cw(this.flatCoordinates,0,this._c,this.stride);this.Gf=_s(this.getOrientedFlatCoordinates(),0,this._c,this.stride,t),this.gc=this.getRevision()}return this.Gf},n.prototype.getInteriorPoints=function(){return new gp(this.getFlatInteriorPoints().slice(),St)},n.prototype.getOrientedFlatCoordinates=function(){if(this.st!=this.getRevision()){var t=this.flatCoordinates;As(t,0,this._c,this.stride)?this.ot=t:(this.ot=t.slice(),this.ot.length=Ns(this.ot,0,this._c,this.stride)),this.st=this.getRevision()}return this.ot},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=rs(this.flatCoordinates,0,this._c,this.stride,Math.sqrt(t),i,0,r),new n(i,xt,r)},n.prototype.getPolygon=function(t){if(t<0||this._c.length<=t)return null;var n;if(0===t)n=0;else{var i=this._c[t-1];n=i[i.length-1]}var r=this._c[t].slice(),s=r[r.length-1];if(0!==n)for(var o=0,u=r.length;o<u;++o)r[o]-=n;return new Is(this.flatCoordinates.slice(n,s),this.layout,r)},n.prototype.getPolygons=function(){for(var t=this.layout,n=this.flatCoordinates,i=this._c,r=[],s=0,o=0,u=i.length;o<u;++o){var e=i[o].slice(),h=e[e.length-1];if(0!==s)for(var f=0,a=e.length;f<a;++f)e[f]-=s;var c=new Is(n.slice(s,h),t,e);r.push(c),s=h}return r},n.prototype.getType=function(){return At.MULTI_POLYGON},n.prototype.intersectsExtent=function(t){return xs(this.getOrientedFlatCoordinates(),0,this._c,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Hr(this.flatCoordinates,0,t,this.stride,this._c);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},n}(Dr),Mp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jp="Point",xp="LineString",Ep="Polygon",Sp="Circle",Tp="drawstart",Ap="drawend",Cp="drawabort",Np=function(t){function n(n,i){var r=t.call(this,n)||this;return r.feature=i,r}return Mp(n,t),n}(c);var kp=function(t){function n(n){var i=this,r=n;r.stopDown||(r.stopDown=M),(i=t.call(this,r)||this).on,i.once,i.un,i.mc=!1,i.Oc=null,i.Mc,i.jc,i.xc,i.Ec=!1,i.cc=n.source?n.source:null,i.Sc=n.features?n.features:null,i.Tc=n.snapTolerance?n.snapTolerance:12,i.Pf=n.type,i.Br=function(t){switch(t){case At.POINT:case At.MULTI_POINT:return jp;case At.LINE_STRING:case At.MULTI_LINE_STRING:return xp;case At.POLYGON:case At.MULTI_POLYGON:return Ep;case At.CIRCLE:return Sp;default:throw new Error("Invalid type: "+t)}}(i.Pf),i.Ac=!!n.stopClick,i.Cc=n.minPoints?n.minPoints:i.Br===Ep?3:2,i.Nc=i.Br===Sp?2:n.maxPoints?n.maxPoints:1/0,i.kc=n.finishCondition?n.finishCondition:O;var s,o=n.geometryFunction;if(!o){var u,e=i.Br;if(e===Sp)o=function(t,n,i){var r=n||new pp([NaN,NaN]),s=Or(t[0],i),o=Hi(s,Or(t[t.length-1],i));r.setCenterAndRadius(s,Math.sqrt(o));var u=gr();return u&&r.transform(i,u),r};else e===jp?u=ls:e===xp?u=Fw:e===Ep&&(u=Is),o=function(t,n,i){return n?e===Ep?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new u(t),n}}return i.Bo=o,i.Pc=void 0!==n.dragVertexDelay?n.dragVertexDelay:500,i.Ic=null,i.Gc=null,i.Rc=null,i.Lc=null,i.Fc=null,i.Dc=null,i.zc=n.clickTolerance?n.clickTolerance*n.clickTolerance:36,i.Uc=new zw({source:new wl({useSpatialIndex:!1,wrapX:!!n.wrapX&&n.wrapX}),style:n.style?n.style:(s=Sc(),function(t,n){return s[t.getGeometry().getType()]}),updateWhileInteracting:!0}),i.N=n.geometryName,i.Mr=n.condition?n.condition:bh,i.Xc,n.freehand?i.Xc=dh:i.Xc=n.freehandCondition?n.freehandCondition:_h,i.addChangeListener(Qe,i.Yc),i}return Mp(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),this.Yc()},n.prototype.getOverlay=function(){return this.Uc},n.prototype.handleEvent=function(n){n.originalEvent.type===I&&n.originalEvent.preventDefault(),this.Ec=this.Br!==jp&&this.Xc(n);var i=n.type===Vu.POINTERMOVE,r=!0;!this.Ec&&this.jc&&n.type===Vu.POINTERDRAG&&(Date.now()-this.jc>=this.Pc?(this.Oc=n.pixel,this.mc=!this.Ec,i=!0):this.jc=void 0,this.mc&&void 0!==this.Mc&&(clearTimeout(this.Mc),this.Mc=void 0));return this.Ec&&n.type===Vu.POINTERDRAG&&null!==this.Gc?(this.Wc(n.coordinate),r=!1):this.Ec&&n.type===Vu.POINTERDOWN?r=!1:i&&this.getPointerCount()<2?(r=n.type===Vu.POINTERMOVE)&&this.Ec?(this.En(n),this.mc&&n.originalEvent.preventDefault()):("mouse"===n.originalEvent.pointerType||n.type===Vu.POINTERDRAG&&void 0===this.Mc)&&this.En(n):n.type===Vu.DBLCLICK&&(r=!1),t.prototype.handleEvent.call(this,n)&&r},n.prototype.handleDownEvent=function(t){return this.mc=!this.Ec,this.Ec?(this.Oc=t.pixel,this.Ic||this.Bc(t.coordinate),!0):this.Mr(t)?(this.jc=Date.now(),this.Mc=setTimeout(function(){this.En(new Ju(Vu.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.Pc),this.Oc=t.pixel,!0):(this.jc=void 0,!1)},n.prototype.handleUpEvent=function(t){var n=!0;if(0===this.getPointerCount())if(this.Mc&&(clearTimeout(this.Mc),this.Mc=void 0),this.En(t),this.mc){var i=!this.Ic;i&&this.Bc(t.coordinate),!i&&this.Ec?this.finishDrawing():this.Ec||i&&this.Br!==jp||(this.qc(t.pixel)?this.kc(t)&&this.finishDrawing():this.Wc(t.coordinate)),n=!1}else this.Ec&&this.abortDrawing();return!n&&this.Ac&&t.preventDefault(),n},n.prototype.En=function(t){if(this.xc=t.originalEvent.pointerType,this.Oc&&(!this.Ec&&this.mc||this.Ec&&!this.mc)){var n=this.Oc,i=t.pixel,r=n[0]-i[0],s=n[1]-i[1],o=r*r+s*s;if(this.mc=this.Ec?o>this.zc:o<=this.zc,!this.mc)return}this.Ic?this.Zc(t.coordinate):this.Jc(t.coordinate.slice())},n.prototype.qc=function(t){var n=!1;if(this.Gc){var i=!1,r=[this.Ic],s=this.Br;if(s===jp)n=!0;else if(s===Sp)n=2===this.Lc.length;else if(s===xp)i=this.Lc.length>this.Cc;else if(s===Ep){var o=this.Lc;i=o[0].length>this.Cc,r=[o[0][0],o[0][o[0].length-2]]}if(i)for(var u=this.getMap(),e=0,h=r.length;e<h;e++){var f=r[e],a=u.getPixelFromCoordinate(f),c=t[0]-a[0],v=t[1]-a[1],l=this.Ec?1:this.Tc;if(n=Math.sqrt(c*c+v*v)<=l){this.Ic=f;break}}}return n},n.prototype.Jc=function(t){this.Rc?this.Rc.getGeometry().setCoordinates(t):(this.Rc=new jt(new ls(t)),this.Vc())},n.prototype.Hc=function(t){this.Fc||(this.Fc=new jt);var n=t.getLinearRing(0),i=this.Fc.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new Fw(n.getFlatCoordinates(),n.getLayout()),this.Fc.setGeometry(i))},n.prototype.Bc=function(t){var n=this.getMap().getView().getProjection();this.Ic=t,this.Br===jp?this.Lc=t.slice():this.Br===Ep?(this.Lc=[[t.slice(),t.slice()]],this.Dc=this.Lc[0]):this.Lc=[t.slice(),t.slice()],this.Dc&&(this.Fc=new jt(new Fw(this.Dc)));var i=this.Bo(this.Lc,void 0,n);this.Gc=new jt,this.N&&this.Gc.setGeometryName(this.N),this.Gc.setGeometry(i),this.Vc(),this.dispatchEvent(new Np(Tp,this.Gc))},n.prototype.Zc=function(t){var n,i,r=this.getMap(),s=this.Gc.getGeometry(),o=r.getView().getProjection();(this.Br===jp?i=this.Lc:this.Br===Ep?(i=(n=this.Lc[0])[n.length-1],this.qc(r.getPixelFromCoordinate(t))&&(t=this.Ic.slice())):i=(n=this.Lc)[n.length-1],i[0]=t[0],i[1]=t[1],this.Bo(this.Lc,s,o),this.Rc)&&this.Rc.getGeometry().setCoordinates(t);if(s.getType()===At.POLYGON&&this.Br!==Ep)this.Hc(s);else if(this.Dc){this.Fc.getGeometry().setCoordinates(this.Dc)}this.Vc()},n.prototype.Wc=function(t){var n,i,r=this.Gc.getGeometry(),s=this.getMap().getView().getProjection(),o=this.Br;o===xp||o===Sp?(this.Ic=t.slice(),(i=this.Lc).length>=this.Nc&&(this.Ec?i.pop():n=!0),i.push(t.slice()),this.Bo(i,r,s)):o===Ep&&((i=this.Lc[0]).length>=this.Nc&&(this.Ec?i.pop():n=!0),i.push(t.slice()),n&&(this.Ic=i[0]),this.Bo(this.Lc,r,s)),this.Jc(t.slice()),this.Vc(),n&&this.finishDrawing()},n.prototype.removeLastPoint=function(){if(this.Gc){var t,n=this.Gc.getGeometry(),i=this.getMap().getView().getProjection(),r=this.Br;if(r===xp||r===Sp){if((t=this.Lc).splice(-2,1),t.length>=2){this.Ic=t[t.length-2].slice();var s=this.Ic.slice();t[t.length-1]=s,this.Jc(s)}this.Bo(t,n,i),n.getType()===At.POLYGON&&this.Fc&&this.Hc(n)}else if(r===Ep){(t=this.Lc[0]).splice(-2,1);var o=this.Fc.getGeometry();if(t.length>=2){s=t[t.length-2].slice();t[t.length-1]=s,this.Jc(s)}o.setCoordinates(t),this.Bo(this.Lc,n,i)}1===t.length&&this.abortDrawing(),this.Vc()}},n.prototype.finishDrawing=function(){var t=this.$c();if(t){var n=this.Lc,i=t.getGeometry(),r=this.getMap().getView().getProjection();this.Br===xp?(n.pop(),this.Bo(n,i,r)):this.Br===Ep&&(n[0].pop(),this.Bo(n,i,r),n=i.getCoordinates()),this.Pf===At.MULTI_POINT?t.setGeometry(new gp([n])):this.Pf===At.MULTI_LINE_STRING?t.setGeometry(new bp([n])):this.Pf===At.MULTI_POLYGON&&t.setGeometry(new Op([n])),this.dispatchEvent(new Np(Ap,t)),this.Sc&&this.Sc.push(t),this.cc&&this.cc.addFeature(t)}},n.prototype.$c=function(){this.Ic=null;var t=this.Gc;return this.Gc=null,this.Rc=null,this.Fc=null,this.Uc.getSource().clear(!0),t},n.prototype.abortDrawing=function(){var t=this.$c();t&&this.dispatchEvent(new Np(Cp,t))},n.prototype.appendCoordinates=function(t){var n,i=this.Br,r=!this.Gc;if(r&&this.Bc(t[0]),i===xp||i===Sp)n=this.Lc;else{if(i!==Ep)return;n=this.Lc&&this.Lc.length?this.Lc[0]:[]}r&&n.shift(),n.pop();for(var s=0;s<t.length;s++)this.Wc(t[s]);var o=t[t.length-1];this.Wc(o),this.Zc(o)},n.prototype.extend=function(t){var n=t.getGeometry();this.Gc=t,this.Lc=n.getCoordinates();var i=this.Lc[this.Lc.length-1];this.Ic=i.slice(),this.Lc.push(i.slice()),this.Rc=new jt(new ls(i)),this.Vc(),this.dispatchEvent(new Np(Tp,this.Gc))},n.prototype.Vc=function(){var t=[];this.Gc&&t.push(this.Gc),this.Fc&&t.push(this.Fc),this.Rc&&t.push(this.Rc);var n=this.Uc.getSource();n.clear(!0),n.addFeatures(t)},n.prototype.Yc=function(){var t=this.getMap(),n=this.getActive();t&&n||this.abortDrawing(),this.Uc.setMap(n?t:null)},n}(hh),Pp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ip="extentchanged",Gp=function(t){function n(n){var i=t.call(this,Ip)||this;return i.extent=n,i}return Pp(n,t),n}(c);function Rp(){var t=Sc();return function(n,i){return t[At.POINT]}}function Lp(t){return function(n){return wn([t,n])}}function Fp(t,n){return t[0]==n[0]?function(i){return wn([t,[i[0],n[1]]])}:t[1]==n[1]?function(i){return wn([t,[n[0],i[1]]])}:null}var Dp=function(t){function n(n){var i,r=this,s=n||{};return(r=t.call(this,s)||this).on,r.once,r.un,r.Mr=s.condition?s.condition:dh,r.D=null,r.Kc=null,r.Qc=void 0!==s.pixelTolerance?s.pixelTolerance:10,r.tv=!1,r.nv=null,r.iv=null,n||(n={}),r.rv=new zw({source:new wl({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.boxStyle?n.boxStyle:(i=Sc(),function(t,n){return i[At.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.sv=new zw({source:new wl({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.pointerStyle?n.pointerStyle:Rp(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.extent&&r.setExtent(n.extent),r}return Pp(n,t),n.prototype.ov=function(t,n){var i=n.getCoordinateFromPixelInternal(t),r=this.getExtentInternal();if(r){var s=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);s.sort((function(t,n){return Ki(i,t)-Ki(i,n)}));var o=s[0],u=Wi(i,o),e=n.getPixelFromCoordinateInternal(u);if($i(t,e)<=this.Qc){var h=n.getPixelFromCoordinateInternal(o[0]),f=n.getPixelFromCoordinateInternal(o[1]),a=Hi(e,h),c=Hi(e,f),v=Math.sqrt(Math.min(a,c));return this.tv=v<=this.Qc,this.tv&&(u=a>c?o[1]:o[0]),u}}return null},n.prototype.En=function(t){var n=t.pixel,i=t.map,r=this.ov(n,i);r||(r=i.getCoordinateFromPixelInternal(n)),this.uv(r)},n.prototype.ev=function(t){var n=this.nv;return n?t?n.setGeometry(Rs(t)):n.setGeometry(void 0):(n=new jt(t?Rs(t):{}),this.nv=n,this.rv.getSource().addFeature(n)),n},n.prototype.uv=function(t){var n=this.iv;n?n.getGeometry().setCoordinates(t):(n=new jt(new ls(t)),this.iv=n,this.sv.getSource().addFeature(n));return n},n.prototype.handleEvent=function(n){return!n.originalEvent||!this.Mr(n)||(n.type!=Vu.POINTERMOVE||this.handlingDownUpSequence||this.En(n),t.prototype.handleEvent.call(this,n),!1)},n.prototype.handleDownEvent=function(t){var n=t.pixel,i=t.map,r=this.getExtentInternal(),s=this.ov(n,i),o=function(t){var n=null,i=null;return t[0]==r[0]?n=r[2]:t[0]==r[2]&&(n=r[0]),t[1]==r[1]?i=r[3]:t[1]==r[3]&&(i=r[1]),null!==n&&null!==i?[n,i]:null};if(s&&r){var u=s[0]==r[0]||s[0]==r[2]?s[0]:null,e=s[1]==r[1]||s[1]==r[3]?s[1]:null;null!==u&&null!==e?this.Kc=Lp(o(s)):null!==u?this.Kc=Fp(o([u,r[1]]),o([u,r[3]])):null!==e&&(this.Kc=Fp(o([r[0],e]),o([r[2],e])))}else s=i.getCoordinateFromPixelInternal(n),this.setExtent([s[0],s[1],s[0],s[1]]),this.Kc=Lp(s);return!0},n.prototype.handleDragEvent=function(t){if(this.Kc){var n=t.coordinate;this.setExtent(this.Kc(n)),this.uv(n)}},n.prototype.handleUpEvent=function(t){this.Kc=null;var n=this.getExtentInternal();return n&&0!==Ln(n)||this.setExtent(null),!1},n.prototype.setMap=function(n){this.rv.setMap(n),this.sv.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getExtent=function(){return Mr(this.getExtentInternal(),this.getMap().getView().getProjection())},n.prototype.getExtentInternal=function(){return this.D},n.prototype.setExtent=function(t){this.D=t||null,this.ev(t),this.dispatchEvent(new Gp(this.D))},n}(hh);function zp(t){return(zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Up=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Xp=[0,0,0,0],Yp=[],Wp="modifystart",Bp="modifyend",qp=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.features=i,s.mapBrowserEvent=r,s}return Up(n,t),n}(c);function Zp(t,n){return t.index-n.index}function Jp(t,n,i){var r=n.geometry;if(r.getType()===At.CIRCLE){var s=r;if(1===n.index){var o=gr();o&&(s=s.clone().transform(o,i));var u=Hi(s.getCenter(),Or(t,i)),e=Math.sqrt(u)-s.getRadius();return e*e}}var h=Or(t,i);return Yp[0]=Or(n.segment[0],i),Yp[1]=Or(n.segment[1],i),Ki(h,Yp)}function Vp(t,n,i){var r=n.geometry;if(r.getType()===At.CIRCLE&&1===n.index){var s=r,o=gr();return o&&(s=s.clone().transform(o,i)),mr(s.getClosestPoint(Or(t,i)),i)}var u=Or(t,i);return Yp[0]=Or(n.segment[0],i),Yp[1]=Or(n.segment[1],i),mr(Wi(u,Yp),i)}var Hp=function(t){function n(n){var i,r,s=t.call(this,n)||this;if(s.on,s.once,s.un,s.hv=s.ye.bind(s),s.Mr=n.condition?n.condition:Oh,s.fv=function(t){return ah(t)&&yh(t)},s.av=n.deleteCondition?n.deleteCondition:s.fv,s.cv=n.insertVertexCondition?n.insertVertexCondition:dh,s.iv=null,s.vv=null,s.lv=[0,0],s.dv=!1,s.wv=null,s.pv=new il,s.Qc=void 0!==n.pixelTolerance?n.pixelTolerance:10,s.tv=!1,s.yv=!1,s.bv=[],s.Uc=new zw({source:new wl({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.style?n.style:(i=Sc(),function(t,n){return i[At.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),s._v={Point:s.gv.bind(s),LineString:s.mv.bind(s),LinearRing:s.mv.bind(s),Polygon:s.Ov.bind(s),MultiPoint:s.Mv.bind(s),MultiLineString:s.jv.bind(s),MultiPolygon:s.xv.bind(s),Circle:s.Ev.bind(s),GeometryCollection:s.Sv.bind(s)},s.cc=null,s.Tv=null,n.features?r=n.features:n.source&&(s.cc=n.source,r=new et(s.cc.getFeatures()),s.cc.addEventListener(ul,s.Av.bind(s)),s.cc.addEventListener(fl,s.Cv.bind(s))),!r)throw new Error("The modify interaction requires features, a source or a layer");return n.hitDetection&&(s.Tv=n.hitDetection),s.Sc=r,s.Sc.forEach(s.Nv.bind(s)),s.Sc.addEventListener(it,s.kv.bind(s)),s.Sc.addEventListener(rt,s.Pv.bind(s)),s.Iv=null,s.pr=[0,0],s.Gv=void 0===n.snapToPointer?!s.Tv:n.snapToPointer,s}return Up(n,t),n.prototype.Nv=function(t){var n=t.getGeometry();if(n){var i=this._v[n.getType()];i&&i(t,n)}var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.Rv(this.lv,r),t.addEventListener(k,this.hv)},n.prototype.Lv=function(t,n){if(!this.wv){this.wv=new et;for(var i=this.wv.getArray(),r=0,s=n.length;r<s;++r)for(var o=n[r],u=0,e=o.length;u<e;++u){var h=o[u].feature;h&&-1===i.indexOf(h)&&this.wv.push(h)}0===this.wv.getLength()?this.wv=null:this.dispatchEvent(new qp(Wp,this.wv,t))}},n.prototype.Fv=function(t){this.Dv(t),this.iv&&0===this.Sc.getLength()&&(this.Uc.getSource().removeFeature(this.iv),this.iv=null),t.removeEventListener(k,this.hv)},n.prototype.Dv=function(t){var n=this.pv,i=[];n.forEach((function(n){t===n.feature&&i.push(n)}));for(var r=i.length-1;r>=0;--r){for(var s=i[r],o=this.bv.length-1;o>=0;--o)this.bv[o][0]===s&&this.bv.splice(o,1);n.remove(s)}},n.prototype.setActive=function(n){this.iv&&!n&&(this.Uc.getSource().removeFeature(this.iv),this.iv=null),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.Uc.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getOverlay=function(){return this.Uc},n.prototype.Av=function(t){t.feature&&this.Sc.push(t.feature)},n.prototype.Cv=function(t){t.feature&&this.Sc.remove(t.feature)},n.prototype.kv=function(t){this.Nv(t.element)},n.prototype.ye=function(t){if(!this.yv){var n=t.target;this.Fv(n),this.Nv(n)}},n.prototype.Pv=function(t){var n=t.element;this.Fv(n)},n.prototype.gv=function(t,n){var i=n.getCoordinates(),r={feature:t,geometry:n,segment:[i,i]};this.pv.insert(n.getExtent(),r)},n.prototype.Mv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r){var o=i[r],u={feature:t,geometry:n,depth:[r],index:r,segment:[o,o]};this.pv.insert(n.getExtent(),u)}},n.prototype.mv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length-1;r<s;++r){var o=i.slice(r,r+2),u={feature:t,geometry:n,index:r,segment:o};this.pv.insert(wn(o),u)}},n.prototype.jv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length-1;u<e;++u){var h=o.slice(u,u+2),f={feature:t,geometry:n,depth:[r],index:u,segment:h};this.pv.insert(wn(h),f)}},n.prototype.Ov=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length-1;u<e;++u){var h=o.slice(u,u+2),f={feature:t,geometry:n,depth:[r],index:u,segment:h};this.pv.insert(wn(h),f)}},n.prototype.xv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length;u<e;++u)for(var h=o[u],f=0,a=h.length-1;f<a;++f){var c=h.slice(f,f+2),v={feature:t,geometry:n,depth:[u,r],index:f,segment:c};this.pv.insert(wn(c),v)}},n.prototype.Ev=function(t,n){var i=n.getCenter(),r={feature:t,geometry:n,index:0,segment:[i,i]},s={feature:t,geometry:n,index:1,segment:[i,i]},o=[r,s];r.featureSegments=o,s.featureSegments=o,this.pv.insert(En(i),r);var u=n,e=gr();if(e&&this.getMap()){var h=this.getMap().getView().getProjection();u=Ls(u=u.clone().transform(e,h)).transform(h,e)}this.pv.insert(u.getExtent(),s)},n.prototype.Sv=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var s=i[r];(0,this._v[s.getType()])(t,s)}},n.prototype.zv=function(t,n,i){var r=this.iv;r?r.getGeometry().setCoordinates(t):(r=new jt(new ls(t)),this.iv=r,this.Uc.getSource().addFeature(r));return r.set("features",n),r.set("geometries",i),r},n.prototype.handleEvent=function(n){return!n.originalEvent||(this.Iv=n,n.map.getView().getInteracting()||n.type!=Vu.POINTERMOVE||this.handlingDownUpSequence||this.En(n),this.iv&&this.av(n)&&(i=!(n.type!=Vu.SINGLECLICK||!this.dv)||this.removePoint()),n.type==Vu.SINGLECLICK&&(this.dv=!1),t.prototype.handleEvent.call(this,n)&&!i);var i},n.prototype.handleDragEvent=function(t){this.dv=!1,this.Lv(t,this.bv);for(var n=[t.coordinate[0]+this.pr[0],t.coordinate[1]+this.pr[1]],i=[],r=[],s=0,o=this.bv.length;s<o;++s){var u=this.bv[s],e=u[0],h=e.feature;-1===i.indexOf(h)&&i.push(h);var f=e.geometry;-1===r.indexOf(f)&&r.push(f);for(var a=e.depth,c=void 0,v=e.segment,l=u[1];n.length<f.getStride();)n.push(v[l][n.length]);switch(f.getType()){case At.POINT:c=n,v[0]=n,v[1]=n;break;case At.MULTI_POINT:(c=f.getCoordinates())[e.index]=n,v[0]=n,v[1]=n;break;case At.LINE_STRING:(c=f.getCoordinates())[e.index+l]=n,v[l]=n;break;case At.MULTI_LINE_STRING:case At.POLYGON:(c=f.getCoordinates())[a[0]][e.index+l]=n,v[l]=n;break;case At.MULTI_POLYGON:(c=f.getCoordinates())[a[1]][a[0]][e.index+l]=n,v[l]=n;break;case At.CIRCLE:if(v[0]=n,v[1]=n,0===e.index)this.yv=!0,f.setCenter(n),this.yv=!1;else{this.yv=!0;var d=t.map.getView().getProjection(),w=$i(Or(f.getCenter(),d),Or(n,d)),p=gr();if(p){var y=f.clone().transform(p,d);y.setRadius(w),w=y.transform(d,p).getRadius()}f.setRadius(w),this.yv=!1}}c&&this.Uv(f,c)}this.zv(n,i,r)},n.prototype.handleDownEvent=function(t){if(!this.Mr(t))return!1;var n=t.coordinate;this.Rv(t.pixel,t.map,n),this.bv.length=0,this.wv=null;var i=this.iv;if(i){var r=t.map.getView().getProjection(),s=[],u=i.getGeometry().getCoordinates(),e=wn([u]),h=this.pv.getInExtent(e),f={};h.sort(Zp);for(var a=0,c=h.length;a<c;++a){var v=h[a],l=v.segment,d=o(v.geometry),w=v.depth;if(w&&(d+="-"+w.join("-")),f[d]||(f[d]=new Array(2)),v.geometry.getType()!==At.CIRCLE||1!==v.index)if(!Zi(l[0],u)||f[d][0])if(!Zi(l[1],u)||f[d][1])o(l)in this.vv&&!f[d][0]&&!f[d][1]&&this.cv(t)&&s.push(v);else{if((v.geometry.getType()===At.LINE_STRING||v.geometry.getType()===At.MULTI_LINE_STRING)&&f[d][0]&&0===f[d][0].index)continue;this.bv.push([v,1]),f[d][1]=v}else this.bv.push([v,0]),f[d][0]=v;else Zi(Vp(n,v,r),u)&&!f[d][0]&&(this.bv.push([v,0]),f[d][0]=v)}s.length&&this.Lv(t,[s]);for(var p=s.length-1;p>=0;--p)this.Xv(s[p],u)}return!!this.iv},n.prototype.handleUpEvent=function(t){for(var n=this.bv.length-1;n>=0;--n){var i=this.bv[n][0],r=i.geometry;if(r.getType()===At.CIRCLE){var s=r.getCenter(),o=i.featureSegments[0],u=i.featureSegments[1];o.segment[0]=s,o.segment[1]=s,u.segment[0]=s,u.segment[1]=s,this.pv.update(En(s),o);var e=r,h=gr();if(h){var f=t.map.getView().getProjection();e=Ls(e=e.clone().transform(h,f)).transform(f,h)}this.pv.update(e.getExtent(),u)}else this.pv.update(wn(i.segment),i)}return this.wv&&(this.dispatchEvent(new qp(Bp,this.wv,t)),this.wv=null),!1},n.prototype.En=function(t){this.lv=t.pixel,this.Rv(t.pixel,t.map,t.coordinate)},n.prototype.Rv=function(t,n,i){var r,s,u=this,e=i||n.getCoordinateFromPixel(t),h=n.getView().getProjection();if(this.Tv){var f="object"===zp(this.Tv)?function(t){return t===u.Tv}:void 0;n.forEachFeatureAtPixel(t,(function(t,n,i){if((i=i||t.getGeometry()).getType()===At.POINT&&p(u.Sc.getArray(),t)){s=i;var o=i.getFlatCoordinates().slice(0,2);r=[{feature:t,geometry:i,segment:[o,o]}]}return!0}),{layerFilter:f})}if(!r){var a=Mr(pn(jr(En(e,Xp),h),n.getView().getResolution()*this.Qc,Xp),h);r=this.pv.getInExtent(a)}if(r&&r.length>0){var c=r.sort((function(t,n){return Jp(e,t,h)-Jp(e,n,h)}))[0],v=c.segment,l=Vp(e,c,h),d=n.getPixelFromCoordinate(l),w=$i(t,d);if(s||w<=this.Qc){var y={};if(y[o(v)]=!0,this.Gv||(this.pr[0]=l[0]-e[0],this.pr[1]=l[1]-e[1]),c.geometry.getType()===At.CIRCLE&&1===c.index)this.tv=!0,this.zv(l,[c.feature],[c.geometry]);else{var b=n.getPixelFromCoordinate(v[0]),_=n.getPixelFromCoordinate(v[1]),g=Hi(d,b),m=Hi(d,_);w=Math.sqrt(Math.min(g,m)),this.tv=w<=this.Qc,this.tv&&(l=g>m?v[1]:v[0]),this.zv(l,[c.feature],[c.geometry]);var O={};O[o(c.geometry)]=!0;for(var M=1,j=r.length;M<j;++M){var x=r[M].segment;if(!(Zi(v[0],x[0])&&Zi(v[1],x[1])||Zi(v[0],x[1])&&Zi(v[1],x[0])))break;var E=o(r[M].geometry);E in O||(O[E]=!0,y[o(x)]=!0)}}return void(this.vv=y)}}this.iv&&(this.Uc.getSource().removeFeature(this.iv),this.iv=null)},n.prototype.Xv=function(t,n){for(var i,r=t.segment,s=t.feature,o=t.geometry,u=t.depth,e=t.index;n.length<o.getStride();)n.push(0);switch(o.getType()){case At.MULTI_LINE_STRING:case At.POLYGON:(i=o.getCoordinates())[u[0]].splice(e+1,0,n);break;case At.MULTI_POLYGON:(i=o.getCoordinates())[u[1]][u[0]].splice(e+1,0,n);break;case At.LINE_STRING:(i=o.getCoordinates()).splice(e+1,0,n);break;default:return}this.Uv(o,i);var h=this.pv;h.remove(t),this.Yv(o,e,u,1);var f={segment:[r[0],n],feature:s,geometry:o,depth:u,index:e};h.insert(wn(f.segment),f),this.bv.push([f,1]);var a={segment:[n,r[1]],feature:s,geometry:o,depth:u,index:e+1};h.insert(wn(a.segment),a),this.bv.push([a,0]),this.dv=!0},n.prototype.removePoint=function(){if(this.Iv&&this.Iv.type!=Vu.POINTERDRAG){var t=this.Iv;this.Lv(t,this.bv);var n=this.Wv();return this.dispatchEvent(new qp(Bp,this.wv,t)),this.wv=null,n}return!1},n.prototype.Wv=function(){var t,n,i,r,s,u,e,h,f,a,c,v=this.bv,l={},d=!1;for(s=v.length-1;s>=0;--s)c=o((a=(i=v[s])[0]).feature),a.depth&&(c+="-"+a.depth.join("-")),c in l||(l[c]={}),0===i[1]?(l[c].right=a,l[c].index=a.index):1==i[1]&&(l[c].left=a,l[c].index=a.index+1);for(c in l){switch(f=l[c].right,e=l[c].left,(h=(u=l[c].index)-1)<0&&(h=0),t=n=(r=(a=void 0!==e?e:f).geometry).getCoordinates(),d=!1,r.getType()){case At.MULTI_LINE_STRING:n[a.depth[0]].length>2&&(n[a.depth[0]].splice(u,1),d=!0);break;case At.LINE_STRING:n.length>2&&(n.splice(u,1),d=!0);break;case At.MULTI_POLYGON:t=t[a.depth[1]];case At.POLYGON:(t=t[a.depth[0]]).length>4&&(u==t.length-1&&(u=0),t.splice(u,1),d=!0,0===u&&(t.pop(),t.push(t[0]),h=t.length-1))}if(d){this.Uv(r,n);var w=[];if(void 0!==e&&(this.pv.remove(e),w.push(e.segment[0])),void 0!==f&&(this.pv.remove(f),w.push(f.segment[1])),void 0!==e&&void 0!==f){var p={depth:a.depth,feature:a.feature,geometry:a.geometry,index:h,segment:w};this.pv.insert(wn(p.segment),p)}this.Yv(r,u,a.depth,-1),this.iv&&(this.Uc.getSource().removeFeature(this.iv),this.iv=null),v.length=0}}return d},n.prototype.Uv=function(t,n){this.yv=!0,t.setCoordinates(n),this.yv=!1},n.prototype.Yv=function(t,n,i,r){this.pv.forEachInExtent(t.getExtent(),(function(s){s.geometry===t&&(void 0===i||void 0===s.depth||g(s.depth,i))&&s.index>n&&(s.index+=r)}))},n}(hh),$p=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Kp="select",Qp=function(t){function n(n,i,r,s){var o=t.call(this,n)||this;return o.selected=i,o.deselected=r,o.mapBrowserEvent=s,o}return $p(n,t),n}(c),ty={};var ny=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r,s,o=n||{};if(i.Bv=i.Nv.bind(i),i.qv=i.Fv.bind(i),i.Mr=o.condition?o.condition:yh,i.Zv=o.addCondition?o.addCondition:ph,i.Jv=o.removeCondition?o.removeCondition:ph,i.Vv=o.toggleCondition?o.toggleCondition:_h,i.Hv=!!o.multi&&o.multi,i.$v=o.filter?o.filter:O,i.Kv=o.hitTolerance?o.hitTolerance:0,i.k=void 0!==o.style?o.style:(_((r=Sc())[At.POLYGON],r[At.LINE_STRING]),_(r[At.GEOMETRY_COLLECTION],r[At.LINE_STRING]),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),i.Sc=o.features||new et,o.layers)if("function"==typeof o.layers)s=o.layers;else{var u=o.layers;s=function(t){return p(u,t)}}else s=O;return i.Qv=s,i.tl={},i}return $p(n,t),n.prototype.nl=function(t,n){this.tl[o(t)]=n},n.prototype.getFeatures=function(){return this.Sc},n.prototype.getHitTolerance=function(){return this.Kv},n.prototype.getLayer=function(t){return this.tl[o(t)]},n.prototype.setHitTolerance=function(t){this.Kv=t},n.prototype.setMap=function(n){this.getMap()&&this.k&&this.Sc.forEach(this.il.bind(this)),t.prototype.setMap.call(this,n),n?(this.Sc.addEventListener(it,this.Bv),this.Sc.addEventListener(rt,this.qv),this.k&&this.Sc.forEach(this.rl.bind(this))):(this.Sc.removeEventListener(it,this.Bv),this.Sc.removeEventListener(rt,this.qv))},n.prototype.Nv=function(t){var n=t.element;this.k&&this.rl(n)},n.prototype.Fv=function(t){var n=t.element;this.k&&this.il(n)},n.prototype.getStyle=function(){return this.k},n.prototype.rl=function(t){var n=o(t);n in ty||(ty[n]=t.getStyle()),t.setStyle(this.k)},n.prototype.il=function(t){for(var i=this.getMap().getInteractions().getArray(),r=i.length-1;r>=0;--r){var s=i[r];if(s!==this&&s instanceof n&&s.getStyle()&&-1!==s.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(s.getStyle())}var u=o(t);t.setStyle(ty[u]),delete ty[u]},n.prototype.sl=function(t){delete this.tl[o(t)]},n.prototype.handleEvent=function(t){if(!this.Mr(t))return!0;var n=this.Zv(t),i=this.Jv(t),r=this.Vv(t),s=!n&&!i&&!r,o=t.map,u=this.getFeatures(),e=[],h=[];if(s){S(this.tl),o.forEachFeatureAtPixel(t.pixel,function(t,n){if(this.$v(t,n))return h.push(t),this.nl(t,n),!this.Hv}.bind(this),{layerFilter:this.Qv,hitTolerance:this.Kv});for(var f=u.getLength()-1;f>=0;--f){var a=u.item(f),c=h.indexOf(a);c>-1?h.splice(c,1):(u.remove(a),e.push(a))}0!==h.length&&u.extend(h)}else{o.forEachFeatureAtPixel(t.pixel,function(t,s){if(this.$v(t,s))return!n&&!r||p(u.getArray(),t)?(i||r)&&p(u.getArray(),t)&&(e.push(t),this.sl(t)):(h.push(t),this.nl(t,s)),!this.Hv}.bind(this),{layerFilter:this.Qv,hitTolerance:this.Kv});for(var v=e.length-1;v>=0;--v)u.remove(e[v]);u.extend(h)}return(h.length>0||e.length>0)&&this.dispatchEvent(new Qp(Kp,h,e,t)),!0},n}(rh),iy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function ry(t){return t.feature?t.feature:t.element?t.element:void 0}var sy=[],oy=function(t){function n(n){var i=this,r=n||{},s=r;return s.handleDownEvent||(s.handleDownEvent=O),s.stopDown||(s.stopDown=M),(i=t.call(this,s)||this).cc=r.source?r.source:null,i.ul=void 0===r.vertex||r.vertex,i.el=void 0===r.edge||r.edge,i.Sc=r.features?r.features:null,i.hl=[],i.fl={},i.al={},i.cl={},i.Qc=void 0!==r.pixelTolerance?r.pixelTolerance:10,i.pv=new il,i._v={Point:i.gv.bind(i),LineString:i.mv.bind(i),LinearRing:i.mv.bind(i),Polygon:i.Ov.bind(i),MultiPoint:i.Mv.bind(i),MultiLineString:i.jv.bind(i),MultiPolygon:i.xv.bind(i),GeometryCollection:i.Sv.bind(i),Circle:i.Ev.bind(i)},i}return iy(n,t),n.prototype.addFeature=function(t,n){var i=void 0===n||n,r=o(t),s=t.getGeometry();if(s){var u=this._v[s.getType()];u&&(this.al[r]=s.getExtent([1/0,1/0,-1/0,-1/0]),u(t,s))}i&&(this.fl[r]=q(t,k,this.ye,this))},n.prototype.vl=function(t){this.addFeature(t)},n.prototype.ll=function(t){this.removeFeature(t)},n.prototype.dl=function(){var t;return this.Sc?t=this.Sc:this.cc&&(t=this.cc.getFeatures()),t},n.prototype.handleEvent=function(n){var i=this.snapTo(n.pixel,n.coordinate,n.map);return i.snapped&&(n.coordinate=i.vertex.slice(0,2),n.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,n)},n.prototype.kv=function(t){var n=ry(t);this.addFeature(n)},n.prototype.Pv=function(t){var n=ry(t);this.removeFeature(n)},n.prototype.ye=function(t){var n=t.target;if(this.handlingDownUpSequence){var i=o(n);i in this.cl||(this.cl[i]=n)}else this.wl(n)},n.prototype.handleUpEvent=function(t){var n=T(this.cl);return n.length&&(n.forEach(this.wl.bind(this)),this.cl={}),!1},n.prototype.removeFeature=function(t,n){var i=void 0===n||n,r=o(t),s=this.al[r];if(s){var u=this.pv,e=[];u.forEachInExtent(s,(function(n){t===n.feature&&e.push(n)}));for(var h=e.length-1;h>=0;--h)u.remove(e[h])}i&&(J(this.fl[r]),delete this.fl[r])},n.prototype.setMap=function(n){var i=this.getMap(),r=this.hl,s=this.dl();i&&(r.forEach(J),r.length=0,s.forEach(this.ll.bind(this))),t.prototype.setMap.call(this,n),n&&(this.Sc?r.push(q(this.Sc,it,this.kv,this),q(this.Sc,rt,this.Pv,this)):this.cc&&r.push(q(this.cc,ul,this.kv,this),q(this.cc,fl,this.Pv,this)),s.forEach(this.vl.bind(this)))},n.prototype.snapTo=function(t,n,i){var r=wn([i.getCoordinateFromPixel([t[0]-this.Qc,t[1]+this.Qc]),i.getCoordinateFromPixel([t[0]+this.Qc,t[1]-this.Qc])]),s=this.pv.getInExtent(r);this.ul&&!this.el&&(s=s.filter((function(t){return t.feature.getGeometry().getType()!==At.CIRCLE})));var o=!1,u=null,e=null;if(0===s.length)return{snapped:o,vertex:u,vertexPixel:e};for(var h,f=i.getView().getProjection(),a=Or(n,f),c=1/0,v=0;v<s.length;++v){var l=s[v];sy[0]=Or(l.segment[0],f),sy[1]=Or(l.segment[1],f);var d=Ki(a,sy);d<c&&(h=l,c=d)}var w=h.segment;if(this.ul&&!this.el){var p=i.getPixelFromCoordinate(w[0]),y=i.getPixelFromCoordinate(w[1]),b=Hi(t,p),_=Hi(t,y);Math.sqrt(Math.min(b,_))<=this.Qc&&(o=!0,u=b>_?w[1]:w[0],e=i.getPixelFromCoordinate(u))}else if(this.el){var g=h.feature.getGeometry().getType()===At.CIRCLE;if(g){var m=h.feature.getGeometry(),O=gr();O&&(m=m.clone().transform(O,f)),u=mr(Yi(a,m),f)}else sy[0]=Or(w[0],f),sy[1]=Or(w[1],f),u=mr(Wi(a,sy),f);if($i(t,e=i.getPixelFromCoordinate(u))<=this.Qc&&(o=!0,this.ul&&!g)){p=i.getPixelFromCoordinate(w[0]),y=i.getPixelFromCoordinate(w[1]),b=Hi(e,p),_=Hi(e,y);Math.sqrt(Math.min(b,_))<=this.Qc&&(u=b>_?w[1]:w[0],e=i.getPixelFromCoordinate(u))}}return o&&(e=[Math.round(e[0]),Math.round(e[1])]),{snapped:o,vertex:u,vertexPixel:e}},n.prototype.wl=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},n.prototype.Ev=function(t,n){var i=this.getMap().getView().getProjection(),r=n,s=gr();s&&(r=r.clone().transform(s,i));var o=Ls(r);s&&o.transform(i,s);for(var u=o.getCoordinates()[0],e=0,h=u.length-1;e<h;++e){var f=u.slice(e,e+2),a={feature:t,segment:f};this.pv.insert(wn(f),a)}},n.prototype.Sv=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var s=this._v[i[r].getType()];s&&s(t,i[r])}},n.prototype.mv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length-1;r<s;++r){var o=i.slice(r,r+2),u={feature:t,segment:o};this.pv.insert(wn(o),u)}},n.prototype.jv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length-1;u<e;++u){var h=o.slice(u,u+2),f={feature:t,segment:h};this.pv.insert(wn(h),f)}},n.prototype.Mv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r){var o=i[r],u={feature:t,segment:[o,o]};this.pv.insert(n.getExtent(),u)}},n.prototype.xv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length;u<e;++u)for(var h=o[u],f=0,a=h.length-1;f<a;++f){var c=h.slice(f,f+2),v={feature:t,segment:c};this.pv.insert(wn(c),v)}},n.prototype.gv=function(t,n){var i=n.getCoordinates(),r={feature:t,segment:[i,i]};this.pv.insert(n.getExtent(),r)},n.prototype.Ov=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length-1;u<e;++u){var h=o.slice(u,u+2),f={feature:t,segment:h};this.pv.insert(wn(h),f)}},n}(hh),uy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ey="translatestart",hy="translating",fy="translateend",ay=function(t){function n(n,i,r,s,o){var u=t.call(this,n)||this;return u.features=i,u.coordinate=r,u.startCoordinate=s,u.mapBrowserEvent=o,u}return uy(n,t),n}(c),cy=function(t){function n(n){var i,r=this,s=n||{};if((r=t.call(this,s)||this).on,r.once,r.un,r.pl=null,r.yl=null,r.Sc=void 0!==s.features?s.features:null,s.layers&&!r.Sc)if("function"==typeof s.layers)i=s.layers;else{var o=s.layers;i=function(t){return p(o,t)}}else i=O;return r.Qv=i,r.$v=s.filter&&!r.Sc?s.filter:O,r.Kv=s.hitTolerance?s.hitTolerance:0,r.Mr=s.condition?s.condition:dh,r.bl=null,r.addChangeListener(Qe,r._l),r}return uy(n,t),n.prototype.handleDownEvent=function(t){if(!t.originalEvent||!this.Mr(t))return!1;if(this.bl=this.gl(t.pixel,t.map),!this.pl&&this.bl){this.yl=t.coordinate,this.pl=t.coordinate,this.handleMoveEvent(t);var n=this.Sc||new et([this.bl]);return this.dispatchEvent(new ay(ey,n,t.coordinate,this.yl,t)),!0}return!1},n.prototype.handleUpEvent=function(t){if(this.pl){this.pl=null,this.handleMoveEvent(t);var n=this.Sc||new et([this.bl]);return this.dispatchEvent(new ay(fy,n,t.coordinate,this.yl,t)),this.yl=null,!0}return!1},n.prototype.handleDragEvent=function(t){if(this.pl){var n=t.coordinate,i=n[0]-this.pl[0],r=n[1]-this.pl[1],s=this.Sc||new et([this.bl]);s.forEach((function(t){var n=t.getGeometry();n.translate(i,r),t.setGeometry(n)})),this.pl=n,this.dispatchEvent(new ay(hy,s,n,this.yl,t))}},n.prototype.handleMoveEvent=function(t){var n=t.map.getViewport();this.gl(t.pixel,t.map)?(n.classList.remove(this.pl?"ol-grab":"ol-grabbing"),n.classList.add(this.pl?"ol-grabbing":"ol-grab")):n.classList.remove("ol-grab","ol-grabbing")},n.prototype.gl=function(t,n){return n.forEachFeatureAtPixel(t,function(t,n){if(this.$v(t,n)&&(!this.Sc||p(this.Sc.getArray(),t)))return t}.bind(this),{layerFilter:this.Qv,hitTolerance:this.Kv})},n.prototype.getHitTolerance=function(){return this.Kv},n.prototype.setHitTolerance=function(t){this.Kv=t},n.prototype.setMap=function(n){var i=this.getMap();t.prototype.setMap.call(this,n),this.Yc(i)},n.prototype._l=function(){this.Yc(null)},n.prototype.Yc=function(t){var n=this.getMap(),i=this.getActive();n&&i||(n=n||t)&&n.getViewport().classList.remove("ol-grab","ol-grabbing")},n}(hh),vy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function ly(t){for(var n=[],i=0,r=t.length;i<r;++i)n.push(t[i].clone());return n}var dy=function(t){function n(n){var i=t.call(this)||this;return i.ml=n||null,i.Ol=[],i.Ml(),i}return vy(n,t),n.prototype.jl=function(){this.Ol.forEach(J),this.Ol.length=0},n.prototype.Ml=function(){if(this.ml)for(var t=0,n=this.ml.length;t<n;++t)this.Ol.push(q(this.ml[t],k,this.changed,this))},n.prototype.clone=function(){var t=new n(null);return t.setGeometries(this.ml),t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){if(r<bn(this.getExtent(),t,n))return r;for(var s=this.ml,o=0,u=s.length;o<u;++o)r=s[o].closestPointXY(t,n,i,r);return r},n.prototype.containsXY=function(t,n){for(var i=this.ml,r=0,s=i.length;r<s;++r)if(i[r].containsXY(t,n))return!0;return!1},n.prototype.computeExtent=function(t){xn(t);for(var n=this.ml,i=0,r=n.length;i<r;++i)Cn(t,n[i].getExtent());return t},n.prototype.getGeometries=function(){return ly(this.ml)},n.prototype.getGeometriesArray=function(){return this.ml},n.prototype.getGeometriesArrayRecursive=function(){for(var t=[],n=this.ml,i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],r=this.ml,s=!1,o=0,u=r.length;o<u;++o){var e=r[o],h=e.getSimplifiedGeometry(t);i.push(h),h!==e&&(s=!0)}if(s){var f=new n(null);return f.setGeometriesArray(i),f}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},n.prototype.getType=function(){return At.GEOMETRY_COLLECTION},n.prototype.intersectsExtent=function(t){for(var n=this.ml,i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(t))return!0;return!1},n.prototype.isEmpty=function(){return 0===this.ml.length},n.prototype.rotate=function(t,n){for(var i=this.ml,r=0,s=i.length;r<s;++r)i[r].rotate(t,n);this.changed()},n.prototype.scale=function(t,n,i){var r=i;r||(r=zn(this.getExtent()));for(var s=this.ml,o=0,u=s.length;o<u;++o)s[o].scale(t,n,r);this.changed()},n.prototype.setGeometries=function(t){this.setGeometriesArray(ly(t))},n.prototype.setGeometriesArray=function(t){this.jl(),this.ml=t,this.Ml(),this.changed()},n.prototype.applyTransform=function(t){for(var n=this.ml,i=0,r=n.length;i<r;++i)n[i].applyTransform(t);this.changed()},n.prototype.translate=function(t,n){for(var i=this.ml,r=0,s=i.length;r<s;++r)i[r].translate(t,n);this.changed()},n.prototype.disposeInternal=function(){this.jl(),t.prototype.disposeInternal.call(this)},n}(Gr);function wy(t,n,i,r,s,o){var u,e;void 0!==s?(u=s,e=void 0!==o?o:0):(u=[],e=0);for(var h=n;h<i;){var f=t[h++];u[e++]=t[h++],u[e++]=f;for(var a=2;a<r;++a)u[e++]=t[h++]}return u.length=e,u}var py=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,n){var i;if(n){var r=n.dataProjection?ur(n.dataProjection):this.readProjection(t);n.extent&&r&&r.getUnits()===It.TILE_PIXELS&&(r=ur(r)).setWorldExtent(n.extent),i={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return E({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return r()},t.prototype.readFeature=function(t,n){return r()},t.prototype.readFeatures=function(t,n){return r()},t.prototype.readGeometry=function(t,n){return r()},t.prototype.readProjection=function(t){return r()},t.prototype.writeFeature=function(t,n){return r()},t.prototype.writeFeatures=function(t,n){return r()},t.prototype.writeGeometry=function(t,n){return r()},t}();function yy(t,n,i){var r,s=i?ur(i.featureProjection):null,o=i?ur(i.dataProjection):null;if(r=s&&o&&!lr(s,o)?(n?t.clone():t).transform(n?s:o,n?o:s):t,n&&i&&void 0!==i.decimals){var u=Math.pow(10,i.decimals);r===t&&(r=t.clone()),r.applyTransform((function(t){for(var n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*u)/u;return t}))}return r}var by=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_y=function(t){function n(){var n=t.call(this)||this;return n.xl=$a(),n}return by(n,t),n.prototype.getType=function(){return zf},n.prototype.readFeature=function(t,n){if(t){if("string"==typeof t){var i=La(t);return this.readFeatureFromDocument(i,n)}return Ra(t)?this.readFeatureFromDocument(t,n):this.readFeatureFromNode(t,n)}return null},n.prototype.readFeatureFromDocument=function(t,n){var i=this.readFeaturesFromDocument(t,n);return i.length>0?i[0]:null},n.prototype.readFeatureFromNode=function(t,n){return null},n.prototype.readFeatures=function(t,n){if(t){if("string"==typeof t){var i=La(t);return this.readFeaturesFromDocument(i,n)}return Ra(t)?this.readFeaturesFromDocument(t,n):this.readFeaturesFromNode(t,n)}return[]},n.prototype.readFeaturesFromDocument=function(t,n){for(var i=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&_(i,this.readFeaturesFromNode(r,n));return i},n.prototype.readFeaturesFromNode=function(t,n){return r()},n.prototype.readGeometry=function(t,n){if(t){if("string"==typeof t){var i=La(t);return this.readGeometryFromDocument(i,n)}return Ra(t)?this.readGeometryFromDocument(t,n):this.readGeometryFromNode(t,n)}return null},n.prototype.readGeometryFromDocument=function(t,n){return null},n.prototype.readGeometryFromNode=function(t,n){return null},n.prototype.readProjection=function(t){if(t){if("string"==typeof t){var n=La(t);return this.readProjectionFromDocument(n)}return Ra(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},n.prototype.readProjectionFromDocument=function(t){return this.dataProjection},n.prototype.readProjectionFromNode=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){var i=this.writeFeatureNode(t,n);return this.xl.serializeToString(i)},n.prototype.writeFeatureNode=function(t,n){return null},n.prototype.writeFeatures=function(t,n){var i=this.writeFeaturesNode(t,n);return this.xl.serializeToString(i)},n.prototype.writeFeaturesNode=function(t,n){return null},n.prototype.writeGeometry=function(t,n){var i=this.writeGeometryNode(t,n);return this.xl.serializeToString(i)},n.prototype.writeGeometryNode=function(t,n){return null},n}(py);function gy(t){var n=/^\s*(true|1)|(false|0)\s*$/.exec(t);return n?void 0!==n[1]||!1:void 0}function my(t){var n=Ia(t,!1),i=Date.parse(n);return isNaN(i)?void 0:i/1e3}function Oy(t){return My(Ia(t,!1))}function My(t){var n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return n?parseFloat(n[1]):void 0}function jy(t){return xy(Ia(t,!1))}function xy(t){var n=/^\s*(\d+)\s*$/.exec(t);return n?parseInt(n[1],10):void 0}function Ey(t){return Ia(t,!1).trim()}function Sy(t,n){var i=new Date(1e3*n),r=i.getUTCFullYear()+"-"+Ui(i.getUTCMonth()+1,2)+"-"+Ui(i.getUTCDate(),2)+"T"+Ui(i.getUTCHours(),2)+":"+Ui(i.getUTCMinutes(),2)+":"+Ui(i.getUTCSeconds(),2)+"Z";t.appendChild(Qa().createTextNode(r))}function Ty(t,n){var i=n.toPrecision();t.appendChild(Qa().createTextNode(i))}function Ay(t,n){var i=n.toString();t.appendChild(Qa().createTextNode(i))}function Cy(t,n){t.appendChild(Qa().createTextNode(n))}var Ny=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ky=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Py={rte:eb,trk:hb,wpt:fb},Iy=Ba(ky,{rte:Fa(eb),trk:Fa(hb),wpt:Fa(fb)}),Gy=Ba(ky,{text:Da(Ey,"linkText"),type:Da(Ey,"linkType")}),Ry=Ba(ky,{rte:za((function(t,n,i){var r=i[0],s=n.getProperties(),o={node:t};o.properties=s;var u=n.getGeometry();if(u.getType()==At.LINE_STRING){var e=yy(u,!0,r);o.geometryLayout=e.getLayout(),s.rtept=e.getCoordinates()}var h=i[i.length-1].node,f=qy[h.namespaceURI],a=Wa(s,f);Va(o,Zy,Ya,a,i,f)})),trk:za((function(t,n,i){var r=i[0],s=n.getProperties(),o={node:t};o.properties=s;var u=n.getGeometry();if(u.getType()==At.MULTI_LINE_STRING){var e=yy(u,!0,r);s.trkseg=e.getLineStrings()}var h=i[i.length-1].node,f=Vy[h.namespaceURI],a=Wa(s,f);Va(o,Hy,Ya,a,i,f)})),wpt:za((function(t,n,i){var r=i[0],s=i[i.length-1];s.properties=n.getProperties();var o=n.getGeometry();if(o.getType()==At.POINT){var u=yy(o,!0,r);s.geometryLayout=u.getLayout(),cb(t,u.getCoordinates(),i)}}))}),Ly=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=ur("EPSG:4326"),i.El=r.readExtensions,i}return Ny(n,t),n.prototype.Sl=function(t){t||(t=[]);for(var n=0,i=t.length;n<i;++n){var r=t[n];if(this.El){var s=r.get("extensionsNode_")||null;this.El(r,s)}r.set("extensionsNode_",void 0)}},n.prototype.readFeatureFromNode=function(t,n){if(!p(ky,t.namespaceURI))return null;var i=Py[t.localName];if(!i)return null;var r=i(t,[this.getReadOptions(t,n)]);return r?(this.Sl([r]),r):null},n.prototype.readFeaturesFromNode=function(t,n){if(!p(ky,t.namespaceURI))return[];if("gpx"==t.localName){var i=Za([],Iy,t,[this.getReadOptions(t,n)]);return i?(this.Sl(i),i):[]}return[]},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=Pa("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",ka),i.setAttributeNS(ka,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),Va({node:i},Ry,ib,t,[n]),i},n}(_y),Fy=Ba(ky,{name:Da(Ey),cmt:Da(Ey),desc:Da(Ey),src:Da(Ey),link:ob,number:Da(jy),extensions:ub,type:Da(Ey),rtept:function(t,n){var i=Za({},Dy,t,n);if(i){var r=n[n.length-1],s=r.flatCoordinates,o=r.layoutOptions;rb(s,o,t,i)}}}),Dy=Ba(ky,{ele:Da(Oy),time:Da(my)}),zy=Ba(ky,{name:Da(Ey),cmt:Da(Ey),desc:Da(Ey),src:Da(Ey),link:ob,number:Da(jy),type:Da(Ey),extensions:ub,trkseg:function(t,n){var i=n[n.length-1];qa(Uy,t,n);var r=i.flatCoordinates;i.ends.push(r.length)}}),Uy=Ba(ky,{trkpt:function(t,n){var i=Za({},Xy,t,n);if(i){var r=n[n.length-1],s=r.flatCoordinates,o=r.layoutOptions;rb(s,o,t,i)}}}),Xy=Ba(ky,{ele:Da(Oy),time:Da(my)}),Yy=Ba(ky,{ele:Da(Oy),time:Da(my),magvar:Da(Oy),geoidheight:Da(Oy),name:Da(Ey),cmt:Da(Ey),desc:Da(Ey),src:Da(Ey),link:ob,sym:Da(Ey),type:Da(Ey),fix:Da(Ey),sat:Da(jy),hdop:Da(Oy),vdop:Da(Oy),pdop:Da(Oy),ageofdgpsdata:Da(Oy),dgpsid:Da(jy),extensions:ub}),Wy=["text","type"],By=Ba(ky,{text:za(Cy),type:za(Cy)}),qy=Ba(ky,["name","cmt","desc","src","link","number","type","rtept"]),Zy=Ba(ky,{name:za(Cy),cmt:za(Cy),desc:za(Cy),src:za(Cy),link:za(ab),number:za(Ay),type:za(Cy),rtept:Ua(za(cb))}),Jy=Ba(ky,["ele","time"]),Vy=Ba(ky,["name","cmt","desc","src","link","number","type","trkseg"]),Hy=Ba(ky,{name:za(Cy),cmt:za(Cy),desc:za(Cy),src:za(Cy),link:za(ab),number:za(Ay),type:za(Cy),trkseg:Ua(za((function(t,n,i){var r={node:t};r.geometryLayout=n.getLayout(),r.properties={},Va(r,Ky,$y,n.getCoordinates(),i)})))}),$y=Xa("trkpt"),Ky=Ba(ky,{trkpt:za(cb)}),Qy=Ba(ky,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),tb=Ba(ky,{ele:za(Ty),time:za(Sy),magvar:za(Ty),geoidheight:za(Ty),name:za(Cy),cmt:za(Cy),desc:za(Cy),src:za(Cy),link:za(ab),sym:za(Cy),type:za(Cy),fix:za(Cy),sat:za(Ay),hdop:za(Ty),vdop:za(Ty),pdop:za(Ty),ageofdgpsdata:za(Ty),dgpsid:za(Ay)}),nb={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function ib(t,n,i){var r=t.getGeometry();if(r){var s=nb[r.getType()];if(s)return Pa(n[n.length-1].node.namespaceURI,s)}}function rb(t,n,i,r){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,n.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,n.hasM=!0):t.push(0),t}function sb(t,n,i){var r=xt,s=2;if(t.hasZ&&t.hasM?(r=Tt,s=4):t.hasZ?(r=Et,s=3):t.hasM&&(r=St,s=3),4!==s){for(var o=0,u=n.length/4;o<u;o++)n[o*s]=n[4*o],n[o*s+1]=n[4*o+1],t.hasZ&&(n[o*s+2]=n[4*o+2]),t.hasM&&(n[o*s+2]=n[4*o+3]);if(n.length=n.length/4*s,i)for(o=0,u=i.length;o<u;o++)i[o]=i[o]/4*s}return r}function ob(t,n){var i=n[n.length-1],r=t.getAttribute("href");null!==r&&(i.link=r),qa(Gy,t,n)}function ub(t,n){n[n.length-1].Tl=t}function eb(t,n){var i=n[0],r=Za({flatCoordinates:[],layoutOptions:{}},Fy,t,n);if(r){var s=r.flatCoordinates;delete r.flatCoordinates;var o=r.layoutOptions;delete r.layoutOptions;var u=sb(o,s),e=new Fw(s,u);yy(e,!1,i);var h=new jt(e);return h.setProperties(r,!0),h}}function hb(t,n){var i=n[0],r=Za({flatCoordinates:[],ends:[],layoutOptions:{}},zy,t,n);if(r){var s=r.flatCoordinates;delete r.flatCoordinates;var o=r.ends;delete r.ends;var u=r.layoutOptions;delete r.layoutOptions;var e=sb(u,s,o),h=new bp(s,e,o);yy(h,!1,i);var f=new jt(h);return f.setProperties(r,!0),f}}function fb(t,n){var i=n[0],r=Za({},Yy,t,n);if(r){var s={},o=rb([],s,t,r),u=sb(s,o),e=new ls(o,u);yy(e,!1,i);var h=new jt(e);return h.setProperties(r,!0),h}}function ab(t,n,i){t.setAttribute("href",n);var r=i[i.length-1].properties,s=[r.linkText,r.linkType];Va({node:t},By,Ya,s,i,Wy)}function cb(t,n,i){var r=i[i.length-1],s=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(n[1])),t.setAttributeNS(null,"lon",String(n[0])),r.geometryLayout){case Tt:0!==n[3]&&(o.time=n[3]);case Et:0!==n[2]&&(o.ele=n[2]);break;case St:0!==n[2]&&(o.time=n[2])}var u="rtept"==t.nodeName?Jy[s]:Qy[s],e=Wa(o,u);Va({node:t,properties:o},tb,Ya,e,i,u)}var vb=Ly,lb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function db(t){if("string"==typeof t){var n=JSON.parse(t);return n||null}return null!==t?t:null}var wb=function(t){function n(){return t.call(this)||this}return lb(n,t),n.prototype.getType=function(){return Ff},n.prototype.readFeature=function(t,n){return this.readFeatureFromObject(db(t),this.getReadOptions(t,n))},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromObject(db(t),this.getReadOptions(t,n))},n.prototype.readFeatureFromObject=function(t,n){return r()},n.prototype.readFeaturesFromObject=function(t,n){return r()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromObject(db(t),this.getReadOptions(t,n))},n.prototype.readGeometryFromObject=function(t,n){return r()},n.prototype.readProjection=function(t){return this.readProjectionFromObject(db(t))},n.prototype.readProjectionFromObject=function(t){return r()},n.prototype.writeFeature=function(t,n){return JSON.stringify(this.writeFeatureObject(t,n))},n.prototype.writeFeatureObject=function(t,n){return r()},n.prototype.writeFeatures=function(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))},n.prototype.writeFeaturesObject=function(t,n){return r()},n.prototype.writeGeometry=function(t,n){return JSON.stringify(this.writeGeometryObject(t,n))},n.prototype.writeGeometryObject=function(t,n){return r()},n}(py),pb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function yb(t,n){if(!t)return null;var i;switch(t.type){case At.POINT:i=function(t){return new ls(t.coordinates)}(t);break;case At.LINE_STRING:i=function(t){return new Fw(t.coordinates)}(t);break;case At.POLYGON:i=function(t){return new Is(t.coordinates)}(t);break;case At.MULTI_POINT:i=function(t){return new gp(t.coordinates)}(t);break;case At.MULTI_LINE_STRING:i=function(t){return new bp(t.coordinates)}(t);break;case At.MULTI_POLYGON:i=function(t){return new Op(t.coordinates)}(t);break;case At.GEOMETRY_COLLECTION:i=function(t,n){var i=t.geometries.map((function(t){return yb(t,n)}));return new dy(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return yy(i,!1,n)}function bb(t,n){var i,r=(t=yy(t,!0,n)).getType();switch(r){case At.POINT:i=function(t,n){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case At.LINE_STRING:i=function(t,n){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case At.POLYGON:i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,n);break;case At.MULTI_POINT:i=function(t,n){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case At.MULTI_LINE_STRING:i=function(t,n){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case At.MULTI_POLYGON:i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,n);break;case At.GEOMETRY_COLLECTION:i=function(t,n){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var i=E({},n);return delete i.featureProjection,bb(t,i)}))}}(t,n);break;case At.CIRCLE:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return i}var _b=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this)||this).dataProjection=ur(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(i.defaultFeatureProjection=ur(r.featureProjection)),i.N=r.geometryName,i.Al=r.extractGeometryName,i.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],i}return pb(n,t),n.prototype.readFeatureFromObject=function(t,n){var i=null,r=yb((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,n),s=new jt;return this.N?s.setGeometryName(this.N):this.Al&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s},n.prototype.readFeaturesFromObject=function(t,n){var i=null;if("FeatureCollection"===t.type){i=[];for(var r=t.features,s=0,o=r.length;s<o;++s)i.push(this.readFeatureFromObject(r[s],n))}else i=[this.readFeatureFromObject(t,n)];return i},n.prototype.readGeometryFromObject=function(t,n){return yb(t,n)},n.prototype.readProjectionFromObject=function(t){var n,i=t.crs;return i?"name"==i.type?n=ur(i.properties.name):"EPSG"===i.type?n=ur("EPSG:"+i.properties.code):mt(!1,36):n=this.dataProjection,n},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={type:"Feature",geometry:null,properties:null},r=t.getId();if(void 0!==r&&(i.id=r),!t.hasProperties())return i;var s=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=bb(o,n),delete s[t.getGeometryName()]),A(s)||(i.properties=s),i},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],r=0,s=t.length;r<s;++r)i.push(this.writeFeatureObject(t[r],n));return{type:"FeatureCollection",features:i}},n.prototype.writeGeometryObject=function(t,n){return bb(t,this.adaptOptions(n))},n}(wb),gb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function mb(t){return"string"==typeof t?t:""}var Ob=function(t){function n(){return t.call(this)||this}return gb(n,t),n.prototype.getType=function(){return Df},n.prototype.readFeature=function(t,n){return this.readFeatureFromText(mb(t),this.adaptOptions(n))},n.prototype.readFeatureFromText=function(t,n){return r()},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromText(mb(t),this.adaptOptions(n))},n.prototype.readFeaturesFromText=function(t,n){return r()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromText(mb(t),this.adaptOptions(n))},n.prototype.readGeometryFromText=function(t,n){return r()},n.prototype.readProjection=function(t){return this.readProjectionFromText(mb(t))},n.prototype.readProjectionFromText=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){return this.writeFeatureText(t,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){return r()},n.prototype.writeFeatures=function(t,n){return this.writeFeaturesText(t,this.adaptOptions(n))},n.prototype.writeFeaturesText=function(t,n){return r()},n.prototype.writeGeometry=function(t,n){return this.writeGeometryText(t,this.adaptOptions(n))},n.prototype.writeGeometryText=function(t,n){return r()},n}(py),Mb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function jb(t,n,i){var r,s=i||1e5,o=new Array(n);for(r=0;r<n;++r)o[r]=0;for(var u=0,e=t.length;u<e;)for(r=0;r<n;++r,++u){var h=t[u],f=h-o[r];o[r]=h,t[u]=f}return Eb(t,s)}function xb(t,n,i){var r,s=i||1e5,o=new Array(n);for(r=0;r<n;++r)o[r]=0;for(var u=Sb(t,s),e=0,h=u.length;e<h;)for(r=0;r<n;++r,++e)o[r]+=u[e],u[e]=o[r];return u}function Eb(t,n){for(var i=n||1e5,r=0,s=t.length;r<s;++r)t[r]=Math.round(t[r]*i);return Tb(t)}function Sb(t,n){for(var i=n||1e5,r=Ab(t),s=0,o=r.length;s<o;++s)r[s]/=i;return r}function Tb(t){for(var n=0,i=t.length;n<i;++n){var r=t[n];t[n]=r<0?~(r<<1):r<<1}return Cb(t)}function Ab(t){for(var n=Nb(t),i=0,r=n.length;i<r;++i){var s=n[i];n[i]=1&s?~(s>>1):s>>1}return n}function Cb(t){for(var n="",i=0,r=t.length;i<r;++i)n+=kb(t[i]);return n}function Nb(t){for(var n=[],i=0,r=0,s=0,o=t.length;s<o;++s){var u=t.charCodeAt(s)-63;i|=(31&u)<<r,u<32?(n.push(i),i=0,r=0):r+=5}return n}function kb(t){for(var n,i="";t>=32;)n=63+(32|31&t),i+=String.fromCharCode(n),t>>=5;return n=t+63,i+=String.fromCharCode(n)}var Pb=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=ur("EPSG:4326"),i.Cl=r.factor?r.factor:1e5,i.Nl=r.geometryLayout?r.geometryLayout:xt,i}return Mb(n,t),n.prototype.readFeatureFromText=function(t,n){var i=this.readGeometryFromText(t,n);return new jt(i)},n.prototype.readFeaturesFromText=function(t,n){return[this.readFeatureFromText(t,n)]},n.prototype.readGeometryFromText=function(t,n){var i=Lr(this.Nl),r=xb(t,i,this.Cl);wy(r,0,r.length,i,r);var s=ss(r,0,r.length,i);return yy(new Fw(s,this.Nl),!1,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){var i=t.getGeometry();return i?this.writeGeometryText(i,n):(mt(!1,40),"")},n.prototype.writeFeaturesText=function(t,n){return this.writeFeatureText(t[0],n)},n.prototype.writeGeometryText=function(t,n){var i=(t=yy(t,!0,this.adaptOptions(n))).getFlatCoordinates(),r=t.getStride();return wy(i,0,i.length,r,i),jb(i,r,this.Cl)},n}(Ob),Ib=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Gb=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.kl=r.layerName,i.Oh=r.layers?r.layers:null,i.dataProjection=ur(r.dataProjection?r.dataProjection:"EPSG:4326"),i}return Ib(n,t),n.prototype.readFeaturesFromObject=function(t,n){if("Topology"==t.type){var i=t,r=void 0,s=null,o=null;i.transform&&(s=(r=i.transform).scale,o=r.translate);var u=i.arcs;r&&function(t,n,i){for(var r=0,s=t.length;r<s;++r)zb(t[r],n,i)}(u,s,o);var e=[],h=i.objects,f=this.kl,a=void 0;for(var c in h)this.Oh&&-1==this.Oh.indexOf(c)||("GeometryCollection"===h[c].type?(a=h[c],e.push.apply(e,Fb(a,u,s,o,f,c,n))):(a=h[c],e.push(Db(a,u,s,o,f,c,n))));return e}return[]},n.prototype.readProjectionFromObject=function(t){return this.dataProjection},n}(wb),Rb={Point:function(t,n,i){var r=t.coordinates;n&&i&&Ub(r,n,i);return new ls(r)},LineString:function(t,n){var i=Lb(t.arcs,n);return new Fw(i)},Polygon:function(t,n){for(var i=[],r=0,s=t.arcs.length;r<s;++r)i[r]=Lb(t.arcs[r],n);return new Is(i)},MultiPoint:function(t,n,i){var r=t.coordinates;if(n&&i)for(var s=0,o=r.length;s<o;++s)Ub(r[s],n,i);return new gp(r)},MultiLineString:function(t,n){for(var i=[],r=0,s=t.arcs.length;r<s;++r)i[r]=Lb(t.arcs[r],n);return new bp(i)},MultiPolygon:function(t,n){for(var i=[],r=0,s=t.arcs.length;r<s;++r){for(var o=t.arcs[r],u=[],e=0,h=o.length;e<h;++e)u[e]=Lb(o[e],n);i[r]=u}return new Op(i)}};function Lb(t,n){for(var i,r,s=[],o=0,u=t.length;o<u;++o)i=t[o],o>0&&s.pop(),r=i>=0?n[i]:n[~i].slice().reverse(),s.push.apply(s,r);for(var e=0,h=s.length;e<h;++e)s[e]=s[e].slice();return s}function Fb(t,n,i,r,s,o,u){for(var e=t.geometries,h=[],f=0,a=e.length;f<a;++f)h[f]=Db(e[f],n,i,r,s,o,u);return h}function Db(t,n,i,r,s,o,u){var e=null,h=t.type;if(h){var f=Rb[h];e=yy(e="Point"===h||"MultiPoint"===h?f(t,i,r):f(t,n),!1,u)}var a=new jt({geometry:e});void 0!==t.id&&a.setId(t.id);var c=t.properties;return s&&(c||(c={}),c[s]=o),c&&a.setProperties(c,!0),a}function zb(t,n,i){for(var r=0,s=0,o=0,u=t.length;o<u;++o){var e=t[o];r+=e[0],s+=e[1],e[0]=r,e[1]=s,Ub(e,n,i)}}function Ub(t,n,i){t[0]=t[0]*n[0]+i[0],t[1]=t[1]*n[1]+i[1]}var Xb=Gb,Yb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Wb=1,Bb=2,qb=3,Zb=4,Jb=5,Vb=6,Hb=7,$b=15,Kb=16,Qb=17,t_=function(){function t(t){this.Pl=t,this.Il=0,this.Gl=!1,this.Rl=!1,this.Ll=!1,this.Fl=!1,this.Dl=null,this.zl=xt}return t.prototype.readUint8=function(){return this.Pl.getUint8(this.Il++)},t.prototype.readUint32=function(t){return this.Pl.getUint32((this.Il+=4)-4,void 0!==t?t:this.Rl)},t.prototype.readDouble=function(t){return this.Pl.getFloat64((this.Il+=8)-8,void 0!==t?t:this.Rl)},t.prototype.readPoint=function(){var t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.Ll&&t.push(this.readDouble()),this.Fl&&t.push(this.readDouble()),t},t.prototype.readLineString=function(){for(var t=this.readUint32(),n=[],i=0;i<t;i++)n.push(this.readPoint());return n},t.prototype.readPolygon=function(){for(var t=this.readUint32(),n=[],i=0;i<t;i++)n.push(this.readLineString());return n},t.prototype.readWkbHeader=function(t){var n=this.readUint8()>0,i=this.readUint32(n),r=Math.floor((268435455&i)/1e3),s=Boolean(2147483648&i)||1===r||3===r,o=Boolean(1073741824&i)||2===r||3===r,u=Boolean(536870912&i),e=(268435455&i)%1e3,h=["XY",s?"Z":"",o?"M":""].join(""),f=u?this.readUint32(n):null;if(void 0!==t&&t!==e)throw new Error("Unexpected WKB geometry type "+e);if(this.Gl){if(this.Rl!==n)throw new Error("Inconsistent endian");if(this.zl!==h)throw new Error("Inconsistent geometry layout");if(f&&this.Dl!==f)throw new Error("Inconsistent coordinate system (SRID)")}else this.Rl=n,this.Ll=s,this.Fl=o,this.zl=h,this.Dl=f,this.Gl=!0;return e},t.prototype.readWkbPayload=function(t){switch(t){case Wb:return this.readPoint();case Bb:return this.readLineString();case qb:case Qb:return this.readPolygon();case Zb:return this.readMultiPoint();case Jb:return this.readMultiLineString();case Vb:case $b:case Kb:return this.readMultiPolygon();case Hb:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}},t.prototype.readWkbBlock=function(t){return this.readWkbPayload(this.readWkbHeader(t))},t.prototype.readWkbCollection=function(t,n){for(var i=this.readUint32(),r=[],s=0;s<i;s++){var o=t.call(this,n);o&&r.push(o)}return r},t.prototype.readMultiPoint=function(){return this.readWkbCollection(this.readWkbBlock,Wb)},t.prototype.readMultiLineString=function(){return this.readWkbCollection(this.readWkbBlock,Bb)},t.prototype.readMultiPolygon=function(){return this.readWkbCollection(this.readWkbBlock,qb)},t.prototype.readGeometryCollection=function(){return this.readWkbCollection(this.readGeometry)},t.prototype.readGeometry=function(){var t=this.readWkbHeader(),n=this.readWkbPayload(t);switch(t){case Wb:return new ls(n,this.zl);case Bb:return new Fw(n,this.zl);case qb:case Qb:return new Is(n,this.zl);case Zb:return new gp(n,this.zl);case Jb:return new bp(n,this.zl);case Vb:case $b:case Kb:return new Op(n,this.zl);case Hb:return new dy(n);default:return null}},t.prototype.getSrid=function(){return this.Dl},t}(),n_=function(){function t(t){t=t||{},this.zl=t.layout,this.Rl=!1!==t.littleEndian,this.Ul=!1!==t.ewkb,this.Xl=[],this.Yl=E({X:0,Y:0,Z:0,M:0},t.nodata)}return t.prototype.writeUint8=function(t){this.Xl.push([1,t])},t.prototype.writeUint32=function(t){this.Xl.push([4,t])},t.prototype.writeDouble=function(t){this.Xl.push([8,t])},t.prototype.writePoint=function(t,n){for(var i=E.apply(null,n.split("").map((function(n,i){var r;return(r={})[n]=t[i],r}))),r=0,s=this.zl;r<s.length;r++){var o=s[r];this.writeDouble(o in i?i[o]:this.Yl[o])}},t.prototype.writeLineString=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writePoint(t[i],n)},t.prototype.writePolygon=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeLineString(t[i],n)},t.prototype.writeWkbHeader=function(t,n){t%=1e3,this.zl.indexOf("Z")>=0&&(t+=this.Ul?2147483648:1e3),this.zl.indexOf("M")>=0&&(t+=this.Ul?1073741824:2e3),this.Ul&&Number.isInteger(n)&&(t|=536870912),this.writeUint8(this.Rl?1:0),this.writeUint32(t),this.Ul&&Number.isInteger(n)&&this.writeUint32(n)},t.prototype.writeMultiPoint=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(1),this.writePoint(t[i],n)},t.prototype.writeMultiLineString=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(2),this.writeLineString(t[i],n)},t.prototype.writeMultiPolygon=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(3),this.writePolygon(t[i],n)},t.prototype.writeGeometryCollection=function(t){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writeGeometry(t[n])},t.prototype.findMinimumLayout=function(t,n){void 0===n&&(n=Tt);var i,r;if(t instanceof Dr)return(i=t.getLayout())===(r=n)?i:i===Tt?r:r===Tt?i:xt;if(t instanceof dy)for(var s=t.getGeometriesArray(),o=0;o<s.length&&n!==xt;o++)n=this.findMinimumLayout(s[o],n);return n},t.prototype.writeGeometry=function(t,n){var i,r,s=((i={})[At.POINT]=Wb,i[At.LINE_STRING]=Bb,i[At.POLYGON]=qb,i[At.MULTI_POINT]=Zb,i[At.MULTI_LINE_STRING]=Jb,i[At.MULTI_POLYGON]=Vb,i[At.GEOMETRY_COLLECTION]=Hb,i),o=t.getType(),u=s[o];if(!u)throw new Error("GeometryType "+o+" is not supported");(this.zl||(this.zl=this.findMinimumLayout(t)),this.writeWkbHeader(u,n),t instanceof Dr)?((r={})[At.POINT]=this.writePoint,r[At.LINE_STRING]=this.writeLineString,r[At.POLYGON]=this.writePolygon,r[At.MULTI_POINT]=this.writeMultiPoint,r[At.MULTI_LINE_STRING]=this.writeMultiLineString,r[At.MULTI_POLYGON]=this.writeMultiPolygon,r)[o].call(this,t.getCoordinates(),t.getLayout()):t instanceof dy&&this.writeGeometryCollection(t.getGeometriesArray())},t.prototype.getBuffer=function(){var t=this,n=this.Xl.reduce((function(t,n){return t+n[0]}),0),i=new ArrayBuffer(n),r=new DataView(i),s=0;return this.Xl.forEach((function(n){switch(n[0]){case 1:r.setUint8(s,n[1]);break;case 4:r.setUint32(s,n[1],t.Rl);break;case 8:r.setFloat64(s,n[1],t.Rl)}s+=n[0]})),i},t}();function i_(t){return"string"==typeof t?function(t){for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.substr(2*i,2),16);return new DataView(n.buffer)}(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new DataView(t):null}var r_=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.splitCollection=Boolean(r.splitCollection),i.Wl=null,i.Bl=!1!==r.hex,i.ql=!1!==r.littleEndian,i.Zl=!1!==r.ewkb,i.zl=r.geometryLayout,i.Jl=r.nodataZ||0,i.Vl=r.nodataM||0,i.Dl=r.srid,i}return Yb(n,t),n.prototype.getType=function(){return this.Bl?Df:Lf},n.prototype.readFeature=function(t,n){return new jt({geometry:this.readGeometry(t,n)})},n.prototype.readFeatures=function(t,n){var i=this.readGeometry(t,n);return(this.splitCollection&&i instanceof dy?i.getGeometriesArray():[i]).map((function(t){return new jt({geometry:t})}))},n.prototype.readGeometry=function(t,n){var i=i_(t);if(!i)return null;var r=new t_(i).readGeometry();this.Wl=i;var s=this.getReadOptions(t,n);return this.Wl=null,yy(r,!1,s)},n.prototype.readProjection=function(t){var n=this.Wl||i_(t);if(n){var i=new t_(n);return i.readWkbHeader(),i.getSrid()&&ur("EPSG:"+i.getSrid())||void 0}},n.prototype.writeFeature=function(t,n){return this.writeGeometry(t.getGeometry(),n)},n.prototype.writeFeatures=function(t,n){return this.writeGeometry(new dy(t.map((function(t){return t.getGeometry()}))),n)},n.prototype.writeGeometry=function(t,n){var i=this.adaptOptions(n),r=new n_({layout:this.zl,littleEndian:this.ql,ewkb:this.Zl,nodata:{Z:this.Jl,M:this.Vl}}),s=Number.isInteger(this.Dl)?Number(this.Dl):null;if(!1!==this.Dl&&!Number.isInteger(this.Dl)){var o=i.dataProjection&&ur(i.dataProjection);if(o){var u=o.getCode();0===u.indexOf("EPSG:")&&(s=Number(u.substring(5)))}}r.writeGeometry(yy(t,!0,i),s);var e=r.getBuffer();return this.Bl?function(t){var n=new Uint8Array(t);return Array.from(n.values()).map((function(t){return(t<16?"0":"")+Number(t).toString(16).toUpperCase()})).join("")}(e):e},n}(py),s_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),o_={POINT:ls,LINESTRING:Fw,POLYGON:Is,MULTIPOINT:gp,MULTILINESTRING:bp,MULTIPOLYGON:Op},u_="EMPTY",e_=0,h_=1,f_=2,a_=3,c_=4,v_=5,l_=6,d_={};for(var w_ in At)d_[w_]=At[w_].toUpperCase();var p_=function(){function t(t){this.wkt=t,this.Hl=-1}return t.prototype.$l=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.Kl=function(t,n){return t>="0"&&t<="9"||"."==t&&!(void 0!==n&&n)},t.prototype.Ql=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.td=function(){return this.wkt.charAt(++this.Hl)},t.prototype.nextToken=function(){var t,n=this.td(),i=this.Hl,r=n;if("("==n)t=f_;else if(","==n)t=v_;else if(")"==n)t=a_;else if(this.Kl(n)||"-"==n)t=c_,r=this.nd();else if(this.$l(n))t=h_,r=this.rd();else{if(this.Ql(n))return this.nextToken();if(""!==n)throw new Error("Unexpected character: "+n);t=l_}return{position:i,value:r,type:t}},t.prototype.nd=function(){var t,n=this.Hl,i=!1,r=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(r=!0),t=this.td()}while(this.Kl(t,i)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(n,this.Hl--))},t.prototype.rd=function(){var t,n=this.Hl;do{t=this.td()}while(this.$l(t));return this.wkt.substring(n,this.Hl--).toUpperCase()},t}(),y_=function(){function t(t){this.sd=t,this.od={position:0,type:e_},this.zl=xt}return t.prototype.ud=function(){this.od=this.sd.nextToken()},t.prototype.isTokenType=function(t){return this.od.type==t},t.prototype.match=function(t){var n=this.isTokenType(t);return n&&this.ud(),n},t.prototype.parse=function(){return this.ud(),this.ed()},t.prototype.hd=function(){var t=xt,n=this.od;if(this.isTokenType(h_)){var i=n.value;"Z"===i?t=Et:"M"===i?t=St:"ZM"===i&&(t=Tt),t!==xt&&this.ud()}return t},t.prototype.fd=function(){if(this.match(f_)){var t=[];do{t.push(this.ed())}while(this.match(v_));if(this.match(a_))return t}throw new Error(this.ad())},t.prototype.vd=function(){if(this.match(f_)){var t=this.ld();if(this.match(a_))return t}throw new Error(this.ad())},t.prototype.dd=function(){if(this.match(f_)){var t=this.wd();if(this.match(a_))return t}throw new Error(this.ad())},t.prototype.pd=function(){if(this.match(f_)){var t=this.yd();if(this.match(a_))return t}throw new Error(this.ad())},t.prototype.bd=function(){if(this.match(f_)){var t=void 0;if(t=this.od.type==f_?this._d():this.wd(),this.match(a_))return t}throw new Error(this.ad())},t.prototype.gd=function(){if(this.match(f_)){var t=this.yd();if(this.match(a_))return t}throw new Error(this.ad())},t.prototype.md=function(){if(this.match(f_)){var t=this.Od();if(this.match(a_))return t}throw new Error(this.ad())},t.prototype.ld=function(){for(var t=[],n=this.zl.length,i=0;i<n;++i){var r=this.od;if(!this.match(c_))break;t.push(r.value)}if(t.length==n)return t;throw new Error(this.ad())},t.prototype.wd=function(){for(var t=[this.ld()];this.match(v_);)t.push(this.ld());return t},t.prototype._d=function(){for(var t=[this.vd()];this.match(v_);)t.push(this.vd());return t},t.prototype.yd=function(){for(var t=[this.dd()];this.match(v_);)t.push(this.dd());return t},t.prototype.Od=function(){for(var t=[this.pd()];this.match(v_);)t.push(this.pd());return t},t.prototype.Md=function(){var t=this.isTokenType(h_)&&this.od.value==u_;return t&&this.ud(),t},t.prototype.ad=function(){return"Unexpected `"+this.od.value+"` at position "+this.od.position+" in `"+this.sd.wkt+"`"},t.prototype.ed=function(){var t=this.od;if(this.match(h_)){var n=t.value;this.zl=this.hd();var i=this.Md();if("GEOMETRYCOLLECTION"==n){if(i)return new dy([]);var r=this.fd();return new dy(r)}var s=o_[n];if(!s)throw new Error("Invalid geometry type: "+n);var o=void 0;if(i)o="POINT"==n?[NaN,NaN]:[];else switch(n){case"POINT":o=this.vd();break;case"LINESTRING":o=this.dd();break;case"POLYGON":o=this.pd();break;case"MULTIPOINT":o=this.bd();break;case"MULTILINESTRING":o=this.gd();break;case"MULTIPOLYGON":o=this.md()}return new s(o,this.zl)}throw new Error(this.ad())},t}(),b_=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.jd=void 0!==r.splitCollection&&r.splitCollection,i}return s_(n,t),n.prototype.xd=function(t){var n=new p_(t);return new y_(n).parse()},n.prototype.readFeatureFromText=function(t,n){var i=this.readGeometryFromText(t,n),r=new jt;return r.setGeometry(i),r},n.prototype.readFeaturesFromText=function(t,n){for(var i=[],r=this.readGeometryFromText(t,n),s=[],o=0,u=(i=this.jd&&r.getType()==At.GEOMETRY_COLLECTION?r.getGeometriesArray():[r]).length;o<u;++o){var e=new jt;e.setGeometry(i[o]),s.push(e)}return s},n.prototype.readGeometryFromText=function(t,n){return yy(this.xd(t),!1,n)},n.prototype.writeFeatureText=function(t,n){var i=t.getGeometry();return i?this.writeGeometryText(i,n):""},n.prototype.writeFeaturesText=function(t,n){if(1==t.length)return this.writeFeatureText(t[0],n);for(var i=[],r=0,s=t.length;r<s;++r)i.push(t[r].getGeometry());var o=new dy(i);return this.writeGeometryText(o,n)},n.prototype.writeGeometryText=function(t,n){return M_(yy(t,!0,n))},n}(Ob);function __(t){var n=t.getCoordinates();return 0===n.length?"":n.join(" ")}function g_(t){for(var n=t.getCoordinates(),i=[],r=0,s=n.length;r<s;++r)i.push(n[r].join(" "));return i.join(",")}function m_(t){for(var n=[],i=t.getLinearRings(),r=0,s=i.length;r<s;++r)n.push("("+g_(i[r])+")");return n.join(",")}var O_={Point:__,LineString:g_,Polygon:m_,MultiPoint:function(t){for(var n=[],i=t.getPoints(),r=0,s=i.length;r<s;++r)n.push("("+__(i[r])+")");return n.join(",")},MultiLineString:function(t){for(var n=[],i=t.getLineStrings(),r=0,s=i.length;r<s;++r)n.push("("+g_(i[r])+")");return n.join(",")},MultiPolygon:function(t){for(var n=[],i=t.getPolygons(),r=0,s=i.length;r<s;++r)n.push("("+m_(i[r])+")");return n.join(",")},GeometryCollection:function(t){for(var n=[],i=t.getGeometries(),r=0,s=i.length;r<s;++r)n.push(M_(i[r]));return n.join(",")}};function M_(t){var n=t.getType(),i=(0,O_[n])(t);if(n=n.toUpperCase(),"function"==typeof t.getFlatCoordinates){var r=function(t){var n=t.getLayout(),i="";return n!==Et&&n!==Tt||(i+="Z"),n!==St&&n!==Tt||(i+="M"),i}(t);r.length>0&&(n+=" "+r)}return 0===i.length?n+" "+u_:n+"("+i+")"}var j_=b_,x_=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var n=La(t);return this.readFromDocument(n)}return Ra(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);return null},t.prototype.readFromNode=function(t){},t}(),E_=function(){function t(t){this.Ed=t}return t.prototype.getTagName=function(){return this.Ed},t}(),S_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),T_=function(t){function n(n,i){var r=t.call(this,n)||this;return r.conditions=i,mt(r.conditions.length>=2,57),r}return S_(n,t),n}(E_),A_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),C_=function(t){function n(n){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return A_(n,t),n}(T_),N_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),k_=function(t){function n(n,i,r){var s=t.call(this,"BBOX")||this;if(s.geometryName=n,s.extent=i,4!==i.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return s.srsName=r,s}return N_(n,t),n}(E_),P_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),I_=function(t){function n(n,i,r,s){var o=t.call(this,n)||this;return o.geometryName=i||"the_geom",o.geometry=r,o.srsName=s,o}return P_(n,t),n}(E_),G_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),R_=function(t){function n(n,i,r){return t.call(this,"Contains",n,i,r)||this}return G_(n,t),n}(I_),L_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),F_=function(t){function n(n,i,r,s,o){var u=t.call(this,"DWithin",n,i,o)||this;return u.distance=r,u.unit=s,u}return L_(n,t),n}(I_),D_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),z_=function(t){function n(n,i,r){return t.call(this,"Disjoint",n,i,r)||this}return D_(n,t),n}(I_),U_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),X_=function(t){function n(n,i){var r=t.call(this,n)||this;return r.propertyName=i,r}return U_(n,t),n}(E_),Y_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),W_=function(t){function n(n,i,r){var s=t.call(this,"During",n)||this;return s.begin=i,s.end=r,s}return Y_(n,t),n}(X_),B_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),q_=function(t){function n(n,i,r,s){var o=t.call(this,n,i)||this;return o.expression=r,o.matchCase=s,o}return B_(n,t),n}(X_),Z_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),J_=function(t){function n(n,i,r){return t.call(this,"PropertyIsEqualTo",n,i,r)||this}return Z_(n,t),n}(q_),V_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),H_=function(t){function n(n,i){return t.call(this,"PropertyIsGreaterThan",n,i)||this}return V_(n,t),n}(q_),$_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),K_=function(t){function n(n,i){return t.call(this,"PropertyIsGreaterThanOrEqualTo",n,i)||this}return $_(n,t),n}(q_),Q_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tg=function(t){function n(n,i,r){return t.call(this,"Intersects",n,i,r)||this}return Q_(n,t),n}(I_),ng=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ig=function(t){function n(n,i,r){var s=t.call(this,"PropertyIsBetween",n)||this;return s.lowerBoundary=i,s.upperBoundary=r,s}return ng(n,t),n}(X_),rg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sg=function(t){function n(n,i,r,s,o,u){var e=t.call(this,"PropertyIsLike",n)||this;return e.pattern=i,e.wildCard=void 0!==r?r:"*",e.singleChar=void 0!==s?s:".",e.escapeChar=void 0!==o?o:"!",e.matchCase=u,e}return rg(n,t),n}(X_),og=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ug=function(t){function n(n){return t.call(this,"PropertyIsNull",n)||this}return og(n,t),n}(X_),eg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hg=function(t){function n(n,i){return t.call(this,"PropertyIsLessThan",n,i)||this}return eg(n,t),n}(q_),fg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ag=function(t){function n(n,i){return t.call(this,"PropertyIsLessThanOrEqualTo",n,i)||this}return fg(n,t),n}(q_),cg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vg=function(t){function n(n){var i=t.call(this,"Not")||this;return i.condition=n,i}return cg(n,t),n}(E_),lg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dg=function(t){function n(n,i,r){return t.call(this,"PropertyIsNotEqualTo",n,i,r)||this}return lg(n,t),n}(q_),wg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pg=function(t){function n(n){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return wg(n,t),n}(T_),yg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bg=function(t){function n(n){var i=t.call(this,"ResourceId")||this;return i.rid=n,i}return yg(n,t),n}(E_),_g=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gg=function(t){function n(n,i,r){return t.call(this,"Within",n,i,r)||this}return _g(n,t),n}(I_);var mg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Og=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Mg="enterfullscreen",jg="leavefullscreen";function xg(){var t=document.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function Eg(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function Sg(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var Tg=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).on,i.once,i.un,i.Sd=void 0!==r.className?r.className:"ol-full-screen",i.Td=void 0!==r.activeClassName?r.activeClassName.split(" "):[i.Sd+"-true"],i.Ad=void 0!==r.inactiveClassName?r.inactiveClassName.split(" "):[i.Sd+"-false"];var s=void 0!==r.label?r.label:"⤢";i.Cd="string"==typeof s?document.createTextNode(s):s;var o=void 0!==r.labelActive?r.labelActive:"×";i.Nd="string"==typeof o?document.createTextNode(o):o,i.kd=document.createElement("button");var u=r.tipLabel?r.tipLabel:"Toggle full-screen";i.Pd(i.kd,Eg()),i.kd.setAttribute("type","button"),i.kd.title=u,i.kd.appendChild(i.Cd),i.kd.addEventListener(G,i.rr.bind(i),!1);var e=i.Sd+" "+"ol-unselectable "+"ol-control "+(xg()?"":au),h=i.element;return h.className=e,h.appendChild(i.kd),i.Id=void 0!==r.keys&&r.keys,i.cc=r.source,i}return mg(n,t),n.prototype.rr=function(t){t.preventDefault(),this.Gd()},n.prototype.Gd=function(){if(xg()){var t=this.getMap();if(t)if(Eg())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var n=void 0;n=this.cc?"string"==typeof this.cc?document.getElementById(this.cc):this.cc:t.getTargetElement(),this.Id?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():Sg(t)}(n):Sg(n)}}},n.prototype.Rd=function(){var t=this.getMap();Eg()?(this.Pd(this.kd,!0),lo(this.Nd,this.Cd),this.dispatchEvent(Mg)):(this.Pd(this.kd,!1),lo(this.Cd,this.Nd),this.dispatchEvent(jg)),t&&t.updateSize()},n.prototype.Pd=function(t,n){var i,r,s,o=this.Td,u=this.Ad,e=n?o:u;(i=t.classList).remove.apply(i,o),(r=t.classList).remove.apply(r,u),(s=t.classList).add.apply(s,e)},n.prototype.setMap=function(n){if(t.prototype.setMap.call(this,n),n)for(var i=0,r=Og.length;i<r;++i)this.listenerKeys.push(q(document,Og[i],this.Rd,this))},n}(Be),Ag=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Cg="projection",Ng="coordinateFormat",kg=function(t){function n(n){var i=this,r=n||{},s=document.createElement("div");s.className=void 0!==r.className?r.className:"ol-mouse-position",(i=t.call(this,{element:s,render:r.render,target:r.target})||this).on,i.once,i.un,i.addChangeListener(Cg,i.ft),r.coordinateFormat&&i.setCoordinateFormat(r.coordinateFormat),r.projection&&i.setProjection(r.projection);var o=!0,u="&#160;";return"undefinedHTML"in r?(void 0!==r.undefinedHTML&&(u=r.undefinedHTML),o=!!u):"placeholder"in r&&(!1===r.placeholder?o=!1:u=String(r.placeholder)),i.Ld=u,i.Fd=o,i.Dd=s.innerHTML,i.zd=null,i.et=null,i}return Ag(n,t),n.prototype.ft=function(){this.et=null},n.prototype.getCoordinateFormat=function(){return this.get(Ng)},n.prototype.getProjection=function(){return this.get(Cg)},n.prototype.handleMouseMove=function(t){var n=this.getMap();this.Ud(n.getEventPixel(t))},n.prototype.handleMouseOut=function(t){this.Ud(null)},n.prototype.setMap=function(n){if(t.prototype.setMap.call(this,n),n){var i=n.getViewport();this.listenerKeys.push(q(i,Hu,this.handleMouseMove,this)),this.Fd&&this.listenerKeys.push(q(i,Qu,this.handleMouseOut,this)),this.Ud(null)}},n.prototype.setCoordinateFormat=function(t){this.set(Ng,t)},n.prototype.setProjection=function(t){this.set(Cg,ur(t))},n.prototype.Ud=function(t){var n=this.Ld;if(t&&this.zd){if(!this.et){var i=this.getProjection();this.et=i?dr(this.zd,i):rr}var r=this.getMap().getCoordinateFromPixelInternal(t);if(r){var s=gr();s&&(this.et=dr(this.zd,s)),this.et(r,r);var o=this.getCoordinateFormat();n=o?o(r):r.toString()}}this.Dd&&n===this.Dd||(this.element.innerHTML=n,this.Dd=n)},n.prototype.render=function(t){var n=t.frameState;n?this.zd!=n.viewState.projection&&(this.zd=n.viewState.projection,this.et=null):this.zd=null},n}(Be),Pg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ig=.75,Gg=.1,Rg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Pg(n,t),n.prototype.createRenderer=function(){return new Uu(this)},n}(Ye),Lg=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).Xd=i.Yd.bind(i),i.Hi=void 0===r.collapsed||r.collapsed,i.Qi=void 0===r.collapsible||r.collapsible,i.Qi||(i.Hi=!1),i.ho=void 0!==r.rotateWithView&&r.rotateWithView,i.Wd=void 0;var s=void 0!==r.className?r.className:"ol-overviewmap",o=void 0!==r.tipLabel?r.tipLabel:"Overview map",u=void 0!==r.collapseLabel?r.collapseLabel:"‹";"string"==typeof u?(i.tr=document.createElement("span"),i.tr.textContent=u):i.tr=u;var e=void 0!==r.label?r.label:"›";"string"==typeof e?(i.nr=document.createElement("span"),i.nr.textContent=e):i.nr=e;var h=i.Qi&&!i.Hi?i.tr:i.nr,f=document.createElement("button");f.setAttribute("type","button"),f.title=o,f.appendChild(h),f.addEventListener(G,i.rr.bind(i),!1),i.Bd=document.createElement("div"),i.Bd.className="ol-overviewmap-map",i.Pl=r.view,i.qd=new Rg({view:r.view});var a=i.qd;r.layers&&r.layers.forEach((function(t){a.addLayer(t)}));var c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",i.Zd=new gf({position:[0,0],positioning:hf,element:c}),i.qd.addOverlay(i.Zd);var v=s+" "+"ol-unselectable "+cu+(i.Hi&&i.Qi?" ol-collapsed":"")+(i.Qi?"":" ol-uncollapsible"),l=i.element;l.className=v,l.appendChild(i.Bd),l.appendChild(f);var d=i,w=i.Zd,p=i.Zd.getElement(),y=function(t){var n,i={clientX:(n=t).clientX,clientY:n.clientY},r=a.getEventCoordinateInternal(i);w.setPosition(r)},b=function t(n){var i=a.getEventCoordinateInternal(n);d.getMap().getView().setCenterInternal(i),window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",t)};return p.addEventListener("mousedown",(function(){window.addEventListener("mousemove",y),window.addEventListener("mouseup",b)})),i}return Pg(n,t),n.prototype.setMap=function(n){var i=this.getMap();if(n!==i){if(i){var r=i.getView();r&&this.Jd(r),this.qd.setTarget(null)}if(t.prototype.setMap.call(this,n),n){this.qd.setTarget(this.Bd),this.listenerKeys.push(q(n,v,this.Vd,this));var s=n.getView();s&&(this.Hd(s),s.isDef()&&(this.qd.updateSize(),this.$d())),this.qd.isRendered()||this.Kd()}}},n.prototype.Vd=function(t){if(t.key===he){var n=t.oldValue;n&&this.Jd(n);var i=this.getMap().getView();this.Hd(i)}else this.qd.isRendered()||t.key!==ee&&t.key!==ue||this.qd.updateSize()},n.prototype.Hd=function(t){if(!this.Pl){var n=new Fe({projection:t.getProjection()});this.qd.setView(n)}t.addChangeListener(be,this.Xd),this.Yd()},n.prototype.Jd=function(t){t.removeChangeListener(be,this.Xd)},n.prototype.Yd=function(){this.ho&&this.qd.getView().setRotation(this.getMap().getView().getRotation())},n.prototype.Qd=function(){var t=this.getMap(),n=this.qd;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView().calculateExtentInternal(i);if(!this.Wd||!Tn(r,this.Wd)){this.Wd=r;var s=n.getSize(),o=n.getView().calculateExtentInternal(s),u=n.getPixelFromCoordinateInternal(Bn(r)),e=n.getPixelFromCoordinateInternal(Dn(r)),h=Math.abs(u[0]-e[0]),f=Math.abs(u[1]-e[1]),a=s[0],c=s[1];h<a*Gg||f<c*Gg||h>a*Ig||f>c*Ig?this.$d():gn(o,r)||this.tw()}}},n.prototype.$d=function(){var t=this.getMap(),n=this.qd,i=t.getSize(),r=t.getView().calculateExtentInternal(i),s=n.getView(),o=Math.log(7.5)/Math.LN2;$n(r,1/(Math.pow(2,o/2)*Gg)),s.fitInternal(Rs(r))},n.prototype.tw=function(){var t=this.getMap(),n=this.qd,i=t.getView();n.getView().setCenterInternal(i.getCenterInternal())},n.prototype.nw=function(){var t=this.getMap(),n=this.qd;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView(),s=n.getView(),o=this.ho?0:-r.getRotation(),u=this.Zd,e=this.Zd.getElement(),h=r.getCenterInternal(),f=r.getResolution(),a=s.getResolution(),c=i[0]*f/a,v=i[1]*f/a;if(u.setPosition(h),e){e.style.width=c+"px",e.style.height=v+"px";var l="rotate("+o+"rad)";e.style.transform=l}}},n.prototype.Kd=function(){this.iw||(this.iw=Z(this.qd,ie,(function(t){delete this.iw,this.nw()}),this))},n.prototype.rr=function(t){t.preventDefault(),this.hr()},n.prototype.hr=function(){this.element.classList.toggle(vu),this.Hi?lo(this.tr,this.nr):lo(this.nr,this.tr),this.Hi=!this.Hi;var t=this.qd;if(!this.Hi){if(t.isRendered())return this.Wd=void 0,void t.render();t.updateSize(),this.$d(),this.Kd()}},n.prototype.getCollapsible=function(){return this.Qi},n.prototype.setCollapsible=function(t){this.Qi!==t&&(this.Qi=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.Hi&&this.hr())},n.prototype.setCollapsed=function(t){this.Qi&&this.Hi!==t&&this.hr()},n.prototype.getCollapsed=function(){return this.Hi},n.prototype.getRotateWithView=function(){return this.ho},n.prototype.setRotateWithView=function(t){this.ho!==t&&(this.ho=t,0!==this.getMap().getView().getRotation()&&(this.ho?this.Yd():this.qd.getView().setRotation(0),this.Wd=void 0,this.Qd(),this.nw()))},n.prototype.getOverviewMap=function(){return this.qd},n.prototype.render=function(t){this.Qd(),this.nw()},n}(Be),Fg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Dg="units",zg="degrees",Ug="imperial",Xg="nautical",Yg="metric",Wg="us",Bg=[1,2,5],qg=25.4/.28,Zg=function(t){function n(n){var i=this,r=n||{},s=void 0!==r.className?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).on,i.once,i.un,i.rw=document.createElement("div"),i.rw.className=s+"-inner",i.element.className=s+" "+fu,i.element.appendChild(i.rw),i.sw=null,i.ow=void 0!==r.minWidth?r.minWidth:64,i.Vt=!1,i.uw=void 0,i.Dd="",i.addChangeListener(Dg,i.ew),i.setUnits(r.units||Yg),i.hw=r.bar||!1,i.fw=r.steps||4,i.aw=r.text||!1,i.cw=r.dpi||void 0,i}return Fg(n,t),n.prototype.getUnits=function(){return this.get(Dg)},n.prototype.ew=function(){this.er()},n.prototype.setUnits=function(t){this.set(Dg,t)},n.prototype.setDpi=function(t){this.cw=t},n.prototype.er=function(){var t=this.sw;if(t){var n=t.center,i=t.projection,r=this.getUnits(),s=r==zg?It.DEGREES:It.METERS,o=er(i,t.resolution,n,s),u=this.ow*(this.cw||qg)/qg,e=u*o,h="";if(r==zg){var f=kt[It.DEGREES];(e*=f)<f/60?(h="″",o*=3600):e<f?(h="′",o*=60):h="°"}else r==Ug?e<.9144?(h="in",o/=.0254):e<1609.344?(h="ft",o/=.3048):(h="mi",o/=1609.344):r==Xg?(o/=1852,h="nm"):r==Yg?e<.001?(h="μm",o*=1e6):e<1?(h="mm",o*=1e3):e<1e3?h="m":(h="km",o/=1e3):r==Wg?e<.9144?(h="in",o*=39.37):e<1609.344?(h="ft",o/=.30480061):(h="mi",o/=1609.3472):mt(!1,33);for(var a,c,v,l,d=3*Math.floor(Math.log(u*o)/Math.log(10));;){v=Math.floor(d/3);var w=Math.pow(10,v);if(a=Bg[(d%3+3)%3]*w,c=Math.round(a/o),isNaN(c))return this.element.style.display="none",void(this.Vt=!1);if(c>=u)break;++d}l=this.hw?this.createScaleBar(c,a,h):a.toFixed(v<0?-v:0)+" "+h,this.Dd!=l&&(this.rw.innerHTML=l,this.Dd=l),this.uw!=c&&(this.rw.style.width=c+"px",this.uw=c),this.Vt||(this.element.style.display="",this.Vt=!0)}else this.Vt&&(this.element.style.display="none",this.Vt=!1)},n.prototype.createScaleBar=function(t,n,i){for(var r="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),s=[],o=t/this.fw,u="#ffffff",e=0;e<this.fw;e++)0===e&&s.push(this.createMarker("absolute",e)),s.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+u+';"></div>'+this.createMarker("relative",e)+(e%2==0||2===this.fw?this.createStepText(e,t,!1,n,i):"")+"</div>"),e===this.fw-1&&s.push(this.createStepText(e+1,t,!0,n,i)),u="#ffffff"===u?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.aw?'<div class="ol-scale-text" style="width: '+t+'px;">'+r+"</div>":"")+s.join("")+"</div>"},n.prototype.createMarker=function(t,n){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},n.prototype.createStepText=function(t,n,i,r,s){var o=(0===t?0:Math.round(r/this.fw*t*100)/100)+(0===t?"":" "+s);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:n/this.fw*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:n/this.fw*2)+"px;left: "+(i?n+"px":"unset")+';">'+o+"</div>"},n.prototype.getScaleForResolution=function(){var t=er(this.sw.projection,this.sw.resolution,this.sw.center),n=this.cw||qg,i=this.sw.projection.getMetersPerUnit();return parseFloat(t.toString())*i*(1e3/25.4)*n},n.prototype.render=function(t){var n=t.frameState;this.sw=n?n.viewState:null,this.er()},n}(Be),Jg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Vg=0,Hg=1,$g=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render})||this).an=[],i.lw=void 0,i.dw=Vg,i.fn,i.ww=0,i.pw=0,i.yw,i.bw,i._w=null,i.gw=!1,i.cr=void 0!==r.duration?r.duration:200;var s=void 0!==r.className?r.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=s+"-thumb "+fu;var u=i.element;return u.className=s+" "+"ol-unselectable "+cu,u.appendChild(o),u.addEventListener($u,i.mw.bind(i),!1),u.addEventListener(Hu,i.Ow.bind(i),!1),u.addEventListener(Ku,i.Mw.bind(i),!1),u.addEventListener(G,i.jw.bind(i),!1),o.addEventListener(G,a,!1),i}return Jg(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),n&&n.render()},n.prototype.xw=function(){var t=this.element,n=t.offsetWidth,i=t.offsetHeight;if(0===n&&0===i)return this.gw=!1;var r=getComputedStyle(t);n-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);var s=t.firstElementChild,o=getComputedStyle(s),u=s.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),e=s.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this._w=[u,e],n>i?(this.dw=Hg,this.pw=n-u):(this.dw=Vg,this.ww=i-e),this.gw=!0},n.prototype.jw=function(t){var n=this.getMap().getView(),i=this.Ew(t.offsetX-this._w[0]/2,t.offsetY-this._w[1]/2),r=this.Sw(i),s=n.getConstrainedZoom(n.getZoomForResolution(r));n.animateInternal({zoom:s,duration:this.cr,easing:dt})},n.prototype.mw=function(t){if(!this.fn&&t.target===this.element.firstElementChild){var n=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.yw=t.clientX-parseFloat(n.style.left),this.bw=t.clientY-parseFloat(n.style.top),this.fn=!0,0===this.an.length){var i=this.Ow,r=this.Mw,s=this.getMap().getOwnerDocument();this.an.push(q(s,Hu,i,this),q(s,Ku,r,this))}}},n.prototype.Ow=function(t){if(this.fn){var n=t.clientX-this.yw,i=t.clientY-this.bw,r=this.Ew(n,i);this.lw=this.Sw(r),this.getMap().getView().setResolution(this.lw)}},n.prototype.Mw=function(t){this.fn&&(this.getMap().getView().endInteraction(),this.fn=!1,this.yw=void 0,this.bw=void 0,this.an.forEach(J),this.an.length=0)},n.prototype.Tw=function(t){var n=this.Aw(t),i=this.element.firstElementChild;this.dw==Hg?i.style.left=this.pw*n+"px":i.style.top=this.ww*n+"px"},n.prototype.Ew=function(t,n){return ii(this.dw===Hg?t/this.pw:n/this.ww,0,1)},n.prototype.Sw=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},n.prototype.Aw=function(t){return ii(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},n.prototype.render=function(t){if(t.frameState&&(this.gw||this.xw())){var n=t.frameState.viewState.resolution;this.lw=n,this.Tw(n)}},n}(Be),Kg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qg=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).extent=r.extent?r.extent:null;var s=void 0!==r.className?r.className:"ol-zoom-extent",o=void 0!==r.label?r.label:"E",u=void 0!==r.tipLabel?r.tipLabel:"Fit to extent",e=document.createElement("button");e.setAttribute("type","button"),e.title=u,e.appendChild("string"==typeof o?document.createTextNode(o):o),e.addEventListener(G,i.rr.bind(i),!1);var h=s+" "+"ol-unselectable "+cu,f=i.element;return f.className=h,f.appendChild(e),i}return Kg(n,t),n.prototype.rr=function(t){t.preventDefault(),this.handleZoomToExtent()},n.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),n=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(Rs(n))},n}(Be),tm={};tm.AssertionError=f,tm.Collection=et,tm.Collection.CollectionEvent=ut,tm.DataTile=gt,tm.Disposable=l,tm.Feature=jt,tm.Feature.createStyleFunction=Mt,tm.Geolocation=$s,tm.Image=eo,tm.Image.listenImage=uo,tm.ImageBase=Qs,tm.ImageCanvas=fo,tm.ImageTile=_o,tm.Kinetic=go,tm.Map=rf,tm.MapBrowserEvent=Ju,tm.MapBrowserEventHandler=ne,tm.MapEvent=qu,tm.Object=nt,tm.Object.ObjectEvent=tt,tm.Observable=K,tm.Observable.unByKey=$,tm.Overlay=gf,tm.PluggableMap=Ye,tm.Tile=bt,tm.TileCache=Af,tm.TileQueue=ve,tm.TileQueue.getTilePriority=le,tm.TileRange=kf,tm.TileRange.createOrUpdate=Nf,tm.VectorRenderTile=Gf,tm.View=Fe,tm.View.createCenterConstraint=Pe,tm.View.createResolutionConstraint=Ie,tm.View.createRotationConstraint=Ge,tm.View.isNoopAnimation=Re,tm.array={},tm.array.binarySearch=d,tm.array.equals=g,tm.array.extend=_,tm.array.find=function(t,n){for(var i,r=t.length>>>0,s=0;s<r;s++)if(n(i=t[s],s,t))return i;return null},tm.array.findIndex=function(t,n){var i;return!t.every((function(r,s){return i=s,!n(r,s,t)}))?i:-1},tm.array.includes=p,tm.array.isSorted=m,tm.array.linearFindNearest=y,tm.array.numberSafeCompareFunction=w,tm.array.remove=function(t,n){var i=t.indexOf(n),r=i>-1;return r&&t.splice(i,1),r},tm.array.reverseSubArray=b,tm.array.stableSort=function(t,n){var i,r=t.length,s=Array(t.length);for(i=0;i<r;i++)s[i]={index:i,value:t[i]};for(s.sort((function(t,i){return n(t.value,i.value)||t.index-i.index})),i=0;i<t.length;i++)t[i]=s[i].value},tm.asserts={},tm.asserts.assert=mt,tm.centerconstraint={},tm.centerconstraint.createExtent=ge,tm.centerconstraint.none=me,tm.color={},tm.color.asArray=Eo,tm.color.asString=Mo,tm.color.fromString=xo,tm.color.isStringColor=Ao,tm.color.normalize=So,tm.color.toString=To,tm.colorlike={},tm.colorlike.asColorLike=Rf,tm.control={},tm.control.Attribution=Ze,tm.control.Control=Be,tm.control.FullScreen=Tg,tm.control.MousePosition=kg,tm.control.OverviewMap=Lg,tm.control.Rotate=Ve,tm.control.ScaleLine=Zg,tm.control.Zoom=$e,tm.control.ZoomSlider=$g,tm.control.ZoomToExtent=Qg,tm.control.defaults=Ke,tm.coordinate={},tm.coordinate.add=Xi,tm.coordinate.closestOnCircle=Yi,tm.coordinate.closestOnSegment=Wi,tm.coordinate.createStringXY=function(t){return function(n){return Qi(n,t)}},tm.coordinate.degreesToStringHDMS=Bi,tm.coordinate.distance=$i,tm.coordinate.equals=Zi,tm.coordinate.format=qi,tm.coordinate.getWorldsAway=nr,tm.coordinate.rotate=Ji,tm.coordinate.scale=Vi,tm.coordinate.squaredDistance=Hi,tm.coordinate.squaredDistanceToSegment=Ki,tm.coordinate.toStringHDMS=function(t,n){return t?Bi("NS",t[1],n)+" "+Bi("EW",t[0],n):""},tm.coordinate.toStringXY=Qi,tm.coordinate.wrapX=tr,tm.css={},tm.css.CLASS_COLLAPSED=vu,tm.css.CLASS_CONTROL=cu,tm.css.CLASS_HIDDEN=eu,tm.css.CLASS_SELECTABLE=hu,tm.css.CLASS_UNSELECTABLE=fu,tm.css.CLASS_UNSUPPORTED=au,tm.css.cssOpacity=pu,tm.css.getFontParameters=wu,tm.dom={},tm.dom.createCanvasContext2D=ao,tm.dom.outerHeight=vo,tm.dom.outerWidth=co,tm.dom.removeChildren=po,tm.dom.removeNode=wo,tm.dom.replaceChildren=yo,tm.dom.replaceNode=lo,tm.easing={},tm.easing.easeIn=lt,tm.easing.easeOut=dt,tm.easing.inAndOut=wt,tm.easing.linear=pt,tm.easing.upAndDown=function(t){return t<.5?wt(2*t):1-wt(2*(t-.5))},tm.events={},tm.events.Event=c,tm.events.Event.preventDefault=function(t){t.preventDefault()},tm.events.Event.stopPropagation=a,tm.events.Target=N,tm.events.condition={},tm.events.condition.all=fh,tm.events.condition.altKeyOnly=ah,tm.events.condition.altShiftKeysOnly=ch,tm.events.condition.always=dh,tm.events.condition.click=function(t){return t.type==Vu.CLICK},tm.events.condition.doubleClick=function(t){return t.type==Vu.DBLCLICK},tm.events.condition.focus=vh,tm.events.condition.focusWithTabindex=lh,tm.events.condition.mouseActionButton=wh,tm.events.condition.mouseOnly=mh,tm.events.condition.never=ph,tm.events.condition.noModifierKeys=bh,tm.events.condition.penOnly=function(t){var n=t.originalEvent;return mt(void 0!==n,56),"pen"===n.pointerType},tm.events.condition.platformModifierKeyOnly=function(t){var n=t.originalEvent;return!n.altKey&&(Dt?n.metaKey:n.ctrlKey)&&!n.shiftKey},tm.events.condition.pointerMove=function(t){return"pointermove"==t.type},tm.events.condition.primaryAction=Oh,tm.events.condition.shiftKeyOnly=_h,tm.events.condition.singleClick=yh,tm.events.condition.targetNotEditable=gh,tm.events.condition.touchOnly=function(t){var n=t.originalEvent;return mt(void 0!==n,56),"touch"===n.pointerType},tm.events.listen=q,tm.events.listenOnce=Z,tm.events.unlistenByKey=J,tm.extent={},tm.extent.applyTransform=Qn,tm.extent.approximatelyEquals=An,tm.extent.boundingExtent=wn,tm.extent.buffer=pn,tm.extent.clone=yn,tm.extent.closestSquaredDistanceXY=bn,tm.extent.containsCoordinate=_n,tm.extent.containsExtent=gn,tm.extent.containsXY=mn,tm.extent.coordinateRelationship=On,tm.extent.createEmpty=Mn,tm.extent.createOrUpdate=jn,tm.extent.createOrUpdateEmpty=xn,tm.extent.createOrUpdateFromCoordinate=En,tm.extent.createOrUpdateFromCoordinates=function(t,n){return kn(xn(n),t)},tm.extent.createOrUpdateFromFlatCoordinates=Sn,tm.extent.createOrUpdateFromRings=function(t,n){return In(xn(n),t)},tm.extent.equals=Tn,tm.extent.extend=Cn,tm.extent.extendCoordinate=Nn,tm.extent.extendCoordinates=kn,tm.extent.extendFlatCoordinates=Pn,tm.extent.extendRings=In,tm.extent.extendXY=Gn,tm.extent.forEachCorner=Rn,tm.extent.getArea=Ln,tm.extent.getBottomLeft=Fn,tm.extent.getBottomRight=Dn,tm.extent.getCenter=zn,tm.extent.getCorner=Un,tm.extent.getEnlargedArea=function(t,n){var i=Math.min(t[0],n[0]),r=Math.min(t[1],n[1]);return(Math.max(t[2],n[2])-i)*(Math.max(t[3],n[3])-r)},tm.extent.getForViewAndSize=Xn,tm.extent.getHeight=Yn,tm.extent.getIntersection=Wn,tm.extent.getIntersectionArea=function(t,n){return Ln(Wn(t,n))},tm.extent.getMargin=function(t){return Zn(t)+Yn(t)},tm.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},tm.extent.getTopLeft=Bn,tm.extent.getTopRight=qn,tm.extent.getWidth=Zn,tm.extent.intersects=Jn,tm.extent.intersectsSegment=Kn,tm.extent.isEmpty=Vn,tm.extent.returnOrUpdate=Hn,tm.extent.scaleFromCenter=$n,tm.extent.wrapX=ti,tm.featureloader={},tm.featureloader.loadFeaturesXhr=Xf,tm.featureloader.setWithCredentials=function(t){Uf=t},tm.featureloader.xhr=Yf,tm.format={},tm.format.Feature=py,tm.format.Feature.transformExtentWithOptions=function(t,n){var i=n?ur(n.featureProjection):null,r=n?ur(n.dataProjection):null;return i&&r&&!lr(i,r)?yr(t,r,i):t},tm.format.Feature.transformGeometryWithOptions=yy,tm.format.GPX=vb,tm.format.GeoJSON=_b,tm.format.JSONFeature=wb,tm.format.Polyline=Pb,tm.format.Polyline.decodeDeltas=xb,tm.format.Polyline.decodeFloats=Sb,tm.format.Polyline.decodeSignedIntegers=Ab,tm.format.Polyline.decodeUnsignedIntegers=Nb,tm.format.Polyline.encodeDeltas=jb,tm.format.Polyline.encodeFloats=Eb,tm.format.Polyline.encodeSignedIntegers=Tb,tm.format.Polyline.encodeUnsignedInteger=kb,tm.format.Polyline.encodeUnsignedIntegers=Cb,tm.format.TextFeature=Ob,tm.format.TopoJSON=Xb,tm.format.WKB=r_,tm.format.WKT=j_,tm.format.XML=x_,tm.format.XMLFeature=_y,tm.format.filter={},tm.format.filter.And=C_,tm.format.filter.Bbox=k_,tm.format.filter.Comparison=X_,tm.format.filter.ComparisonBinary=q_,tm.format.filter.Contains=R_,tm.format.filter.DWithin=F_,tm.format.filter.Disjoint=z_,tm.format.filter.During=W_,tm.format.filter.EqualTo=J_,tm.format.filter.Filter=E_,tm.format.filter.GreaterThan=H_,tm.format.filter.GreaterThanOrEqualTo=K_,tm.format.filter.Intersects=tg,tm.format.filter.IsBetween=ig,tm.format.filter.IsLike=sg,tm.format.filter.IsNull=ug,tm.format.filter.LessThan=hg,tm.format.filter.LessThanOrEqualTo=ag,tm.format.filter.LogicalNary=T_,tm.format.filter.Not=vg,tm.format.filter.NotEqualTo=dg,tm.format.filter.Or=pg,tm.format.filter.ResourceId=bg,tm.format.filter.Spatial=I_,tm.format.filter.Within=gg,tm.format.filter.and=function(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(C_,n))},tm.format.filter.bbox=function(t,n,i){return new k_(t,n,i)},tm.format.filter.between=function(t,n,i){return new ig(t,n,i)},tm.format.filter.contains=function(t,n,i){return new R_(t,n,i)},tm.format.filter.disjoint=function(t,n,i){return new z_(t,n,i)},tm.format.filter.during=function(t,n,i){return new W_(t,n,i)},tm.format.filter.dwithin=function(t,n,i,r,s){return new F_(t,n,i,r,s)},tm.format.filter.equalTo=function(t,n,i){return new J_(t,n,i)},tm.format.filter.greaterThan=function(t,n){return new H_(t,n)},tm.format.filter.greaterThanOrEqualTo=function(t,n){return new K_(t,n)},tm.format.filter.intersects=function(t,n,i){return new tg(t,n,i)},tm.format.filter.isNull=function(t){return new ug(t)},tm.format.filter.lessThan=function(t,n){return new hg(t,n)},tm.format.filter.lessThanOrEqualTo=function(t,n){return new ag(t,n)},tm.format.filter.like=function(t,n,i,r,s,o){return new sg(t,n,i,r,s,o)},tm.format.filter.not=function(t){return new vg(t)},tm.format.filter.notEqualTo=function(t,n,i){return new dg(t,n,i)},tm.format.filter.or=function(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(pg,n))},tm.format.filter.resourceId=function(t){return new bg(t)},tm.format.filter.within=function(t,n,i){return new gg(t,n,i)},tm.format.xlink={},tm.format.xlink.readHref=function(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")},tm.format.xsd={},tm.format.xsd.readBoolean=function(t){return gy(Ia(t,!1))},tm.format.xsd.readBooleanString=gy,tm.format.xsd.readDateTime=my,tm.format.xsd.readDecimal=Oy,tm.format.xsd.readDecimalString=My,tm.format.xsd.readNonNegativeIntegerString=xy,tm.format.xsd.readPositiveInteger=jy,tm.format.xsd.readString=Ey,tm.format.xsd.writeBooleanTextNode=function(t,n){Cy(t,n?"1":"0")},tm.format.xsd.writeCDATASection=function(t,n){t.appendChild(Qa().createCDATASection(n))},tm.format.xsd.writeDateTimeTextNode=Sy,tm.format.xsd.writeDecimalTextNode=Ty,tm.format.xsd.writeNonNegativeIntegerTextNode=Ay,tm.format.xsd.writeStringTextNode=Cy,tm.functions={},tm.functions.FALSE=M,tm.functions.TRUE=O,tm.functions.VOID=j,tm.functions.memoizeOne=x,tm.geom={},tm.geom.Circle=pp,tm.geom.Geometry=Gr,tm.geom.GeometryCollection=dy,tm.geom.LineString=Fw,tm.geom.LinearRing=cs,tm.geom.MultiLineString=bp,tm.geom.MultiPoint=gp,tm.geom.MultiPolygon=Op,tm.geom.Point=ls,tm.geom.Polygon=Is,tm.geom.Polygon.circular=Gs,tm.geom.Polygon.fromCircle=Ls,tm.geom.Polygon.fromExtent=Rs,tm.geom.Polygon.makeRegular=Fs,tm.geom.SimpleGeometry=Dr,tm.geom.SimpleGeometry.getStrideForLayout=Lr,tm.geom.SimpleGeometry.transformGeom2D=Fr,tm.geom.flat={},tm.geom.flat.area={},tm.geom.flat.area.linearRing=es,tm.geom.flat.area.linearRings=hs,tm.geom.flat.area.linearRingss=fs,tm.geom.flat.center={},tm.geom.flat.center.linearRingss=Cw,tm.geom.flat.closest={},tm.geom.flat.closest.arrayMaxSquaredDelta=Xr,tm.geom.flat.closest.assignClosestArrayPoint=Br,tm.geom.flat.closest.assignClosestMultiArrayPoint=qr,tm.geom.flat.closest.assignClosestPoint=Wr,tm.geom.flat.closest.maxSquaredDelta=Ur,tm.geom.flat.closest.multiArrayMaxSquaredDelta=Yr,tm.geom.flat.contains={},tm.geom.flat.contains.linearRingContainsExtent=ds,tm.geom.flat.contains.linearRingContainsXY=ws,tm.geom.flat.contains.linearRingsContainsXY=ps,tm.geom.flat.contains.linearRingssContainsXY=ys,tm.geom.flat.deflate={},tm.geom.flat.deflate.deflateCoordinate=Zr,tm.geom.flat.deflate.deflateCoordinates=Jr,tm.geom.flat.deflate.deflateCoordinatesArray=Vr,tm.geom.flat.deflate.deflateMultiCoordinatesArray=Hr,tm.geom.flat.flip={},tm.geom.flat.flip.flipXY=wy,tm.geom.flat.geodesic={},tm.geom.flat.geodesic.greatCircleArc=function(t,n,i,r,s,o){var u=ur("EPSG:4326"),e=Math.cos(fi(n)),h=Math.sin(fi(n)),f=Math.cos(fi(r)),a=Math.sin(fi(r)),c=Math.cos(fi(i-t)),v=Math.sin(fi(i-t)),l=h*a+e*f*c;return Uw((function(n){if(1<=l)return[i,r];var s=n*Math.acos(l),o=Math.cos(s),u=Math.sin(s),d=v*f,w=e*a-h*f*c,p=Math.atan2(d,w),y=Math.asin(h*o+e*u*Math.cos(p));return[hi(fi(t)+Math.atan2(Math.sin(p)*u*e,o-h*Math.sin(y))),hi(y)]}),wr(u,s),o)},tm.geom.flat.geodesic.meridian=Xw,tm.geom.flat.geodesic.parallel=Yw,tm.geom.flat.inflate={},tm.geom.flat.inflate.inflateCoordinates=ss,tm.geom.flat.inflate.inflateCoordinatesArray=os,tm.geom.flat.inflate.inflateMultiCoordinatesArray=us,tm.geom.flat.interiorpoint={},tm.geom.flat.interiorpoint.getInteriorPointOfArray=bs,tm.geom.flat.interiorpoint.getInteriorPointsOfMultiArray=_s,tm.geom.flat.interpolate={},tm.geom.flat.interpolate.interpolatePoint=Sw,tm.geom.flat.interpolate.lineStringCoordinateAtM=Tw,tm.geom.flat.interpolate.lineStringsCoordinateAtM=Aw,tm.geom.flat.intersectsextent={},tm.geom.flat.intersectsextent.intersectsLineString=ms,tm.geom.flat.intersectsextent.intersectsLineStringArray=Os,tm.geom.flat.intersectsextent.intersectsLinearRing=Ms,tm.geom.flat.intersectsextent.intersectsLinearRingArray=js,tm.geom.flat.intersectsextent.intersectsLinearRingMultiArray=xs,tm.geom.flat.length={},tm.geom.flat.length.lineStringLength=ow,tm.geom.flat.length.linearRingLength=function(t,n,i,r){var s=ow(t,n,i,r),o=t[i-r]-t[n],u=t[i-r+1]-t[n+1];return s+=Math.sqrt(o*o+u*u)},tm.geom.flat.orient={},tm.geom.flat.orient.linearRingIsClockwise=Ss,tm.geom.flat.orient.linearRingsAreOriented=Ts,tm.geom.flat.orient.linearRingssAreOriented=As,tm.geom.flat.orient.orientLinearRings=Cs,tm.geom.flat.orient.orientLinearRingsArray=Ns,tm.geom.flat.reverse={},tm.geom.flat.reverse.coordinates=Es,tm.geom.flat.segments={},tm.geom.flat.segments.forEach=gs,tm.geom.flat.simplify={},tm.geom.flat.simplify.douglasPeucker=$r,tm.geom.flat.simplify.douglasPeuckerArray=Kr,tm.geom.flat.simplify.douglasPeuckerMultiArray=function(t,n,i,r,s,o,u,e){for(var h=0,f=i.length;h<f;++h){var a=i[h],c=[];u=Kr(t,n,a,r,s,o,u,c),e.push(c),n=a[a.length-1]}return u},tm.geom.flat.simplify.quantize=ns,tm.geom.flat.simplify.quantizeArray=is,tm.geom.flat.simplify.quantizeMultiArray=rs,tm.geom.flat.simplify.radialDistance=Qr,tm.geom.flat.simplify.simplifyLineString=function(t,n,i,r,s,o,u){var e=void 0!==u?u:[];return o||(i=Qr(t,n,i,r,s,e,0),t=e,n=0,r=2),e.length=$r(t,n,i,r,s,e,0),e},tm.geom.flat.simplify.snap=ts,tm.geom.flat.straightchunk={},tm.geom.flat.straightchunk.matchingChunk=Kd,tm.geom.flat.textpath={},tm.geom.flat.textpath.drawTextOnPath=sw,tm.geom.flat.topology={},tm.geom.flat.topology.lineStringIsClosed=function(t,n,i,r){var s=i-r;return t[n]===t[s]&&t[n+1]===t[s+1]&&(i-n)/r>3&&!!es(t,n,i,r)},tm.geom.flat.transform={},tm.geom.flat.transform.rotate=Cr,tm.geom.flat.transform.scale=Nr,tm.geom.flat.transform.transform2D=Ar,tm.geom.flat.transform.translate=kr,tm.has={},tm.has.DEVICE_PIXEL_RATIO=zt,tm.has.FIREFOX=Rt,tm.has.IMAGE_DECODE=Xt,tm.has.MAC=Dt,tm.has.PASSIVE_EVENT_LISTENERS=Yt,tm.has.SAFARI=Lt,tm.has.WEBKIT=Ft,tm.has.WORKER_OFFSCREEN_CANVAS=Ut,tm.interaction={},tm.interaction.DoubleClickZoom=oh,tm.interaction.DragAndDrop=cp,tm.interaction.DragAndDrop.DragAndDropEvent=ap,tm.interaction.DragBox=Gh,tm.interaction.DragBox.DragBoxEvent=Ih,tm.interaction.DragPan=jh,tm.interaction.DragRotate=Eh,tm.interaction.DragRotateAndZoom=lp,tm.interaction.DragZoom=Lh,tm.interaction.Draw=kp,tm.interaction.Draw.DrawEvent=Np,tm.interaction.Draw.createBox=function(){return function(t,n,i){var r=wn([t[0],t[t.length-1]].map((function(t){return Or(t,i)}))),s=[[Fn(r),Dn(r),qn(r),Bn(r),Fn(r)]],o=n;o?o.setCoordinates(s):o=new Is(s);var u=gr();return u&&o.transform(i,u),o}},tm.interaction.Draw.createRegularPolygon=function(t,n){return function(i,r,s){var o=Or(i[0],s),u=Or(i[i.length-1],s),e=Math.sqrt(Hi(o,u)),h=r||Ls(new pp(o),t),f=n;if(!n&&0!==n){var a=u[0]-o[0],c=u[1]-o[1];f=Math.atan2(c,a)}Fs(h,o,e,f);var v=gr();return v&&h.transform(s,v),h}},tm.interaction.Extent=Dp,tm.interaction.Extent.ExtentEvent=Gp,tm.interaction.Interaction=rh,tm.interaction.Interaction.pan=nh,tm.interaction.Interaction.zoomByDelta=ih,tm.interaction.KeyboardPan=Yh,tm.interaction.KeyboardZoom=Bh,tm.interaction.Modify=Hp,tm.interaction.Modify.ModifyEvent=qp,tm.interaction.MouseWheelZoom=Vh,tm.interaction.PinchRotate=$h,tm.interaction.PinchZoom=Qh,tm.interaction.Pointer=hh,tm.interaction.Pointer.centroid=eh,tm.interaction.Select=ny,tm.interaction.Select.SelectEvent=Qp,tm.interaction.Snap=oy,tm.interaction.Translate=cy,tm.interaction.Translate.TranslateEvent=ay,tm.interaction.defaults=tf,tm.layer={},tm.layer.Base=Bo,tm.layer.BaseImage=rd,tm.layer.BaseTile=ld,tm.layer.BaseVector=Rw,tm.layer.Graticule=Zw,tm.layer.Group=Wu,tm.layer.Heatmap=op,tm.layer.Image=fd,tm.layer.Layer=nu,tm.layer.Layer.inView=tu,tm.layer.Tile=_d,tm.layer.Vector=zw,tm.layer.VectorImage=ep,tm.loadingstrategy={},tm.loadingstrategy.all=Wf,tm.loadingstrategy.bbox=function(t,n){return[t]},tm.loadingstrategy.tile=function(t){return function(n,i,r){var s=t.getZForResolution(Er(i,r)),o=t.getTileRangeForExtentAndZ(jr(n,r),s),u=[],e=[s,0,0];for(e[1]=o.minX;e[1]<=o.maxX;++e[1])for(e[2]=o.minY;e[2]<=o.maxY;++e[2])u.push(Mr(t.getTileCoordExtent(e),r));return u}},tm.math={},tm.math.clamp=ii,tm.math.cosh=ri,tm.math.lerp=ci,tm.math.log2=si,tm.math.modulo=ai,tm.math.solveLinearSystem=ei,tm.math.squaredDistance=ui,tm.math.squaredSegmentDistance=oi,tm.math.toDegrees=hi,tm.math.toRadians=fi,tm.net={},tm.net.ClientError=Jf,tm.net.ResponseError=Zf,tm.net.getJSON=function(t){return new Promise((function(n,i){var r=new XMLHttpRequest;r.addEventListener("load",(function(t){var r=t.target;if(!r.status||r.status>=200&&r.status<300){var s=void 0;try{s=JSON.parse(r.responseText)}catch(t){var o="Error parsing response text as JSON: "+t.message;return void i(new Error(o))}n(s)}else i(new Zf(r))})),r.addEventListener("error",(function(t){i(new Jf(t.target))})),r.open("GET",t),r.setRequestHeader("Accept","application/json"),r.send()}))},tm.net.jsonp=function(t,n,i,r){var s=document.createElement("script"),u="olc_"+o(n);function e(){delete window[u],s.parentNode.removeChild(s)}s.async=!0,s.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+u;var h=setTimeout((function(){e(),i&&i()}),1e4);window[u]=function(t){clearTimeout(h),e(),n(t)},document.getElementsByTagName("head")[0].appendChild(s)},tm.net.overrideXHR=function(t){"undefined"!=typeof XMLHttpRequest&&(qf=XMLHttpRequest),global.XMLHttpRequest=t},tm.net.resolveUrl=function(t,n){return n.indexOf("://")>=0?n:new URL(n,t).href},tm.net.restoreXHR=function(){global.XMLHttpRequest=qf},tm.obj={},tm.obj.assign=E,tm.obj.clear=S,tm.obj.getValues=T,tm.obj.isEmpty=A,tm.proj={},tm.proj.Projection=ni,tm.proj.Units={},tm.proj.Units.METERS_PER_UNIT=kt,tm.proj.Units.fromCode=function(t){return Nt[t]},tm.proj.addCommon=Tr,tm.proj.addCoordinateTransforms=vr,tm.proj.addEquivalentProjections=hr,tm.proj.addEquivalentTransforms=fr,tm.proj.addProjection=sr,tm.proj.addProjections=or,tm.proj.clearAllProjections=function(){Ai(),Pi()},tm.proj.clearUserProjection=function(){br=null},tm.proj.cloneTransform=ir,tm.proj.createProjection=ar,tm.proj.createSafeCoordinateTransform=Sr,tm.proj.createTransformFromCoordinateTransform=cr,tm.proj.epsg3857={},tm.proj.epsg3857.EXTENT=wi,tm.proj.epsg3857.HALF_SIZE=di,tm.proj.epsg3857.MAX_SAFE_Y=yi,tm.proj.epsg3857.PROJECTIONS=_i,tm.proj.epsg3857.RADIUS=li,tm.proj.epsg3857.WORLD_EXTENT=pi,tm.proj.epsg3857.fromEPSG4326=gi,tm.proj.epsg3857.toEPSG4326=mi,tm.proj.epsg4326={},tm.proj.epsg4326.EXTENT=ji,tm.proj.epsg4326.METERS_PER_UNIT=xi,tm.proj.epsg4326.PROJECTIONS=Si,tm.proj.epsg4326.RADIUS=Mi,tm.proj.equivalent=lr,tm.proj.fromLonLat=function(t,n){return pr(t,"EPSG:4326",void 0!==n?n:"EPSG:3857")},tm.proj.fromUserCoordinate=Or,tm.proj.fromUserExtent=jr,tm.proj.fromUserResolution=Er,tm.proj.get=ur,tm.proj.getPointResolution=er,tm.proj.getTransform=wr,tm.proj.getTransformFromProjections=dr,tm.proj.getUserProjection=gr,tm.proj.identityTransform=rr,tm.proj.proj4={},tm.proj.proj4.register=function(t){var n,i,r=Object.keys(t.defs),s=r.length;for(n=0;n<s;++n){var o=r[n];if(!ur(o)){var u=t.defs(o),e=u.units;e||"longlat"!==u.projName||(e=It.DEGREES),sr(new ni({code:o,axisOrientation:u.axis,metersPerUnit:u.to_meter,units:e}))}}for(n=0;n<s;++n){var h=r[n],f=ur(h);for(i=0;i<s;++i){var a=r[i],c=ur(a);if(!Gi(h,a))if(t.defs[h]===t.defs[a])hr([f,c]);else{var v=t(h,a);vr(f,c,Sr(f,c,v.forward),Sr(c,f,v.inverse))}}}},tm.proj.projections={},tm.proj.projections.add=Ni,tm.proj.projections.clear=Ai,tm.proj.projections.get=Ci,tm.proj.setUserProjection=_r,tm.proj.toLonLat=function(t,n){var i=pr(t,void 0!==n?n:"EPSG:3857","EPSG:4326"),r=i[0];return(r<-180||r>180)&&(i[0]=ai(r+180,360)-180),i},tm.proj.toUserCoordinate=mr,tm.proj.toUserExtent=Mr,tm.proj.toUserResolution=xr,tm.proj.transform=pr,tm.proj.transformExtent=yr,tm.proj.transformWithProjections=function(t,n,i){return dr(n,i)(t)},tm.proj.transforms={},tm.proj.transforms.add=Ii,tm.proj.transforms.clear=Pi,tm.proj.transforms.get=Gi,tm.proj.transforms.remove=function(t,n){var i=t.getCode(),r=n.getCode(),s=ki[i][r];return delete ki[i][r],A(ki[i])&&delete ki[i],s},tm.proj.useGeographic=function(){_r("EPSG:4326")},tm.render={},tm.render.Box=Th,tm.render.Event=uu,tm.render.Feature=Pw,tm.render.VectorContext=Vf,tm.render.canvas={},tm.render.canvas.Builder=Bd,tm.render.canvas.BuilderGroup=rw,tm.render.canvas.Executor=dw,tm.render.canvas.ExecutorGroup=_w,tm.render.canvas.ExecutorGroup.getPixelIndexArray=bw,tm.render.canvas.ImageBuilder=Zd,tm.render.canvas.Immediate=$f,tm.render.canvas.Instruction={},tm.render.canvas.Instruction.beginPathInstruction=Ud,tm.render.canvas.Instruction.closePathInstruction=Xd,tm.render.canvas.Instruction.fillInstruction=Dd,tm.render.canvas.Instruction.strokeInstruction=zd,tm.render.canvas.LineStringBuilder=Vd,tm.render.canvas.PolygonBuilder=$d,tm.render.canvas.TextBuilder=nw,tm.render.canvas.checkedFonts=Su,tm.render.canvas.defaultFillStyle=bu,tm.render.canvas.defaultFont=yu,tm.render.canvas.defaultLineCap=_u,tm.render.canvas.defaultLineDash=gu,tm.render.canvas.defaultLineDashOffset=0,tm.render.canvas.defaultLineJoin=mu,tm.render.canvas.defaultLineWidth=1,tm.render.canvas.defaultMiterLimit=Ou,tm.render.canvas.defaultPadding=Eu,tm.render.canvas.defaultStrokeStyle=Mu,tm.render.canvas.defaultTextAlign=ju,tm.render.canvas.defaultTextBaseline=xu,tm.render.canvas.drawImageOrLabel=Du,tm.render.canvas.hitdetect={},tm.render.canvas.hitdetect.HIT_DETECT_RESOLUTION=gw,tm.render.canvas.hitdetect.createHitDetectionImageData=mw,tm.render.canvas.hitdetect.hitDetect=Ow,tm.render.canvas.labelCache=Tu,tm.render.canvas.measureAndCacheTextWidth=Lu,tm.render.canvas.measureTextHeight=Iu,tm.render.canvas.measureTextWidth=Ru,tm.render.canvas.measureTextWidths=Fu,tm.render.canvas.registerFont=Pu,tm.render.canvas.rotateAtOffset=function(t,n,i,r){0!==n&&(t.translate(i,r),t.rotate(n),t.translate(-i,-r))},tm.render.canvas.textHeights=ku,tm.render.getRenderPixel=function(t,n){var i=n.slice(0);return Ht(t.inversePixelTransform.slice(),i),i},tm.render.getVectorContext=aa,tm.render.toContext=function(t,n){var i=t.canvas,r=n||{},s=r.pixelRatio||zt,o=r.size;o&&(i.width=o[0]*s,i.height=o[1]*s,i.style.width=o[0]+"px",i.style.height=o[1]+"px");var u=[0,0,i.width,i.height],e=Kt([1,0,0,1,0,0],s,s);return new $f(t,s,u,e,0)},tm.renderer={},tm.renderer.Composite=Uu,tm.renderer.Layer=Zc,tm.renderer.Map=su,tm.renderer.canvas={},tm.renderer.canvas.ImageLayer=ed,tm.renderer.canvas.Layer=od,tm.renderer.canvas.TileLayer=yd,tm.renderer.canvas.VectorImageLayer=Ew,tm.renderer.canvas.VectorLayer=jw,tm.renderer.vector={},tm.renderer.vector.defaultOrder=oa,tm.renderer.vector.getSquaredTolerance=ua,tm.renderer.vector.getTolerance=ea,tm.renderer.vector.renderFeature=ha,tm.reproj={},tm.reproj.Image=Cl,tm.reproj.Tile=Bl,tm.reproj.Triangulation=Tl,tm.reproj.calculateSourceExtentResolution=pa,tm.reproj.calculateSourceResolution=wa,tm.reproj.common={},tm.reproj.common.ENABLE_RASTER_REPROJECTION=Sl,tm.reproj.common.ERROR_THRESHOLD=.5,tm.reproj.render=ya,tm.resolutionconstraint={},tm.resolutionconstraint.createMinMaxResolution=Ee,tm.resolutionconstraint.createSnapToPower=xe,tm.resolutionconstraint.createSnapToResolutions=je,tm.rotationconstraint={},tm.rotationconstraint.createSnapToN=Ae,tm.rotationconstraint.createSnapToZero=Ce,tm.rotationconstraint.disable=Se,tm.rotationconstraint.none=Te,tm.size={},tm.size.buffer=function(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*n,i[1]=t[1]+2*n,i},tm.size.hasArea=De,tm.size.scale=ze,tm.size.toSize=Ue,tm.source={},tm.source.Cluster=yl,tm.source.DataTile=El,tm.source.Image=Ll,tm.source.Image.ImageSourceEvent=Gl,tm.source.Image.defaultImageLoadFunction=Rl,tm.source.ImageCanvas=Dl,tm.source.ImageMapGuide=Ul,tm.source.ImageStatic=Yl,tm.source.OSM=nd,tm.source.OSM.ATTRIBUTION=td,tm.source.Raster=Gd,tm.source.Raster.Processor=xd,tm.source.Raster.RasterSourceEvent=Cd,tm.source.Raster.newImageData=Od,tm.source.Source=ol,tm.source.Tile=jl,tm.source.Tile.TileSourceEvent=Ml,tm.source.TileDebug=Ld,tm.source.TileImage=Hl,tm.source.UrlTile=Zl,tm.source.Vector=wl,tm.source.Vector.VectorSourceEvent=dl,tm.source.XYZ=Kl,tm.source.common={},tm.source.common.IMAGE_SMOOTHING_DISABLED=va,tm.sphere={},tm.sphere.DEFAULT_RADIUS=Ri,tm.sphere.getArea=function t(n,i){var r=i||{},s=r.radius||Ri,o=r.projection||"EPSG:3857",u=n.getType();u!==At.GEOMETRY_COLLECTION&&(n=n.clone().transform(o,"EPSG:4326"));var e,h,f,a,c,v,l=0;switch(u){case At.POINT:case At.MULTI_POINT:case At.LINE_STRING:case At.MULTI_LINE_STRING:case At.LINEAR_RING:break;case At.POLYGON:for(e=n.getCoordinates(),l=Math.abs(Di(e[0],s)),f=1,a=e.length;f<a;++f)l-=Math.abs(Di(e[f],s));break;case At.MULTI_POLYGON:for(f=0,a=(e=n.getCoordinates()).length;f<a;++f)for(h=e[f],l+=Math.abs(Di(h[0],s)),c=1,v=h.length;c<v;++c)l-=Math.abs(Di(h[c],s));break;case At.GEOMETRY_COLLECTION:var d=n.getGeometries();for(f=0,a=d.length;f<a;++f)l+=t(d[f],i);break;default:throw new Error("Unsupported geometry type: "+u)}return l},tm.sphere.getDistance=Li,tm.sphere.getLength=function t(n,i){var r=i||{},s=r.radius||Ri,o=r.projection||"EPSG:3857",u=n.getType();u!==At.GEOMETRY_COLLECTION&&(n=n.clone().transform(o,"EPSG:4326"));var e,h,f,a,c,v,l=0;switch(u){case At.POINT:case At.MULTI_POINT:break;case At.LINE_STRING:case At.LINEAR_RING:l=Fi(e=n.getCoordinates(),s);break;case At.MULTI_LINE_STRING:case At.POLYGON:for(f=0,a=(e=n.getCoordinates()).length;f<a;++f)l+=Fi(e[f],s);break;case At.MULTI_POLYGON:for(f=0,a=(e=n.getCoordinates()).length;f<a;++f)for(c=0,v=(h=e[f]).length;c<v;++c)l+=Fi(h[c],s);break;case At.GEOMETRY_COLLECTION:var d=n.getGeometries();for(f=0,a=d.length;f<a;++f)l+=t(d[f],i);break;default:throw new Error("Unsupported geometry type: "+u)}return l},tm.sphere.offset=zi,tm.string={},tm.string.compareVersions=function(t,n){for(var i=(""+t).split("."),r=(""+n).split("."),s=0;s<Math.max(i.length,r.length);s++){var o=parseInt(i[s]||"0",10),u=parseInt(r[s]||"0",10);if(o>u)return 1;if(u>o)return-1}return 0},tm.string.padNumber=Ui,tm.structs={},tm.structs.LRUCache=mf,tm.structs.LinkedList=tl,tm.structs.PriorityQueue=ae,tm.structs.PriorityQueue.DROP=fe,tm.structs.RBush=il,tm.style={},tm.style.Circle=uc,tm.style.Fill=ec,tm.style.Icon=gc,tm.style.IconImage=bc,tm.style.IconImage.get=yc,tm.style.IconImageCache=ko,tm.style.IconImageCache.shared=Po,tm.style.Image=ic,tm.style.RegularShape=sc,tm.style.Stroke=mc,tm.style.Style=Ac,tm.style.Style.createDefaultStyle=Ec,tm.style.Style.createEditingStyle=Sc,tm.style.Style.toFunction=jc,tm.style.Text=kc,tm.style.expressions={},tm.style.expressions.Operators=Pv,tm.style.expressions.arrayToGlsl=Lv,tm.style.expressions.colorToGlsl=Fv,tm.style.expressions.expressionToGlsl=Uv,tm.style.expressions.getStringNumberEquivalent=Dv,tm.style.expressions.getValueType=Iv,tm.style.expressions.isTypeUnique=Gv,tm.style.expressions.numberToGlsl=Rv,tm.style.expressions.stringToGlsl=zv,tm.style.expressions.uniformNameForVariable=$v,tm.tilecoord={},tm.tilecoord.createOrUpdate=Of,tm.tilecoord.fromKey=xf,tm.tilecoord.getCacheKeyForTileKey=function(t){var n=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return Mf(n[0],n[1],n[2])},tm.tilecoord.getKey=jf,tm.tilecoord.getKeyZXY=Mf,tm.tilecoord.hash=Ef,tm.tilecoord.withinExtentAndZ=Sf,tm.tilegrid={},tm.tilegrid.TileGrid=_a,tm.tilegrid.common={},tm.tilegrid.common.DEFAULT_MAX_ZOOM=42,tm.tilegrid.common.DEFAULT_TILE_SIZE=_e,tm.tilegrid.createForExtent=Oa,tm.tilegrid.createForProjection=xa,tm.tilegrid.createXYZ=Ma,tm.tilegrid.extentFromProjection=Ea,tm.tilegrid.getForProjection=ga,tm.tilegrid.wrapX=ma,tm.tileurlfunction={},tm.tileurlfunction.createFromTemplate=Sa,tm.tileurlfunction.createFromTemplates=Ta,tm.tileurlfunction.createFromTileUrlFunctions=Aa,tm.tileurlfunction.expandUrl=Ca,tm.tileurlfunction.nullTileUrlFunction=function(t,n,i){},tm.transform={},tm.transform.apply=Ht,tm.transform.compose=tn,tm.transform.composeCssTransform=function(t,n,i,r,s,o,u){return sn(tn([1,0,0,1,0,0],t,n,i,r,s,o,u))},tm.transform.create=Bt,tm.transform.determinant=rn,tm.transform.invert=function(t){return nn(t,t)},tm.transform.makeInverse=nn,tm.transform.makeScale=Qt,tm.transform.multiply=Zt,tm.transform.reset=qt,tm.transform.rotate=$t,tm.transform.scale=Kt,tm.transform.set=Jt,tm.transform.setFromArray=Vt,tm.transform.toString=sn,tm.transform.translate=function(t,n,i){return Zt(t,Jt(Wt,1,0,0,1,n,i))},tm.uri={},tm.uri.appendParams=Na,tm.util={},tm.util.VERSION=e,tm.util.abstract=r,tm.util.getUid=o,tm.vec={},tm.vec.mat4={},tm.vec.mat4.create=tc,tm.vec.mat4.fromTransform=nc,tm.xml={},tm.xml.OBJECT_PROPERTY_NODE_FACTORY=Ya,tm.xml.XML_SCHEMA_INSTANCE_URI=ka,tm.xml.createElementNS=Pa,tm.xml.getAllTextContent=Ia,tm.xml.Cw=Ga,tm.xml.getAttributeNS=function(t,n,i){return t.getAttributeNS(n,i)||""},tm.xml.getDocument=Qa,tm.xml.getXMLSerializer=$a,tm.xml.isDocument=Ra,tm.xml.makeArrayExtender=function(t,n){return function(i,r){var s=t.call(void 0!==n?n:this,i,r);void 0!==s&&_(r[r.length-1],s)}},tm.xml.makeArrayPusher=Fa,tm.xml.makeArraySerializer=Ua,tm.xml.makeChildAppender=za,tm.xml.makeObjectPropertyPusher=function(t,n,i){return function(r,s){var o=t.call(void 0!==i?i:this,r,s);if(void 0!==o){var u=s[s.length-1],e=void 0!==n?n:r.localName,h=void 0;e in u?h=u[e]:(h=[],u[e]=h),h.push(o)}}},tm.xml.makeObjectPropertySetter=Da,tm.xml.makeReplacer=function(t,n){return function(i,r){var s=t.call(void 0!==n?n:this,i,r);void 0!==s&&(r[r.length-1]=s)}},tm.xml.makeSequence=Wa,tm.xml.makeSimpleNodeFactory=Xa,tm.xml.makeStructureNS=Ba,tm.xml.parse=La,tm.xml.parseNode=qa,tm.xml.pushParseAndPop=Za,tm.xml.pushSerializeAndPop=Va,tm.xml.registerDocument=function(t){Ka=t},tm.xml.registerXMLSerializer=function(t){Ha=t},tm.xml.serialize=Ja;var nm=tm}},n={};function i(r){var s=n[r];if(void 0!==s)return s.exports;var o=n[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.d=function(t,n){for(var r in n)i.o(n,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},i(760);var r=i(690);return r=r.default}()}));