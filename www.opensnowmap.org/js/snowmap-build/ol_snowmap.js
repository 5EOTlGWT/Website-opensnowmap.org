!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.ol=n():t.ol=n()}(self,(function(){return function(){var t={72:function(t,n,i){var r,s,o;function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(){"use strict";function t(t,r,s,o,u){!function t(i,r,s,o,u){for(;o>s;){if(o-s>600){var e=o-s+1,h=r-s+1,f=Math.log(e),a=.5*Math.exp(2*f/3),c=.5*Math.sqrt(f*a*(e-a)/e)*(h-e/2<0?-1:1);t(i,r,Math.max(s,Math.floor(r-h*a/e+c)),Math.min(o,Math.floor(r+(e-h)*a/e+c)),u)}var v=i[r],l=s,d=o;for(n(i,s,r),u(i[o],v)>0&&n(i,s,o);l<d;){for(n(i,l,d),l++,d--;u(i[l],v)<0;)l++;for(;u(i[d],v)>0;)d--}0===u(i[s],v)?n(i,s,d):n(i,++d,o),d<=r&&(s=d+1),r<=d&&(o=d-1)}}(t,r,s||0,o||t.length-1,u||i)}function n(t,n,i){var r=t[n];t[n]=t[i],t[i]=r}function i(t,n){return t<n?-1:t>n?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(t,n,i){if(!i)return n.indexOf(t);for(var r=0;r<n.length;r++)if(i(t,n[r]))return r;return-1}function o(t,n){u(t,0,t.children.length,n,t)}function u(t,n,i,r,s){s||(s=d(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var o=n;o<i;o++){var u=t.children[o];e(s,t.leaf?r(u):u)}return s}function e(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function h(t,n){return t.minX-n.minX}function f(t,n){return t.minY-n.minY}function a(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function v(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function l(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w(n,i,r,s,o){for(var u=[i,r];u.length;)if(!((r=u.pop())-(i=u.pop())<=s)){var e=i+Math.ceil((r-i)/s/2)*s;t(n,e,i,r,o),u.push(i,e,e,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var n=this.data,i=[];if(!l(t,n))return i;for(var r=this.toBBox,s=[];n;){for(var o=0;o<n.children.length;o++){var u=n.children[o],e=n.leaf?r(u):u;l(t,e)&&(n.leaf?i.push(u):v(t,e)?this._all(u,i):s.push(u))}n=s.pop()}return i},r.prototype.collides=function(t){var n=this.data;if(!l(t,n))return!1;for(var i=[];n;){for(var r=0;r<n.children.length;r++){var s=n.children[r],o=n.leaf?this.toBBox(s):s;if(l(t,o)){if(n.leaf||v(t,o))return!0;i.push(s)}}n=i.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0;n<t.length;n++)this.insert(t[n]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,n){if(!t)return this;for(var i,r,o,u=this.data,e=this.toBBox(t),h=[],f=[];u||h.length;){if(u||(u=h.pop(),r=h[h.length-1],i=f.pop(),o=!0),u.leaf){var a=s(t,u.children,n);if(-1!==a)return u.children.splice(a,1),h.push(u),this._condense(h),this}o||u.leaf||!v(u,e)?r?(i++,u=r.children[i],o=!1):u=null:(h.push(u),f.push(i),i=0,r=u,u=u.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,n){return t.minX-n.minX},r.prototype.compareMinY=function(t,n){return t.minY-n.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,n){for(var i=[];t;)t.leaf?n.push.apply(n,t.children):i.push.apply(i,t.children),t=i.pop();return n},r.prototype._build=function(t,n,i,r){var s,u=i-n+1,e=this._maxEntries;if(u<=e)return o(s=d(t.slice(n,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(u)/Math.log(e)),e=Math.ceil(u/Math.pow(e,r-1))),(s=d([])).leaf=!1,s.height=r;var h=Math.ceil(u/e),f=h*Math.ceil(Math.sqrt(e));w(t,n,i,f,this.compareMinX);for(var a=n;a<=i;a+=f){var c=Math.min(a+f-1,i);w(t,a,c,h,this.compareMinY);for(var v=a;v<=c;v+=h){var l=Math.min(v+h-1,c);s.children.push(this._build(t,v,l,r-1))}}return o(s,this.toBBox),s},r.prototype._chooseSubtree=function(t,n,i,r){for(;r.push(n),!n.leaf&&r.length-1!==i;){for(var s=1/0,o=1/0,u=void 0,e=0;e<n.children.length;e++){var h=n.children[e],f=a(h),c=(v=t,l=h,(Math.max(l.maxX,v.maxX)-Math.min(l.minX,v.minX))*(Math.max(l.maxY,v.maxY)-Math.min(l.minY,v.minY))-f);c<o?(o=c,s=f<s?f:s,u=h):c===o&&f<s&&(s=f,u=h)}n=u||n.children[0]}var v,l;return n},r.prototype._insert=function(t,n,i){var r=i?t:this.toBBox(t),s=[],o=this._chooseSubtree(r,this.data,n,s);for(o.children.push(t),e(o,r);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(r,s,n)},r.prototype._split=function(t,n){var i=t[n],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var u=this._chooseSplitIndex(i,s,r),e=d(i.children.splice(u,i.children.length-u));e.height=i.height,e.leaf=i.leaf,o(i,this.toBBox),o(e,this.toBBox),n?t[n-1].children.push(e):this._splitRoot(i,e)},r.prototype._splitRoot=function(t,n){this.data=d([t,n]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,n,i){for(var r,s,o,e,h,f,c,v=1/0,l=1/0,d=n;d<=i-n;d++){var w=u(t,0,d,this.toBBox),p=u(t,d,i,this.toBBox),y=(s=w,o=p,e=Math.max(s.minX,o.minX),h=Math.max(s.minY,o.minY),f=Math.min(s.maxX,o.maxX),c=Math.min(s.maxY,o.maxY),Math.max(0,f-e)*Math.max(0,c-h)),b=a(w)+a(p);y<v?(v=y,r=d,l=b<l?b:l):y===v&&b<l&&(l=b,r=d)}return r||i-n},r.prototype._chooseSplitAxis=function(t,n,i){var r=t.leaf?this.compareMinX:h,s=t.leaf?this.compareMinY:f;this._allDistMargin(t,n,i,r)<this._allDistMargin(t,n,i,s)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,n,i,r){t.children.sort(r);for(var s=this.toBBox,o=u(t,0,n,s),h=u(t,i-n,i,s),f=c(o)+c(h),a=n;a<i-n;a++){var v=t.children[a];e(o,t.leaf?s(v):v),f+=c(o)}for(var l=i-n-1;l>=n;l--){var d=t.children[l];e(h,t.leaf?s(d):d),f+=c(h)}return f},r.prototype._adjustParentBBoxes=function(t,n,i){for(var r=i;r>=0;r--)e(n[r],t)},r.prototype._condense=function(t){for(var n=t.length-1,i=void 0;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():o(t[n],this.toBBox)},r},"object"==u(n)?t.exports=o():void 0===(s="function"==typeof(r=o)?r.call(n,i,n,t):r)||(t.exports=s)},760:function(t,n,i){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=function(t){"use strict";var n,i=Object.prototype,s=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",e=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function f(t,n,i){return Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{f({},"")}catch(t){f=function(t,n,i){return t[n]=i}}function a(t,n,i,r){var s=n&&n.prototype instanceof y?n:y,o=Object.create(s.prototype),u=new A(r||[]);return o._invoke=function(t,n,i){var r=v;return function(s,o){if(r===d)throw new Error("Generator is already running");if(r===w){if("throw"===s)throw o;return N()}for(i.method=s,i.arg=o;;){var u=i.delegate;if(u){var e=E(u,i);if(e){if(e===p)continue;return e}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===v)throw r=w,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=d;var h=c(t,n,i);if("normal"===h.type){if(r=i.done?w:l,h.arg===p)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(r=w,i.method="throw",i.arg=h.arg)}}}(t,i,u),o}function c(t,n,i){try{return{type:"normal",arg:t.call(n,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var v="suspendedStart",l="suspendedYield",d="executing",w="completed",p={};function y(){}function b(){}function _(){}var g={};f(g,u,(function(){return this}));var m=Object.getPrototypeOf,O=m&&m(m(C([])));O&&O!==i&&s.call(O,u)&&(g=O);var M=_.prototype=y.prototype=Object.create(g);function j(t){["next","throw","return"].forEach((function(n){f(t,n,(function(t){return this._invoke(n,t)}))}))}function x(t,n){function i(o,u,e,h){var f=c(t[o],t,u);if("throw"!==f.type){var a=f.arg,v=a.value;return v&&"object"===r(v)&&s.call(v,"__await")?n.resolve(v.__await).then((function(t){i("next",t,e,h)}),(function(t){i("throw",t,e,h)})):n.resolve(v).then((function(t){a.value=t,e(a)}),(function(t){return i("throw",t,e,h)}))}h(f.arg)}var o;this._invoke=function(t,r){function s(){return new n((function(n,s){i(t,r,n,s)}))}return o=o?o.then(s,s):s()}}function E(t,i){var r=t.iterator[i.method];if(r===n){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=n,E(t,i),"throw"===i.method))return p;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var s=c(r,t.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,p;var o=s.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=n),i.delegate=null,p):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,p)}function S(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function T(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function C(t){if(t){var i=t[u];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function i(){for(;++r<t.length;)if(s.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=n,i.done=!0,i};return o.next=o}}return{next:N}}function N(){return{value:n,done:!0}}return b.prototype=_,f(M,"constructor",_),f(_,"constructor",b),b.displayName=f(_,h,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===b||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,f(t,h,"GeneratorFunction")),t.prototype=Object.create(M),t},t.awrap=function(t){return{__await:t}},j(x.prototype),f(x.prototype,e,(function(){return this})),t.AsyncIterator=x,t.async=function(n,i,r,s,o){void 0===o&&(o=Promise);var u=new x(a(n,i,r,s),o);return t.isGeneratorFunction(i)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},j(M),f(M,h,"Generator"),f(M,u,(function(){return this})),f(M,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var i in t)n.push(i);return n.reverse(),function i(){for(;n.length;){var r=n.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=C,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!t)for(var i in this)"t"===i.charAt(0)&&s.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(r,s){return e.type="throw",e.arg=t,i.next=r,s&&(i.method="next",i.arg=n),!!s}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],e=u.completion;if("root"===u.tryLoc)return r("end");if(u.tryLoc<=this.prev){var h=s.call(u,"catchLoc"),f=s.call(u,"finallyLoc");if(h&&f){if(this.prev<u.catchLoc)return r(u.catchLoc,!0);if(this.prev<u.finallyLoc)return r(u.finallyLoc)}else if(h){if(this.prev<u.catchLoc)return r(u.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return r(u.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),T(i),p}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var s=r.arg;T(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:C(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=n),p}},t}("object"===r(t=i.nmd(t))?t.exports:{});try{regeneratorRuntime=s}catch(t){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}},661:function(t,n,i){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}i.d(n,{default:function(){return am}});var s=0;function o(t){return t.ol_uid||(t.ol_uid=String(++s))}var u,e="6.9.0",h=(u=function(t,n){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}u(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),f=function(t){function n(n){var i=this,r="Assertion failed. See https://openlayers.org/en/"+("v"+e.split("-")[0])+"/doc/errors/#"+n+" for details.";return(i=t.call(this,r)||this).code=n,i.name="AssertionError",i.message=r,i}return h(n,t),n}(Error);function a(t){t.stopPropagation()}var c=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),v="propertychange",l=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function d(t,n,i){for(var r,s,o=i||w,u=0,e=t.length,h=!1;u<e;)(s=+o(t[r=u+(e-u>>1)],n))<0?u=r+1:(e=r,h=!s);return h?u:~u}function w(t,n){return t>n?1:t<n?-1:0}function p(t,n){return t.indexOf(n)>=0}function y(t,n,i){var r=t.length;if(t[0]<=n)return 0;if(n<=t[r-1])return r-1;var s=void 0;if(i>0){for(s=1;s<r;++s)if(t[s]<n)return s-1}else if(i<0){for(s=1;s<r;++s)if(t[s]<=n)return s}else for(s=1;s<r;++s){if(t[s]==n)return s;if(t[s]<n)return"function"==typeof i?i(n,t[s-1],t[s])>0?s-1:s:t[s-1]-n<n-t[s]?s-1:s}return r-1}function b(t,n,i){for(;n<i;){var r=t[n];t[n]=t[i],t[i]=r,++n,--i}}function _(t,n){for(var i=Array.isArray(n)?n:[n],r=i.length,s=0;s<r;s++)t[t.length]=i[s]}function g(t,n){var i=t.length;if(i!==n.length)return!1;for(var r=0;r<i;r++)if(t[r]!==n[r])return!1;return!0}function m(t,n,i){var r=n||w;return t.every((function(n,s){if(0===s)return!0;var o=r(t[s-1],n);return!(o>0||i&&0===o)}))}function O(){return!0}function M(){return!1}function j(){}function x(t){var n,i,r,s=!1;return function(){var o=Array.prototype.slice.call(arguments);return s&&this===r&&g(o,i)||(s=!0,r=this,i=o,n=t.apply(this,arguments)),n}}var E="function"==typeof Object.assign?Object.assign:function(t,n){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=1,s=arguments.length;r<s;++r){var o=arguments[r];if(null!=o)for(var u in o)o.hasOwnProperty(u)&&(i[u]=o[u])}return i};function S(t){for(var n in t)delete t[n]}var T="function"==typeof Object.values?Object.values:function(t){var n=[];for(var i in t)n.push(t[i]);return n};function A(t){var n;for(n in t)return!1;return!n}var C=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),N=function(t){function n(n){var i=t.call(this)||this;return i.t=n,i.i=null,i.u=null,i.h=null,i}return C(n,t),n.prototype.addEventListener=function(t,n){if(t&&n){var i=this.h||(this.h={}),r=i[t]||(i[t]=[]);-1===r.indexOf(n)&&r.push(n)}},n.prototype.dispatchEvent=function(t){var n="string"==typeof t?new c(t):t,i=n.type;n.target||(n.target=this.t||this);var r,s=this.h&&this.h[i];if(s){var o=this.u||(this.u={}),u=this.i||(this.i={});i in o||(o[i]=0,u[i]=0),++o[i];for(var e=0,h=s.length;e<h;++e)if(!1===(r="handleEvent"in s[e]?s[e].handleEvent(n):s[e].call(this,n))||n.propagationStopped){r=!1;break}if(--o[i],0===o[i]){var f=u[i];for(delete u[i];f--;)this.removeEventListener(i,j);delete o[i]}return r}},n.prototype.disposeInternal=function(){this.h&&S(this.h)},n.prototype.getListeners=function(t){return this.h&&this.h[t]||void 0},n.prototype.hasListener=function(t){return!!this.h&&(t?t in this.h:Object.keys(this.h).length>0)},n.prototype.removeEventListener=function(t,n){var i=this.h&&this.h[t];if(i){var r=i.indexOf(n);-1!==r&&(this.i&&t in this.i?(i[r]=j,++this.i[t]):(i.splice(r,1),0===i.length&&delete this.h[t]))}},n}(l),k="change",I="error",P="contextmenu",R="click",G="dblclick",L="dragenter",F="dragover",D="drop",z="keydown",U="keypress",X="load",Y="resize",W="touchmove",q="wheel";function B(t,n,i,r,s){if(r&&r!==t&&(i=i.bind(r)),s){var o=i;i=function(){t.removeEventListener(n,i),o.apply(this,arguments)}}var u={target:t,type:n,listener:i};return t.addEventListener(n,i),u}function V(t,n,i,r){return B(t,n,i,r,!0)}function Z(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),S(t))}var J=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),H=function(t){function n(){var n=t.call(this)||this;return n.on=n.onInternal,n.once=n.onceInternal,n.un=n.unInternal,n.v=0,n}return J(n,t),n.prototype.changed=function(){++this.v,this.dispatchEvent(k)},n.prototype.getRevision=function(){return this.v},n.prototype.onInternal=function(t,n){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),s=0;s<i;++s)r[s]=B(this,t[s],n);return r}return B(this,t,n)},n.prototype.onceInternal=function(t,n){var i;if(Array.isArray(t)){var r=t.length;i=new Array(r);for(var s=0;s<r;++s)i[s]=V(this,t[s],n)}else i=V(this,t,n);return n.ol_key=i,i},n.prototype.unInternal=function(t,n){var i=n.ol_key;if(i)$(i);else if(Array.isArray(t))for(var r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],n);else this.removeEventListener(t,n)},n}(N);function $(t){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)Z(t[n]);else Z(t)}H.prototype.on,H.prototype.once,H.prototype.un;var K=H,Q=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tt=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.key=i,s.oldValue=r,s}return Q(n,t),n}(c),nt=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,o(i),i.l=null,void 0!==n&&i.setProperties(n),i}return Q(n,t),n.prototype.get=function(t){var n;return this.l&&this.l.hasOwnProperty(t)&&(n=this.l[t]),n},n.prototype.getKeys=function(){return this.l&&Object.keys(this.l)||[]},n.prototype.getProperties=function(){return this.l&&E({},this.l)||{}},n.prototype.hasProperties=function(){return!!this.l},n.prototype.notify=function(t,n){var i;i="change:"+t,this.dispatchEvent(new tt(i,t,n)),i=v,this.dispatchEvent(new tt(i,t,n))},n.prototype.addChangeListener=function(t,n){this.addEventListener("change:"+t,n)},n.prototype.removeChangeListener=function(t,n){this.removeEventListener("change:"+t,n)},n.prototype.set=function(t,n,i){var r=this.l||(this.l={});if(i)r[t]=n;else{var s=r[t];r[t]=n,s!==n&&this.notify(t,s)}},n.prototype.setProperties=function(t,n){for(var i in t)this.set(i,t[i],n)},n.prototype.applyProperties=function(t){t.l&&E(this.l||(this.l={}),t.l)},n.prototype.unset=function(t,n){if(this.l&&t in this.l){var i=this.l[t];delete this.l[t],A(this.l)&&(this.l=null),n||this.notify(t,i)}},n}(K),it="add",rt="remove",st=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ot="length",ut=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.element=i,s.index=r,s}return st(n,t),n}(c),et=function(t){function n(n,i){var r=t.call(this)||this;r.on,r.once,r.un;var s=i||{};if(r.p=!!s.unique,r._=n||[],r.p)for(var o=0,u=r._.length;o<u;++o)r.g(r._[o],o);return r.m(),r}return st(n,t),n.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},n.prototype.extend=function(t){for(var n=0,i=t.length;n<i;++n)this.push(t[n]);return this},n.prototype.forEach=function(t){for(var n=this._,i=0,r=n.length;i<r;++i)t(n[i],i,n)},n.prototype.getArray=function(){return this._},n.prototype.item=function(t){return this._[t]},n.prototype.getLength=function(){return this.get(ot)},n.prototype.insertAt=function(t,n){this.p&&this.g(n),this._.splice(t,0,n),this.m(),this.dispatchEvent(new ut(it,n,t))},n.prototype.pop=function(){return this.removeAt(this.getLength()-1)},n.prototype.push=function(t){this.p&&this.g(t);var n=this.getLength();return this.insertAt(n,t),this.getLength()},n.prototype.remove=function(t){for(var n=this._,i=0,r=n.length;i<r;++i)if(n[i]===t)return this.removeAt(i)},n.prototype.removeAt=function(t){var n=this._[t];return this._.splice(t,1),this.m(),this.dispatchEvent(new ut(rt,n,t)),n},n.prototype.setAt=function(t,n){var i=this.getLength();if(t<i){this.p&&this.g(n,t);var r=this._[t];this._[t]=n,this.dispatchEvent(new ut(rt,r,t)),this.dispatchEvent(new ut(it,n,t))}else{for(var s=i;s<t;++s)this.insertAt(s,void 0);this.insertAt(t,n)}},n.prototype.m=function(){this.set(ot,this._.length)},n.prototype.g=function(t,n){for(var i=0,r=this._.length;i<r;++i)if(this._[i]===t&&i!==n)throw new f(58)},n}(nt),ht=0,ft=1,at=2,ct=3,vt=4;function lt(t){return Math.pow(t,3)}function dt(t){return 1-lt(1-t)}function wt(t){return 3*t*t-2*t*t*t}function pt(t){return t}var yt=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bt=function(t){function n(n,i,r){var s=t.call(this)||this,o=r||{};return s.tileCoord=n,s.state=i,s.interimTile=null,s.key="",s.O=void 0===o.transition?250:o.transition,s.j={},s}return yt(n,t),n.prototype.changed=function(){this.dispatchEvent(k)},n.prototype.release=function(){},n.prototype.getKey=function(){return this.key+"/"+this.tileCoord},n.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==at)return this.O=0,t;t=t.interimTile}while(t);return this},n.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,n=this;do{if(t.getState()==at){t.interimTile=null;break}t.getState()==ft?n=t:t.getState()==ht?n.interimTile=t.interimTile:n=t,t=n.interimTile}while(t)}},n.prototype.getTileCoord=function(){return this.tileCoord},n.prototype.getState=function(){return this.state},n.prototype.setState=function(t){if(this.state!==ct&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},n.prototype.load=function(){r()},n.prototype.getAlpha=function(t,n){if(!this.O)return 1;var i=this.j[t];if(i){if(-1===i)return 1}else i=n,this.j[t]=i;var r=n-i+1e3/60;return r>=this.O?1:lt(r/this.O)},n.prototype.inTransition=function(t){return!!this.O&&-1!==this.j[t]},n.prototype.endTransition=function(t){this.O&&(this.j[t]=-1)},n}(N),_t=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gt=function(t){function n(n){var i=this,r=ht;return(i=t.call(this,n.tileCoord,r,{transition:n.transition})||this).S=n.loader,i.T=null,i.A=null,i}return _t(n,t),n.prototype.getData=function(){return this.T},n.prototype.getError=function(){return this.A},n.prototype.load=function(){this.state=ft,this.changed();var t=this;this.S().then((function(n){t.T=n,t.state=at,t.changed()})).catch((function(n){t.A=n,t.state=ct,t.changed()}))},n}(bt);function mt(t,n){if(!t)throw new f(n)}var Ot=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Mt(t){return"function"==typeof t?t:(Array.isArray(t)?n=t:(mt("function"==typeof t.getZIndex,41),n=[t]),function(){return n});var n}var jt=function(t){function n(n){var i=t.call(this)||this;if(i.on,i.once,i.un,i.C=void 0,i.N="geometry",i.k=null,i.P=void 0,i.R=null,i.addChangeListener(i.N,i.G),n)if("function"==typeof n.getSimplifiedGeometry){var r=n;i.setGeometry(r)}else{var s=n;i.setProperties(s)}return i}return Ot(n,t),n.prototype.clone=function(){var t=new n(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},n.prototype.getGeometry=function(){return this.get(this.N)},n.prototype.getId=function(){return this.C},n.prototype.getGeometryName=function(){return this.N},n.prototype.getStyle=function(){return this.k},n.prototype.getStyleFunction=function(){return this.P},n.prototype.L=function(){this.changed()},n.prototype.G=function(){this.R&&(Z(this.R),this.R=null);var t=this.getGeometry();t&&(this.R=B(t,k,this.L,this)),this.changed()},n.prototype.setGeometry=function(t){this.set(this.N,t)},n.prototype.setStyle=function(t){this.k=t,this.P=t?Mt(t):void 0,this.changed()},n.prototype.setId=function(t){this.C=t,this.changed()},n.prototype.setGeometryName=function(t){this.removeChangeListener(this.N,this.G),this.N=t,this.addChangeListener(this.N,this.G),this.G()},n}(nt),xt="XY",Et="XYZ",St="XYM",Tt="XYZM",At={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Ct={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Nt={9001:Ct.METERS,9002:Ct.FEET,9003:Ct.USFEET,9101:Ct.RADIANS,9102:Ct.DEGREES};var kt={};kt[Ct.RADIANS]=6370997/(2*Math.PI),kt[Ct.DEGREES]=2*Math.PI*6370997/360,kt[Ct.FEET]=.3048,kt[Ct.METERS]=1,kt[Ct.USFEET]=1200/3937;var It,Pt=Ct,Rt="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Gt=-1!==Rt.indexOf("firefox"),Lt=-1!==Rt.indexOf("safari")&&-1==Rt.indexOf("chrom"),Ft=-1!==Rt.indexOf("webkit")&&-1==Rt.indexOf("edge"),Dt=-1!==Rt.indexOf("macintosh"),zt="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Ut="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Xt="undefined"!=typeof Image&&Image.prototype.decode,Yt=function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch(t){}return t}(),Wt=new Array(6);function qt(){return[1,0,0,1,0,0]}function Bt(t){return Zt(t,1,0,0,1,0,0)}function Vt(t,n){var i=t[0],r=t[1],s=t[2],o=t[3],u=t[4],e=t[5],h=n[0],f=n[1],a=n[2],c=n[3],v=n[4],l=n[5];return t[0]=i*h+s*f,t[1]=r*h+o*f,t[2]=i*a+s*c,t[3]=r*a+o*c,t[4]=i*v+s*l+u,t[5]=r*v+o*l+e,t}function Zt(t,n,i,r,s,o,u){return t[0]=n,t[1]=i,t[2]=r,t[3]=s,t[4]=o,t[5]=u,t}function Jt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function Ht(t,n){var i=n[0],r=n[1];return n[0]=t[0]*i+t[2]*r+t[4],n[1]=t[1]*i+t[3]*r+t[5],n}function $t(t,n){var i=Math.cos(n),r=Math.sin(n);return Vt(t,Zt(Wt,i,r,-r,i,0,0))}function Kt(t,n,i){return Vt(t,Zt(Wt,n,0,0,i,0,0))}function Qt(t,n,i){return Zt(t,n,0,0,i,0,0)}function tn(t,n,i,r,s,o,u,e){var h=Math.sin(o),f=Math.cos(o);return t[0]=r*f,t[1]=s*h,t[2]=-r*h,t[3]=s*f,t[4]=u*r*f-e*r*h+n,t[5]=u*s*h+e*s*f+i,t}function nn(t,n){var i=rn(n);mt(0!==i,32);var r=n[0],s=n[1],o=n[2],u=n[3],e=n[4],h=n[5];return t[0]=u/i,t[1]=-s/i,t[2]=-o/i,t[3]=r/i,t[4]=(o*h-u*e)/i,t[5]=-(r*h-s*e)/i,t}function rn(t){return t[0]*t[3]-t[1]*t[2]}function sn(t){var n="matrix("+t.join(", ")+")";if(Ut)return n;var i=It||(It=document.createElement("div"));return i.style.transform=n,i.style.transform}var on="bottom-left",un="bottom-right",en="top-left",hn="top-right",fn=0,an=1,cn=2,vn=4,ln=8,dn=16;function wn(t){for(var n=Mn(),i=0,r=t.length;i<r;++i)Nn(n,t[i]);return n}function pn(t,n,i){return i?(i[0]=t[0]-n,i[1]=t[1]-n,i[2]=t[2]+n,i[3]=t[3]+n,i):[t[0]-n,t[1]-n,t[2]+n,t[3]+n]}function yn(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t.slice()}function bn(t,n,i){var r,s;return(r=n<t[0]?t[0]-n:t[2]<n?n-t[2]:0)*r+(s=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*s}function _n(t,n){return mn(t,n[0],n[1])}function gn(t,n){return t[0]<=n[0]&&n[2]<=t[2]&&t[1]<=n[1]&&n[3]<=t[3]}function mn(t,n,i){return t[0]<=n&&n<=t[2]&&t[1]<=i&&i<=t[3]}function On(t,n){var i=t[0],r=t[1],s=t[2],o=t[3],u=n[0],e=n[1],h=fn;return u<i?h|=dn:u>s&&(h|=vn),e<r?h|=ln:e>o&&(h|=cn),h===fn&&(h=an),h}function Mn(){return[1/0,1/0,-1/0,-1/0]}function jn(t,n,i,r,s){return s?(s[0]=t,s[1]=n,s[2]=i,s[3]=r,s):[t,n,i,r]}function xn(t){return jn(1/0,1/0,-1/0,-1/0,t)}function En(t,n){var i=t[0],r=t[1];return jn(i,r,i,r,n)}function Sn(t,n,i,r,s){return In(xn(s),t,n,i,r)}function Tn(t,n){return t[0]==n[0]&&t[2]==n[2]&&t[1]==n[1]&&t[3]==n[3]}function An(t,n,i){return Math.abs(t[0]-n[0])<i&&Math.abs(t[2]-n[2])<i&&Math.abs(t[1]-n[1])<i&&Math.abs(t[3]-n[3])<i}function Cn(t,n){return n[0]<t[0]&&(t[0]=n[0]),n[2]>t[2]&&(t[2]=n[2]),n[1]<t[1]&&(t[1]=n[1]),n[3]>t[3]&&(t[3]=n[3]),t}function Nn(t,n){n[0]<t[0]&&(t[0]=n[0]),n[0]>t[2]&&(t[2]=n[0]),n[1]<t[1]&&(t[1]=n[1]),n[1]>t[3]&&(t[3]=n[1])}function kn(t,n){for(var i=0,r=n.length;i<r;++i)Nn(t,n[i]);return t}function In(t,n,i,r,s){for(;i<r;i+=s)Rn(t,n[i],n[i+1]);return t}function Pn(t,n){for(var i=0,r=n.length;i<r;++i)kn(t,n[i]);return t}function Rn(t,n,i){t[0]=Math.min(t[0],n),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],n),t[3]=Math.max(t[3],i)}function Gn(t,n){var i;return(i=n(Fn(t)))||(i=n(Dn(t)))||(i=n(Bn(t)))?i:(i=n(qn(t)))||!1}function Ln(t){var n=0;return Jn(t)||(n=Vn(t)*Yn(t)),n}function Fn(t){return[t[0],t[1]]}function Dn(t){return[t[2],t[1]]}function zn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Un(t,n){var i;return n===on?i=Fn(t):n===un?i=Dn(t):n===en?i=qn(t):n===hn?i=Bn(t):mt(!1,13),i}function Xn(t,n,i,r,s){var o=n*r[0]/2,u=n*r[1]/2,e=Math.cos(i),h=Math.sin(i),f=o*e,a=o*h,c=u*e,v=u*h,l=t[0],d=t[1],w=l-f+v,p=l-f-v,y=l+f-v,b=l+f+v,_=d-a-c,g=d-a+c,m=d+a+c,O=d+a-c;return jn(Math.min(w,p,y,b),Math.min(_,g,m,O),Math.max(w,p,y,b),Math.max(_,g,m,O),s)}function Yn(t){return t[3]-t[1]}function Wn(t,n,i){var r=i||[1/0,1/0,-1/0,-1/0];return Zn(t,n)?(t[0]>n[0]?r[0]=t[0]:r[0]=n[0],t[1]>n[1]?r[1]=t[1]:r[1]=n[1],t[2]<n[2]?r[2]=t[2]:r[2]=n[2],t[3]<n[3]?r[3]=t[3]:r[3]=n[3]):xn(r),r}function qn(t){return[t[0],t[3]]}function Bn(t){return[t[2],t[3]]}function Vn(t){return t[2]-t[0]}function Zn(t,n){return t[0]<=n[2]&&t[2]>=n[0]&&t[1]<=n[3]&&t[3]>=n[1]}function Jn(t){return t[2]<t[0]||t[3]<t[1]}function Hn(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t}function $n(t,n){var i=(t[2]-t[0])/2*(n-1),r=(t[3]-t[1])/2*(n-1);t[0]-=i,t[2]+=i,t[1]-=r,t[3]+=r}function Kn(t,n,i){var r=!1,s=On(t,n),o=On(t,i);if(s===an||o===an)r=!0;else{var u=t[0],e=t[1],h=t[2],f=t[3],a=n[0],c=n[1],v=i[0],l=i[1],d=(l-c)/(v-a),w=void 0,p=void 0;o&cn&&!(s&cn)&&(r=(w=v-(l-f)/d)>=u&&w<=h),r||!(o&vn)||s&vn||(r=(p=l-(v-h)*d)>=e&&p<=f),r||!(o&ln)||s&ln||(r=(w=v-(l-e)/d)>=u&&w<=h),r||!(o&dn)||s&dn||(r=(p=l-(v-u)*d)>=e&&p<=f)}return r}function Qn(t,n,i,r){var s=[];if(r>1)for(var o=t[2]-t[0],u=t[3]-t[1],e=0;e<r;++e)s.push(t[0]+o*e/r,t[1],t[2],t[1]+u*e/r,t[2]-o*e/r,t[3],t[0],t[3]-u*e/r);else s=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];n(s,s,2);for(var h=[],f=[],a=(e=0,s.length);e<a;e+=2)h.push(s[e]),f.push(s[e+1]);return function(t,n,i){return jn(Math.min.apply(null,t),Math.min.apply(null,n),Math.max.apply(null,t),Math.max.apply(null,n),i)}(h,f,i)}function ti(t,n){var i=n.getExtent(),r=zn(t);if(n.canWrapX()&&(r[0]<i[0]||r[0]>=i[2])){var s=Vn(i),o=Math.floor((r[0]-i[0])/s)*s;t[0]-=o,t[2]-=o}return t}var ni=function(){function t(t){this.F=t.code,this.D=t.units,this.U=void 0!==t.extent?t.extent:null,this.W=void 0!==t.worldExtent?t.worldExtent:null,this.q=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.B=void 0!==t.global&&t.global,this.V=!(!this.B||!this.U),this.H=t.getPointResolution,this.$=null,this.K=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.V},t.prototype.getCode=function(){return this.F},t.prototype.getExtent=function(){return this.U},t.prototype.getUnits=function(){return this.D},t.prototype.getMetersPerUnit=function(){return this.K||kt[this.D]},t.prototype.getWorldExtent=function(){return this.W},t.prototype.getAxisOrientation=function(){return this.q},t.prototype.isGlobal=function(){return this.B},t.prototype.setGlobal=function(t){this.B=t,this.V=!(!t||!this.U)},t.prototype.getDefaultTileGrid=function(){return this.$},t.prototype.setDefaultTileGrid=function(t){this.$=t},t.prototype.setExtent=function(t){this.U=t,this.V=!(!this.B||!t)},t.prototype.setWorldExtent=function(t){this.W=t},t.prototype.setGetPointResolution=function(t){this.H=t},t.prototype.getPointResolutionFunc=function(){return this.H},t}();function ii(t,n,i){return Math.min(Math.max(t,n),i)}var ri="cosh"in Math?Math.cosh:function(t){var n=Math.exp(t);return(n+1/n)/2},si="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function oi(t,n,i,r,s,o){var u=s-i,e=o-r;if(0!==u||0!==e){var h=((t-i)*u+(n-r)*e)/(u*u+e*e);h>1?(i=s,r=o):h>0&&(i+=u*h,r+=e*h)}return ui(t,n,i,r)}function ui(t,n,i,r){var s=i-t,o=r-n;return s*s+o*o}function ei(t){for(var n=t.length,i=0;i<n;i++){for(var r=i,s=Math.abs(t[i][i]),o=i+1;o<n;o++){var u=Math.abs(t[o][i]);u>s&&(s=u,r=o)}if(0===s)return null;var e=t[r];t[r]=t[i],t[i]=e;for(var h=i+1;h<n;h++)for(var f=-t[h][i]/t[i][i],a=i;a<n+1;a++)i==a?t[h][a]=0:t[h][a]+=f*t[i][a]}for(var c=new Array(n),v=n-1;v>=0;v--){c[v]=t[v][n]/t[v][v];for(var l=v-1;l>=0;l--)t[l][n]-=t[l][v]*c[v]}return c}function hi(t){return 180*t/Math.PI}function fi(t){return t*Math.PI/180}function ai(t,n){var i=t%n;return i*n<0?i+n:i}function ci(t,n,i){return t+i*(n-t)}var vi=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),li=6378137,di=Math.PI*li,wi=[-di,-di,di,di],pi=[-180,-85,180,85],yi=li*Math.log(Math.tan(Math.PI/2)),bi=function(t){function n(n){return t.call(this,{code:n,units:Pt.METERS,extent:wi,global:!0,worldExtent:pi,getPointResolution:function(t,n){return t/ri(n[1]/li)}})||this}return vi(n,t),n}(ni),_i=[new bi("EPSG:3857"),new bi("EPSG:102100"),new bi("EPSG:102113"),new bi("EPSG:900913"),new bi("http://www.opengis.net/def/crs/EPSG/0/3857"),new bi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function gi(t,n,i){var r=t.length,s=i>1?i:2,o=n;void 0===o&&(o=s>2?t.slice():new Array(r));for(var u=0;u<r;u+=s){o[u]=di*t[u]/180;var e=li*Math.log(Math.tan(Math.PI*(+t[u+1]+90)/360));e>yi?e=yi:e<-yi&&(e=-yi),o[u+1]=e}return o}function mi(t,n,i){var r=t.length,s=i>1?i:2,o=n;void 0===o&&(o=s>2?t.slice():new Array(r));for(var u=0;u<r;u+=s)o[u]=180*t[u]/di,o[u+1]=360*Math.atan(Math.exp(t[u+1]/li))/Math.PI-90;return o}var Oi=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mi=6378137,ji=[-180,-90,180,90],xi=Math.PI*Mi/180,Ei=function(t){function n(n,i){return t.call(this,{code:n,units:Pt.DEGREES,extent:ji,axisOrientation:i,global:!0,metersPerUnit:xi,worldExtent:ji})||this}return Oi(n,t),n}(ni),Si=[new Ei("CRS:84"),new Ei("EPSG:4326","neu"),new Ei("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ei("urn:ogc:def:crs:OGC:2:84"),new Ei("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new Ei("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ei("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Ti={};function Ai(){Ti={}}function Ci(t){return Ti[t]||Ti[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Ni(t,n){Ti[t]=n}var ki={};function Ii(){ki={}}function Pi(t,n,i){var r=t.getCode(),s=n.getCode();r in ki||(ki[r]={}),ki[r][s]=i}function Ri(t,n){var i;return t in ki&&n in ki[t]&&(i=ki[t][n]),i}var Gi=6371008.8;function Li(t,n,i){var r=i||Gi,s=fi(t[1]),o=fi(n[1]),u=(o-s)/2,e=fi(n[0]-t[0])/2,h=Math.sin(u)*Math.sin(u)+Math.sin(e)*Math.sin(e)*Math.cos(s)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function Fi(t,n){for(var i=0,r=0,s=t.length;r<s-1;++r)i+=Li(t[r],t[r+1],n);return i}function Di(t,n){for(var i=0,r=t.length,s=t[r-1][0],o=t[r-1][1],u=0;u<r;u++){var e=t[u][0],h=t[u][1];i+=fi(e-s)*(2+Math.sin(fi(o))+Math.sin(fi(h))),s=e,o=h}return i*n*n/2}function zi(t,n,i,r){var s=r||Gi,o=fi(t[1]),u=fi(t[0]),e=n/s,h=Math.asin(Math.sin(o)*Math.cos(e)+Math.cos(o)*Math.sin(e)*Math.cos(i));return[hi(u+Math.atan2(Math.sin(i)*Math.sin(e)*Math.cos(o),Math.cos(e)-Math.sin(o)*Math.sin(h))),hi(h)]}function Ui(t,n,i){var r=void 0!==i?t.toFixed(i):""+t,s=r.indexOf(".");return(s=-1===s?r.length:s)>n?r:new Array(1+n-s).join("0")+r}function Xi(t,n){for(var i=(""+t).split("."),r=(""+n).split("."),s=0;s<Math.max(i.length,r.length);s++){var o=parseInt(i[s]||"0",10),u=parseInt(r[s]||"0",10);if(o>u)return 1;if(u>o)return-1}return 0}function Yi(t,n){return t[0]+=+n[0],t[1]+=+n[1],t}function Wi(t,n){var i=n.getRadius(),r=n.getCenter(),s=r[0],o=r[1],u=t[0]-s,e=t[1]-o;0===u&&0===e&&(u=1);var h=Math.sqrt(u*u+e*e);return[s+i*u/h,o+i*e/h]}function qi(t,n){var i,r,s=t[0],o=t[1],u=n[0],e=n[1],h=u[0],f=u[1],a=e[0],c=e[1],v=a-h,l=c-f,d=0===v&&0===l?0:(v*(s-h)+l*(o-f))/(v*v+l*l||0);return d<=0?(i=h,r=f):d>=1?(i=a,r=c):(i=h+d*v,r=f+d*l),[i,r]}function Bi(t,n,i){var r=ai(n+180,360)-180,s=Math.abs(3600*r),o=i||0,u=Math.pow(10,o),e=Math.floor(s/3600),h=Math.floor((s-3600*e)/60),f=s-3600*e-60*h;return(f=Math.ceil(f*u)/u)>=60&&(f=0,h+=1),h>=60&&(h=0,e+=1),e+"° "+Ui(h,2)+"′ "+Ui(f,2,o)+"″"+(0==r?"":" "+t.charAt(r<0?1:0))}function Vi(t,n,i){return t?n.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function Zi(t,n){for(var i=!0,r=t.length-1;r>=0;--r)if(t[r]!=n[r]){i=!1;break}return i}function Ji(t,n){var i=Math.cos(n),r=Math.sin(n),s=t[0]*i-t[1]*r,o=t[1]*i+t[0]*r;return t[0]=s,t[1]=o,t}function Hi(t,n){return t[0]*=n,t[1]*=n,t}function $i(t,n){var i=t[0]-n[0],r=t[1]-n[1];return i*i+r*r}function Ki(t,n){return Math.sqrt($i(t,n))}function Qi(t,n){return $i(t,qi(t,n))}function tr(t,n){return Vi(t,"{x}, {y}",n)}function nr(t,n){if(n.canWrapX()){var i=Vn(n.getExtent()),r=ir(t,n,i);r&&(t[0]-=r*i)}return t}function ir(t,n,i){var r=n.getExtent(),s=0;if(n.canWrapX()&&(t[0]<r[0]||t[0]>r[2])){var o=i||Vn(r);s=Math.floor((t[0]-r[0])/o)}return s}function rr(t,n,i){var r;if(void 0!==n){for(var s=0,o=t.length;s<o;++s)n[s]=t[s];r=n}else r=t.slice();return r}function sr(t,n,i){if(void 0!==n&&t!==n){for(var r=0,s=t.length;r<s;++r)n[r]=t[r];t=n}return t}function or(t){Ni(t.getCode(),t),Pi(t,t,rr)}function ur(t){t.forEach(or)}function er(t){return"string"==typeof t?Ci(t):t||null}function hr(t,n,i,r){var s,o=(t=er(t)).getPointResolutionFunc();if(o){if(s=o(n,i),r&&r!==t.getUnits())(e=t.getMetersPerUnit())&&(s=s*e/kt[r])}else{var u=t.getUnits();if(u==Pt.DEGREES&&!r||r==Pt.DEGREES)s=n;else{var e,h=wr(t,er("EPSG:4326"));if(h===sr&&u!==Pt.DEGREES)s=n*t.getMetersPerUnit();else{var f=[i[0]-n/2,i[1],i[0]+n/2,i[1],i[0],i[1]-n/2,i[0],i[1]+n/2];s=(Li((f=h(f,f,2)).slice(0,2),f.slice(2,4))+Li(f.slice(4,6),f.slice(6,8)))/2}void 0!==(e=r?kt[r]:t.getMetersPerUnit())&&(s/=e)}}return s}function fr(t){ur(t),t.forEach((function(n){t.forEach((function(t){n!==t&&Pi(n,t,rr)}))}))}function ar(t,n,i,r){t.forEach((function(t){n.forEach((function(n){Pi(t,n,i),Pi(n,t,r)}))}))}function cr(t,n){return t?"string"==typeof t?er(t):t:er(n)}function vr(t){return function(n,i,r){for(var s=n.length,o=void 0!==r?r:2,u=void 0!==i?i:new Array(s),e=0;e<s;e+=o){var h=t([n[e],n[e+1]]);u[e]=h[0],u[e+1]=h[1];for(var f=o-1;f>=2;--f)u[e+f]=n[e+f]}return u}}function lr(t,n,i,r){var s=er(t),o=er(n);Pi(s,o,vr(i)),Pi(o,s,vr(r))}function dr(t,n){if(t===n)return!0;var i=t.getUnits()===n.getUnits();return(t.getCode()===n.getCode()||wr(t,n)===rr)&&i}function wr(t,n){var i=Ri(t.getCode(),n.getCode());return i||(i=sr),i}function pr(t,n){return wr(er(t),er(n))}function yr(t,n,i){return pr(n,i)(t,void 0,t.length)}function br(t,n,i,r){return Qn(t,pr(n,i),void 0,r)}var _r=null;function gr(t){_r=er(t)}function mr(){return _r}function Or(t,n){return _r?yr(t,n,_r):t}function Mr(t,n){return _r?yr(t,_r,n):t}function jr(t,n){return _r?br(t,n,_r):t}function xr(t,n){return _r?br(t,_r,n):t}function Er(t,n){if(!_r)return t;var i=er(n).getUnits(),r=_r.getUnits();return i&&r?t*kt[i]/kt[r]:t}function Sr(t,n){if(!_r)return t;var i=er(n).getUnits(),r=_r.getUnits();return i&&r?t*kt[r]/kt[i]:t}function Tr(t,n,i){return function(r){var s,o,u=r[0],e=r[1];if(t.canWrapX()){var h=t.getExtent(),f=Vn(h);(o=ir(r,t,f))&&(u-=o*f),u=ii(u,h[0],h[2]),e=ii(e,h[1],h[3]),s=i([u,e])}else s=i(r);return o&&n.canWrapX()&&(s[0]+=o*Vn(n.getExtent())),s}}function Ar(){fr(_i),fr(Si),ar(Si,_i,gi,mi)}function Cr(t,n,i,r,s,o){for(var u=o||[],e=0,h=n;h<i;h+=r){var f=t[h],a=t[h+1];u[e++]=s[0]*f+s[2]*a+s[4],u[e++]=s[1]*f+s[3]*a+s[5]}return o&&u.length!=e&&(u.length=e),u}function Nr(t,n,i,r,s,o,u){for(var e=u||[],h=Math.cos(s),f=Math.sin(s),a=o[0],c=o[1],v=0,l=n;l<i;l+=r){var d=t[l]-a,w=t[l+1]-c;e[v++]=a+d*h-w*f,e[v++]=c+d*f+w*h;for(var p=l+2;p<l+r;++p)e[v++]=t[p]}return u&&e.length!=v&&(e.length=v),e}function kr(t,n,i,r,s,o,u,e){for(var h=e||[],f=u[0],a=u[1],c=0,v=n;v<i;v+=r){var l=t[v]-f,d=t[v+1]-a;h[c++]=f+s*l,h[c++]=a+o*d;for(var w=v+2;w<v+r;++w)h[c++]=t[w]}return e&&h.length!=c&&(h.length=c),h}function Ir(t,n,i,r,s,o,u){for(var e=u||[],h=0,f=n;f<i;f+=r){e[h++]=t[f]+s,e[h++]=t[f+1]+o;for(var a=f+2;a<f+r;++a)e[h++]=t[a]}return u&&e.length!=h&&(e.length=h),e}Ar();var Pr=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Rr=[1,0,0,1,0,0],Gr=function(t){function n(){var n=t.call(this)||this;return n.U=[1/0,1/0,-1/0,-1/0],n.tt=-1,n.simplifiedGeometryMaxMinSquaredTolerance=0,n.simplifiedGeometryRevision=0,n.simplifyTransformedInternal=x((function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);var r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})),n}return Pr(n,t),n.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)},n.prototype.clone=function(){return r()},n.prototype.closestPointXY=function(t,n,i,s){return r()},n.prototype.containsXY=function(t,n){var i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n},n.prototype.getClosestPoint=function(t,n){var i=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},n.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},n.prototype.computeExtent=function(t){return r()},n.prototype.getExtent=function(t){if(this.tt!=this.getRevision()){var n=this.computeExtent(this.U);(isNaN(n[0])||isNaN(n[1]))&&xn(n),this.tt=this.getRevision()}return Hn(this.U,t)},n.prototype.rotate=function(t,n){r()},n.prototype.scale=function(t,n,i){r()},n.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},n.prototype.getSimplifiedGeometry=function(t){return r()},n.prototype.getType=function(){return r()},n.prototype.applyTransform=function(t){r()},n.prototype.intersectsExtent=function(t){return r()},n.prototype.translate=function(t,n){r()},n.prototype.transform=function(t,n){var i=er(t),r=i.getUnits()==Pt.TILE_PIXELS?function(t,r,s){var o=i.getExtent(),u=i.getWorldExtent(),e=Yn(u)/Yn(o);return tn(Rr,u[0],u[3],e,-e,0,0,0),Cr(t,0,t.length,s,Rr,r),pr(i,n)(t,r,s)}:pr(i,n);return this.applyTransform(r),this},n}(nt),Lr=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Fr(t){var n;return t==xt?n=2:t==Et||t==St?n=3:t==Tt&&(n=4),n}function Dr(t,n,i){var r=t.getFlatCoordinates();if(r){var s=t.getStride();return Cr(r,0,r.length,s,n,i)}return null}var zr=function(t){function n(){var n=t.call(this)||this;return n.layout=xt,n.stride=2,n.flatCoordinates=null,n}return Lr(n,t),n.prototype.computeExtent=function(t){return Sn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinates=function(){return r()},n.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.getFlatCoordinates=function(){return this.flatCoordinates},n.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},n.prototype.getLayout=function(){return this.layout},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},n.prototype.getSimplifiedGeometryInternal=function(t){return this},n.prototype.getStride=function(){return this.stride},n.prototype.setFlatCoordinates=function(t,n){this.stride=Fr(t),this.layout=t,this.flatCoordinates=n},n.prototype.setCoordinates=function(t,n){r()},n.prototype.setLayout=function(t,n,i){var r;if(t)r=Fr(t);else{for(var s=0;s<i;++s){if(0===n.length)return this.layout=xt,void(this.stride=2);n=n[0]}t=function(t){var n;2==t?n=xt:3==t?n=Et:4==t&&(n=Tt);return n}(r=n.length)}this.layout=t,this.stride=r},n.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},n.prototype.rotate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Nr(i,0,i.length,r,t,n,i),this.changed()}},n.prototype.scale=function(t,n,i){var r=n;void 0===r&&(r=t);var s=i;s||(s=zn(this.getExtent()));var o=this.getFlatCoordinates();if(o){var u=this.getStride();kr(o,0,o.length,u,t,r,s,o),this.changed()}},n.prototype.translate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Ir(i,0,i.length,r,t,n,i),this.changed()}},n}(Gr);function Ur(t,n,i,r,s,o,u){var e,h=t[n],f=t[n+1],a=t[i]-h,c=t[i+1]-f;if(0===a&&0===c)e=n;else{var v=((s-h)*a+(o-f)*c)/(a*a+c*c);if(v>1)e=i;else{if(v>0){for(var l=0;l<r;++l)u[l]=ci(t[n+l],t[i+l],v);return void(u.length=r)}e=n}}for(l=0;l<r;++l)u[l]=t[e+l];u.length=r}function Xr(t,n,i,r,s){var o=t[n],u=t[n+1];for(n+=r;n<i;n+=r){var e=t[n],h=t[n+1],f=ui(o,u,e,h);f>s&&(s=f),o=e,u=h}return s}function Yr(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o];s=Xr(t,n,e,r,s),n=e}return s}function Wr(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o];s=Yr(t,n,e,r,s),n=e[e.length-1]}return s}function qr(t,n,i,r,s,o,u,e,h,f,a){if(n==i)return f;var c,v;if(0===s){if((v=ui(u,e,t[n],t[n+1]))<f){for(c=0;c<r;++c)h[c]=t[n+c];return h.length=r,v}return f}for(var l=a||[NaN,NaN],d=n+r;d<i;)if(Ur(t,d-r,d,r,u,e,l),(v=ui(u,e,l[0],l[1]))<f){for(f=v,c=0;c<r;++c)h[c]=l[c];h.length=r,d+=r}else d+=r*Math.max((Math.sqrt(v)-Math.sqrt(f))/s|0,1);if(o&&(Ur(t,i-r,n,r,u,e,l),(v=ui(u,e,l[0],l[1]))<f)){for(f=v,c=0;c<r;++c)h[c]=l[c];h.length=r}return f}function Br(t,n,i,r,s,o,u,e,h,f,a){for(var c=a||[NaN,NaN],v=0,l=i.length;v<l;++v){var d=i[v];f=qr(t,n,d,r,s,o,u,e,h,f,c),n=d}return f}function Vr(t,n,i,r,s,o,u,e,h,f,a){for(var c=a||[NaN,NaN],v=0,l=i.length;v<l;++v){var d=i[v];f=Br(t,n,d,r,s,o,u,e,h,f,c),n=d[d.length-1]}return f}function Zr(t,n,i,r){for(var s=0,o=i.length;s<o;++s)t[n++]=i[s];return n}function Jr(t,n,i,r){for(var s=0,o=i.length;s<o;++s)for(var u=i[s],e=0;e<r;++e)t[n++]=u[e];return n}function Hr(t,n,i,r,s){for(var o=s||[],u=0,e=0,h=i.length;e<h;++e){var f=Jr(t,n,i[e],r);o[u++]=f,n=f}return o.length=u,o}function $r(t,n,i,r,s){for(var o=s||[],u=0,e=0,h=i.length;e<h;++e){var f=Hr(t,n,i[e],r,o[u]);o[u++]=f,n=f[f.length-1]}return o.length=u,o}function Kr(t,n,i,r,s,o,u){var e=(i-n)/r;if(e<3){for(;n<i;n+=r)o[u++]=t[n],o[u++]=t[n+1];return u}var h=new Array(e);h[0]=1,h[e-1]=1;for(var f=[n,i-r],a=0;f.length>0;){for(var c=f.pop(),v=f.pop(),l=0,d=t[v],w=t[v+1],p=t[c],y=t[c+1],b=v+r;b<c;b+=r){var _=oi(t[b],t[b+1],d,w,p,y);_>l&&(a=b,l=_)}l>s&&(h[(a-n)/r]=1,v+r<a&&f.push(v,a),a+r<c&&f.push(a,c))}for(b=0;b<e;++b)h[b]&&(o[u++]=t[n+b*r],o[u++]=t[n+b*r+1]);return u}function Qr(t,n,i,r,s,o,u,e){for(var h=0,f=i.length;h<f;++h){var a=i[h];u=Kr(t,n,a,r,s,o,u),e.push(u),n=a}return u}function ts(t,n,i,r,s,o,u){if(i<=n+r){for(;n<i;n+=r)o[u++]=t[n],o[u++]=t[n+1];return u}var e=t[n],h=t[n+1];o[u++]=e,o[u++]=h;var f=e,a=h;for(n+=r;n<i;n+=r)ui(e,h,f=t[n],a=t[n+1])>s&&(o[u++]=f,o[u++]=a,e=f,h=a);return f==e&&a==h||(o[u++]=f,o[u++]=a),u}function ns(t,n){return n*Math.round(t/n)}function is(t,n,i,r,s,o,u){if(n==i)return u;var e,h,f=ns(t[n],s),a=ns(t[n+1],s);n+=r,o[u++]=f,o[u++]=a;do{if(e=ns(t[n],s),h=ns(t[n+1],s),(n+=r)==i)return o[u++]=e,o[u++]=h,u}while(e==f&&h==a);for(;n<i;){var c=ns(t[n],s),v=ns(t[n+1],s);if(n+=r,c!=e||v!=h){var l=e-f,d=h-a,w=c-f,p=v-a;l*p==d*w&&(l<0&&w<l||l==w||l>0&&w>l)&&(d<0&&p<d||d==p||d>0&&p>d)?(e=c,h=v):(o[u++]=e,o[u++]=h,f=e,a=h,e=c,h=v)}}return o[u++]=e,o[u++]=h,u}function rs(t,n,i,r,s,o,u,e){for(var h=0,f=i.length;h<f;++h){var a=i[h];u=is(t,n,a,r,s,o,u),e.push(u),n=a}return u}function ss(t,n,i,r,s,o,u,e){for(var h=0,f=i.length;h<f;++h){var a=i[h],c=[];u=rs(t,n,a,r,s,o,u,c),e.push(c),n=a[a.length-1]}return u}function os(t,n,i,r,s){for(var o=void 0!==s?s:[],u=0,e=n;e<i;e+=r)o[u++]=t.slice(e,e+r);return o.length=u,o}function us(t,n,i,r,s){for(var o=void 0!==s?s:[],u=0,e=0,h=i.length;e<h;++e){var f=i[e];o[u++]=os(t,n,f,r,o[u]),n=f}return o.length=u,o}function es(t,n,i,r,s){for(var o=void 0!==s?s:[],u=0,e=0,h=i.length;e<h;++e){var f=i[e];o[u++]=us(t,n,f,r,o[u]),n=f[f.length-1]}return o.length=u,o}function hs(t,n,i,r){for(var s=0,o=t[i-r],u=t[i-r+1];n<i;n+=r){var e=t[n],h=t[n+1];s+=u*e-o*h,o=e,u=h}return s/2}function fs(t,n,i,r){for(var s=0,o=0,u=i.length;o<u;++o){var e=i[o];s+=hs(t,n,e,r),n=e}return s}function as(t,n,i,r){for(var s=0,o=0,u=i.length;o<u;++o){var e=i[o];s+=fs(t,n,e,r),n=e[e.length-1]}return s}var cs=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vs=function(t){function n(n,i){var r=t.call(this)||this;return r.nt=-1,r.it=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r}return cs(n,t),n.prototype.clone=function(){return new n(this.flatCoordinates.slice(),this.layout)},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.it!=this.getRevision()&&(this.nt=Math.sqrt(Xr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.it=this.getRevision()),qr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.nt,!0,t,n,i,r))},n.prototype.getArea=function(){return hs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinates=function(){return os(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Kr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,xt)},n.prototype.getType=function(){return At.LINEAR_RING},n.prototype.intersectsExtent=function(t){return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jr(this.flatCoordinates,0,t,this.stride),this.changed()},n}(zr),ls=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ds=function(t){function n(n,i){var r=t.call(this)||this;return r.setCoordinates(n,i),r}return ls(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){var s=this.flatCoordinates,o=ui(t,n,s[0],s[1]);if(o<r){for(var u=this.stride,e=0;e<u;++e)i[e]=s[e];return i.length=u,o}return r},n.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},n.prototype.computeExtent=function(t){return En(this.flatCoordinates,t)},n.prototype.getType=function(){return At.POINT},n.prototype.intersectsExtent=function(t){return mn(t,this.flatCoordinates[0],this.flatCoordinates[1])},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Zr(this.flatCoordinates,0,t,this.stride),this.changed()},n}(zr);function ws(t,n,i,r,s){return!Gn(s,(function(s){return!ps(t,n,i,r,s[0],s[1])}))}function ps(t,n,i,r,s,o){for(var u=0,e=t[i-r],h=t[i-r+1];n<i;n+=r){var f=t[n],a=t[n+1];h<=o?a>o&&(f-e)*(o-h)-(s-e)*(a-h)>0&&u++:a<=o&&(f-e)*(o-h)-(s-e)*(a-h)<0&&u--,e=f,h=a}return 0!==u}function ys(t,n,i,r,s,o){if(0===i.length)return!1;if(!ps(t,n,i[0],r,s,o))return!1;for(var u=1,e=i.length;u<e;++u)if(ps(t,i[u-1],i[u],r,s,o))return!1;return!0}function bs(t,n,i,r,s,o){if(0===i.length)return!1;for(var u=0,e=i.length;u<e;++u){var h=i[u];if(ys(t,n,h,r,s,o))return!0;n=h[h.length-1]}return!1}function _s(t,n,i,r,s,o,u){for(var e,h,f,a,c,v,l,d=s[o+1],p=[],y=0,b=i.length;y<b;++y){var _=i[y];for(a=t[_-r],v=t[_-r+1],e=n;e<_;e+=r)c=t[e],l=t[e+1],(d<=v&&l<=d||v<=d&&d<=l)&&(f=(d-v)/(l-v)*(c-a)+a,p.push(f)),a=c,v=l}var g=NaN,m=-1/0;for(p.sort(w),a=p[0],e=1,h=p.length;e<h;++e){c=p[e];var O=Math.abs(c-a);O>m&&ys(t,n,i,r,f=(a+c)/2,d)&&(g=f,m=O),a=c}return isNaN(g)&&(g=s[o]),u?(u.push(g,d,m),u):[g,d,m]}function gs(t,n,i,r,s){for(var o=[],u=0,e=i.length;u<e;++u){var h=i[u];o=_s(t,n,h,r,s,2*u,o),n=h[h.length-1]}return o}function ms(t,n,i,r,s){var o;for(n+=r;n<i;n+=r)if(o=s(t.slice(n-r,n),t.slice(n,n+r)))return o;return!1}function Os(t,n,i,r,s){var o=In([1/0,1/0,-1/0,-1/0],t,n,i,r);return!!Zn(s,o)&&(!!gn(s,o)||(o[0]>=s[0]&&o[2]<=s[2]||(o[1]>=s[1]&&o[3]<=s[3]||ms(t,n,i,r,(function(t,n){return Kn(s,t,n)})))))}function Ms(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){if(Os(t,n,i[o],r,s))return!0;n=i[o]}return!1}function js(t,n,i,r,s){return!!Os(t,n,i,r,s)||(!!ps(t,n,i,r,s[0],s[1])||(!!ps(t,n,i,r,s[0],s[3])||(!!ps(t,n,i,r,s[2],s[1])||!!ps(t,n,i,r,s[2],s[3]))))}function xs(t,n,i,r,s){if(!js(t,n,i[0],r,s))return!1;if(1===i.length)return!0;for(var o=1,u=i.length;o<u;++o)if(ws(t,i[o-1],i[o],r,s)&&!Os(t,i[o-1],i[o],r,s))return!1;return!0}function Es(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o];if(xs(t,n,e,r,s))return!0;n=e[e.length-1]}return!1}function Ss(t,n,i,r){for(;n<i-r;){for(var s=0;s<r;++s){var o=t[n+s];t[n+s]=t[i-r+s],t[i-r+s]=o}n+=r,i-=r}}function Ts(t,n,i,r){for(var s=0,o=t[i-r],u=t[i-r+1];n<i;n+=r){var e=t[n],h=t[n+1];s+=(e-o)*(h+u),o=e,u=h}return 0===s?void 0:s>0}function As(t,n,i,r,s){for(var o=void 0!==s&&s,u=0,e=i.length;u<e;++u){var h=i[u],f=Ts(t,n,h,r);if(0===u){if(o&&f||!o&&!f)return!1}else if(o&&!f||!o&&f)return!1;n=h}return!0}function Cs(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o];if(!As(t,n,e,r,s))return!1;e.length&&(n=e[e.length-1])}return!0}function Ns(t,n,i,r,s){for(var o=void 0!==s&&s,u=0,e=i.length;u<e;++u){var h=i[u],f=Ts(t,n,h,r);(0===u?o&&f||!o&&!f:o&&!f||!o&&f)&&Ss(t,n,h,r),n=h}return n}function ks(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o)n=Ns(t,n,i[o],r,s);return n}var Is=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ps=function(t){function n(n,i,r){var s=t.call(this)||this;return s.rt=[],s.st=-1,s.ot=null,s.nt=-1,s.it=-1,s.ut=-1,s.et=null,void 0!==i&&r?(s.setFlatCoordinates(i,n),s.rt=r):s.setCoordinates(n,i),s}return Is(n,t),n.prototype.appendLinearRing=function(t){this.flatCoordinates?_(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.rt.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.rt.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.it!=this.getRevision()&&(this.nt=Math.sqrt(Yr(this.flatCoordinates,0,this.rt,this.stride,0)),this.it=this.getRevision()),Br(this.flatCoordinates,0,this.rt,this.stride,this.nt,!0,t,n,i,r))},n.prototype.containsXY=function(t,n){return ys(this.getOrientedFlatCoordinates(),0,this.rt,this.stride,t,n)},n.prototype.getArea=function(){return fs(this.getOrientedFlatCoordinates(),0,this.rt,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?Ns(n=this.getOrientedFlatCoordinates().slice(),0,this.rt,this.stride,t):n=this.flatCoordinates,us(n,0,this.rt,this.stride)},n.prototype.getEnds=function(){return this.rt},n.prototype.getFlatInteriorPoint=function(){if(this.st!=this.getRevision()){var t=zn(this.getExtent());this.ot=_s(this.getOrientedFlatCoordinates(),0,this.rt,this.stride,t,0),this.st=this.getRevision()}return this.ot},n.prototype.getInteriorPoint=function(){return new ds(this.getFlatInteriorPoint(),St)},n.prototype.getLinearRingCount=function(){return this.rt.length},n.prototype.getLinearRing=function(t){return t<0||this.rt.length<=t?null:new vs(this.flatCoordinates.slice(0===t?0:this.rt[t-1],this.rt[t]),this.layout)},n.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.rt,r=[],s=0,o=0,u=i.length;o<u;++o){var e=i[o],h=new vs(n.slice(s,e),t);r.push(h),s=e}return r},n.prototype.getOrientedFlatCoordinates=function(){if(this.ut!=this.getRevision()){var t=this.flatCoordinates;As(t,0,this.rt,this.stride)?this.et=t:(this.et=t.slice(),this.et.length=Ns(this.et,0,this.rt,this.stride)),this.ut=this.getRevision()}return this.et},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=rs(this.flatCoordinates,0,this.rt,this.stride,Math.sqrt(t),i,0,r),new n(i,xt,r)},n.prototype.getType=function(){return At.POLYGON},n.prototype.intersectsExtent=function(t){return xs(this.getOrientedFlatCoordinates(),0,this.rt,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Hr(this.flatCoordinates,0,t,this.stride,this.rt);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(zr),Rs=Ps;function Gs(t,n,i,r){for(var s=i||32,o=[],u=0;u<s;++u)_(o,zi(t,n,2*Math.PI*u/s,r));return o.push(o[0],o[1]),new Ps(o,xt,[o.length])}function Ls(t){var n=t[0],i=t[1],r=t[2],s=t[3],o=[n,i,n,s,r,s,r,i,n,i];return new Ps(o,xt,[o.length])}function Fs(t,n,i){for(var r=n||32,s=t.getStride(),o=t.getLayout(),u=t.getCenter(),e=s*(r+1),h=new Array(e),f=0;f<e;f+=s){h[f]=0,h[f+1]=0;for(var a=2;a<s;a++)h[f+a]=u[a]}var c=[h.length],v=new Ps(h,o,c);return Ds(v,u,t.getRadius(),i),v}function Ds(t,n,i,r){for(var s=t.getFlatCoordinates(),o=t.getStride(),u=s.length/o-1,e=r||0,h=0;h<=u;++h){var f=h*o,a=e+2*ai(h,u)*Math.PI/u;s[f]=n[0]+i*Math.cos(a),s[f+1]=n[1]+i*Math.sin(a)}t.changed()}var zs=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Us="accuracy",Xs="accuracyGeometry",Ys="altitude",Ws="altitudeAccuracy",qs="heading",Bs="position",Vs="projection",Zs="speed",Js="tracking",Hs="trackingOptions",$s=function(t){function n(n){var i=t.call(this,I)||this;return i.code=n.code,i.message=n.message,i}return zs(n,t),n}(c),Ks=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.ht=null,i.ft=sr,i.ct=void 0,i.addChangeListener(Vs,i.vt),i.addChangeListener(Js,i.lt),void 0!==r.projection&&i.setProjection(r.projection),void 0!==r.trackingOptions&&i.setTrackingOptions(r.trackingOptions),i.setTracking(void 0!==r.tracking&&r.tracking),i}return zs(n,t),n.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},n.prototype.vt=function(){var t=this.getProjection();t&&(this.ft=wr(er("EPSG:4326"),t),this.ht&&this.set(Bs,this.ft(this.ht)))},n.prototype.lt=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.ct?this.ct=navigator.geolocation.watchPosition(this.dt.bind(this),this.wt.bind(this),this.getTrackingOptions()):t||void 0===this.ct||(navigator.geolocation.clearWatch(this.ct),this.ct=void 0)}},n.prototype.dt=function(t){var n=t.coords;this.set(Us,n.accuracy),this.set(Ys,null===n.altitude?void 0:n.altitude),this.set(Ws,null===n.altitudeAccuracy?void 0:n.altitudeAccuracy),this.set(qs,null===n.heading?void 0:fi(n.heading)),this.ht?(this.ht[0]=n.longitude,this.ht[1]=n.latitude):this.ht=[n.longitude,n.latitude];var i=this.ft(this.ht);this.set(Bs,i),this.set(Zs,null===n.speed?void 0:n.speed);var r=Gs(this.ht,n.accuracy);r.applyTransform(this.ft),this.set(Xs,r),this.changed()},n.prototype.wt=function(t){this.dispatchEvent(new $s(t))},n.prototype.getAccuracy=function(){return this.get(Us)},n.prototype.getAccuracyGeometry=function(){return this.get(Xs)||null},n.prototype.getAltitude=function(){return this.get(Ys)},n.prototype.getAltitudeAccuracy=function(){return this.get(Ws)},n.prototype.getHeading=function(){return this.get(qs)},n.prototype.getPosition=function(){return this.get(Bs)},n.prototype.getProjection=function(){return this.get(Vs)},n.prototype.getSpeed=function(){return this.get(Zs)},n.prototype.getTracking=function(){return this.get(Js)},n.prototype.getTrackingOptions=function(){return this.get(Hs)},n.prototype.setProjection=function(t){this.set(Vs,er(t))},n.prototype.setTracking=function(t){this.set(Js,t)},n.prototype.setTrackingOptions=function(t){this.set(Hs,t)},n}(nt),Qs=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),to=function(t){function n(n,i,r,s){var o=t.call(this)||this;return o.extent=n,o.yt=r,o.resolution=i,o.state=s,o}return Qs(n,t),n.prototype.changed=function(){this.dispatchEvent(k)},n.prototype.getExtent=function(){return this.extent},n.prototype.getImage=function(){return r()},n.prototype.getPixelRatio=function(){return this.yt},n.prototype.getResolution=function(){return this.resolution},n.prototype.getState=function(){return this.state},n.prototype.load=function(){r()},n}(N),no=0,io=1,ro=2,so=3,oo=4,uo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function eo(t,n,i){var r=t;if(r.src&&Xt){var s=r.decode(),o=!0;return s.then((function(){o&&n()})).catch((function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?n():i())})),function(){o=!1}}var u=[V(r,X,n),V(r,I,i)];return function(){u.forEach(Z)}}var ho=function(t){function n(n,i,r,s,o,u){var e=t.call(this,n,i,r,no)||this;return e.bt=s,e._t=new Image,null!==o&&(e._t.crossOrigin=o),e.gt=null,e.state=no,e.Ot=u,e}return uo(n,t),n.prototype.getImage=function(){return this._t},n.prototype.Mt=function(){this.state=so,this.jt(),this.changed()},n.prototype.xt=function(){void 0===this.resolution&&(this.resolution=Yn(this.extent)/this._t.height),this.state=ro,this.jt(),this.changed()},n.prototype.load=function(){this.state!=no&&this.state!=so||(this.state=io,this.changed(),this.Ot(this,this.bt),this.gt=eo(this._t,this.xt.bind(this),this.Mt.bind(this)))},n.prototype.setImage=function(t){this._t=t,this.resolution=Yn(this.extent)/this._t.height},n.prototype.jt=function(){this.gt&&(this.gt(),this.gt=null)},n}(to),fo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ao=function(t){function n(n,i,r,s,o){var u=this,e=void 0!==o?no:ro;return(u=t.call(this,n,i,r,e)||this).S=void 0!==o?o:null,u.Et=s,u.A=null,u}return fo(n,t),n.prototype.getError=function(){return this.A},n.prototype.St=function(t){t?(this.A=t,this.state=so):this.state=ro,this.changed()},n.prototype.load=function(){this.state==no&&(this.state=io,this.changed(),this.S(this.St.bind(this)))},n.prototype.getImage=function(){return this.Et},n}(to);function co(t,n,i,r){var s;return i&&i.length?s=i.shift():Ut?s=new OffscreenCanvas(t||300,n||300):(s=document.createElement("canvas")).style.all="unset",t&&(s.width=t),n&&(s.height=n),s.getContext("2d",r)}function vo(t){var n=t.offsetWidth,i=getComputedStyle(t);return n+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)}function lo(t){var n=t.offsetHeight,i=getComputedStyle(t);return n+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)}function wo(t,n){var i=n.parentNode;i&&i.replaceChild(t,n)}function po(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function yo(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function bo(t,n){for(var i=t.childNodes,r=0;;++r){var s=i[r],o=n[r];if(!s&&!o)break;s!==o&&(s?o?t.insertBefore(o,s):(t.removeChild(s),--r):t.appendChild(o))}}var _o=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var go=function(t){function n(n,i,r,s,o,u){var e=t.call(this,n,i,u)||this;return e.Tt=s,e.bt=r,e.key=r,e._t=new Image,null!==s&&(e._t.crossOrigin=s),e.gt=null,e.At=o,e}return _o(n,t),n.prototype.getImage=function(){return this._t},n.prototype.setImage=function(t){this._t=t,this.state=at,this.jt(),this.changed()},n.prototype.Mt=function(){var t;this.state=ct,this.jt(),this._t=((t=co(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},n.prototype.xt=function(){var t=this._t;t.naturalWidth&&t.naturalHeight?this.state=at:this.state=vt,this.jt(),this.changed()},n.prototype.load=function(){this.state==ct&&(this.state=ht,this._t=new Image,null!==this.Tt&&(this._t.crossOrigin=this.Tt)),this.state==ht&&(this.state=ft,this.changed(),this.At(this,this.bt),this.gt=eo(this._t,this.xt.bind(this),this.Mt.bind(this)))},n.prototype.jt=function(){this.gt&&(this.gt(),this.gt=null)},n}(bt),mo=function(){function t(t,n,i){this.Ct=t,this.Nt=n,this.kt=i,this.It=[],this.Pt=0,this.Rt=0}return t.prototype.begin=function(){this.It.length=0,this.Pt=0,this.Rt=0},t.prototype.update=function(t,n){this.It.push(t,n,Date.now())},t.prototype.end=function(){if(this.It.length<6)return!1;var t=Date.now()-this.kt,n=this.It.length-3;if(this.It[n+2]<t)return!1;for(var i=n-3;i>0&&this.It[i+2]>t;)i-=3;var r=this.It[n+2]-this.It[i+2];if(r<1e3/60)return!1;var s=this.It[n]-this.It[i],o=this.It[n+1]-this.It[i+1];return this.Pt=Math.atan2(o,s),this.Rt=Math.sqrt(s*s+o*o)/r,this.Rt>this.Nt},t.prototype.getDistance=function(){return(this.Nt-this.Rt)/this.Ct},t.prototype.getAngle=function(){return this.Pt},t}(),Oo=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Mo=/^([a-z]*)$|^hsla?\(.*\)$/i;function jo(t){return"string"==typeof t?t:Ao(t)}function xo(t){var n=document.createElement("div");if(n.style.color=t,""!==n.style.color){document.body.appendChild(n);var i=getComputedStyle(n).color;return document.body.removeChild(n),i}return""}var Eo=function(){var t={},n=0;return function(i){var r;if(t.hasOwnProperty(i))r=t[i];else{if(n>=1024){var s=0;for(var o in t)0==(3&s++)&&(delete t[o],--n)}r=function(t){var n,i,r,s,o;Mo.exec(t)&&(t=xo(t));if(Oo.exec(t)){var u=t.length-1,e=void 0;e=u<=4?1:2;var h=4===u||8===u;n=parseInt(t.substr(1+0*e,e),16),i=parseInt(t.substr(1+1*e,e),16),r=parseInt(t.substr(1+2*e,e),16),s=h?parseInt(t.substr(1+3*e,e),16):255,1==e&&(n=(n<<4)+n,i=(i<<4)+i,r=(r<<4)+r,h&&(s=(s<<4)+s)),o=[n,i,r,s/255]}else 0==t.indexOf("rgba(")?To(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),To(o)):mt(!1,14);return o}(i),t[i]=r,++n}return r}}();function So(t){return Array.isArray(t)?t:Eo(t)}function To(t){return t[0]=ii(t[0]+.5|0,0,255),t[1]=ii(t[1]+.5|0,0,255),t[2]=ii(t[2]+.5|0,0,255),t[3]=ii(t[3],0,1),t}function Ao(t){var n=t[0];n!=(0|n)&&(n=n+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+n+","+i+","+r+","+(void 0===t[3]?1:t[3])+")"}function Co(t){return Mo.test(t)&&(t=xo(t)),Oo.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")}var No=function(){function t(){this.Gt={},this.Lt=0,this.Ft=32}return t.prototype.clear=function(){this.Gt={},this.Lt=0},t.prototype.canExpireCache=function(){return this.Lt>this.Ft},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var n in this.Gt){var i=this.Gt[n];0!=(3&t++)||i.hasListener()||(delete this.Gt[n],--this.Lt)}}},t.prototype.get=function(t,n,i){var r=ko(t,n,i);return r in this.Gt?this.Gt[r]:null},t.prototype.set=function(t,n,i,r){var s=ko(t,n,i);this.Gt[s]=r,++this.Lt},t.prototype.setSize=function(t){this.Ft=t,this.expire()},t}();function ko(t,n,i){return n+":"+t+":"+(i?jo(i):"null")}var Io=No,Po=new No,Ro="opacity",Go="visible",Lo="extent",Fo="zIndex",Do="maxResolution",zo="minResolution",Uo="maxZoom",Xo="minZoom",Yo="source";function Wo(t){return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var qo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bo=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=E({},n);return"object"===Wo(n.properties)&&(delete r.properties,E(r,n.properties)),r[Ro]=void 0!==n.opacity?n.opacity:1,mt("number"==typeof r[Ro],64),r[Go]=void 0===n.visible||n.visible,r[Fo]=n.zIndex,r[Do]=void 0!==n.maxResolution?n.maxResolution:1/0,r[zo]=void 0!==n.minResolution?n.minResolution:0,r[Xo]=void 0!==n.minZoom?n.minZoom:-1/0,r[Uo]=void 0!==n.maxZoom?n.maxZoom:1/0,i.Dt=void 0!==r.className?n.className:"ol-layer",delete r.className,i.setProperties(r),i.zt=null,i}return qo(n,t),n.prototype.getClassName=function(){return this.Dt},n.prototype.getLayerState=function(t){var n=this.zt||{layer:this,managed:void 0===t||t},i=this.getZIndex();return n.opacity=ii(Math.round(100*this.getOpacity())/100,0,1),n.sourceState=this.getSourceState(),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=void 0!==i||n.managed?i:1/0,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.zt=n,n},n.prototype.getLayersArray=function(t){return r()},n.prototype.getLayerStatesArray=function(t){return r()},n.prototype.getExtent=function(){return this.get(Lo)},n.prototype.getMaxResolution=function(){return this.get(Do)},n.prototype.getMinResolution=function(){return this.get(zo)},n.prototype.getMinZoom=function(){return this.get(Xo)},n.prototype.getMaxZoom=function(){return this.get(Uo)},n.prototype.getOpacity=function(){return this.get(Ro)},n.prototype.getSourceState=function(){return r()},n.prototype.getVisible=function(){return this.get(Go)},n.prototype.getZIndex=function(){return this.get(Fo)},n.prototype.setExtent=function(t){this.set(Lo,t)},n.prototype.setMaxResolution=function(t){this.set(Do,t)},n.prototype.setMinResolution=function(t){this.set(zo,t)},n.prototype.setMaxZoom=function(t){this.set(Uo,t)},n.prototype.setMinZoom=function(t){this.set(Xo,t)},n.prototype.setOpacity=function(t){mt("number"==typeof t,64),this.set(Ro,t)},n.prototype.setVisible=function(t){this.set(Go,t)},n.prototype.setZIndex=function(t){this.set(Fo,t)},n.prototype.disposeInternal=function(){this.zt&&(this.zt.layer=null,this.zt=null),t.prototype.disposeInternal.call(this)},n}(nt),Vo="prerender",Zo="postrender",Jo="precompose",Ho="postcompose",$o="rendercomplete",Ko="undefined",Qo="ready",tu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function nu(t,n){if(!t.visible)return!1;var i=n.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;var r=n.zoom;return r>t.minZoom&&r<=t.maxZoom}var iu=function(t){function n(n){var i=this,r=E({},n);delete r.source,(i=t.call(this,r)||this).on,i.once,i.un,i.Ut=null,i.Xt=null,i.Yt=null,i.Wt=null,n.render&&(i.render=n.render),n.map&&i.setMap(n.map),i.addChangeListener(Yo,i.qt);var s=n.source?n.source:null;return i.setSource(s),i}return tu(n,t),n.prototype.getLayersArray=function(t){var n=t||[];return n.push(this),n},n.prototype.getLayerStatesArray=function(t){var n=t||[];return n.push(this.getLayerState()),n},n.prototype.getSource=function(){return this.get(Yo)||null},n.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():Ko},n.prototype.Bt=function(){this.changed()},n.prototype.qt=function(){this.Yt&&(Z(this.Yt),this.Yt=null);var t=this.getSource();t&&(this.Yt=B(t,k,this.Bt,this)),this.changed()},n.prototype.getFeatures=function(t){return this.Wt?this.Wt.getFeatures(t):new Promise((function(t){return t([])}))},n.prototype.render=function(t,n){var i=this.getRenderer();if(i.prepareFrame(t))return i.renderFrame(t,n)},n.prototype.setMap=function(t){this.Ut&&(Z(this.Ut),this.Ut=null),t||this.changed(),this.Xt&&(Z(this.Xt),this.Xt=null),t&&(this.Ut=B(t,Jo,(function(t){var n=t.frameState.layerStatesArray,i=this.getLayerState(!1);mt(!n.some((function(t){return t.layer===i.layer})),67),n.push(i)}),this),this.Xt=B(this,k,t.render,t),this.changed())},n.prototype.setSource=function(t){this.set(Yo,t)},n.prototype.getRenderer=function(){return this.Wt||(this.Wt=this.createRenderer()),this.Wt},n.prototype.hasRenderer=function(){return!!this.Wt},n.prototype.createRenderer=function(){return null},n.prototype.disposeInternal=function(){this.Wt&&(this.Wt.dispose(),delete this.Wt),this.setSource(null),t.prototype.disposeInternal.call(this)},n}(Bo),ru=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function su(t,n){Po.expire()}var ou=function(t){function n(n){var i=t.call(this)||this;return i.Vt=n,i}return ru(n,t),n.prototype.dispatchRenderEvent=function(t,n){r()},n.prototype.calculateMatrices2D=function(t){var n=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;tn(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),nn(r,i)},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s,o,u,e){var h,f=n.viewState;function a(t,n,i,r){return s.call(o,n,t?i:null,r)}var c=f.projection,v=nr(t.slice(),c),l=[[0,0]];if(c.canWrapX()&&r){var d=Vn(c.getExtent());l.push([-d,0],[d,0])}for(var w=n.layerStatesArray,p=w.length,y=[],b=[],_=0;_<l.length;_++)for(var g=p-1;g>=0;--g){var m=w[g],O=m.layer;if(O.hasRenderer()&&nu(m,f)&&u.call(e,O)){var M=O.getRenderer(),j=O.getSource();if(M&&j){var x=j.getWrapX()?v:t,E=a.bind(null,m.managed);b[0]=x[0]+l[_][0],b[1]=x[1]+l[_][1],h=M.forEachFeatureAtCoordinate(b,n,i,E,y)}if(h)return h}}if(0!==y.length){var S=1/y.length;return y.forEach((function(t,n){return t.distanceSq+=n*S})),y.sort((function(t,n){return t.distanceSq-n.distanceSq})),y.some((function(t){return h=t.callback(t.feature,t.layer,t.geometry)})),h}},n.prototype.forEachLayerAtPixel=function(t,n,i,s,o){return r()},n.prototype.hasFeatureAtCoordinate=function(t,n,i,r,s,o){return void 0!==this.forEachFeatureAtCoordinate(t,n,i,r,O,this,s,o)},n.prototype.getMap=function(){return this.Vt},n.prototype.renderFrame=function(t){r()},n.prototype.scheduleExpireIconCache=function(t){Po.canExpireCache()&&t.postRenderFunctions.push(su)},n}(l),uu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),eu=function(t){function n(n,i,r,s){var o=t.call(this,n)||this;return o.inversePixelTransform=i,o.frameState=r,o.context=s,o}return uu(n,t),n}(c),hu="ol-hidden",fu="ol-selectable",au="ol-unselectable",cu="ol-unsupported",vu="ol-control",lu="ol-collapsed",du=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),wu=["style","variant","weight","size","lineHeight","family"],pu=function(t){var n=t.match(du);if(!n)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,s=wu.length;r<s;++r){var o=n[r+1];void 0!==o&&(i[wu[r]]=o)}return i.families=i.family.split(/,\s?/),i};function yu(t){return 1===t?"":String(Math.round(100*t)/100)}var bu="10px sans-serif",_u="#000",gu="round",mu=[],Ou="round",Mu=10,ju="#000",xu="center",Eu="middle",Su=[0,0,0,0],Tu=new nt,Au=new N;Au.setSize=function(){console.warn("labelCache is deprecated.")};var Cu,Nu,ku=null,Iu={},Pu=function(){var t,n,i="32px ",r=["monospace","serif"],s=r.length,o="wmytzilWMYTZIL@#/&?$%10";function u(t,u,e){for(var h=!0,f=0;f<s;++f){var a=r[f];if(n=Lu(t+" "+u+" "+i+a,o),e!=a){var c=Lu(t+" "+u+" "+i+e+","+a,o);h=h&&c!=n}}return!!h}function e(){for(var n=!0,i=Tu.getKeys(),r=0,s=i.length;r<s;++r){var o=i[r];Tu.get(o)<100&&(u.apply(this,o.split("\n"))?(S(Iu),ku=null,Cu=void 0,Tu.set(o,100)):(Tu.set(o,Tu.get(o)+1,!0),n=!1))}n&&(clearInterval(t),t=void 0)}return function(n){var i=pu(n);if(i)for(var r=i.families,s=0,o=r.length;s<o;++s){var h=r[s],f=i.style+"\n"+i.weight+"\n"+h;void 0===Tu.get(f)&&(Tu.set(f,100,!0),u(i.style,i.weight,h)||(Tu.set(f,0,!0),void 0===t&&(t=setInterval(e,32))))}}}(),Ru=function(t){var n=Iu[t];if(null==n){if(Ut){var i=pu(t),r=Gu(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else Nu||((Nu=document.createElement("div")).innerHTML="M",Nu.style.minHeight="0",Nu.style.maxHeight="none",Nu.style.height="auto",Nu.style.padding="0",Nu.style.border="none",Nu.style.position="absolute",Nu.style.display="block",Nu.style.left="-99999px"),Nu.style.font=t,document.body.appendChild(Nu),n=Nu.offsetHeight,document.body.removeChild(Nu);Iu[t]=n}return n};function Gu(t,n){return ku||(ku=co(1,1)),t!=Cu&&(ku.font=t,Cu=ku.font),ku.measureText(n)}function Lu(t,n){return Gu(t,n).width}function Fu(t,n,i){if(n in i)return i[n];var r=Lu(t,n);return i[n]=r,r}function Du(t,n,i){for(var r=n.length,s=0,o=0;o<r;++o){var u=Lu(t,n[o]);s=Math.max(s,u),i.push(u)}return s}function zu(t,n,i,r,s,o,u,e,h,f,a){t.save(),1!==i&&(t.globalAlpha*=i),n&&t.setTransform.apply(t,n),r.contextInstructions?(t.translate(h,f),t.scale(a[0],a[1]),function(t,n){for(var i=t.contextInstructions,r=0,s=i.length;r<s;r+=2)Array.isArray(i[r+1])?n[i[r]].apply(n,i[r+1]):n[i[r]]=i[r+1]}(r,t)):a[0]<0||a[1]<0?(t.translate(h,f),t.scale(a[0],a[1]),t.drawImage(r,s,o,u,e,0,0,u,e)):t.drawImage(r,s,o,u,e,h,f,u*a[0],e*a[1]),t.restore()}var Uu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Xu=function(t){function n(n){var i=t.call(this,n)||this;i.Zt=B(Tu,v,n.redrawText.bind(n)),i.Jt=document.createElement("div");var r=i.Jt.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",i.Jt.className="ol-unselectable ol-layers";var s=n.getViewport();return s.insertBefore(i.Jt,s.firstChild||null),i.Ht=[],i.$t=!0,i}return Uu(n,t),n.prototype.dispatchRenderEvent=function(t,n){var i=this.getMap();if(i.hasListener(t)){var r=new eu(t,void 0,n);i.dispatchEvent(r)}},n.prototype.disposeInternal=function(){Z(this.Zt),this.Jt.parentNode.removeChild(this.Jt),t.prototype.disposeInternal.call(this)},n.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(Jo,t);var n=t.layerStatesArray.sort((function(t,n){return t.zIndex-n.zIndex})),i=t.viewState;this.Ht.length=0;for(var r=[],s=null,o=0,u=n.length;o<u;++o){var e=n[o];if(t.layerIndex=o,nu(e,i)&&(e.sourceState==Qo||e.sourceState==Ko)){var h=e.layer,f=h.render(t,s);f&&(f!==s&&(this.Ht.push(f),s=f),"getDeclutter"in h&&r.push(h))}}for(o=r.length-1;o>=0;--o)r[o].renderDeclutter(t);bo(this.Jt,this.Ht),this.dispatchRenderEvent(Ho,t),this.$t||(this.Jt.style.display="",this.$t=!0),this.scheduleExpireIconCache(t)}else this.$t&&(this.Jt.style.display="none",this.$t=!1)},n.prototype.forEachLayerAtPixel=function(t,n,i,r,s){for(var o=n.viewState,u=n.layerStatesArray,e=u.length-1;e>=0;--e){var h=u[e],f=h.layer;if(f.hasRenderer()&&nu(h,o)&&s(f)){var a=f.getRenderer().getDataAtPixel(t,n,i);if(a){var c=r(f,a);if(c)return c}}}},n}(ou),Yu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Wu="layers",qu=function(t){function n(n){var i=this,r=n||{},s=E({},r);delete s.layers;var o=r.layers;return(i=t.call(this,s)||this).on,i.once,i.un,i.Kt=[],i.Qt={},i.addChangeListener(Wu,i.tn),o?Array.isArray(o)?o=new et(o.slice(),{unique:!0}):mt("function"==typeof o.getArray,43):o=new et(void 0,{unique:!0}),i.setLayers(o),i}return Yu(n,t),n.prototype.nn=function(){this.changed()},n.prototype.tn=function(){this.Kt.forEach(Z),this.Kt.length=0;var t=this.getLayers();for(var n in this.Kt.push(B(t,it,this.rn,this),B(t,rt,this.sn,this)),this.Qt)this.Qt[n].forEach(Z);S(this.Qt);for(var i=t.getArray(),r=0,s=i.length;r<s;r++){var u=i[r];this.Qt[o(u)]=[B(u,v,this.nn,this),B(u,k,this.nn,this)]}this.changed()},n.prototype.rn=function(t){var n=t.element;this.Qt[o(n)]=[B(n,v,this.nn,this),B(n,k,this.nn,this)],this.changed()},n.prototype.sn=function(t){var n=o(t.element);this.Qt[n].forEach(Z),delete this.Qt[n],this.changed()},n.prototype.getLayers=function(){return this.get(Wu)},n.prototype.setLayers=function(t){this.set(Wu,t)},n.prototype.getLayersArray=function(t){var n=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(n)})),n},n.prototype.getLayerStatesArray=function(t){var n=void 0!==t?t:[],i=n.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(n)}));var r=this.getLayerState(),s=r.zIndex;t||void 0!==r.zIndex||(s=0);for(var o=i,u=n.length;o<u;o++){var e=n[o];e.opacity*=r.opacity,e.visible=e.visible&&r.visible,e.maxResolution=Math.min(e.maxResolution,r.maxResolution),e.minResolution=Math.max(e.minResolution,r.minResolution),e.minZoom=Math.max(e.minZoom,r.minZoom),e.maxZoom=Math.min(e.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==e.extent?e.extent=Wn(e.extent,r.extent):e.extent=r.extent),void 0===e.zIndex&&(e.zIndex=s)}return n},n.prototype.getSourceState=function(){return Qo},n}(Bo),Bu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Vu=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.map=i,s.frameState=void 0!==r?r:null,s}return Bu(n,t),n}(c),Zu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ju=function(t){function n(n,i,r,s,o){var u=t.call(this,n,i,o)||this;return u.originalEvent=r,u.en=null,u.hn=null,u.dragging=void 0!==s&&s,u}return Zu(n,t),Object.defineProperty(n.prototype,"pixel",{get:function(){return this.en||(this.en=this.map.getEventPixel(this.originalEvent)),this.en},set:function(t){this.en=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.hn||(this.hn=this.map.getCoordinateFromPixel(this.pixel)),this.hn},set:function(t){this.hn=t},enumerable:!1,configurable:!0}),n.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},n.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},n}(Vu),Hu={SINGLECLICK:"singleclick",CLICK:R,DBLCLICK:G,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},$u="pointermove",Ku="pointerdown",Qu="pointerup",te="pointerout",ne=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ie=function(t){function n(n,i){var r=t.call(this,n)||this;r.Vt=n,r.fn,r.an=!1,r.cn=!1,r.vn=[],r.ln=void 0===i?1:i,r.dn=null;var s=r.Vt.getViewport();return r.wn=0,r.pn={},r.Jt=s,r.yn=B(s,Ku,r.bn,r),r._n,r.gn=B(s,$u,r.mn,r),r.On=r.Mn.bind(r),r.Jt.addEventListener(W,r.On,!!Yt&&{passive:!1}),r}return ne(n,t),n.prototype.jn=function(t){var n=new Ju(Hu.CLICK,this.Vt,t);this.dispatchEvent(n),void 0!==this.fn?(clearTimeout(this.fn),this.fn=void 0,n=new Ju(Hu.DBLCLICK,this.Vt,t),this.dispatchEvent(n)):this.fn=setTimeout(function(){this.fn=void 0;var n=new Ju(Hu.SINGLECLICK,this.Vt,t);this.dispatchEvent(n)}.bind(this),250)},n.prototype.xn=function(t){var n=t;n.type==Hu.POINTERUP||n.type==Hu.POINTERCANCEL?delete this.pn[n.pointerId]:n.type==Hu.POINTERDOWN&&(this.pn[n.pointerId]=!0),this.wn=Object.keys(this.pn).length},n.prototype.En=function(t){this.xn(t);var n=new Ju(Hu.POINTERUP,this.Vt,t);this.dispatchEvent(n),this.an&&!n.defaultPrevented&&!this.cn&&this.Sn(t)&&this.jn(this.dn),0===this.wn&&(this.vn.forEach(Z),this.vn.length=0,this.cn=!1,this.dn=null)},n.prototype.Sn=function(t){return 0===t.button},n.prototype.bn=function(t){this.an=0===this.wn,this.xn(t);var n=new Ju(Hu.POINTERDOWN,this.Vt,t);for(var i in this.dispatchEvent(n),this.dn={},t){var r=t[i];this.dn[i]="function"==typeof r?j:r}if(0===this.vn.length){var s=this.Vt.getOwnerDocument();this.vn.push(B(s,Hu.POINTERMOVE,this.Tn,this),B(s,Hu.POINTERUP,this.En,this),B(this.Jt,Hu.POINTERCANCEL,this.En,this)),this.Jt.getRootNode&&this.Jt.getRootNode()!==s&&this.vn.push(B(this.Jt.getRootNode(),Hu.POINTERUP,this.En,this))}},n.prototype.Tn=function(t){if(this.An(t)){this.cn=!0;var n=new Ju(Hu.POINTERDRAG,this.Vt,t,this.cn);this.dispatchEvent(n)}},n.prototype.mn=function(t){this._n=t;var n=!(!this.dn||!this.An(t));this.dispatchEvent(new Ju(t.type,this.Vt,t,n))},n.prototype.Mn=function(t){var n=this._n;n&&!n.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},n.prototype.An=function(t){return this.cn||Math.abs(t.clientX-this.dn.clientX)>this.ln||Math.abs(t.clientY-this.dn.clientY)>this.ln},n.prototype.disposeInternal=function(){this.gn&&(Z(this.gn),this.gn=null),this.Jt.removeEventListener(W,this.On),this.yn&&(Z(this.yn),this.yn=null),this.vn.forEach(Z),this.vn.length=0,this.Jt=null,t.prototype.disposeInternal.call(this)},n}(N),re="postrender",se="movestart",oe="moveend",ue="layergroup",ee="size",he="target",fe="view",ae=1/0,ce=function(){function t(t,n){this.Cn=t,this.Nn=n,this.kn=[],this.In=[],this.Pn={}}return t.prototype.clear=function(){this.kn.length=0,this.In.length=0,S(this.Pn)},t.prototype.dequeue=function(){var t=this.kn,n=this.In,i=t[0];1==t.length?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.Rn(0));var r=this.Nn(i);return delete this.Pn[r],i},t.prototype.enqueue=function(t){mt(!(this.Nn(t)in this.Pn),31);var n=this.Cn(t);return n!=ae&&(this.kn.push(t),this.In.push(n),this.Pn[this.Nn(t)]=!0,this.Gn(0,this.kn.length-1),!0)},t.prototype.getCount=function(){return this.kn.length},t.prototype.Ln=function(t){return 2*t+1},t.prototype.Fn=function(t){return 2*t+2},t.prototype.Dn=function(t){return t-1>>1},t.prototype.zn=function(){var t;for(t=(this.kn.length>>1)-1;t>=0;t--)this.Rn(t)},t.prototype.isEmpty=function(){return 0===this.kn.length},t.prototype.isKeyQueued=function(t){return t in this.Pn},t.prototype.isQueued=function(t){return this.isKeyQueued(this.Nn(t))},t.prototype.Rn=function(t){for(var n=this.kn,i=this.In,r=n.length,s=n[t],o=i[t],u=t;t<r>>1;){var e=this.Ln(t),h=this.Fn(t),f=h<r&&i[h]<i[e]?h:e;n[t]=n[f],i[t]=i[f],t=f}n[t]=s,i[t]=o,this.Gn(u,t)},t.prototype.Gn=function(t,n){for(var i=this.kn,r=this.In,s=i[n],o=r[n];n>t;){var u=this.Dn(n);if(!(r[u]>o))break;i[n]=i[u],r[n]=r[u],n=u}i[n]=s,r[n]=o},t.prototype.reprioritize=function(){var t,n,i,r=this.Cn,s=this.kn,o=this.In,u=0,e=s.length;for(n=0;n<e;++n)(i=r(t=s[n]))==ae?delete this.Pn[this.Nn(t)]:(o[u]=i,s[u++]=t);s.length=u,o.length=u,this.zn()},t}(),ve=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),le=function(t){function n(n,i){var r=t.call(this,(function(t){return n.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return r.Un=r.handleTileChange.bind(r),r.Xn=i,r.Yn=0,r.Wn={},r}return ve(n,t),n.prototype.enqueue=function(n){var i=t.prototype.enqueue.call(this,n);i&&n[0].addEventListener(k,this.Un);return i},n.prototype.getTilesLoading=function(){return this.Yn},n.prototype.handleTileChange=function(t){var n=t.target,i=n.getState();if(i===at||i===ct||i===vt){n.removeEventListener(k,this.Un);var r=n.getKey();r in this.Wn&&(delete this.Wn[r],--this.Yn),this.Xn()}},n.prototype.loadMoreTiles=function(t,n){for(var i,r,s=0;this.Yn<t&&s<n&&this.getCount()>0;)r=(i=this.dequeue()[0]).getKey(),i.getState()!==ht||r in this.Wn||(this.Wn[r]=!0,++this.Yn,++s,i.load())},n}(ce);function de(t,n,i,r,s){if(!t||!(i in t.wantedTiles))return ae;if(!t.wantedTiles[i][n.getKey()])return ae;var o=t.viewState.center,u=r[0]-o[0],e=r[1]-o[1];return 65536*Math.log(s)+Math.sqrt(u*u+e*e)/s}var we=0,pe=1,ye="center",be="resolution",_e="rotation",ge=256;function me(t,n,i){return function(r,s,o,u,e){if(r){var h=n?0:o[0]*s,f=n?0:o[1]*s,a=e?e[0]:0,c=e?e[1]:0,v=t[0]+h/2+a,l=t[2]-h/2+a,d=t[1]+f/2+c,w=t[3]-f/2+c;v>l&&(l=v=(l+v)/2),d>w&&(w=d=(w+d)/2);var p=ii(r[0],v,l),y=ii(r[1],d,w),b=30*s;return u&&i&&(p+=-b*Math.log(1+Math.max(0,v-r[0])/b)+b*Math.log(1+Math.max(0,r[0]-l)/b),y+=-b*Math.log(1+Math.max(0,d-r[1])/b)+b*Math.log(1+Math.max(0,r[1]-w)/b)),[p,y]}}}function Oe(t){return t}function Me(t,n,i,r){var s=Vn(n)/i[0],o=Yn(n)/i[1];return r?Math.min(t,Math.max(s,o)):Math.min(t,Math.min(s,o))}function je(t,n,i){var r=Math.min(t,n);return r*=Math.log(1+50*Math.max(0,t/n-1))/50+1,i&&(r=Math.max(r,i),r/=Math.log(1+50*Math.max(0,i/t-1))/50+1),ii(r,i/2,2*n)}function xe(t,n,i,r){return function(s,o,u,e){if(void 0!==s){var h=t[0],f=t[t.length-1],a=i?Me(h,i,u,r):h;if(e)return void 0===n||n?je(s,a,f):ii(s,f,a);var c=Math.min(a,s),v=Math.floor(y(t,c,o));return t[v]>a&&v<t.length-1?t[v+1]:t[v]}}}function Ee(t,n,i,r,s,o){return function(u,e,h,f){if(void 0!==u){var a=s?Me(n,s,h,o):n,c=void 0!==i?i:0;if(f)return void 0===r||r?je(u,a,c):ii(u,c,a);var v=Math.ceil(Math.log(n/a)/Math.log(t)-1e-9),l=-e*(.5-1e-9)+.5,d=Math.min(a,u),w=Math.floor(Math.log(n/d)/Math.log(t)+l),p=Math.max(v,w);return ii(n/Math.pow(t,p),c,a)}}}function Se(t,n,i,r,s){return function(o,u,e,h){if(void 0!==o){var f=r?Me(t,r,e,s):t;return(void 0===i||i)&&h?je(o,f,n):ii(o,n,f)}}}function Te(t){return void 0!==t?0:void 0}function Ae(t){return void 0!==t?t:void 0}function Ce(t){var n=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}}function Ne(t){var n=t||fi(5);return function(t,i){return i?t:void 0!==t?Math.abs(t)<=n?0:t:void 0}}var ke=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Ie(t,n){setTimeout((function(){t(n)}),0)}function Pe(t){if(void 0!==t.extent){var n=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return me(t.extent,t.constrainOnlyCenter,n)}var i=cr(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&i.isGlobal()){var r=i.getExtent().slice();return r[0]=-1/0,r[2]=1/0,me(r,!1,!1)}return Oe}function Re(t){var n,i,r,s=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,u=void 0!==t.zoomFactor?t.zoomFactor:2,e=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,f=void 0!==t.showFullExtent&&t.showFullExtent,a=cr(t.projection,"EPSG:3857"),c=a.getExtent(),v=t.constrainOnlyCenter,l=t.extent;if(e||l||!a.isGlobal()||(v=!1,l=c),void 0!==t.resolutions){var d=t.resolutions;i=d[s],r=void 0!==d[o]?d[o]:d[d.length-1],n=t.constrainResolution?xe(d,h,!v&&l,f):Se(i,r,h,!v&&l,f)}else{var w=(c?Math.max(Vn(c),Yn(c)):360*kt[Pt.DEGREES]/a.getMetersPerUnit())/ge/Math.pow(2,0),p=w/Math.pow(2,28);void 0!==(i=t.maxResolution)?s=0:i=w/Math.pow(u,s),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(u,o):w/Math.pow(u,o):p),o=s+Math.floor(Math.log(i/r)/Math.log(u)),r=i/Math.pow(u,o-s),n=t.constrainResolution?Ee(u,i,r,h,!v&&l,f):Se(i,r,h,!v&&l,f)}return{constraint:n,maxResolution:i,minResolution:r,minZoom:s,zoomFactor:u}}function Ge(t){if(void 0===t.enableRotation||t.enableRotation){var n=t.constrainRotation;return void 0===n||!0===n?Ne():!1===n?Ae:"number"==typeof n?Ce(n):Ae}return Te}function Le(t){return!(t.sourceCenter&&t.targetCenter&&!Zi(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function Fe(t,n,i,r,s){var o=Math.cos(-s),u=Math.sin(-s),e=t[0]*o-t[1]*u,h=t[1]*o+t[0]*u;return[(e+=(n[0]/2-i[0])*r)*o-(h+=(i[1]-n[1]/2)*r)*(u=-u),h*o+e*u]}var De=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=E({},n);return i.qn=[0,0],i.Bn=[],i.Vn,i.Zn=cr(r.projection,"EPSG:3857"),i.Jn=[100,100],i.Hn=null,i.$n,i.Kn,i.Qn=null,i.ti,i.ni,i.ii=void 0,r.center&&(r.center=Mr(r.center,i.Zn)),r.extent&&(r.extent=xr(r.extent,i.Zn)),i.ri(r),i}return ke(n,t),n.prototype.ri=function(t){var n=Re(t);this.si=n.maxResolution,this.oi=n.minResolution,this.ui=n.zoomFactor,this.ei=t.resolutions,this.hi=t.padding,this.fi=n.minZoom;var i=Pe(t),r=n.constraint,s=Ge(t);this.ai={center:i,resolution:r,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.ci=t},Object.defineProperty(n.prototype,"padding",{get:function(){return this.hi},set:function(t){var n=this.hi;this.hi=t;var i=this.getCenter();if(i){var r=t||[0,0,0,0];n=n||[0,0,0,0];var s=this.getResolution(),o=s/2*(r[3]-n[3]+n[1]-r[1]),u=s/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-u])}},enumerable:!1,configurable:!0}),n.prototype.vi=function(t){var n=E({},this.ci);return void 0!==n.resolution?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),E({},n,t)},n.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var r=arguments[i];r.center&&((r=E({},r)).center=Mr(r.center,this.getProjection())),r.anchor&&((r=E({},r)).anchor=Mr(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)},n.prototype.animateInternal=function(t){var n,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(n=arguments[i-1],--i);for(var r=0;r<i&&!this.isDef();++r){var s=arguments[r];s.center&&this.setCenterInternal(s.center),void 0!==s.zoom?this.setZoom(s.zoom):s.resolution&&this.setResolution(s.resolution),void 0!==s.rotation&&this.setRotation(s.rotation)}if(r!==i){for(var o=Date.now(),u=this.Hn.slice(),e=this.$n,h=this.Kn,f=[];r<i;++r){var a=arguments[r],c={start:o,complete:!1,anchor:a.anchor,duration:void 0!==a.duration?a.duration:1e3,easing:a.easing||wt,callback:n};if(a.center&&(c.sourceCenter=u,c.targetCenter=a.center.slice(),u=c.targetCenter),void 0!==a.zoom?(c.sourceResolution=e,c.targetResolution=this.getResolutionForZoom(a.zoom),e=c.targetResolution):a.resolution&&(c.sourceResolution=e,c.targetResolution=a.resolution,e=c.targetResolution),void 0!==a.rotation){c.sourceRotation=h;var v=ai(a.rotation-h+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=h+v,h=c.targetRotation}Le(c)?c.complete=!0:o+=c.duration,f.push(c)}this.Bn.push(f),this.setHint(we,1),this.li()}else n&&Ie(n,!0)},n.prototype.getAnimating=function(){return this.qn[we]>0},n.prototype.getInteracting=function(){return this.qn[pe]>0},n.prototype.cancelAnimations=function(){var t;this.setHint(we,-this.qn[we]);for(var n=0,i=this.Bn.length;n<i;++n){var r=this.Bn[n];if(r[0].callback&&Ie(r[0].callback,!1),!t)for(var s=0,o=r.length;s<o;++s){var u=r[s];if(!u.complete){t=u.anchor;break}}}this.Bn.length=0,this.ii=t,this.Qn=null,this.ti=NaN,this.ni=NaN},n.prototype.li=function(){if(void 0!==this.Vn&&(cancelAnimationFrame(this.Vn),this.Vn=void 0),this.getAnimating()){for(var t=Date.now(),n=!1,i=this.Bn.length-1;i>=0;--i){for(var r=this.Bn[i],s=!0,o=0,u=r.length;o<u;++o){var e=r[o];if(!e.complete){var h=t-e.start,f=e.duration>0?h/e.duration:1;f>=1?(e.complete=!0,f=1):s=!1;var a=e.easing(f);if(e.sourceCenter){var c=e.sourceCenter[0],v=e.sourceCenter[1],l=e.targetCenter[0],d=e.targetCenter[1];this.Qn=e.targetCenter;var w=c+a*(l-c),p=v+a*(d-v);this.Hn=[w,p]}if(e.sourceResolution&&e.targetResolution){var y=1===a?e.targetResolution:e.sourceResolution+a*(e.targetResolution-e.sourceResolution);if(e.anchor){var b=this.di(this.getRotation()),_=this.ai.resolution(y,0,b,!0);this.Hn=this.calculateCenterZoom(_,e.anchor)}this.ti=e.targetResolution,this.$n=y,this.wi(!0)}if(void 0!==e.sourceRotation&&void 0!==e.targetRotation){var g=1===a?ai(e.targetRotation+Math.PI,2*Math.PI)-Math.PI:e.sourceRotation+a*(e.targetRotation-e.sourceRotation);if(e.anchor){var m=this.ai.rotation(g,!0);this.Hn=this.calculateCenterRotate(m,e.anchor)}this.ni=e.targetRotation,this.Kn=g}if(this.wi(!0),n=!0,!e.complete)break}}if(s){this.Bn[i]=null,this.setHint(we,-1),this.Qn=null,this.ti=NaN,this.ni=NaN;var O=r[0].callback;O&&Ie(O,!0)}}this.Bn=this.Bn.filter(Boolean),n&&void 0===this.Vn&&(this.Vn=requestAnimationFrame(this.li.bind(this)))}},n.prototype.calculateCenterRotate=function(t,n){var i,r=this.getCenterInternal();return void 0!==r&&(Ji(i=[r[0]-n[0],r[1]-n[1]],t-this.getRotation()),Yi(i,n)),i},n.prototype.calculateCenterZoom=function(t,n){var i,r=this.getCenterInternal(),s=this.getResolution();void 0!==r&&void 0!==s&&(i=[n[0]-t*(n[0]-r[0])/s,n[1]-t*(n[1]-r[1])/s]);return i},n.prototype.di=function(t){var n=this.Jn;if(t){var i=n[0],r=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}return n},n.prototype.setViewportSize=function(t){this.Jn=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},n.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Or(t,this.getProjection()):t},n.prototype.getCenterInternal=function(){return this.get(ye)},n.prototype.getConstraints=function(){return this.ai},n.prototype.getConstrainResolution=function(){return this.ci.constrainResolution},n.prototype.getHints=function(t){return void 0!==t?(t[0]=this.qn[0],t[1]=this.qn[1],t):this.qn.slice()},n.prototype.calculateExtent=function(t){return jr(this.calculateExtentInternal(t),this.getProjection())},n.prototype.calculateExtentInternal=function(t){var n=t||this.pi(),i=this.getCenterInternal();mt(i,1);var r=this.getResolution();mt(void 0!==r,2);var s=this.getRotation();return mt(void 0!==s,3),Xn(i,r,s,n)},n.prototype.getMaxResolution=function(){return this.si},n.prototype.getMinResolution=function(){return this.oi},n.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.oi)},n.prototype.setMaxZoom=function(t){this.ri(this.vi({maxZoom:t}))},n.prototype.getMinZoom=function(){return this.getZoomForResolution(this.si)},n.prototype.setMinZoom=function(t){this.ri(this.vi({minZoom:t}))},n.prototype.setConstrainResolution=function(t){this.ri(this.vi({constrainResolution:t}))},n.prototype.getProjection=function(){return this.Zn},n.prototype.getResolution=function(){return this.get(be)},n.prototype.getResolutions=function(){return this.ei},n.prototype.getResolutionForExtent=function(t,n){return this.getResolutionForExtentInternal(xr(t,this.getProjection()),n)},n.prototype.getResolutionForExtentInternal=function(t,n){var i=n||this.pi(),r=Vn(t)/i[0],s=Yn(t)/i[1];return Math.max(r,s)},n.prototype.getResolutionForValueFunction=function(t){var n=t||2,i=this.getConstrainedResolution(this.si),r=this.oi,s=Math.log(i/r)/Math.log(n);return function(t){return i/Math.pow(n,t*s)}},n.prototype.getRotation=function(){return this.get(_e)},n.prototype.getValueForResolutionFunction=function(t){var n=Math.log(t||2),i=this.getConstrainedResolution(this.si),r=this.oi,s=Math.log(i/r)/n;return function(t){return Math.log(i/t)/n/s}},n.prototype.pi=function(t){var n=this.di(t),i=this.hi;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},n.prototype.getState=function(){var t=this.getProjection(),n=this.getResolution(),i=this.getRotation(),r=this.getCenterInternal(),s=this.hi;if(s){var o=this.pi();r=Fe(r,this.di(),[o[0]/2+s[3],o[1]/2+s[0]],n,i)}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:n,nextCenter:this.Qn,nextResolution:this.ti,nextRotation:this.ni,rotation:i,zoom:this.getZoom()}},n.prototype.getZoom=function(){var t,n=this.getResolution();return void 0!==n&&(t=this.getZoomForResolution(n)),t},n.prototype.getZoomForResolution=function(t){var n,i,r=this.fi||0;if(this.ei){var s=y(this.ei,t,1);r=s,n=this.ei[s],i=s==this.ei.length-1?2:n/this.ei[s+1]}else n=this.si,i=this.ui;return r+Math.log(n/t)/Math.log(i)},n.prototype.getResolutionForZoom=function(t){if(this.ei){if(this.ei.length<=1)return 0;var n=ii(Math.floor(t),0,this.ei.length-2),i=this.ei[n]/this.ei[n+1];return this.ei[n]/Math.pow(i,ii(t-n,0,1))}return this.si/Math.pow(this.ui,t-this.fi)},n.prototype.fit=function(t,n){var i;if(mt(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))mt(!Jn(t),25),i=Ls(r=xr(t,this.getProjection()));else if(t.getType()===At.CIRCLE){var r;(i=Ls(r=xr(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),zn(r))}else{var s=mr();i=s?t.clone().transform(s,this.getProjection()):t}this.fitInternal(i,n)},n.prototype.rotatedExtentForGeometry=function(t){for(var n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),s=t.getFlatCoordinates(),o=t.getStride(),u=1/0,e=1/0,h=-1/0,f=-1/0,a=0,c=s.length;a<c;a+=o){var v=s[a]*i-s[a+1]*r,l=s[a]*r+s[a+1]*i;u=Math.min(u,v),e=Math.min(e,l),h=Math.max(h,v),f=Math.max(f,l)}return[u,e,h,f]},n.prototype.fitInternal=function(t,n){var i=n||{},r=i.size;r||(r=this.pi());var s,o=void 0!==i.padding?i.padding:[0,0,0,0],u=void 0!==i.nearest&&i.nearest;s=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;var e=this.rotatedExtentForGeometry(t),h=this.getResolutionForExtentInternal(e,[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);h=isNaN(h)?s:Math.max(h,s),h=this.getConstrainedResolution(h,u?0:1);var f=this.getRotation(),a=Math.sin(f),c=Math.cos(f),v=zn(e);v[0]+=(o[1]-o[3])/2*h,v[1]+=(o[0]-o[2])/2*h;var l=v[0]*c-v[1]*a,d=v[1]*c+v[0]*a,w=this.getConstrainedCenter([l,d],h),p=i.callback?i.callback:j;void 0!==i.duration?this.animateInternal({resolution:h,center:w,duration:i.duration,easing:i.easing},p):(this.$n=h,this.Hn=w,this.wi(!1,!0),Ie(p,!0))},n.prototype.centerOn=function(t,n,i){this.centerOnInternal(Mr(t,this.getProjection()),n,i)},n.prototype.centerOnInternal=function(t,n,i){this.setCenterInternal(Fe(t,n,i,this.getResolution(),this.getRotation()))},n.prototype.calculateCenterShift=function(t,n,i,r){var s,o=this.hi;if(o&&t){var u=this.pi(-i),e=Fe(t,r,[u[0]/2+o[3],u[1]/2+o[0]],n,i);s=[t[0]-e[0],t[1]-e[1]]}return s},n.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},n.prototype.adjustCenter=function(t){var n=Or(this.Hn,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustCenterInternal=function(t){var n=this.Hn;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustResolution=function(t,n){var i=n&&Mr(n,this.getProjection());this.adjustResolutionInternal(t,i)},n.prototype.adjustResolutionInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.di(this.getRotation()),s=this.ai.resolution(this.$n*t,0,r,i);n&&(this.Hn=this.calculateCenterZoom(s,n)),this.$n*=t,this.wi()},n.prototype.adjustZoom=function(t,n){this.adjustResolution(Math.pow(this.ui,-t),n)},n.prototype.adjustRotation=function(t,n){n&&(n=Mr(n,this.getProjection())),this.adjustRotationInternal(t,n)},n.prototype.adjustRotationInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.ai.rotation(this.Kn+t,i);n&&(this.Hn=this.calculateCenterRotate(r,n)),this.Kn+=t,this.wi()},n.prototype.setCenter=function(t){this.setCenterInternal(Mr(t,this.getProjection()))},n.prototype.setCenterInternal=function(t){this.Hn=t,this.wi()},n.prototype.setHint=function(t,n){return this.qn[t]+=n,this.changed(),this.qn[t]},n.prototype.setResolution=function(t){this.$n=t,this.wi()},n.prototype.setRotation=function(t){this.Kn=t,this.wi()},n.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},n.prototype.wi=function(t,n){var i=this.getAnimating()||this.getInteracting()||n,r=this.ai.rotation(this.Kn,i),s=this.di(r),o=this.ai.resolution(this.$n,0,s,i),u=this.ai.center(this.Hn,o,s,i,this.calculateCenterShift(this.Hn,o,r,s));this.get(_e)!==r&&this.set(_e,r),this.get(be)!==o&&this.set(be,o),this.get(ye)&&Zi(this.get(ye),u)||this.set(ye,u),this.getAnimating()&&!t&&this.cancelAnimations(),this.ii=void 0},n.prototype.resolveConstraints=function(t,n,i){var r=void 0!==t?t:200,s=n||0,o=this.ai.rotation(this.Kn),u=this.di(o),e=this.ai.resolution(this.$n,s,u),h=this.ai.center(this.Hn,e,u,!1,this.calculateCenterShift(this.Hn,e,o,u));if(0===r&&!this.ii)return this.$n=e,this.Kn=o,this.Hn=h,void this.wi();var f=i||(0===r?this.ii:void 0);this.ii=void 0,this.getResolution()===e&&this.getRotation()===o&&this.getCenterInternal()&&Zi(this.getCenterInternal(),h)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:h,resolution:e,duration:r,easing:dt,anchor:f}))},n.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(pe,1)},n.prototype.endInteraction=function(t,n,i){var r=i&&Mr(i,this.getProjection());this.endInteractionInternal(t,n,r)},n.prototype.endInteractionInternal=function(t,n,i){this.setHint(pe,-1),this.resolveConstraints(t,n,i)},n.prototype.getConstrainedCenter=function(t,n){var i=this.di(this.getRotation());return this.ai.center(t,n||this.getResolution(),i)},n.prototype.getConstrainedZoom=function(t,n){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},n.prototype.getConstrainedResolution=function(t,n){var i=n||0,r=this.di(this.getRotation());return this.ai.resolution(t,i,r)},n}(nt);function ze(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*n,i[1]=t[1]+2*n,i}function Ue(t){return t[0]>0&&t[1]>0}function Xe(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*n+.5|0,i[1]=t[1]*n+.5|0,i}function Ye(t,n){return Array.isArray(t)?t:(void 0===n?n=[t,t]:(n[0]=t,n[1]=t),n)}var We=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var qe=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=function(t){var n=null;void 0!==t.keyboardEventTarget&&(n="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,r,s,o={},u=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new qu({layers:t.layers});o[ue]=u,o[he]=t.target,o[fe]=t.view instanceof De?t.view:new De,void 0!==t.controls&&(Array.isArray(t.controls)?i=new et(t.controls.slice()):(mt("function"==typeof t.controls.getArray,47),i=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new et(t.interactions.slice()):(mt("function"==typeof t.interactions.getArray,48),r=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?s=new et(t.overlays.slice()):(mt("function"==typeof t.overlays.getArray,49),s=t.overlays):s=new et;return{controls:i,interactions:r,keyboardEventTarget:n,overlays:s,values:o}}(n);i.yi=i.handleBrowserEvent.bind(i),i.bi=void 0!==n.maxTilesLoading?n.maxTilesLoading:16,i.yt=void 0!==n.pixelRatio?n.pixelRatio:zt,i._i,i.gi,i.mi=function(){this.gi=void 0,this.Oi(Date.now())}.bind(i),i.Mi=[1,0,0,1,0,0],i.ji=[1,0,0,1,0,0],i.xi=0,i.Ei=null,i.Si=null,i.Ti=null,i.Ai=null,i.Ci=null,i.Ni=document.createElement("div"),i.Ni.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.Ni.style.position="relative",i.Ni.style.overflow="hidden",i.Ni.style.width="100%",i.Ni.style.height="100%",i.ki=document.createElement("div"),i.ki.style.position="absolute",i.ki.style.zIndex="0",i.ki.style.width="100%",i.ki.style.height="100%",i.ki.style.pointerEvents="none",i.ki.className="ol-overlaycontainer",i.Ni.appendChild(i.ki),i.Ii=document.createElement("div"),i.Ii.style.position="absolute",i.Ii.style.zIndex="0",i.Ii.style.width="100%",i.Ii.style.height="100%",i.Ii.style.pointerEvents="none",i.Ii.className="ol-overlaycontainer-stopevent",i.Ni.appendChild(i.Ii),i.Pi=null,i.ln=n.moveTolerance,i.Ri=r.keyboardEventTarget,i.Gi=null,i.controls=r.controls||new et,i.interactions=r.interactions||new et,i.Li=r.overlays,i.Fi={},i.Wt=null,i.Di,i.zi=[],i.Ui=new le(i.getTilePriority.bind(i),i.Xi.bind(i)),i.addChangeListener(ue,i.Yi),i.addChangeListener(fe,i.Wi),i.addChangeListener(ee,i.qi),i.addChangeListener(he,i.Bi),i.setProperties(r.values);var s=i;return!n.view||n.view instanceof De||n.view.then((function(t){s.setView(new De(t))})),i.controls.addEventListener(it,function(t){t.element.setMap(this)}.bind(i)),i.controls.addEventListener(rt,function(t){t.element.setMap(null)}.bind(i)),i.interactions.addEventListener(it,function(t){t.element.setMap(this)}.bind(i)),i.interactions.addEventListener(rt,function(t){t.element.setMap(null)}.bind(i)),i.Li.addEventListener(it,function(t){this.Vi(t.element)}.bind(i)),i.Li.addEventListener(rt,function(t){var n=t.element.getId();void 0!==n&&delete this.Fi[n.toString()],t.element.setMap(null)}.bind(i)),i.controls.forEach(function(t){t.setMap(this)}.bind(i)),i.interactions.forEach(function(t){t.setMap(this)}.bind(i)),i.Li.forEach(i.Vi.bind(i)),i}return We(n,t),n.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},n.prototype.addControl=function(t){this.getControls().push(t)},n.prototype.addInteraction=function(t){this.getInteractions().push(t)},n.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},n.prototype.addOverlay=function(t){this.getOverlays().push(t)},n.prototype.Vi=function(t){var n=t.getId();void 0!==n&&(this.Fi[n.toString()]=t),t.setMap(this)},n.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},n.prototype.forEachFeatureAtPixel=function(t,n,i){if(this.Ei){var r=this.getCoordinateFromPixelInternal(t),s=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,o=void 0!==i.layerFilter?i.layerFilter:O,u=!1!==i.checkWrapped;return this.Wt.forEachFeatureAtCoordinate(r,this.Ei,s,u,n,null,o,null)}},n.prototype.getFeaturesAtPixel=function(t,n){var i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),n),i},n.prototype.forEachLayerAtPixel=function(t,n,i){if(this.Ei){var r=i||{},s=void 0!==r.hitTolerance?r.hitTolerance:0,o=r.layerFilter||O;return this.Wt.forEachLayerAtPixel(t,this.Ei,s,n,o)}},n.prototype.hasFeatureAtPixel=function(t,n){if(!this.Ei)return!1;var i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).layerFilter?n.layerFilter:O,s=void 0!==n.hitTolerance?n.hitTolerance:0,o=!1!==n.checkWrapped;return this.Wt.hasFeatureAtCoordinate(i,this.Ei,s,o,r,null)},n.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},n.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},n.prototype.getEventPixel=function(t){var n=this.Ni.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-n.left,i.clientY-n.top]},n.prototype.getTarget=function(){return this.get(he)},n.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},n.prototype.getCoordinateFromPixel=function(t){return Or(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},n.prototype.getCoordinateFromPixelInternal=function(t){var n=this.Ei;return n?Ht(n.pixelToCoordinateTransform,t.slice()):null},n.prototype.getControls=function(){return this.controls},n.prototype.getOverlays=function(){return this.Li},n.prototype.getOverlayById=function(t){var n=this.Fi[t.toString()];return void 0!==n?n:null},n.prototype.getInteractions=function(){return this.interactions},n.prototype.getLayerGroup=function(){return this.get(ue)},n.prototype.setLayers=function(t){var n=this.getLayerGroup();if(t instanceof et)n.setLayers(t);else{var i=n.getLayers();i.clear(),i.extend(t)}},n.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},n.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n].layer.getSource();if(r&&r.loading)return!0}return!1},n.prototype.getPixelFromCoordinate=function(t){var n=Mr(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},n.prototype.getPixelFromCoordinateInternal=function(t){var n=this.Ei;return n?Ht(n.coordinateToPixelTransform,t.slice(0,2)):null},n.prototype.getRenderer=function(){return this.Wt},n.prototype.getSize=function(){return this.get(ee)},n.prototype.getView=function(){return this.get(fe)},n.prototype.getViewport=function(){return this.Ni},n.prototype.getOverlayContainer=function(){return this.ki},n.prototype.getOverlayContainerStopEvent=function(){return this.Ii},n.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},n.prototype.getTilePriority=function(t,n,i,r){return de(this.Ei,t,n,i,r)},n.prototype.handleBrowserEvent=function(t,n){var i=n||t.type,r=new Ju(i,this,t);this.handleMapBrowserEvent(r)},n.prototype.handleMapBrowserEvent=function(t){if(this.Ei){var n=t.originalEvent,i=n.type;if(i===Ku||i===q||i===z){var r=this.getOwnerDocument(),s=this.Ni.getRootNode?this.Ni.getRootNode():r,o=n.target;if(this.Ii.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(t.frameState=this.Ei,!1!==this.dispatchEvent(t))for(var u=this.getInteractions().getArray().slice(),e=u.length-1;e>=0;e--){var h=u[e];if(h.getMap()===this&&h.getActive()&&this.getTargetElement())if(!h.handleEvent(t)||t.propagationStopped)break}}},n.prototype.handlePostRender=function(){var t=this.Ei,n=this.Ui;if(!n.isEmpty()){var i=this.bi,r=i;if(t){var s=t.viewHints;if(s[we]||s[pe]){var o=Date.now()-t.time>8;i=o?0:8,r=o?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,r))}!t||!this.hasListener($o)||t.animate||this.Ui.getTilesLoading()||this.getLoading()||this.Wt.dispatchRenderEvent($o,t);for(var u=this.zi,e=0,h=u.length;e<h;++e)u[e](this,t);u.length=0},n.prototype.qi=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},n.prototype.Bi=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.Pi){for(var n=0,i=this.Gi.length;n<i;++n)Z(this.Gi[n]);this.Gi=null,this.Ni.removeEventListener(P,this.yi),this.Ni.removeEventListener(q,this.yi),void 0!==this.Di&&(removeEventListener(Y,this.Di,!1),this.Di=void 0),this.Pi.dispose(),this.Pi=null,po(this.Ni)}if(t){for(var r in t.appendChild(this.Ni),this.Wt||(this.Wt=this.createRenderer()),this.Pi=new ie(this,this.ln),Hu)this.Pi.addEventListener(Hu[r],this.handleMapBrowserEvent.bind(this));this.Ni.addEventListener(P,this.yi,!1),this.Ni.addEventListener(q,this.yi,!!Yt&&{passive:!1});var s=this.Ri?this.Ri:t;this.Gi=[B(s,z,this.handleBrowserEvent,this),B(s,U,this.handleBrowserEvent,this)],this.Di||(this.Di=this.updateSize.bind(this),window.addEventListener(Y,this.Di,!1))}else this.Wt&&(clearTimeout(this._i),this._i=void 0,this.zi.length=0,this.Wt.dispose(),this.Wt=null),this.gi&&(cancelAnimationFrame(this.gi),this.gi=void 0);this.updateSize()},n.prototype.Xi=function(){this.render()},n.prototype.Zi=function(){this.render()},n.prototype.Wi=function(){this.Ti&&(Z(this.Ti),this.Ti=null),this.Ai&&(Z(this.Ai),this.Ai=null);var t=this.getView();t&&(this.Ji(),this.Ti=B(t,v,this.Zi,this),this.Ai=B(t,k,this.Zi,this),t.resolveConstraints(0)),this.render()},n.prototype.Yi=function(){this.Ci&&(this.Ci.forEach(Z),this.Ci=null);var t=this.getLayerGroup();t&&(this.Ci=[B(t,v,this.render,this),B(t,k,this.render,this)]),this.render()},n.prototype.isRendered=function(){return!!this.Ei},n.prototype.renderSync=function(){this.gi&&cancelAnimationFrame(this.gi),this.mi()},n.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}},n.prototype.render=function(){this.Wt&&void 0===this.gi&&(this.gi=requestAnimationFrame(this.mi))},n.prototype.removeControl=function(t){return this.getControls().remove(t)},n.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},n.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},n.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},n.prototype.Oi=function(t){var n=this,i=this.getSize(),r=this.getView(),s=this.Ei,o=null;if(void 0!==i&&Ue(i)&&r&&r.isDef()){var u=r.getHints(this.Ei?this.Ei.viewHints:void 0),e=r.getState();if(o={animate:!1,coordinateToPixelTransform:this.Mi,declutterTree:null,extent:Xn(e.center,e.resolution,e.rotation,i),index:this.xi++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.yt,pixelToCoordinateTransform:this.ji,postRenderFunctions:[],size:i,tileQueue:this.Ui,time:t,usedTiles:{},viewState:e,viewHints:u,wantedTiles:{}},e.nextCenter&&e.nextResolution){var h=isNaN(e.nextRotation)?e.rotation:e.nextRotation;o.nextExtent=Xn(e.nextCenter,e.nextResolution,h,i)}}if(this.Ei=o,this.Wt.renderFrame(o),o){if(o.animate&&this.render(),Array.prototype.push.apply(this.zi,o.postRenderFunctions),s)(!this.Si||!Jn(this.Si)&&!Tn(o.extent,this.Si))&&(this.dispatchEvent(new Vu(se,this,s)),this.Si=xn(this.Si));this.Si&&!o.viewHints[we]&&!o.viewHints[pe]&&!Tn(o.extent,this.Si)&&(this.dispatchEvent(new Vu(oe,this,o)),yn(o.extent,this.Si))}this.dispatchEvent(new Vu(re,this,o)),this._i||(this._i=setTimeout((function(){n._i=void 0,n.handlePostRender()}),0))},n.prototype.setLayerGroup=function(t){this.set(ue,t)},n.prototype.setSize=function(t){this.set(ee,t)},n.prototype.setTarget=function(t){this.set(he,t)},n.prototype.setView=function(t){if(!t||t instanceof De)this.set(fe,t);else{this.set(fe,new De);var n=this;t.then((function(t){n.setView(new De(t))}))}},n.prototype.updateSize=function(){var t=this.getTargetElement(),n=void 0;if(t){var i=getComputedStyle(t),r=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);isNaN(r)||isNaN(s)||!Ue(n=[r,s])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(n),this.Ji()},n.prototype.Ji=function(){var t=this.getView();if(t){var n=void 0,i=getComputedStyle(this.Ni);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}},n}(nt),Be=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ve=function(t){function n(n){var i=t.call(this)||this,r=n.element;return!r||n.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),i.element=r||null,i.Hi=null,i.Vt=null,i.listenerKeys=[],n.render&&(i.render=n.render),n.target&&i.setTarget(n.target),i}return Be(n,t),n.prototype.disposeInternal=function(){po(this.element),t.prototype.disposeInternal.call(this)},n.prototype.getMap=function(){return this.Vt},n.prototype.setMap=function(t){this.Vt&&po(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)Z(this.listenerKeys[n]);(this.listenerKeys.length=0,this.Vt=t,this.Vt)&&((this.Hi?this.Hi:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==j&&this.listenerKeys.push(B(t,re,this.render,this)),t.render())},n.prototype.render=function(t){},n.prototype.setTarget=function(t){this.Hi="string"==typeof t?document.getElementById(t):t},n}(nt),Ze=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Je=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).$i=document.createElement("ul"),i.Ki=void 0===r.collapsed||r.collapsed,i.Qi=i.Ki,i.tr=void 0!==r.collapsible,i.nr=void 0===r.collapsible||r.collapsible,i.nr||(i.Ki=!1);var s=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",u=void 0!==r.expandClassName?r.expandClassName:s+"-expand",e=void 0!==r.collapseLabel?r.collapseLabel:"›",h=void 0!==r.collapseClassName?r.collapseClassName:s+"-collpase";"string"==typeof e?(i.ir=document.createElement("span"),i.ir.textContent=e,i.ir.className=h):i.ir=e;var f=void 0!==r.label?r.label:"i";"string"==typeof f?(i.rr=document.createElement("span"),i.rr.textContent=f,i.rr.className=u):i.rr=f;var a=i.nr&&!i.Ki?i.ir:i.rr;i.sr=document.createElement("button"),i.sr.setAttribute("type","button"),i.sr.setAttribute("aria-expanded",String(!i.Ki)),i.sr.title=o,i.sr.appendChild(a),i.sr.addEventListener(R,i.ur.bind(i),!1);var c=s+" "+"ol-unselectable "+vu+(i.Ki&&i.nr?" ol-collapsed":"")+(i.nr?"":" ol-uncollapsible"),v=i.element;return v.className=c,v.appendChild(i.sr),v.appendChild(i.$i),i.er=[],i.$t=!0,i}return Ze(n,t),n.prototype.hr=function(t){for(var n={},i=[],r=!0,s=t.layerStatesArray,o=0,u=s.length;o<u;++o){var e=s[o];if(nu(e,t.viewState)){var h=e.layer.getSource();if(h){var f=h.getAttributions();if(f){var a=f(t);if(a)if(r=r&&!1!==h.getAttributionsCollapsible(),Array.isArray(a))for(var c=0,v=a.length;c<v;++c)a[c]in n||(i.push(a[c]),n[a[c]]=!0);else a in n||(i.push(a),n[a]=!0)}}}}return this.tr||this.setCollapsible(r),i},n.prototype.ar=function(t){if(t){var n=this.hr(t),i=n.length>0;if(this.$t!=i&&(this.element.style.display=i?"":"none",this.$t=i),!g(n,this.er)){yo(this.$i);for(var r=0,s=n.length;r<s;++r){var o=document.createElement("li");o.innerHTML=n[r],this.$i.appendChild(o)}this.er=n}}else this.$t&&(this.element.style.display="none",this.$t=!1)},n.prototype.ur=function(t){t.preventDefault(),this.cr(),this.Qi=this.Ki},n.prototype.cr=function(){this.element.classList.toggle(lu),this.Ki?wo(this.ir,this.rr):wo(this.rr,this.ir),this.Ki=!this.Ki,this.sr.setAttribute("aria-expanded",String(!this.Ki))},n.prototype.getCollapsible=function(){return this.nr},n.prototype.setCollapsible=function(t){this.nr!==t&&(this.nr=t,this.element.classList.toggle("ol-uncollapsible"),this.Qi&&this.cr())},n.prototype.setCollapsed=function(t){this.Qi=t,this.nr&&this.Ki!==t&&this.cr()},n.prototype.getCollapsed=function(){return this.Ki},n.prototype.render=function(t){this.ar(t.frameState)},n}(Ve),He=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$e=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var s=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"⇧",u=void 0!==r.compassClassName?r.compassClassName:"ol-compass";i.rr=null,"string"==typeof o?(i.rr=document.createElement("span"),i.rr.className=u,i.rr.textContent=o):(i.rr=o,i.rr.classList.add(u));var e=r.tipLabel?r.tipLabel:"Reset rotation",h=document.createElement("button");h.className=s+"-reset",h.setAttribute("type","button"),h.title=e,h.appendChild(i.rr),h.addEventListener(R,i.ur.bind(i),!1);var f=s+" "+"ol-unselectable "+vu,a=i.element;return a.className=f,a.appendChild(h),i.vr=r.resetNorth?r.resetNorth:void 0,i.lr=void 0!==r.duration?r.duration:250,i.dr=void 0===r.autoHide||r.autoHide,i.wr=void 0,i.dr&&i.element.classList.add(hu),i}return He(n,t),n.prototype.ur=function(t){t.preventDefault(),void 0!==this.vr?this.vr():this.pr()},n.prototype.pr=function(){var t=this.getMap().getView();if(t){var n=t.getRotation();void 0!==n&&(this.lr>0&&n%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.lr,easing:dt}):t.setRotation(0))}},n.prototype.render=function(t){var n=t.frameState;if(n){var i=n.viewState.rotation;if(i!=this.wr){var r="rotate("+i+"rad)";if(this.dr){var s=this.element.classList.contains(hu);s||0!==i?s&&0!==i&&this.element.classList.remove(hu):this.element.classList.add(hu)}this.rr.style.transform=r}this.wr=i}},n}(Ve),Ke=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qe=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),target:r.target})||this;var s=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,u=void 0!==r.zoomInClassName?r.zoomInClassName:s+"-in",e=void 0!==r.zoomOutClassName?r.zoomOutClassName:s+"-out",h=void 0!==r.zoomInLabel?r.zoomInLabel:"+",f=void 0!==r.zoomOutLabel?r.zoomOutLabel:"–",a=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",c=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",v=document.createElement("button");v.className=u,v.setAttribute("type","button"),v.title=a,v.appendChild("string"==typeof h?document.createTextNode(h):h),v.addEventListener(R,i.ur.bind(i,o),!1);var l=document.createElement("button");l.className=e,l.setAttribute("type","button"),l.title=c,l.appendChild("string"==typeof f?document.createTextNode(f):f),l.addEventListener(R,i.ur.bind(i,-o),!1);var d=s+" "+"ol-unselectable "+vu,w=i.element;return w.className=d,w.appendChild(v),w.appendChild(l),i.lr=void 0!==r.duration?r.duration:250,i}return Ke(n,t),n.prototype.ur=function(t,n){n.preventDefault(),this.yr(t)},n.prototype.yr=function(t){var n=this.getMap().getView();if(n){var i=n.getZoom();if(void 0!==i){var r=n.getConstrainedZoom(i+t);this.lr>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.lr,easing:dt})):n.setZoom(r)}}},n}(Ve);function th(t){var n=t||{},i=new et;return(void 0===n.zoom||n.zoom)&&i.push(new Qe(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&i.push(new $e(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&i.push(new Je(n.attributionOptions)),i}var nh="active",ih=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function rh(t,n,i){var r=t.getCenterInternal();if(r){var s=[r[0]+n[0],r[1]+n[1]];t.animateInternal({duration:void 0!==i?i:250,easing:pt,center:t.getConstrainedCenter(s)})}}function sh(t,n,i,r){var s=t.getZoom();if(void 0!==s){var o=t.getConstrainedZoom(s+n),u=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:u,anchor:i,duration:void 0!==r?r:250,easing:dt})}}var oh=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,n&&n.handleEvent&&(i.handleEvent=n.handleEvent),i.Vt=null,i.setActive(!0),i}return ih(n,t),n.prototype.getActive=function(){return this.get(nh)},n.prototype.getMap=function(){return this.Vt},n.prototype.handleEvent=function(t){return!0},n.prototype.setActive=function(t){this.set(nh,t)},n.prototype.setMap=function(t){this.Vt=t},n}(nt),uh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),eh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.br=r.delta?r.delta:1,i.lr=void 0!==r.duration?r.duration:250,i}return uh(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==Hu.DBLCLICK){var i=t.originalEvent,r=t.map,s=t.coordinate,o=i.shiftKey?-this.br:this.br;sh(r.getView(),o,s,this.lr),i.preventDefault(),n=!0}return!n},n}(oh),hh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function fh(t){for(var n=t.length,i=0,r=0,s=0;s<n;s++)i+=t[s].clientX,r+=t[s].clientY;return[i/n,r/n]}var ah=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,r)||this,r.handleDownEvent&&(i.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(i.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(i.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(i.handleUpEvent=r.handleUpEvent),r.stopDown&&(i.stopDown=r.stopDown),i.handlingDownUpSequence=!1,i._r={},i.targetPointers=[],i}return hh(n,t),n.prototype.getPointerCount=function(){return this.targetPointers.length},n.prototype.handleDownEvent=function(t){return!1},n.prototype.handleDragEvent=function(t){},n.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.gr(t),this.handlingDownUpSequence){if(t.type==Hu.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Hu.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Hu.POINTERDOWN){var r=this.handleDownEvent(t);this.handlingDownUpSequence=r,n=this.stopDown(r)}else t.type==Hu.POINTERMOVE&&this.handleMoveEvent(t);return!n},n.prototype.handleMoveEvent=function(t){},n.prototype.handleUpEvent=function(t){return!1},n.prototype.stopDown=function(t){return t},n.prototype.gr=function(t){if(function(t){var n=t.type;return n===Hu.POINTERDOWN||n===Hu.POINTERDRAG||n===Hu.POINTERUP}(t)){var n=t.originalEvent,i=n.pointerId.toString();t.type==Hu.POINTERUP?delete this._r[i]:(t.type==Hu.POINTERDOWN||i in this._r)&&(this._r[i]=n),this.targetPointers=T(this._r)}},n}(oh);function ch(t){var n=arguments;return function(t){for(var i=!0,r=0,s=n.length;r<s&&(i=i&&n[r](t));++r);return i}}var vh=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},lh=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},dh=function(t){return t.target.getTargetElement().contains(document.activeElement)},wh=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||dh(t)},ph=O,yh=function(t){var n=t.originalEvent;return 0==n.button&&!(Ft&&Dt&&n.ctrlKey)},bh=M,_h=function(t){return t.type==Hu.SINGLECLICK},gh=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},mh=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},Oh=function(t){var n=t.originalEvent.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n},Mh=function(t){var n=t.originalEvent;return mt(void 0!==n,56),"mouse"==n.pointerType},jh=function(t){var n=t.originalEvent;return mt(void 0!==n,56),n.isPrimary&&0===n.button},xh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Eh=function(t){function n(n){var i=t.call(this,{stopDown:M})||this,r=n||{};i.mr=r.kinetic,i.lastCentroid=null,i.Mr,i.jr=!1;var s=r.condition?r.condition:ch(gh,jh);return i.Er=r.onFocusOnly?ch(wh,s):s,i.Sr=!1,i}return xh(n,t),n.prototype.handleDragEvent=function(t){this.jr||(this.jr=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=fh(n);if(n.length==this.Mr){if(this.mr&&this.mr.update(i[0],i[1]),this.lastCentroid){var r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=t.map.getView();Hi(r,s.getResolution()),Ji(r,s.getRotation()),s.adjustCenterInternal(r)}}else this.mr&&this.mr.begin();this.lastCentroid=i,this.Mr=n.length,t.originalEvent.preventDefault()},n.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(0===this.targetPointers.length){if(!this.Sr&&this.mr&&this.mr.end()){var r=this.mr.getDistance(),s=this.mr.getAngle(),o=i.getCenterInternal(),u=n.getPixelFromCoordinateInternal(o),e=n.getCoordinateFromPixelInternal([u[0]-r*Math.cos(s),u[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(e),duration:500,easing:dt})}return this.jr&&(this.jr=!1,i.endInteraction()),!1}return this.mr&&this.mr.begin(),this.lastCentroid=null,!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.Er(t)){var n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.mr&&this.mr.begin(),this.Sr=this.targetPointers.length>1,!0}return!1},n}(ah),Sh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Th=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,{stopDown:M})||this).Er=r.condition?r.condition:lh,i.Tr=void 0,i.lr=void 0!==r.duration?r.duration:250,i}return Sh(n,t),n.prototype.handleDragEvent=function(t){if(Mh(t)){var n=t.map,i=n.getView();if(i.getConstraints().rotation!==Te){var r=n.getSize(),s=t.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(void 0!==this.Tr){var u=o-this.Tr;i.adjustRotationInternal(-u)}this.Tr=o}}},n.prototype.handleUpEvent=function(t){return!Mh(t)||(t.map.getView().endInteraction(this.lr),!1)},n.prototype.handleDownEvent=function(t){return!!Mh(t)&&(!(!yh(t)||!this.Er(t))&&(t.map.getView().beginInteraction(),this.Tr=void 0,!0))},n}(ah),Ah=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ch=function(t){function n(n){var i=t.call(this)||this;return i.Ar=null,i.Jt=document.createElement("div"),i.Jt.style.position="absolute",i.Jt.style.pointerEvents="auto",i.Jt.className="ol-box "+n,i.Vt=null,i.Cr=null,i.Nr=null,i}return Ah(n,t),n.prototype.disposeInternal=function(){this.setMap(null)},n.prototype.kr=function(){var t=this.Cr,n=this.Nr,i="px",r=this.Jt.style;r.left=Math.min(t[0],n[0])+i,r.top=Math.min(t[1],n[1])+i,r.width=Math.abs(n[0]-t[0])+i,r.height=Math.abs(n[1]-t[1])+i},n.prototype.setMap=function(t){if(this.Vt){this.Vt.getOverlayContainer().removeChild(this.Jt);var n=this.Jt.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.Vt=t,this.Vt&&this.Vt.getOverlayContainer().appendChild(this.Jt)},n.prototype.setPixels=function(t,n){this.Cr=t,this.Nr=n,this.createOrUpdateGeometry(),this.kr()},n.prototype.createOrUpdateGeometry=function(){var t=this.Cr,n=this.Nr,i=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.Vt.getCoordinateFromPixelInternal,this.Vt);i[4]=i[0].slice(),this.Ar?this.Ar.setCoordinates([i]):this.Ar=new Rs([i])},n.prototype.getGeometry=function(){return this.Ar},n}(l),Nh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kh="boxstart",Ih="boxdrag",Ph="boxend",Rh="boxcancel",Gh=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.coordinate=i,s.mapBrowserEvent=r,s}return Nh(n,t),n}(c),Lh=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.Ir=new Ch(r.className||"ol-dragbox"),i.Pr=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(i.onBoxEnd=r.onBoxEnd),i.Cr=null,i.Er=r.condition?r.condition:yh,i.Rr=r.boxEndCondition?r.boxEndCondition:i.defaultBoxEndCondition,i}return Nh(n,t),n.prototype.defaultBoxEndCondition=function(t,n,i){var r=i[0]-n[0],s=i[1]-n[1];return r*r+s*s>=this.Pr},n.prototype.getGeometry=function(){return this.Ir.getGeometry()},n.prototype.handleDragEvent=function(t){this.Ir.setPixels(this.Cr,t.pixel),this.dispatchEvent(new Gh(Ih,t.coordinate,t))},n.prototype.handleUpEvent=function(t){this.Ir.setMap(null);var n=this.Rr(t,this.Cr,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new Gh(n?Ph:Rh,t.coordinate,t)),!1},n.prototype.handleDownEvent=function(t){return!!this.Er(t)&&(this.Cr=t.pixel,this.Ir.setMap(t.map),this.Ir.setPixels(this.Cr,this.Cr),this.dispatchEvent(new Gh(kh,t.coordinate,t)),!0)},n.prototype.onBoxEnd=function(t){},n}(ah),Fh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Dh=function(t){function n(n){var i=this,r=n||{},s=r.condition?r.condition:mh;return(i=t.call(this,{condition:s,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).lr=void 0!==r.duration?r.duration:200,i.Gr=void 0!==r.out&&r.out,i}return Fh(n,t),n.prototype.onBoxEnd=function(t){var n=this.getMap().getView(),i=this.getGeometry();if(this.Gr){var r=n.rotatedExtentForGeometry(i),s=n.getResolutionForExtentInternal(r),o=n.getResolution()/s;(i=i.clone()).scale(o*o)}n.fitInternal(i,{duration:this.lr,easing:dt})},n}(Lh),zh=37,Uh=38,Xh=39,Yh=40,Wh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Lr=function(t){return gh(t)&&Oh(t)},i.Er=void 0!==r.condition?r.condition:i.Lr,i.lr=void 0!==r.duration?r.duration:100,i.Fr=void 0!==r.pixelDelta?r.pixelDelta:128,i}return Wh(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==z){var i=t.originalEvent,r=i.keyCode;if(this.Er(t)&&(r==Yh||r==zh||r==Xh||r==Uh)){var s=t.map.getView(),o=s.getResolution()*this.Fr,u=0,e=0;r==Yh?e=-o:r==zh?u=-o:r==Xh?u=o:e=o;var h=[u,e];Ji(h,s.getRotation()),rh(s,h,this.lr),i.preventDefault(),n=!0}}return!n},n}(oh),Bh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Vh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Er=r.condition?r.condition:Oh,i.br=r.delta?r.delta:1,i.lr=void 0!==r.duration?r.duration:100,i}return Bh(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==z||t.type==U){var i=t.originalEvent,r=i.charCode;if(this.Er(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var s=t.map,o=r=="+".charCodeAt(0)?this.br:-this.br;sh(s.getView(),o,void 0,this.lr),i.preventDefault(),n=!0}}return!n},n}(oh),Zh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Jh="trackpad",Hh="wheel",$h=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,r)||this).Dr=0,i.zr=0,i.nt=void 0!==r.maxDelta?r.maxDelta:1,i.lr=void 0!==r.duration?r.duration:250,i.Ur=void 0!==r.timeout?r.timeout:80,i.Xr=void 0===r.useAnchor||r.useAnchor,i.Yr=void 0!==r.constrainResolution&&r.constrainResolution;var s=r.condition?r.condition:ph;return i.Er=r.onFocusOnly?ch(wh,s):s,i.Wr=null,i.qr=void 0,i.Br,i.Vr=void 0,i.Zr=400,i.Jr,i.Hr=300,i}return Zh(n,t),n.prototype.$r=function(){this.Jr=void 0,this.getMap().getView().endInteraction(void 0,this.zr?this.zr>0?1:-1:0,this.Wr)},n.prototype.handleEvent=function(t){if(!this.Er(t))return!0;if(t.type!==q)return!0;var n,i=t.map,r=t.originalEvent;if(r.preventDefault(),this.Xr&&(this.Wr=t.coordinate),t.type==q&&(n=r.deltaY,Gt&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=zt),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.zr=n;var s=Date.now();void 0===this.qr&&(this.qr=s),(!this.Vr||s-this.qr>this.Zr)&&(this.Vr=Math.abs(n)<4?Jh:Hh);var o=i.getView();if(this.Vr===Jh&&!o.getConstrainResolution()&&!this.Yr)return this.Jr?clearTimeout(this.Jr):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.Jr=setTimeout(this.$r.bind(this),this.Ur),o.adjustZoom(-n/this.Hr,this.Wr),this.qr=s,!1;this.Dr+=n;var u=Math.max(this.Ur-(s-this.qr),0);return clearTimeout(this.Br),this.Br=setTimeout(this.Kr.bind(this,i),u),!1},n.prototype.Kr=function(t){var n=t.getView();n.getAnimating()&&n.cancelAnimations();var i=-ii(this.Dr,-this.nt*this.Hr,this.nt*this.Hr)/this.Hr;(n.getConstrainResolution()||this.Yr)&&(i=i?i>0?1:-1:0),sh(n,i,this.Wr,this.lr),this.Vr=void 0,this.Dr=0,this.Wr=null,this.qr=void 0,this.Br=void 0},n.prototype.setMouseAnchor=function(t){this.Xr=t,t||(this.Wr=null)},n}(oh),Kh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qh=function(t){function n(n){var i=this,r=n||{},s=r;return s.stopDown||(s.stopDown=M),(i=t.call(this,s)||this).Qr=null,i.Tr=void 0,i.ts=!1,i.ns=0,i.rs=void 0!==r.threshold?r.threshold:.3,i.lr=void 0!==r.duration?r.duration:250,i}return Kh(n,t),n.prototype.handleDragEvent=function(t){var n=0,i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.Tr){var o=s-this.Tr;this.ns+=o,!this.ts&&Math.abs(this.ns)>this.rs&&(this.ts=!0),n=o}this.Tr=s;var u=t.map,e=u.getView();if(e.getConstraints().rotation!==Te){var h=u.getViewport().getBoundingClientRect(),f=fh(this.targetPointers);f[0]-=h.left,f[1]-=h.top,this.Qr=u.getCoordinateFromPixelInternal(f),this.ts&&(u.render(),e.adjustRotationInternal(n,this.Qr))}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.lr),!1)},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.Qr=null,this.Tr=void 0,this.ts=!1,this.ns=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(ah),tf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),nf=function(t){function n(n){var i=this,r=n||{},s=r;return s.stopDown||(s.stopDown=M),(i=t.call(this,s)||this).Qr=null,i.lr=void 0!==r.duration?r.duration:400,i.ss=void 0,i.os=1,i}return tf(n,t),n.prototype.handleDragEvent=function(t){var n=1,i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,u=Math.sqrt(s*s+o*o);void 0!==this.ss&&(n=this.ss/u),this.ss=u;var e=t.map,h=e.getView();1!=n&&(this.os=n);var f=e.getViewport().getBoundingClientRect(),a=fh(this.targetPointers);a[0]-=f.left,a[1]-=f.top,this.Qr=e.getCoordinateFromPixelInternal(a),e.render(),h.adjustResolutionInternal(n,this.Qr)},n.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map.getView(),i=this.os>1?1:-1;return n.endInteraction(this.lr,i),!1}return!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.Qr=null,this.ss=void 0,this.os=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(ah);function rf(t){var n=t||{},i=new et,r=new mo(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&i.push(new Th),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&i.push(new eh({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&i.push(new Eh({onFocusOnly:n.onFocusOnly,kinetic:r})),(void 0===n.pinchRotate||n.pinchRotate)&&i.push(new Qh),(void 0===n.pinchZoom||n.pinchZoom)&&i.push(new nf({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(i.push(new qh),i.push(new Vh({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&i.push(new $h({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&i.push(new Dh({duration:n.zoomDuration})),i}var sf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),of=function(t){function n(n){return(n=E({},n)).controls||(n.controls=th()),n.interactions||(n.interactions=rf({onFocusOnly:!0})),t.call(this,n)||this}return sf(n,t),n.prototype.createRenderer=function(){return new Xu(this)},n}(qe),uf="bottom-left",ef="bottom-center",hf="bottom-right",ff="center-left",af="center-center",cf="center-right",vf="top-left",lf="top-center",df="top-right";function wf(t){return(wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var pf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yf="element",bf="map",_f="offset",gf="position",mf="positioning",Of=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un,i.options=n,i.id=n.id,i.insertFirst=void 0===n.insertFirst||n.insertFirst,i.stopEvent=void 0===n.stopEvent||n.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==n.className?n.className:"ol-overlay-container ol-selectable",i.element.style.position="absolute",i.element.style.pointerEvents="auto";var r=n.autoPan;return r&&"object"!==wf(r)&&(r={animation:n.autoPanAnimation,margin:n.autoPanMargin}),i.autoPan=r||!1,i.rendered={ft:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(yf,i.handleElementChanged),i.addChangeListener(bf,i.handleMapChanged),i.addChangeListener(_f,i.handleOffsetChanged),i.addChangeListener(gf,i.handlePositionChanged),i.addChangeListener(mf,i.handlePositioningChanged),void 0!==n.element&&i.setElement(n.element),i.setOffset(void 0!==n.offset?n.offset:[0,0]),i.setPositioning(void 0!==n.positioning?n.positioning:vf),void 0!==n.position&&i.setPosition(n.position),i}return pf(n,t),n.prototype.getElement=function(){return this.get(yf)},n.prototype.getId=function(){return this.id},n.prototype.getMap=function(){return this.get(bf)},n.prototype.getOffset=function(){return this.get(_f)},n.prototype.getPosition=function(){return this.get(gf)},n.prototype.getPositioning=function(){return this.get(mf)},n.prototype.handleElementChanged=function(){yo(this.element);var t=this.getElement();t&&this.element.appendChild(t)},n.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(po(this.element),Z(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=B(t,re,this.render,this),this.updatePixelPosition();var n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}},n.prototype.render=function(){this.updatePixelPosition()},n.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},n.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},n.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},n.prototype.setElement=function(t){this.set(yf,t)},n.prototype.setMap=function(t){this.set(bf,t)},n.prototype.setOffset=function(t){this.set(_f,t)},n.prototype.setPosition=function(t){this.set(gf,t)},n.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},n.prototype.panIntoView=function(t){var n=this.getMap();if(n&&n.getTargetElement()&&this.get(gf)){var i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),s=this.getRect(r,[vo(r),lo(r)]),o=t||{},u=void 0===o.margin?20:o.margin;if(!gn(i,s)){var e=s[0]-i[0],h=i[2]-s[2],f=s[1]-i[1],a=i[3]-s[3],c=[0,0];if(e<0?c[0]=e-u:h<0&&(c[0]=Math.abs(h)+u),f<0?c[1]=f-u:a<0&&(c[1]=Math.abs(a)+u),0!==c[0]||0!==c[1]){var v=n.getView().getCenterInternal(),l=n.getPixelFromCoordinateInternal(v);if(!l)return;var d=[l[0]+c[0],l[1]+c[1]],w=o.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(d),duration:w.duration,easing:w.easing})}}}},n.prototype.getRect=function(t,n){var i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+n[0],s+n[1]]},n.prototype.setPositioning=function(t){this.set(mf,t)},n.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},n.prototype.updatePixelPosition=function(){var t=this.getMap(),n=this.getPosition();if(t&&t.isRendered()&&n){var i=t.getPixelFromCoordinate(n),r=t.getSize();this.updateRenderedPosition(i,r)}else this.setVisible(!1)},n.prototype.updateRenderedPosition=function(t,n){var i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+r[0])+"px",u=Math.round(t[1]+r[1])+"px",e="0%",h="0%";s==hf||s==cf||s==df?e="-100%":s!=ef&&s!=af&&s!=lf||(e="-50%"),s==uf||s==ef||s==hf?h="-100%":s!=ff&&s!=af&&s!=cf||(h="-50%");var f="translate("+e+", "+h+") translate("+o+", "+u+")";this.rendered.ft!=f&&(this.rendered.ft=f,i.transform=f,i.msTransform=f)},n.prototype.getOptions=function(){return this.options},n}(nt),Mf=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.us=0,this.es={},this.hs=null,this.fs=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.us=0,this.es={},this.hs=null,this.fs=null},t.prototype.containsKey=function(t){return this.es.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var n=this.hs;n;)t(n.cs,n.vs,this),n=n.newer},t.prototype.get=function(t,n){var i=this.es[t];return mt(void 0!==i,15),i===this.fs||(i===this.hs?(this.hs=this.hs.newer,this.hs.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.fs,this.fs.newer=i,this.fs=i),i.cs},t.prototype.remove=function(t){var n=this.es[t];return mt(void 0!==n,15),n===this.fs?(this.fs=n.older,this.fs&&(this.fs.newer=null)):n===this.hs?(this.hs=n.newer,this.hs&&(this.hs.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.es[t],--this.us,n.cs},t.prototype.getCount=function(){return this.us},t.prototype.getKeys=function(){var t,n=new Array(this.us),i=0;for(t=this.fs;t;t=t.older)n[i++]=t.vs;return n},t.prototype.getValues=function(){var t,n=new Array(this.us),i=0;for(t=this.fs;t;t=t.older)n[i++]=t.cs;return n},t.prototype.peekLast=function(){return this.hs.cs},t.prototype.peekLastKey=function(){return this.hs.vs},t.prototype.peekFirstKey=function(){return this.fs.vs},t.prototype.pop=function(){var t=this.hs;return delete this.es[t.vs],t.newer&&(t.newer.older=null),this.hs=t.newer,this.hs||(this.fs=null),--this.us,t.cs},t.prototype.replace=function(t,n){this.get(t),this.es[t].cs=n},t.prototype.set=function(t,n){mt(!(t in this.es),16);var i={vs:t,newer:null,older:this.fs,cs:n};this.fs?this.fs.newer=i:this.hs=i,this.fs=i,this.es[t]=i,++this.us},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function jf(t,n,i,r){return void 0!==r?(r[0]=t,r[1]=n,r[2]=i,r):[t,n,i]}function xf(t,n,i){return t+"/"+n+"/"+i}function Ef(t){return xf(t[0],t[1],t[2])}function Sf(t){return t.split("/").map(Number)}function Tf(t){return(t[1]<<t[0])+t[2]}function Af(t,n){var i=t[0],r=t[1],s=t[2];if(n.getMinZoom()>i||i>n.getMaxZoom())return!1;var o=n.getFullTileRange(i);return!o||o.containsXY(r,s)}var Cf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Nf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Cf(n,t),n.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},n.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=Sf(this.peekFirstKey())[0];this.forEach(function(n){n.tileCoord[0]!==t&&(this.remove(Ef(n.tileCoord)),n.release())}.bind(this))}},n}(Mf),kf=function(){function t(t,n,i,r){this.minX=t,this.maxX=n,this.minY=i,this.maxY=r}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function If(t,n,i,r,s){return void 0!==s?(s.minX=t,s.maxX=n,s.minY=i,s.maxY=r,s):new kf(t,n,i,r)}var Pf=kf,Rf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Gf=[],Lf=function(t){function n(n,i,r,s){var o=t.call(this,n,i,{transition:0})||this;return o.ls={},o.executorGroups={},o.declutterExecutorGroups={},o.loadingSourceTiles=0,o.hitDetectionImageData={},o.ds={},o.sourceTiles=[],o.errorTileKeys={},o.wantedResolution,o.getSourceTiles=s.bind(void 0,o),o.wrappedTileCoord=r,o}return Rf(n,t),n.prototype.getContext=function(t){var n=o(t);return n in this.ls||(this.ls[n]=co(1,1,Gf)),this.ls[n]},n.prototype.hasContext=function(t){return o(t)in this.ls},n.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},n.prototype.getReplayState=function(t){var n=o(t);return n in this.ds||(this.ds[n]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.ds[n]},n.prototype.load=function(){this.getSourceTiles()},n.prototype.release=function(){for(var n in this.ls)Gf.push(this.ls[n].canvas),delete this.ls[n];t.prototype.release.call(this)},n}(bt);function Ff(t){return Array.isArray(t)?Ao(t):t}var Df="arraybuffer",zf="json",Uf="text",Xf="xml",Yf=!1;function Wf(t,n,i,r,s,o,u){var e=new XMLHttpRequest;e.open("GET","function"==typeof t?t(i,r,s):t,!0),n.getType()==Df&&(e.responseType="arraybuffer"),e.withCredentials=Yf,e.onload=function(t){if(!e.status||e.status>=200&&e.status<300){var r=n.getType(),h=void 0;r==zf||r==Uf?h=e.responseText:r==Xf?(h=e.responseXML)||(h=(new DOMParser).parseFromString(e.responseText,"application/xml")):r==Df&&(h=e.response),h?o(n.readFeatures(h,{extent:i,featureProjection:s}),n.readProjection(h)):u()}else u()},e.onerror=u,e.send()}function qf(t,n){return function(i,r,s,o,u){var e=this;Wf(t,n,i,r,s,(function(t,n){e.addFeatures(t),void 0!==o&&o(t)}),u||j)}}function Bf(t,n){return[[-1/0,-1/0,1/0,1/0]]}var Vf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var Zf,Jf=function(t){function n(n){var i=this,r="Unexpected response status: "+n.status;return(i=t.call(this,r)||this).name="ResponseError",i.response=n,i}return Vf(n,t),n}(Error),Hf=function(t){function n(n){var i=t.call(this,"Failed to issue request")||this;return i.name="ClientError",i.client=n,i}return Vf(n,t),n}(Error);var $f=function(){function t(){}return t.prototype.drawCustom=function(t,n,i,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,n){},t.prototype.drawFeature=function(t,n){},t.prototype.drawGeometryCollection=function(t,n){},t.prototype.drawLineString=function(t,n){},t.prototype.drawMultiLineString=function(t,n){},t.prototype.drawMultiPoint=function(t,n){},t.prototype.drawMultiPolygon=function(t,n){},t.prototype.drawPoint=function(t,n){},t.prototype.drawPolygon=function(t,n){},t.prototype.drawText=function(t,n){},t.prototype.setFillStrokeStyle=function(t,n){},t.prototype.setImageStyle=function(t,n){},t.prototype.setTextStyle=function(t,n){},t}(),Kf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qf=function(t){function n(n,i,r,s,o,u,e){var h=t.call(this)||this;return h.ls=n,h.yt=i,h.U=r,h.ft=s,h.ws=o,h.ps=u,h.ys=e,h.bs=null,h._s=null,h.gs=null,h.Os=null,h.Ms=null,h._t=null,h.js=0,h.xs=0,h.Es=0,h.Ss=0,h.Ts=0,h.As=0,h.Cs=!1,h.Ns=0,h.ks=[0,0],h.Is=0,h.Ps="",h.Rs=0,h.Gs=0,h.Ls=!1,h.Fs=0,h.Ds=[0,0],h.zs=null,h.Us=null,h.Xs=null,h.Ys=[],h.Ws=[1,0,0,1,0,0],h}return Kf(n,t),n.prototype.qs=function(t,n,i,r){if(this._t){var s=Cr(t,n,i,r,this.ft,this.Ys),o=this.ls,u=this.Ws,e=o.globalAlpha;1!=this.Ss&&(o.globalAlpha=e*this.Ss);var h=this.Ns;this.Cs&&(h+=this.ws);for(var f=0,a=s.length;f<a;f+=2){var c=s[f]-this.js,v=s[f+1]-this.xs;if(0!==h||1!=this.ks[0]||1!=this.ks[1]){var l=c+this.js,d=v+this.xs;tn(u,l,d,1,1,h,-l,-d),o.setTransform.apply(o,u),o.translate(l,d),o.scale(this.ks[0],this.ks[1]),o.drawImage(this._t,this.Ts,this.As,this.Is,this.Es,-this.js,-this.xs,this.Is,this.Es),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this._t,this.Ts,this.As,this.Is,this.Es,c,v,this.Is,this.Es)}1!=this.Ss&&(o.globalAlpha=e)}},n.prototype.Bs=function(t,n,i,r){if(this.Xs&&""!==this.Ps){this.zs&&this.Vs(this.zs),this.Us&&this.Zs(this.Us),this.Js(this.Xs);var s=Cr(t,n,i,r,this.ft,this.Ys),o=this.ls,u=this.Fs;for(this.Ls&&(u+=this.ws);n<i;n+=r){var e=s[n]+this.Rs,h=s[n+1]+this.Gs;if(0!==u||1!=this.Ds[0]||1!=this.Ds[1]){var f=tn(this.Ws,e,h,1,1,u,-e,-h);o.setTransform.apply(o,f),o.translate(e,h),o.scale(this.Ds[0],this.Ds[1]),this.Us&&o.strokeText(this.Ps,0,0),this.zs&&o.fillText(this.Ps,0,0),o.setTransform(1,0,0,1,0,0)}else this.Us&&o.strokeText(this.Ps,e,h),this.zs&&o.fillText(this.Ps,e,h)}}},n.prototype.Hs=function(t,n,i,r,s){var o=this.ls,u=Cr(t,n,i,r,this.ft,this.Ys);o.moveTo(u[0],u[1]);var e=u.length;s&&(e-=2);for(var h=2;h<e;h+=2)o.lineTo(u[h],u[h+1]);return s&&o.closePath(),i},n.prototype.$s=function(t,n,i,r){for(var s=0,o=i.length;s<o;++s)n=this.Hs(t,n,i[s],r,!0);return n},n.prototype.drawCircle=function(t){if(Zn(this.U,t.getExtent())){if(this.Os||this.Ms){this.Os&&this.Vs(this.Os),this.Ms&&this.Zs(this.Ms);var n=Dr(t,this.ft,this.Ys),i=n[2]-n[0],r=n[3]-n[1],s=Math.sqrt(i*i+r*r),o=this.ls;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.Os&&o.fill(),this.Ms&&o.stroke()}""!==this.Ps&&this.Bs(t.getCenter(),0,2,2)}},n.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},n.prototype.setTransform=function(t){this.ft=t},n.prototype.drawGeometry=function(t){switch(t.getType()){case At.POINT:this.drawPoint(t);break;case At.LINE_STRING:this.drawLineString(t);break;case At.POLYGON:this.drawPolygon(t);break;case At.MULTI_POINT:this.drawMultiPoint(t);break;case At.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case At.MULTI_POLYGON:this.drawMultiPolygon(t);break;case At.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case At.CIRCLE:this.drawCircle(t)}},n.prototype.drawFeature=function(t,n){var i=n.getGeometryFunction()(t);i&&Zn(this.U,i.getExtent())&&(this.setStyle(n),this.drawGeometry(i))},n.prototype.drawGeometryCollection=function(t){for(var n=t.getGeometriesArray(),i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])},n.prototype.drawPoint=function(t){this.ps&&(t=t.simplifyTransformed(this.ps,this.ys));var n=t.getFlatCoordinates(),i=t.getStride();this._t&&this.qs(n,0,n.length,i),""!==this.Ps&&this.Bs(n,0,n.length,i)},n.prototype.drawMultiPoint=function(t){this.ps&&(t=t.simplifyTransformed(this.ps,this.ys));var n=t.getFlatCoordinates(),i=t.getStride();this._t&&this.qs(n,0,n.length,i),""!==this.Ps&&this.Bs(n,0,n.length,i)},n.prototype.drawLineString=function(t){if(this.ps&&(t=t.simplifyTransformed(this.ps,this.ys)),Zn(this.U,t.getExtent())){if(this.Ms){this.Zs(this.Ms);var n=this.ls,i=t.getFlatCoordinates();n.beginPath(),this.Hs(i,0,i.length,t.getStride(),!1),n.stroke()}if(""!==this.Ps){var r=t.getFlatMidpoint();this.Bs(r,0,2,2)}}},n.prototype.drawMultiLineString=function(t){this.ps&&(t=t.simplifyTransformed(this.ps,this.ys));var n=t.getExtent();if(Zn(this.U,n)){if(this.Ms){this.Zs(this.Ms);var i=this.ls,r=t.getFlatCoordinates(),s=0,o=t.getEnds(),u=t.getStride();i.beginPath();for(var e=0,h=o.length;e<h;++e)s=this.Hs(r,s,o[e],u,!1);i.stroke()}if(""!==this.Ps){var f=t.getFlatMidpoints();this.Bs(f,0,f.length,2)}}},n.prototype.drawPolygon=function(t){if(this.ps&&(t=t.simplifyTransformed(this.ps,this.ys)),Zn(this.U,t.getExtent())){if(this.Ms||this.Os){this.Os&&this.Vs(this.Os),this.Ms&&this.Zs(this.Ms);var n=this.ls;n.beginPath(),this.$s(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.Os&&n.fill(),this.Ms&&n.stroke()}if(""!==this.Ps){var i=t.getFlatInteriorPoint();this.Bs(i,0,2,2)}}},n.prototype.drawMultiPolygon=function(t){if(this.ps&&(t=t.simplifyTransformed(this.ps,this.ys)),Zn(this.U,t.getExtent())){if(this.Ms||this.Os){this.Os&&this.Vs(this.Os),this.Ms&&this.Zs(this.Ms);var n=this.ls,i=t.getOrientedFlatCoordinates(),r=0,s=t.getEndss(),o=t.getStride();n.beginPath();for(var u=0,e=s.length;u<e;++u){var h=s[u];r=this.$s(i,r,h,o)}this.Os&&n.fill(),this.Ms&&n.stroke()}if(""!==this.Ps){var f=t.getFlatInteriorPoints();this.Bs(f,0,f.length,2)}}},n.prototype.Vs=function(t){var n=this.ls,i=this.bs;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.bs={fillStyle:t.fillStyle})},n.prototype.Zs=function(t){var n=this.ls,i=this._s;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),n.setLineDash&&(g(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this._s={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},n.prototype.Js=function(t){var n=this.ls,i=this.gs,r=t.textAlign?t.textAlign:xu;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=r,n.textBaseline=t.textBaseline,this.gs={font:t.font,textAlign:r,textBaseline:t.textBaseline})},n.prototype.setFillStrokeStyle=function(t,n){var i=this;if(t){var r=t.getColor();this.Os={fillStyle:Ff(r||_u)}}else this.Os=null;if(n){var s=n.getColor(),o=n.getLineCap(),u=n.getLineDash(),e=n.getLineDashOffset(),h=n.getLineJoin(),f=n.getWidth(),a=n.getMiterLimit(),c=u||mu;this.Ms={lineCap:void 0!==o?o:gu,lineDash:1===this.yt?c:c.map((function(t){return t*i.yt})),lineDashOffset:(e||0)*this.yt,lineJoin:void 0!==h?h:Ou,lineWidth:(void 0!==f?f:1)*this.yt,miterLimit:void 0!==a?a:Mu,strokeStyle:Ff(s||ju)}}else this.Ms=null},n.prototype.setImageStyle=function(t){var n;if(t&&(n=t.getSize())){var i=t.getAnchor(),r=t.getOrigin();this._t=t.getImage(this.yt),this.js=i[0]*this.yt,this.xs=i[1]*this.yt,this.Es=n[1]*this.yt,this.Ss=t.getOpacity(),this.Ts=r[0],this.As=r[1],this.Cs=t.getRotateWithView(),this.Ns=t.getRotation(),this.ks=t.getScaleArray(),this.Is=n[0]*this.yt}else this._t=null},n.prototype.setTextStyle=function(t){if(t){var n=t.getFill();if(n){var i=n.getColor();this.zs={fillStyle:Ff(i||_u)}}else this.zs=null;var r=t.getStroke();if(r){var s=r.getColor(),o=r.getLineCap(),u=r.getLineDash(),e=r.getLineDashOffset(),h=r.getLineJoin(),f=r.getWidth(),a=r.getMiterLimit();this.Us={lineCap:void 0!==o?o:gu,lineDash:u||mu,lineDashOffset:e||0,lineJoin:void 0!==h?h:Ou,lineWidth:void 0!==f?f:1,miterLimit:void 0!==a?a:Mu,strokeStyle:Ff(s||ju)}}else this.Us=null;var c=t.getFont(),v=t.getOffsetX(),l=t.getOffsetY(),d=t.getRotateWithView(),w=t.getRotation(),p=t.getScaleArray(),y=t.getText(),b=t.getTextAlign(),_=t.getTextBaseline();this.Xs={font:void 0!==c?c:bu,textAlign:void 0!==b?b:xu,textBaseline:void 0!==_?_:Eu},this.Ps=void 0!==y?y:"",this.Rs=void 0!==v?this.yt*v:0,this.Gs=void 0!==l?this.yt*l:0,this.Ls=void 0!==d&&d,this.Fs=void 0!==w?w:0,this.Ds=[this.yt*p[0],this.yt*p[1]]}else this.Ps=""},n}($f),ta="Circle",na="Default",ia="Image",ra="LineString",sa="Polygon",oa="Text",ua={Point:function(t,n,i,r,s){var o,u=i.getImage(),e=i.getText();s&&(t=s,o=u&&e&&e.getText()?{}:void 0);if(u){if(u.getImageState()!=ro)return;var h=t.getBuilder(i.getZIndex(),ia);h.setImageStyle(u,o),h.drawPoint(n,r)}if(e&&e.getText()){var f=t.getBuilder(i.getZIndex(),oa);f.setTextStyle(e,o),f.drawText(n,r)}},LineString:function(t,n,i,r,s){var o=i.getStroke();if(o){var u=t.getBuilder(i.getZIndex(),ra);u.setFillStrokeStyle(null,o),u.drawLineString(n,r)}var e=i.getText();if(e&&e.getText()){var h=(s||t).getBuilder(i.getZIndex(),oa);h.setTextStyle(e),h.drawText(n,r)}},Polygon:function(t,n,i,r,s){var o=i.getFill(),u=i.getStroke();if(o||u){var e=t.getBuilder(i.getZIndex(),sa);e.setFillStrokeStyle(o,u),e.drawPolygon(n,r)}var h=i.getText();if(h&&h.getText()){var f=(s||t).getBuilder(i.getZIndex(),oa);f.setTextStyle(h),f.drawText(n,r)}},MultiPoint:function(t,n,i,r,s){var o,u=i.getImage(),e=i.getText();s&&(t=s,o=u&&e&&e.getText()?{}:void 0);if(u){if(u.getImageState()!=ro)return;var h=t.getBuilder(i.getZIndex(),ia);h.setImageStyle(u,o),h.drawMultiPoint(n,r)}if(e&&e.getText()){var f=(s||t).getBuilder(i.getZIndex(),oa);f.setTextStyle(e,o),f.drawText(n,r)}},MultiLineString:function(t,n,i,r,s){var o=i.getStroke();if(o){var u=t.getBuilder(i.getZIndex(),ra);u.setFillStrokeStyle(null,o),u.drawMultiLineString(n,r)}var e=i.getText();if(e&&e.getText()){var h=(s||t).getBuilder(i.getZIndex(),oa);h.setTextStyle(e),h.drawText(n,r)}},MultiPolygon:function(t,n,i,r,s){var o=i.getFill(),u=i.getStroke();if(u||o){var e=t.getBuilder(i.getZIndex(),sa);e.setFillStrokeStyle(o,u),e.drawMultiPolygon(n,r)}var h=i.getText();if(h&&h.getText()){var f=(s||t).getBuilder(i.getZIndex(),oa);f.setTextStyle(h),f.drawText(n,r)}},GeometryCollection:function(t,n,i,r,s){var o,u,e=n.getGeometriesArray();for(o=0,u=e.length;o<u;++o){(0,ua[e[o].getType()])(t,e[o],i,r,s)}},Circle:function(t,n,i,r,s){var o=i.getFill(),u=i.getStroke();if(o||u){var e=t.getBuilder(i.getZIndex(),ta);e.setFillStrokeStyle(o,u),e.drawCircle(n,r)}var h=i.getText();if(h&&h.getText()){var f=(s||t).getBuilder(i.getZIndex(),oa);f.setTextStyle(h),f.drawText(n,r)}}};function ea(t,n){return parseInt(o(t),10)-parseInt(o(n),10)}function ha(t,n){var i=fa(t,n);return i*i}function fa(t,n){return.5*t/n}function aa(t,n,i,r,s,o,u){var e=!1,h=i.getImage();if(h){var f=h.getImageState();f==ro||f==so?h.unlistenImageChange(s):(f==no&&h.load(),f=h.getImageState(),h.listenImageChange(s),e=!0)}return function(t,n,i,r,s,o){var u=i.getGeometryFunction()(n);if(!u)return;var e=u.simplifyTransformed(r,s);if(i.getRenderer())ca(t,e,i,n);else{(0,ua[e.getType()])(t,e,i,n,o)}}(t,n,i,r,o,u),e}function ca(t,n,i,r){if(n.getType()!=At.GEOMETRY_COLLECTION)t.getBuilder(i.getZIndex(),na).drawCustom(n,r,i.getRenderer(),i.getHitDetectionRenderer());else for(var s=n.getGeometries(),o=0,u=s.length;o<u;++o)ca(t,s[o],i,r)}function va(t){var n,i=t.inversePixelTransform[0],r=t.frameState,s=Vt(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),o=ha(r.viewState.resolution,i),u=mr();return u&&(n=wr(u,r.viewState.projection)),new Qf(t.context,i,r.extent,s,r.viewState.rotation,o,n)}var la,da="1.3.0",wa={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};function pa(t,n,i,r,s){t.beginPath(),t.moveTo(0,0),t.lineTo(n,i),t.lineTo(r,s),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(n,r)+1,Math.max(i,s)),t.restore()}function ya(t,n){return Math.abs(t[4*n]-210)>2||Math.abs(t[4*n+3]-191.25)>2}function ba(t,n,i,r){var s=yr(i,n,t),o=hr(n,r,i),u=n.getMetersPerUnit();void 0!==u&&(o*=u);var e=t.getMetersPerUnit();void 0!==e&&(o/=e);var h=t.getExtent();if(!h||_n(h,s)){var f=hr(t,o,s)/o;isFinite(f)&&f>0&&(o/=f)}return o}function _a(t,n,i,r){var s=zn(i),o=ba(t,n,s,r);return(!isFinite(o)||o<=0)&&Gn(i,(function(i){return o=ba(t,n,i,r),isFinite(o)&&o>0})),o}function ga(t,n,i,r,s,o,u,e,h,f,a,c){var v=co(Math.round(i*t),Math.round(i*n));if(E(v,c),0===h.length)return v.canvas;function l(t){return Math.round(t*i)/i}v.scale(i,i),v.globalCompositeOperation="lighter";var d=[1/0,1/0,-1/0,-1/0];h.forEach((function(t,n,i){Cn(d,t.extent)}));var w=Vn(d),p=Yn(d),y=co(Math.round(i*w/r),Math.round(i*p/r));E(y,c);var b=i/r;h.forEach((function(t,n,i){var r=t.extent[0]-d[0],s=-(t.extent[3]-d[3]),o=Vn(t.extent),u=Yn(t.extent);t.image.width>0&&t.image.height>0&&y.drawImage(t.image,f,f,t.image.width-2*f,t.image.height-2*f,r*b,s*b,o*b,u*b)}));var _=qn(u);return e.getTriangles().forEach((function(t,n,s){var u=t.source,e=t.target,h=u[0][0],f=u[0][1],a=u[1][0],w=u[1][1],p=u[2][0],b=u[2][1],g=l((e[0][0]-_[0])/o),m=l(-(e[0][1]-_[1])/o),O=l((e[1][0]-_[0])/o),M=l(-(e[1][1]-_[1])/o),j=l((e[2][0]-_[0])/o),x=l(-(e[2][1]-_[1])/o),E=h,S=f;h=0,f=0;var T=ei([[a-=E,w-=S,0,0,O-g],[p-=E,b-=S,0,0,j-g],[0,0,a,w,M-m],[0,0,p,b,x-m]]);if(T){if(v.save(),v.beginPath(),function(){if(void 0===la){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",pa(t,4,5,4,0),pa(t,4,5,0,5);var n=t.getImageData(0,0,3,3).data;la=ya(n,0)||ya(n,4)||ya(n,8)}return la}()||c===wa){v.moveTo(O,M);for(var A=g-O,C=m-M,N=0;N<4;N++)v.lineTo(O+l((N+1)*A/4),M+l(N*C/3)),3!=N&&v.lineTo(O+l((N+1)*A/4),M+l((N+1)*C/3));v.lineTo(j,x)}else v.moveTo(O,M),v.lineTo(g,m),v.lineTo(j,x);v.clip(),v.transform(T[0],T[2],T[1],T[3],g,m),v.translate(d[0]-E,d[3]-S),v.scale(r/i,-r/i),v.drawImage(y.canvas,0,0),v.restore()}})),a&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,e.getTriangles().forEach((function(t,n,i){var r=t.target,s=(r[0][0]-_[0])/o,u=-(r[0][1]-_[1])/o,e=(r[1][0]-_[0])/o,h=-(r[1][1]-_[1])/o,f=(r[2][0]-_[0])/o,a=-(r[2][1]-_[1])/o;v.beginPath(),v.moveTo(e,h),v.lineTo(s,u),v.lineTo(f,a),v.closePath(),v.stroke()})),v.restore()),v.canvas}var ma=[0,0,0],Oa=function(){function t(t){var n;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.ei=t.resolutions,mt(m(this.ei,(function(t,n){return n-t}),!0),17),!t.origins)for(var i=0,r=this.ei.length-1;i<r;++i)if(n){if(this.ei[i]/this.ei[i+1]!==n){n=void 0;break}}else n=this.ei[i]/this.ei[i+1];this.ui=n,this.maxZoom=this.ei.length-1,this.Ks=void 0!==t.origin?t.origin:null,this.Qs=null,void 0!==t.origins&&(this.Qs=t.origins,mt(this.Qs.length==this.ei.length,20));var s=t.extent;void 0===s||this.Ks||this.Qs||(this.Ks=qn(s)),mt(!this.Ks&&this.Qs||this.Ks&&!this.Qs,18),this.no=null,void 0!==t.tileSizes&&(this.no=t.tileSizes,mt(this.no.length==this.ei.length,19)),this.io=void 0!==t.tileSize?t.tileSize:this.no?null:ge,mt(!this.io&&this.no||this.io&&!this.no,22),this.U=void 0!==s?s:null,this.ro=null,this.so=[0,0],this.oo=[0,0,0,0],void 0!==t.sizes?this.ro=t.sizes.map((function(t,n){var i=new Pf(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(s){var r=this.getTileRangeForExtentAndZ(s,n);i.minX=Math.max(r.minX,i.minX),i.maxX=Math.min(r.maxX,i.maxX),i.minY=Math.max(r.minY,i.minY),i.maxY=Math.min(r.maxY,i.maxY)}return i}),this):s&&this.uo(s)}return t.prototype.forEachTileCoord=function(t,n,i){for(var r=this.getTileRangeForExtentAndZ(t,n),s=r.minX,o=r.maxX;s<=o;++s)for(var u=r.minY,e=r.maxY;u<=e;++u)i([n,s,u])},t.prototype.forEachTileCoordParentTileRange=function(t,n,i,r){var s,o,u=null,e=t[0]-1;for(2===this.ui?(s=t[1],o=t[2]):u=this.getTileCoordExtent(t,r);e>=this.minZoom;){if(n(e,2===this.ui?If(s=Math.floor(s/2),s,o=Math.floor(o/2),o,i):this.getTileRangeForExtentAndZ(u,e,i)))return!0;--e}return!1},t.prototype.getExtent=function(){return this.U},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.Ks?this.Ks:this.Qs[t]},t.prototype.getResolution=function(t){return this.ei[t]},t.prototype.getResolutions=function(){return this.ei},t.prototype.getTileCoordChildTileRange=function(t,n,i){if(t[0]<this.maxZoom){if(2===this.ui){var r=2*t[1],s=2*t[2];return If(r,r+1,s,s+1,n)}var o=this.getTileCoordExtent(t,i||this.oo);return this.getTileRangeForExtentAndZ(o,t[0]+1,n)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;var r=t[0],s=t[1],o=t[2];if(n===r)return If(s,o,s,o,i);if(this.ui){var u=Math.pow(this.ui,n-r),e=Math.floor(s*u),h=Math.floor(o*u);return n<r?If(e,e,h,h,i):If(e,Math.floor(u*(s+1))-1,h,Math.floor(u*(o+1))-1,i)}var f=this.getTileCoordExtent(t,this.oo);return this.getTileRangeForExtentAndZ(f,n,i)},t.prototype.getTileRangeExtent=function(t,n,i){var r=this.getOrigin(t),s=this.getResolution(t),o=Ye(this.getTileSize(t),this.so),u=r[0]+n.minX*o[0]*s,e=r[0]+(n.maxX+1)*o[0]*s;return jn(u,r[1]+n.minY*o[1]*s,e,r[1]+(n.maxY+1)*o[1]*s,i)},t.prototype.getTileRangeForExtentAndZ=function(t,n,i){var r=ma;this.eo(t[0],t[3],n,!1,r);var s=r[1],o=r[2];return this.eo(t[2],t[1],n,!0,r),If(s,r[1],o,r[2],i)},t.prototype.getTileCoordCenter=function(t){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Ye(this.getTileSize(t[0]),this.so);return[n[0]+(t[1]+.5)*r[0]*i,n[1]-(t[2]+.5)*r[1]*i]},t.prototype.getTileCoordExtent=function(t,n){var i=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=Ye(this.getTileSize(t[0]),this.so),o=i[0]+t[1]*s[0]*r,u=i[1]-(t[2]+1)*s[1]*r;return jn(o,u,o+s[0]*r,u+s[1]*r,n)},t.prototype.getTileCoordForCoordAndResolution=function(t,n,i){return this.ho(t[0],t[1],n,!1,i)},t.prototype.ho=function(t,n,i,r,s){var o=this.getZForResolution(i),u=i/this.getResolution(o),e=this.getOrigin(o),h=Ye(this.getTileSize(o),this.so),f=r?.5:0,a=r?.5:0,c=Math.floor((t-e[0])/i+f),v=Math.floor((e[1]-n)/i+a),l=u*c/h[0],d=u*v/h[1];return r?(l=Math.ceil(l)-1,d=Math.ceil(d)-1):(l=Math.floor(l),d=Math.floor(d)),jf(o,l,d,s)},t.prototype.eo=function(t,n,i,r,s){var o=this.getOrigin(i),u=this.getResolution(i),e=Ye(this.getTileSize(i),this.so),h=r?.5:0,f=r?.5:0,a=Math.floor((t-o[0])/u+h),c=Math.floor((o[1]-n)/u+f),v=a/e[0],l=c/e[1];return r?(v=Math.ceil(v)-1,l=Math.ceil(l)-1):(v=Math.floor(v),l=Math.floor(l)),jf(i,v,l,s)},t.prototype.getTileCoordForCoordAndZ=function(t,n,i){return this.eo(t[0],t[1],n,!1,i)},t.prototype.getTileCoordResolution=function(t){return this.ei[t[0]]},t.prototype.getTileSize=function(t){return this.io?this.io:this.no[t]},t.prototype.getFullTileRange=function(t){return this.ro?this.ro[t]:this.U?this.getTileRangeForExtentAndZ(this.U,t):null},t.prototype.getZForResolution=function(t,n){return ii(y(this.ei,t,n||0),this.minZoom,this.maxZoom)},t.prototype.uo=function(t){for(var n=this.ei.length,i=new Array(n),r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.ro=i},t}();function Ma(t){var n=t.getDefaultTileGrid();return n||(n=Ta(t),t.setDefaultTileGrid(n)),n}function ja(t,n,i){var r=n[0],s=t.getTileCoordCenter(n),o=Aa(i);if(_n(o,s))return n;var u=Vn(o),e=Math.ceil((o[0]-s[0])/u);return s[0]+=u*e,t.getTileCoordForCoordAndZ(s,r)}function xa(t,n,i,r){var s=void 0!==r?r:en,o=Sa(t,n,i);return new Oa({extent:t,origin:Un(t,s),resolutions:o,tileSize:i})}function Ea(t){var n=t||{},i=n.extent||er("EPSG:3857").getExtent(),r={extent:i,minZoom:n.minZoom,tileSize:n.tileSize,resolutions:Sa(i,n.maxZoom,n.tileSize,n.maxResolution)};return new Oa(r)}function Sa(t,n,i,r){for(var s=void 0!==n?n:42,o=Yn(t),u=Vn(t),e=Ye(void 0!==i?i:ge),h=r>0?r:Math.max(u/e[0],o/e[1]),f=s+1,a=new Array(f),c=0;c<f;++c)a[c]=h/Math.pow(2,c);return a}function Ta(t,n,i,r){return xa(Aa(t),n,i,r)}function Aa(t){var n=(t=er(t)).getExtent();if(!n){var i=180*kt[Pt.DEGREES]/t.getMetersPerUnit();n=jn(-i,-i,i,i)}return n}function Ca(t,n){var i=/\{z\}/g,r=/\{x\}/g,s=/\{y\}/g,o=/\{-y\}/g;return function(u,e,h){return u?t.replace(i,u[0].toString()).replace(r,u[1].toString()).replace(s,u[2].toString()).replace(o,(function(){var t=u[0],i=n.getFullTileRange(t);return mt(i,55),(i.getHeight()-u[2]-1).toString()})):void 0}}function Na(t,n){for(var i=t.length,r=new Array(i),s=0;s<i;++s)r[s]=Ca(t[s],n);return ka(r)}function ka(t){return 1===t.length?t[0]:function(n,i,r){if(n){var s=ai(Tf(n),t.length);return t[s](n,i,r)}}}function Ia(t){var n=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var r=i[1].charCodeAt(0),s=i[2].charCodeAt(0),o=void 0;for(o=r;o<=s;++o)n.push(t.replace(i[0],String.fromCharCode(o)));return n}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var u=parseInt(i[2],10),e=parseInt(i[1],10);e<=u;e++)n.push(t.replace(i[0],e.toString()));return n}return n.push(t),n}function Pa(t,n){var i=[];Object.keys(n).forEach((function(t){null!==n[t]&&void 0!==n[t]&&i.push(t+"="+encodeURIComponent(n[t]))}));var r=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}var Ra="http://www.w3.org/2001/XMLSchema-instance";function Ga(t,n){return ic().createElementNS(t,n)}function La(t,n){return Fa(t,n,[]).join("")}function Fa(t,n,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else{var r=void 0;for(r=t.firstChild;r;r=r.nextSibling)Fa(r,n,i)}return i}function Da(t){return"documentElement"in t}function za(t){return(new DOMParser).parseFromString(t,"application/xml")}function Ua(t,n){return function(i,r){var s=t.call(void 0!==n?n:this,i,r);void 0!==s&&r[r.length-1].push(s)}}function Xa(t,n,i){return function(r,s){var o=t.call(void 0!==i?i:this,r,s);void 0!==o&&(s[s.length-1][void 0!==n?n:r.localName]=o)}}function Ya(t,n){return function(i,r,s){t.call(void 0!==n?n:this,i,r,s),s[s.length-1].node.appendChild(i)}}function Wa(t,n){var i,r;return function(n,s,o){if(void 0===i){i={};var u={};u[n.localName]=t,i[n.namespaceURI]=u,r=qa(n.localName)}$a(i,r,s,o)}}function qa(t,n){var i=t;return function(t,r,s){var o=r[r.length-1].node,u=i;return void 0===u&&(u=s),Ga(void 0!==n?n:o.namespaceURI,u)}}var Ba=qa();function Va(t,n){for(var i=n.length,r=new Array(i),s=0;s<i;++s)r[s]=t[n[s]];return r}function Za(t,n,i){var r,s,o=void 0!==i?i:{};for(r=0,s=t.length;r<s;++r)o[t[r]]=n;return o}function Ja(t,n,i,r){var s;for(s=n.firstElementChild;s;s=s.nextElementSibling){var o=t[s.namespaceURI];if(void 0!==o){var u=o[s.localName];void 0!==u&&u.call(r,s,i)}}}function Ha(t,n,i,r,s){return r.push(t),Ja(n,i,r,s),r.pop()}function $a(t,n,i,r,s,o){for(var u,e,h=(void 0!==s?s:i).length,f=0;f<h;++f)void 0!==(u=i[f])&&void 0!==(e=n.call(void 0!==o?o:this,u,r,void 0!==s?s[f]:void 0))&&t[e.namespaceURI][e.localName].call(o,e,u,r)}function Ka(t,n,i,r,s,o,u){return s.push(t),$a(n,i,r,s,o,u),s.pop()}var Qa=void 0;function tc(){return void 0===Qa&&"undefined"!=typeof XMLSerializer&&(Qa=new XMLSerializer),Qa}var nc=void 0;function ic(){return void 0===nc&&"undefined"!=typeof document&&(nc=document.implementation.createDocument("","",null)),nc}function rc(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function sc(t,n){return t[0]=n[0],t[1]=n[1],t[4]=n[2],t[5]=n[3],t[12]=n[4],t[13]=n[5],t}var oc=function(){function t(t){this.fo=t.opacity,this.ao=t.rotateWithView,this.wr=t.rotation,this.co=t.scale,this.vo=Ye(t.scale),this.lo=t.displacement}return t.prototype.clone=function(){var n=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(n)?n.slice():n,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.fo},t.prototype.getRotateWithView=function(){return this.ao},t.prototype.getRotation=function(){return this.wr},t.prototype.getScale=function(){return this.co},t.prototype.getScaleArray=function(){return this.vo},t.prototype.getDisplacement=function(){return this.lo},t.prototype.getAnchor=function(){return r()},t.prototype.getImage=function(t){return r()},t.prototype.getHitDetectionImage=function(){return r()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return r()},t.prototype.getImageSize=function(){return r()},t.prototype.getOrigin=function(){return r()},t.prototype.getSize=function(){return r()},t.prototype.setOpacity=function(t){this.fo=t},t.prototype.setRotateWithView=function(t){this.ao=t},t.prototype.setRotation=function(t){this.wr=t},t.prototype.setScale=function(t){this.co=t,this.vo=Ye(t)},t.prototype.listenImageChange=function(t){r()},t.prototype.load=function(){r()},t.prototype.unlistenImageChange=function(t){r()},t}(),uc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ec=function(t){function n(n){var i=this,r=void 0!==n.rotateWithView&&n.rotateWithView;return(i=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==n.rotation?n.rotation:0,scale:void 0!==n.scale?n.scale:1,displacement:void 0!==n.displacement?n.displacement:[0,0]})||this).Et=void 0,i.do=null,i.wo=void 0!==n.fill?n.fill:null,i.Ks=[0,0],i.It=n.points,i.po=void 0!==n.radius?n.radius:n.radius1,i.yo=n.radius2,i.Pt=void 0!==n.angle?n.angle:0,i.bo=void 0!==n.stroke?n.stroke:null,i.Qr=null,i._o=null,i.mo=null,i.render(),i}return uc(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},n.prototype.getAnchor=function(){return this.Qr},n.prototype.getAngle=function(){return this.Pt},n.prototype.getFill=function(){return this.wo},n.prototype.getHitDetectionImage=function(){return this.do||this.Oo(this.mo),this.do},n.prototype.getImage=function(t){var n=this.Et[t];if(!n){var i=this.mo,r=co(i.size*t,i.size*t);this.Mo(i,r,t),n=r.canvas,this.Et[t]=n}return n},n.prototype.getPixelRatio=function(t){return t},n.prototype.getImageSize=function(){return this._o},n.prototype.getImageState=function(){return ro},n.prototype.getOrigin=function(){return this.Ks},n.prototype.getPoints=function(){return this.It},n.prototype.getRadius=function(){return this.po},n.prototype.getRadius2=function(){return this.yo},n.prototype.getSize=function(){return this._o},n.prototype.getStroke=function(){return this.bo},n.prototype.listenImageChange=function(t){},n.prototype.load=function(){},n.prototype.unlistenImageChange=function(t){},n.prototype.jo=function(t,n,i){if(0===n||this.It===1/0||"bevel"!==t&&"miter"!==t)return n;var r=this.po,s=void 0===this.yo?r:this.yo;if(r<s){var o=r;r=s,s=o}var u=void 0===this.yo?this.It:2*this.It,e=2*Math.PI/u,h=s*Math.sin(e),f=r-Math.sqrt(s*s-h*h),a=Math.sqrt(h*h+f*f),c=a/h;if("miter"===t&&c<=i)return c*n;var v=n/2/c,l=n/2*(f/a),d=Math.sqrt((r+v)*(r+v)+l*l)-r;if(void 0===this.yo||"bevel"===t)return 2*d;var w=r*Math.sin(e),p=s-Math.sqrt(r*r-w*w),y=Math.sqrt(w*w+p*p)/w;if(y<=i){var b=y*n/2-s-r;return 2*Math.max(d,b)}return 2*d},n.prototype.createRenderOptions=function(){var t,n=Ou,i=0,r=null,s=0,o=0;this.bo&&(null===(t=this.bo.getColor())&&(t=ju),t=Ff(t),void 0===(o=this.bo.getWidth())&&(o=1),r=this.bo.getLineDash(),s=this.bo.getLineDashOffset(),void 0===(n=this.bo.getLineJoin())&&(n=Ou),void 0===(i=this.bo.getMiterLimit())&&(i=Mu));var u=this.jo(n,o,i),e=Math.max(this.po,this.yo||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*e+u),lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}},n.prototype.render=function(){this.mo=this.createRenderOptions();var t=this.mo.size,n=this.getDisplacement();this.Et={},this.Qr=[t/2-n[0],t/2+n[1]],this._o=[t,t]},n.prototype.Mo=function(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.xo(n),this.wo){var r=this.wo.getColor();null===r&&(r=_u),n.fillStyle=Ff(r),n.fill()}this.bo&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,n.setLineDash&&t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n.prototype.Oo=function(t){if(this.wo){var n=this.wo.getColor(),i=0;if("string"==typeof n&&(n=So(n)),null===n?i=1:Array.isArray(n)&&(i=4===n.length?n[3]:1),0===i){var r=co(t.size,t.size);this.do=r.canvas,this.Eo(t,r)}}this.do||(this.do=this.getImage(1))},n.prototype.xo=function(t){var n=this.It,i=this.po;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{var r=void 0===this.yo?i:this.yo;void 0!==this.yo&&(n*=2);for(var s=this.Pt-Math.PI/2,o=2*Math.PI/n,u=0;u<n;u++){var e=s+u*o,h=u%2==0?i:r;t.lineTo(h*Math.cos(e),h*Math.sin(e))}t.closePath()}},n.prototype.Eo=function(t,n){n.translate(t.size/2,t.size/2),this.xo(n),n.fillStyle=_u,n.fill(),this.bo&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n}(oc),hc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fc=function(t){function n(n){var i=n||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return hc(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},n.prototype.setRadius=function(t){this.po=t,this.render()},n}(ec),ac=function(){function t(t){var n=t||{};this.So=void 0!==n.color?n.color:null}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0})},t.prototype.getColor=function(){return this.So},t.prototype.setColor=function(t){this.So=t},t}(),cc="fraction",vc="pixels",lc="bottom-left",dc="bottom-right",wc="top-left",pc="top-right",yc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bc=null,_c=function(t){function n(n,i,r,s,o,u){var e=t.call(this)||this;return e.To=null,e._t=n||new Image,null!==s&&(e._t.crossOrigin=s),e.Et={},e.So=u,e.gt=null,e.Ao=o,e._o=r,e.bt=i,e.Co,e}return yc(n,t),n.prototype.No=function(){if(void 0===this.Co&&this.Ao===ro){bc||(bc=co(1,1)),bc.drawImage(this._t,0,0);try{bc.getImageData(0,0,1,1),this.Co=!1}catch(t){bc=null,this.Co=!0}}return!0===this.Co},n.prototype.ko=function(){this.dispatchEvent(k)},n.prototype.Mt=function(){this.Ao=so,this.jt(),this.ko()},n.prototype.xt=function(){this.Ao=ro,this._o?(this._t.width=this._o[0],this._t.height=this._o[1]):this._o=[this._t.width,this._t.height],this.jt(),this.ko()},n.prototype.getImage=function(t){return this.Io(t),this.Et[t]?this.Et[t]:this._t},n.prototype.getPixelRatio=function(t){return this.Io(t),this.Et[t]?t:1},n.prototype.getImageState=function(){return this.Ao},n.prototype.getHitDetectionImage=function(){if(!this.To)if(this.No()){var t=this._o[0],n=this._o[1],i=co(t,n);i.fillRect(0,0,t,n),this.To=i.canvas}else this.To=this._t;return this.To},n.prototype.getSize=function(){return this._o},n.prototype.getSrc=function(){return this.bt},n.prototype.load=function(){if(this.Ao==no){this.Ao=io;try{this._t.src=this.bt}catch(t){this.Mt()}this.gt=eo(this._t,this.xt.bind(this),this.Mt.bind(this))}},n.prototype.Io=function(t){if(this.So&&!this.Et[t]&&this.Ao===ro){var n=document.createElement("canvas");this.Et[t]=n,n.width=Math.ceil(this._t.width*t),n.height=Math.ceil(this._t.height*t);var i=n.getContext("2d");if(i.scale(t,t),i.drawImage(this._t,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.No())i.fillStyle=jo(this.So),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this._t,0,0);else{for(var r=i.getImageData(0,0,n.width,n.height),s=r.data,o=this.So[0]/255,u=this.So[1]/255,e=this.So[2]/255,h=this.So[3],f=0,a=s.length;f<a;f+=4)s[f]*=o,s[f+1]*=u,s[f+2]*=e,s[f+3]*=h;i.putImageData(r,0,0)}}},n.prototype.jt=function(){this.gt&&(this.gt(),this.gt=null)},n}(N);function gc(t,n,i,r,s,o){var u=Po.get(n,r,o);return u||(u=new _c(t,n,i,r,s,o),Po.set(n,r,o,u)),u}var mc=_c,Oc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mc=function(t){function n(n){var i=this,r=n||{},s=void 0!==r.opacity?r.opacity:1,u=void 0!==r.rotation?r.rotation:0,e=void 0!==r.scale?r.scale:1,h=void 0!==r.rotateWithView&&r.rotateWithView;(i=t.call(this,{opacity:s,rotation:u,scale:e,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:h})||this).Qr=void 0!==r.anchor?r.anchor:[.5,.5],i.Po=null,i.Ro=void 0!==r.anchorOrigin?r.anchorOrigin:wc,i.Go=void 0!==r.anchorXUnits?r.anchorXUnits:cc,i.Lo=void 0!==r.anchorYUnits?r.anchorYUnits:cc,i.Tt=void 0!==r.crossOrigin?r.crossOrigin:null;var f=void 0!==r.img?r.img:null,a=void 0!==r.imgSize?r.imgSize:null,c=r.src;mt(!(void 0!==c&&f),4),mt(!f||f&&a,5),void 0!==c&&0!==c.length||!f||(c=f.src||o(f)),mt(void 0!==c&&c.length>0,6);var v=void 0!==r.src?no:ro;return i.So=void 0!==r.color?So(r.color):null,i.Fo=gc(f,c,a,i.Tt,v,i.So),i.Do=void 0!==r.offset?r.offset:[0,0],i.zo=void 0!==r.offsetOrigin?r.offsetOrigin:wc,i.Ks=null,i._o=void 0!==r.size?r.size:null,i}return Oc(n,t),n.prototype.clone=function(){var t=this.getScale();return new n({anchor:this.Qr.slice(),anchorOrigin:this.Ro,anchorXUnits:this.Go,anchorYUnits:this.Lo,crossOrigin:this.Tt,color:this.So&&this.So.slice?this.So.slice():this.So||void 0,src:this.getSrc(),offset:this.Do.slice(),offsetOrigin:this.zo,size:null!==this._o?this._o.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},n.prototype.getAnchor=function(){if(this.Po)return this.Po;var t=this.Qr,n=this.getSize();if(this.Go==cc||this.Lo==cc){if(!n)return null;t=this.Qr.slice(),this.Go==cc&&(t[0]*=n[0]),this.Lo==cc&&(t[1]*=n[1])}if(this.Ro!=wc){if(!n)return null;t===this.Qr&&(t=this.Qr.slice()),this.Ro!=pc&&this.Ro!=dc||(t[0]=-t[0]+n[0]),this.Ro!=lc&&this.Ro!=dc||(t[1]=-t[1]+n[1])}var i=this.getDisplacement();return t[0]-=i[0],t[1]+=i[1],this.Po=t,this.Po},n.prototype.setAnchor=function(t){this.Qr=t,this.Po=null},n.prototype.getColor=function(){return this.So},n.prototype.getImage=function(t){return this.Fo.getImage(t)},n.prototype.getPixelRatio=function(t){return this.Fo.getPixelRatio(t)},n.prototype.getImageSize=function(){return this.Fo.getSize()},n.prototype.getImageState=function(){return this.Fo.getImageState()},n.prototype.getHitDetectionImage=function(){return this.Fo.getHitDetectionImage()},n.prototype.getOrigin=function(){if(this.Ks)return this.Ks;var t=this.Do;if(this.zo!=wc){var n=this.getSize(),i=this.Fo.getSize();if(!n||!i)return null;t=t.slice(),this.zo!=pc&&this.zo!=dc||(t[0]=i[0]-n[0]-t[0]),this.zo!=lc&&this.zo!=dc||(t[1]=i[1]-n[1]-t[1])}return this.Ks=t,this.Ks},n.prototype.getSrc=function(){return this.Fo.getSrc()},n.prototype.getSize=function(){return this._o?this._o:this.Fo.getSize()},n.prototype.listenImageChange=function(t){this.Fo.addEventListener(k,t)},n.prototype.load=function(){this.Fo.load()},n.prototype.unlistenImageChange=function(t){this.Fo.removeEventListener(k,t)},n}(oc),jc=function(){function t(t){var n=t||{};this.So=void 0!==n.color?n.color:null,this.Uo=n.lineCap,this.Xo=void 0!==n.lineDash?n.lineDash:null,this.Yo=n.lineDashOffset,this.Wo=n.lineJoin,this.qo=n.miterLimit,this.Bo=n.width}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.So},t.prototype.getLineCap=function(){return this.Uo},t.prototype.getLineDash=function(){return this.Xo},t.prototype.getLineDashOffset=function(){return this.Yo},t.prototype.getLineJoin=function(){return this.Wo},t.prototype.getMiterLimit=function(){return this.qo},t.prototype.getWidth=function(){return this.Bo},t.prototype.setColor=function(t){this.So=t},t.prototype.setLineCap=function(t){this.Uo=t},t.prototype.setLineDash=function(t){this.Xo=t},t.prototype.setLineDashOffset=function(t){this.Yo=t},t.prototype.setLineJoin=function(t){this.Wo=t},t.prototype.setMiterLimit=function(t){this.qo=t},t.prototype.setWidth=function(t){this.Bo=t},t}();function xc(t){return(xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ec=function(){function t(t){var n=t||{};this.Ar=null,this.Vo=Nc,void 0!==n.geometry&&this.setGeometry(n.geometry),this.wo=void 0!==n.fill?n.fill:null,this._t=void 0!==n.image?n.image:null,this.Wt=void 0!==n.renderer?n.renderer:null,this.Zo=void 0!==n.hitDetectionRenderer?n.hitDetectionRenderer:null,this.bo=void 0!==n.stroke?n.stroke:null,this.Ps=void 0!==n.text?n.text:null,this.Jo=n.zIndex}return t.prototype.clone=function(){var n=this.getGeometry();return n&&"object"===xc(n)&&(n=n.clone()),new t({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.Wt},t.prototype.setRenderer=function(t){this.Wt=t},t.prototype.setHitDetectionRenderer=function(t){this.Zo=t},t.prototype.getHitDetectionRenderer=function(){return this.Zo},t.prototype.getGeometry=function(){return this.Ar},t.prototype.getGeometryFunction=function(){return this.Vo},t.prototype.getFill=function(){return this.wo},t.prototype.setFill=function(t){this.wo=t},t.prototype.getImage=function(){return this._t},t.prototype.setImage=function(t){this._t=t},t.prototype.getStroke=function(){return this.bo},t.prototype.setStroke=function(t){this.bo=t},t.prototype.getText=function(){return this.Ps},t.prototype.setText=function(t){this.Ps=t},t.prototype.getZIndex=function(){return this.Jo},t.prototype.setGeometry=function(t){"function"==typeof t?this.Vo=t:"string"==typeof t?this.Vo=function(n){return n.get(t)}:t?void 0!==t&&(this.Vo=function(){return t}):this.Vo=Nc,this.Ar=t},t.prototype.setZIndex=function(t){this.Jo=t},t}();function Sc(t){var n;if("function"==typeof t)n=t;else{var i;if(Array.isArray(t))i=t;else mt("function"==typeof t.getZIndex,41),i=[t];n=function(){return i}}return n}var Tc=null;function Ac(t,n){if(!Tc){var i=new ac({color:"rgba(255,255,255,0.4)"}),r=new jc({color:"#3399CC",width:1.25});Tc=[new Ec({image:new fc({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return Tc}function Cc(){var t={},n=[255,255,255,1],i=[0,153,255,1];return t[At.POLYGON]=[new Ec({fill:new ac({color:[255,255,255,.5]})})],t[At.MULTI_POLYGON]=t[At.POLYGON],t[At.LINE_STRING]=[new Ec({stroke:new jc({color:n,width:5})}),new Ec({stroke:new jc({color:i,width:3})})],t[At.MULTI_LINE_STRING]=t[At.LINE_STRING],t[At.CIRCLE]=t[At.POLYGON].concat(t[At.LINE_STRING]),t[At.POINT]=[new Ec({image:new fc({radius:6,fill:new ac({color:i}),stroke:new jc({color:n,width:1.5})}),zIndex:1/0})],t[At.MULTI_POINT]=t[At.POINT],t[At.GEOMETRY_COLLECTION]=t[At.POLYGON].concat(t[At.LINE_STRING],t[At.POINT]),t}function Nc(t){return t.getGeometry()}var kc=Ec,Ic="point",Pc="line",Rc=function(){function t(t){var n=t||{};this.Ho=n.font,this.wr=n.rotation,this.ao=n.rotateWithView,this.co=n.scale,this.vo=Ye(void 0!==n.scale?n.scale:1),this.Ps=n.text,this.$o=n.textAlign,this.Ko=n.textBaseline,this.wo=void 0!==n.fill?n.fill:new ac({color:"#333"}),this.Qo=void 0!==n.maxAngle?n.maxAngle:Math.PI/4,this.tu=void 0!==n.placement?n.placement:Ic,this.nu=!!n.overflow,this.bo=void 0!==n.stroke?n.stroke:null,this.iu=void 0!==n.offsetX?n.offsetX:0,this.ru=void 0!==n.offsetY?n.offsetY:0,this.su=n.backgroundFill?n.backgroundFill:null,this.ou=n.backgroundStroke?n.backgroundStroke:null,this.hi=void 0===n.padding?null:n.padding}return t.prototype.clone=function(){var n=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(n)?n.slice():n,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.nu},t.prototype.getFont=function(){return this.Ho},t.prototype.getMaxAngle=function(){return this.Qo},t.prototype.getPlacement=function(){return this.tu},t.prototype.getOffsetX=function(){return this.iu},t.prototype.getOffsetY=function(){return this.ru},t.prototype.getFill=function(){return this.wo},t.prototype.getRotateWithView=function(){return this.ao},t.prototype.getRotation=function(){return this.wr},t.prototype.getScale=function(){return this.co},t.prototype.getScaleArray=function(){return this.vo},t.prototype.getStroke=function(){return this.bo},t.prototype.getText=function(){return this.Ps},t.prototype.getTextAlign=function(){return this.$o},t.prototype.getTextBaseline=function(){return this.Ko},t.prototype.getBackgroundFill=function(){return this.su},t.prototype.getBackgroundStroke=function(){return this.ou},t.prototype.getPadding=function(){return this.hi},t.prototype.setOverflow=function(t){this.nu=t},t.prototype.setFont=function(t){this.Ho=t},t.prototype.setMaxAngle=function(t){this.Qo=t},t.prototype.setOffsetX=function(t){this.iu=t},t.prototype.setOffsetY=function(t){this.ru=t},t.prototype.setPlacement=function(t){this.tu=t},t.prototype.setRotateWithView=function(t){this.ao=t},t.prototype.setFill=function(t){this.wo=t},t.prototype.setRotation=function(t){this.wr=t},t.prototype.setScale=function(t){this.co=t,this.vo=Ye(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.bo=t},t.prototype.setText=function(t){this.Ps=t},t.prototype.setTextAlign=function(t){this.$o=t},t.prototype.setTextBaseline=function(t){this.Ko=t},t.prototype.setBackgroundFill=function(t){this.su=t},t.prototype.setBackgroundStroke=function(t){this.ou=t},t.prototype.setPadding=function(t){this.hi=t},t}(),Gc=34962,Lc=34963,Fc=35044,Dc=35048,zc=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Uc(t,n){for(var i=zc.length,r=0;r<i;++r)try{var s=t.getContext(zc[r],n);if(s)return s}catch(t){}return null}var Xc=Fc;function Yc(t){switch(t){case Gc:return Float32Array;case Lc:return Uint32Array;default:return Float32Array}}var Wc=function(){function t(t,n){this.array=null,this.type=t,mt(t===Gc||t===Lc,62),this.usage=void 0!==n?n:Xc}return t.prototype.ofSize=function(t){this.array=new(Yc(this.type))(t)},t.prototype.fromArray=function(t){var n=Yc(this.type);this.array=n.from?n.from(t):new n(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(Yc(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),qc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Bc(t,n){t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)}function Vc(t,n,i,r,s){var o,u,e=t.getGL();switch(Bc(e,n),s){case 1:o=e.LUMINANCE;break;case 2:o=e.LUMINANCE_ALPHA;break;case 3:o=e.RGB;break;case 4:o=e.RGBA;break;default:throw new Error("Unsupported number of bands: "+s)}i instanceof Float32Array?(u=e.FLOAT,t.getExtension("OES_texture_float"),t.getExtension("OES_texture_float_linear")):u=e.UNSIGNED_BYTE,e.texImage2D(e.TEXTURE_2D,0,o,r[0],r[1],0,o,u,i)}var Zc=function(t){function n(n,i,r){var s=t.call(this)||this;s.tile,s.textures=[],s.Xi=s.Xi.bind(s),s.size=Ye(i.getTileSize(n.tileCoord[0])),s.bandCount=NaN,s.uu=r;var o=new Wc(Gc,Fc);return o.fromArray([0,1,1,1,1,0,0,0]),r.flushBufferData(o),s.coords=o,s.setTile(n),s}return qc(n,t),n.prototype.setTile=function(t){t!==this.tile&&(this.tile&&this.tile.removeEventListener(k,this.Xi),this.tile=t,this.textures.length=0,this.loaded=t.getState()===at,this.loaded?this.eu():t.addEventListener(k,this.Xi))},n.prototype.eu=function(){var t=this.uu,n=t.getGL(),i=this.tile;if(i instanceof go){var r=n.createTexture();return this.textures.push(r),this.bandCount=4,void function(t,n,i){Bc(t,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)}(n,r,i.getImage())}var s=i.getData(),o=s instanceof Float32Array,u=this.size[0]*this.size[1];this.bandCount=s.byteLength/(o?4:1)/u;var e=Math.ceil(this.bandCount/4);if(1===e){r=n.createTexture();return this.textures.push(r),void Vc(t,r,s,this.size,this.bandCount)}for(var h=o?Float32Array:Uint8Array,f=new Array(e),a=0;a<e;++a){r=n.createTexture();this.textures.push(r);var c=a<e-1?4:this.bandCount%4;f[a]=new h(u*c)}for(var v=u*this.bandCount,l=0;l<v;++l){var d=l%this.bandCount,w=d%4,p=(c=(a=Math.floor(d/4))<e-1?4:this.bandCount%4,Math.floor(l/this.bandCount));f[a][p*c+w]=s[l]}for(a=0;a<e;++a){c=a<e-1?4:this.bandCount%4;Vc(t,r=this.textures[a],f[a],this.size,c)}},n.prototype.Xi=function(){this.tile.getState()===at&&(this.loaded=!0,this.eu(),this.dispatchEvent(k))},n.prototype.disposeInternal=function(){var t=this.uu.getGL();this.uu.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)t.deleteTexture(this.textures[n]);this.tile.removeEventListener(k,this.Xi)},n}(N),Jc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Hc=function(t){function n(n){var i=t.call(this)||this;return i.hu=i.fu.bind(i),i.au=n,i.declutterExecutorGroup=null,i}return Jc(n,t),n.prototype.getFeatures=function(t){return r()},n.prototype.prepareFrame=function(t){return r()},n.prototype.renderFrame=function(t,n){return r()},n.prototype.loadedTileCallback=function(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i},n.prototype.createLoadedTileFinder=function(t,n,i){return function(r,s){var o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(n,r,s,o)}.bind(this)},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s){},n.prototype.getDataAtPixel=function(t,n,i){return null},n.prototype.getLayer=function(){return this.au},n.prototype.handleFontsChanged=function(){},n.prototype.fu=function(t){t.target.getState()===ro&&this.renderIfReadyAndVisible()},n.prototype.loadImage=function(t){var n=t.getState();return n!=ro&&n!=so&&t.addEventListener(k,this.hu),n==no&&(t.load(),n=t.getState()),n==ro},n.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Qo&&t.changed()},n}(K),$c="webglcontextlost",Kc="webglcontextrestored",Qc=function(){function t(t){this.cu=t.webGlContext;var n=this.cu;this.vu=t.scaleRatio||1,this.lu=n.createTexture(),this.du=null,this.wu=n.createFramebuffer();var i=n.createShader(n.VERTEX_SHADER);n.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),n.compileShader(i);var r=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(r,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n"),n.compileShader(r),this.pu=n.createProgram(),n.attachShader(this.pu,i),n.attachShader(this.pu,r),n.linkProgram(this.pu),this.yu=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,this.yu),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),n.STATIC_DRAW),this.bu=n.getAttribLocation(this.pu,"a_position"),this._u=n.getUniformLocation(this.pu,"u_screenSize"),this.gu=n.getUniformLocation(this.pu,"u_image"),this.mu=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(i){this.mu.push({value:t.uniforms[i],location:n.getUniformLocation(this.pu,i)})}.bind(this))}return t.prototype.getGL=function(){return this.cu},t.prototype.init=function(t){var n=this.getGL(),i=[n.drawingBufferWidth*this.vu,n.drawingBufferHeight*this.vu];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.viewport(0,0,i[0],i[1]),!this.du||this.du[0]!==i[0]||this.du[1]!==i[1]){this.du=i;var r=n.RGBA,s=n.RGBA,o=n.UNSIGNED_BYTE;n.bindTexture(n.TEXTURE_2D,this.lu),n.texImage2D(n.TEXTURE_2D,0,r,i[0],i[1],0,s,o,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.lu,0)}},t.prototype.apply=function(t,n){var i=this.getGL(),r=t.size;i.bindFramebuffer(i.FRAMEBUFFER,n?n.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.lu),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.yu),i.useProgram(this.pu),i.enableVertexAttribArray(this.bu),i.vertexAttribPointer(this.bu,2,i.FLOAT,!1,0,0),i.uniform2f(this._u,r[0],r[1]),i.uniform1i(this.gu,0),this.applyUniforms(t),i.drawArrays(i.TRIANGLES,0,6)},t.prototype.getFrameBuffer=function(){return this.wu},t.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=1;this.mu.forEach((function(s){if((n="function"==typeof s.value?s.value(t):s.value)instanceof HTMLCanvasElement||n instanceof ImageData)s.texture||(s.texture=i.createTexture()),i.activeTexture(i["TEXTURE"+r]),i.bindTexture(i.TEXTURE_2D,s.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),n instanceof ImageData?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,n.width,n.height,0,i.UNSIGNED_BYTE,new Uint8Array(n.data)):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),i.uniform1i(s.location,r++);else if(Array.isArray(n))switch(n.length){case 2:return void i.uniform2f(s.location,n[0],n[1]);case 3:return void i.uniform3f(s.location,n[0],n[1],n[2]);case 4:return void i.uniform4f(s.location,n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&i.uniform1f(s.location,n)}))},t}(),tv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),nv="u_projectionMatrix",iv="u_offsetScaleMatrix",rv="u_offsetRotateMatrix",sv="u_time",ov="u_zoom",uv="u_resolution",ev={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function hv(t){switch(t){case ev.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case ev.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case ev.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case ev.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var fv=function(t){function n(n){var i=t.call(this)||this,r=n||{};i.Ou=i.handleWebGLContextLost.bind(i),i.Mu=i.handleWebGLContextRestored.bind(i),i.Et=document.createElement("canvas"),i.Et.style.position="absolute",i.Et.style.left="0",i.cu=Uc(i.Et);var s=i.getGL();if(i.ju={},i.xu={},i.Eu=null,i.Et.addEventListener($c,i.Ou),i.Et.addEventListener(Kc,i.Mu),i.Su=[1,0,0,1,0,0],i.Tu=[1,0,0,1,0,0],i.Au=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i.Cu={},i.Nu={},i.mu=[],r.uniforms)for(var o in r.uniforms)i.mu.push({name:o,value:r.uniforms[o]});return i.ku=r.postProcesses?r.postProcesses.map((function(t){return new Qc({webGlContext:s,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new Qc({webGlContext:s})],i.Iu=null,i.qr=Date.now(),i}return tv(n,t),n.prototype.getExtension=function(t){if(t in this.xu)return this.xu[t];var n=this.cu.getExtension(t);return this.xu[t]=n,n},n.prototype.bindBuffer=function(t){var n=this.getGL(),i=o(t),r=this.ju[i];r||(r={buffer:t,webGlBuffer:n.createBuffer()},this.ju[i]=r);n.bindBuffer(t.getType(),r.webGlBuffer)},n.prototype.flushBufferData=function(t){var n=this.getGL();this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())},n.prototype.deleteBuffer=function(t){var n=this.getGL(),i=o(t),r=this.ju[i];r&&!n.isContextLost()&&n.deleteBuffer(r.webGlBuffer),delete this.ju[i]},n.prototype.disposeInternal=function(){this.Et.removeEventListener($c,this.Ou),this.Et.removeEventListener(Kc,this.Mu);var t=this.cu.getExtension("WEBGL_lose_context");t&&t.loseContext(),delete this.cu,delete this.Et},n.prototype.prepareDraw=function(t,n){var i=this.getGL(),r=this.getCanvas(),s=t.size,o=t.pixelRatio;r.width=s[0]*o,r.height=s[1]*o,r.style.width=s[0]+"px",r.style.height=s[1]+"px",i.useProgram(this.Eu);for(var u=this.ku.length-1;u>=0;u--)this.ku[u].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.Eu),this.applyFrameState(t),this.applyUniforms(t)},n.prototype.prepareDrawToRenderTarget=function(t,n,i){var r=this.getGL(),s=n.getSize();r.bindFramebuffer(r.FRAMEBUFFER,n.getFramebuffer()),r.viewport(0,0,s[0],s[1]),r.bindTexture(r.TEXTURE_2D,n.getTexture()),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,i?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.Eu),this.applyFrameState(t),this.applyUniforms(t)},n.prototype.drawElements=function(t,n){var i=this.getGL();this.getExtension("OES_element_index_uint");var r=i.UNSIGNED_INT,s=n-t,o=4*t;i.drawElements(i.TRIANGLES,s,r,o)},n.prototype.finalizeDraw=function(t){for(var n=0;n<this.ku.length;n++)this.ku[n].apply(t,this.ku[n+1]||null)},n.prototype.getCanvas=function(){return this.Et},n.prototype.getGL=function(){return this.cu},n.prototype.applyFrameState=function(t){var n=t.size,i=t.viewState.rotation,r=Bt(this.Tu);Kt(r,2/n[0],2/n[1]);var s=Bt(this.Su);0!==i&&$t(s,-i),this.setUniformMatrixValue(iv,sc(this.Au,r)),this.setUniformMatrixValue(rv,sc(this.Au,s)),this.setUniformFloatValue(sv,.001*(Date.now()-this.qr)),this.setUniformFloatValue(ov,t.viewState.zoom),this.setUniformFloatValue(uv,t.viewState.resolution)},n.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=0;this.mu.forEach(function(s){if((n="function"==typeof s.value?s.value(t):s.value)instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData)s.texture||(s.prevValue=void 0,s.texture=i.createTexture()),i.activeTexture(i["TEXTURE"+r]),i.bindTexture(i.TEXTURE_2D,s.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(!(n instanceof HTMLImageElement)||n.complete)&&s.prevValue!==n&&(s.prevValue=n,i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n)),i.uniform1i(this.getUniformLocation(s.name),r++);else if(Array.isArray(n)&&6===n.length)this.setUniformMatrixValue(s.name,sc(this.Au,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:return void i.uniform2f(this.getUniformLocation(s.name),n[0],n[1]);case 3:return void i.uniform3f(this.getUniformLocation(s.name),n[0],n[1],n[2]);case 4:return void i.uniform4f(this.getUniformLocation(s.name),n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&i.uniform1f(this.getUniformLocation(s.name),n)}.bind(this))},n.prototype.useProgram=function(t){return t!=this.Eu&&(this.getGL().useProgram(t),this.Eu=t,this.Cu={},this.Nu={},!0)},n.prototype.compileShader=function(t,n){var i=this.getGL(),r=i.createShader(n);return i.shaderSource(r,t),i.compileShader(r),r},n.prototype.getProgram=function(t,n){var i=this.getGL(),r=this.compileShader(t,i.FRAGMENT_SHADER),s=this.compileShader(n,i.VERTEX_SHADER),o=i.createProgram();if(i.attachShader(o,r),i.attachShader(o,s),i.linkProgram(o),!i.getShaderParameter(r,i.COMPILE_STATUS)){var u="Fragment shader compliation failed: "+i.getShaderInfoLog(r);throw new Error(u)}if(i.deleteShader(r),!i.getShaderParameter(s,i.COMPILE_STATUS)){u="Vertex shader compilation failed: "+i.getShaderInfoLog(s);throw new Error(u)}if(i.deleteShader(s),!i.getProgramParameter(o,i.LINK_STATUS)){u="GL program linking failed: "+i.getShaderInfoLog(s);throw new Error(u)}return o},n.prototype.getUniformLocation=function(t){return void 0===this.Cu[t]&&(this.Cu[t]=this.getGL().getUniformLocation(this.Eu,t)),this.Cu[t]},n.prototype.getAttributeLocation=function(t){return void 0===this.Nu[t]&&(this.Nu[t]=this.getGL().getAttribLocation(this.Eu,t)),this.Nu[t]},n.prototype.makeProjectionTransform=function(t,n){var i=t.size,r=t.viewState.rotation,s=t.viewState.resolution,o=t.viewState.center;return Bt(n),tn(n,0,0,2/(s*i[0]),2/(s*i[1]),-r,-o[0],-o[1]),n},n.prototype.setUniformFloatValue=function(t,n){this.getGL().uniform1f(this.getUniformLocation(t),n)},n.prototype.setUniformMatrixValue=function(t,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,n)},n.prototype.Pu=function(t,n,i,r,s){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,n,i,!1,r,s))},n.prototype.enableAttributes=function(t){for(var n=function(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];n+=r.size*hv(r.type)}return n}(t),i=0,r=0;r<t.length;r++){var s=t[r];this.Pu(s.name,s.size,s.type||5126,n,i),i+=s.size*hv(s.type)}},n.prototype.handleWebGLContextLost=function(){S(this.ju),this.Eu=null},n.prototype.handleWebGLContextRestored=function(){},n.prototype.createTexture=function(t,n,i){var r=this.getGL(),s=i||r.createTexture(),o=r.RGBA,u=r.RGBA,e=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,s),n?r.texImage2D(r.TEXTURE_2D,0,o,u,e,n):r.texImage2D(r.TEXTURE_2D,0,o,t[0],t[1],0,u,e,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),s},n}(l),av=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cv="GENERATE_BUFFERS",vv=function(t){function n(n,i){var r=t.call(this,n)||this,s=i||{};return r.helper=new fv({postProcesses:s.postProcesses,uniforms:s.uniforms}),void 0!==s.className&&(r.helper.getCanvas().className=s.className),r}return av(n,t),n.prototype.disposeInternal=function(){this.helper.dispose(),delete this.helper,t.prototype.disposeInternal.call(this)},n.prototype.Ru=function(t,n){var i=this.getLayer();if(i.hasListener(t)){var r=new eu(t,null,n,null);i.dispatchEvent(r)}},n.prototype.preRender=function(t){this.Ru(Vo,t)},n.prototype.postRender=function(t){this.Ru(Zo,t)},n}(Hc);var lv=vv,dv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wv="u_tileTexture",pv="u_tileTransform",yv="u_transitionAlpha",bv="u_depth",_v="u_texturePixelWidth",gv="u_texturePixelHeight",mv="u_resolution",Ov="u_zoom",Mv=[{name:"a_textureCoord",size:2,type:ev.FLOAT}],jv={};function xv(t){return 2*(1-1/(t+1))-1}function Ev(t,n,i){i in t||(t[i]=[]),t[i].push(n)}function Sv(t,n){var i=t.layerStatesArray[t.layerIndex];return i.extent&&(n=Wn(n,xr(i.extent,t.viewState.projection))),n}var Tv=function(t){function n(n,i){var r=t.call(this,n,{uniforms:i.uniforms,className:i.className})||this;r.Gu=[1,0,0,1,0,0],r.Lu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.Fu=new Pf(0,0,0,0),r.Du=jf(0,0,0),r.zu=[0,0],r.Uu=r.helper.getProgram(i.fragmentShader,i.vertexShader);var s=new Wc(Lc,Fc);s.fromArray([0,1,3,1,2,3]),r.helper.flushBufferData(s),r.Xu=s;var o=void 0!==i.cacheSize?i.cacheSize:512;return r.Yu=new Mf(o),r.Wu=NaN,r}return dv(n,t),n.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==at||i==vt||i==ct&&!r},n.prototype.prepareFrame=function(t){if(Jn(Sv(t,t.extent)))return!1;var n=this.getLayer().getSource();return!!n&&n.getState()===Qo},n.prototype.enqueueTiles=function(t,n,i,r){var s=t.viewState,u=this.getLayer().getSource(),e=u.getTileGridForProjection(s.projection),h=this.Yu,f=e.getTileRangeForExtentAndZ(n,i),a=o(u);a in t.wantedTiles||(t.wantedTiles[a]={});for(var c=t.wantedTiles[a],v=e.getResolution(i),l=f.minX;l<=f.maxX;++l)for(var d=f.minY;d<=f.maxY;++d){var w=jf(i,l,d,this.Du),p=Ef(w),y=void 0,b=void 0;h.containsKey(p)&&(b=(y=h.get(p)).tile),y&&y.tile.key===u.getKey()||(b=u.getTile(i,l,d,t.pixelRatio,s.projection),y?y.setTile(this.isDrawableTile(b)?b:b.getInterimTile()):(y=new Zc(b,e,this.helper),h.set(p,y))),Ev(r,y,i);var _=b.getKey();c[_]=!0,b.getState()===ht&&(t.tileQueue.isKeyQueued(_)||t.tileQueue.enqueue([b,a,e.getTileCoordCenter(w),v]))}},n.prototype.renderFrame=function(t){this.preRender(t);var n=t.viewState,i=t.layerStatesArray[t.layerIndex],r=Sv(t,t.extent),s=this.getLayer().getSource(),u=s.getTileGridForProjection(n.projection),e=u.getZForResolution(n.resolution,s.zDirection),h={};if(t.nextExtent){var f=u.getZForResolution(n.nextResolution,s.zDirection),a=Sv(t,t.nextExtent);this.enqueueTiles(t,a,f,h)}this.enqueueTiles(t,r,e,h);for(var c={},v=o(this),l=t.time,d=!1,p=h[e],y=0,b=p.length;y<b;++y){var _=(G=(V=p[y]).tile).tileCoord;if(V.loaded){if(1===(L=G.getAlpha(v,l))){G.endTransition(v);continue}d=!0,c[F=Ef(_)]=L}if(!this.qu(u,_,e+1,h))for(var g=e-1;g>=u.minZoom;--g){if(this.qu(u,_,g,h))break}}this.helper.useProgram(this.Uu),this.helper.prepareDraw(t,!d);for(var m=Object.keys(h).map(Number).sort(w),O=this.helper.getGL(),M=n.center[0],j=n.center[1],x=0,E=m.length;x<E;++x){var S=m[x],T=u.getResolution(S),A=Ye(u.getTileSize(S),this.zu),C=u.getOrigin(S),N=(M-C[0])/(A[0]*T),k=(C[1]-j)/(A[1]*T),I=n.resolution/T,P=xv(S),R=h[S];for(y=0,b=R.length;y<b;++y){if((V=R[y]).loaded){var G,L,F=Ef(_=(G=V.tile).tileCoord),D=_[1],z=_[2];tn(this.Gu,0,0,2/(t.size[0]*I/A[0]),-2/(t.size[1]*I/A[1]),n.rotation,-(N-D),-(k-z)),this.helper.setUniformMatrixValue(pv,sc(this.Lu,this.Gu)),this.helper.bindBuffer(V.coords),this.helper.bindBuffer(this.Xu),this.helper.enableAttributes(Mv);for(var U=0;U<V.textures.length;++U){var X="TEXTURE"+U,Y=wv+U;O.activeTexture(O[X]),O.bindTexture(O.TEXTURE_2D,V.textures[U]),O.uniform1i(this.helper.getUniformLocation(Y),U)}(L=F in c?c[F]:1)<1&&(t.animate=!0),this.helper.setUniformFloatValue(yv,L),this.helper.setUniformFloatValue(bv,P),this.helper.setUniformFloatValue(_v,A[0]),this.helper.setUniformFloatValue(gv,A[1]),this.helper.setUniformFloatValue(mv,n.resolution),this.helper.setUniformFloatValue(Ov,n.zoom),this.helper.drawElements(0,this.Xu.getSize())}}}this.helper.finalizeDraw(t);var W=this.helper.getCanvas(),q=i.opacity;this.Wu!==q&&(W.style.opacity=String(q),this.Wu=q);for(var B=this.Yu;B.canExpireCache();){var V;(V=B.pop()).dispose()}return t.postRenderFunctions.push((function(t,n){s.expireCache(s.getProjection(),jv)})),this.postRender(t),W},n.prototype.qu=function(t,n,i,r){var s=t.getTileRangeForTileCoordAndZ(n,i,this.Fu);if(!s)return!1;for(var o=!0,u=this.Yu,e=s.minX;e<=s.maxX;++e)for(var h=s.minY;h<=s.maxY;++h){var f=xf(i,e,h),a=!1;if(u.containsKey(f)){var c=u.get(f);c.loaded&&(Ev(r,c,i),a=!0)}a||(o=!1)}return o},n.prototype.disposeInternal=function(){var n=this.helper,i=n.getGL();n.deleteBuffer(this.Xu),delete this.Xu,i.deleteProgram(this.Uu),delete this.Uu;var r=this.Yu;r.forEach((function(t){t.dispose()})),r.clear(),delete this.Yu,t.prototype.disposeInternal.call(this)},n}(lv);Tv.prototype.getLayer;var Av=1,Cv=2,Nv=4,kv=8,Iv=16,Pv=31,Rv=0,Gv={};function Lv(t){if("number"==typeof t)return Av;if("boolean"==typeof t)return kv;if("string"==typeof t)return Co(t)?Nv|Cv:Cv;if(!Array.isArray(t))throw new Error("Unhandled value type: "+JSON.stringify(t));var n=t;if(n.every((function(t){return"number"==typeof t})))return 3===n.length||4===n.length?Nv|Iv:Iv;if("string"!=typeof n[0])throw new Error("Expected an expression operator but received: "+JSON.stringify(n));var i=Gv[n[0]];if(void 0===i)throw new Error("Unrecognized expression operator: "+JSON.stringify(n));return i.getReturnType(n.slice(1))}function Fv(t){return si(t)%1==0}function Dv(t){var n=t.toString();return-1===n.indexOf(".")?n+".0":n}function zv(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec"+t.length+"("+t.map(Dv).join(", ")+")"}function Uv(t){var n=So(t).slice();return n.length<4&&n.push(1),zv(n.map((function(t,n){return n<3?t/255:t})))}function Xv(t,n){return void 0===t.stringLiteralsMap[n]&&(t.stringLiteralsMap[n]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[n]}function Yv(t,n){return Dv(Xv(t,n))}function Wv(t,n,i){if(Array.isArray(n)&&"string"==typeof n[0]){var r=Gv[n[0]];if(void 0===r)throw new Error("Unrecognized expression operator: "+JSON.stringify(n));return r.toGlsl(t,n.slice(1),i)}var s=Lv(n);if((s&Av)>0)return Dv(n);if((s&kv)>0)return n.toString();if((s&Cv)>0&&(void 0===i||i==Cv))return Yv(t,n.toString());if((s&Nv)>0&&(void 0===i||i==Nv))return Uv(n);if((s&Iv)>0)return zv(n);throw new Error("Unexpected expression "+n+" (expected type "+i+")")}function qv(t){if(!(Lv(t)&Av))throw new Error("A numeric value was expected, got "+JSON.stringify(t)+" instead")}function Bv(t){for(var n=0;n<t.length;n++)qv(t[n])}function Vv(t){if(!(Lv(t)&Cv))throw new Error("A string value was expected, got "+JSON.stringify(t)+" instead")}function Zv(t){if(!(Lv(t)&kv))throw new Error("A boolean value was expected, got "+JSON.stringify(t)+" instead")}function Jv(t,n){if(t.length!==n)throw new Error("Exactly "+n+" arguments were expected, got "+t.length+" instead")}function Hv(t,n){if(t.length<n)throw new Error("At least "+n+" arguments were expected, got "+t.length+" instead")}function $v(t,n){if(t.length>n)throw new Error("At most "+n+" arguments were expected, got "+t.length+" instead")}function Kv(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got "+t+" instead")}function Qv(t,n){if(!Fv(n))throw new Error("Could not infer only one type from the following expression: "+JSON.stringify(t))}function tl(t){return"u_var_"+t}function nl(t){return{getReturnType:function(t){return kv},toGlsl:function(n,i){Jv(i,2);for(var r=Pv,s=0;s<i.length;s++)r&=Lv(i[s]);if(r===Rv)throw new Error("All arguments should be of compatible type, got "+JSON.stringify(i)+" instead");return r&=~Nv,"("+Wv(n,i[0],r)+" "+t+" "+Wv(n,i[1],r)+")"}}}function il(t){return{getReturnType:function(t){return kv},toGlsl:function(n,i){Hv(i,2);for(var r=0;r<i.length;r++)Zv(i[r]);return"("+i.map((function(t){return Wv(n,t)})).join(" "+t+" ")+")"}}}Gv.get={getReturnType:function(t){return Pv},toGlsl:function(t,n){Jv(n,1),Vv(n[0]);var i=n[0].toString();return-1===t.attributes.indexOf(i)&&t.attributes.push(i),(t.inFragmentShader?"v_":"a_")+i}},Gv.var={getReturnType:function(t){return Pv},toGlsl:function(t,n){Jv(n,1),Vv(n[0]);var i=n[0].toString();return-1===t.variables.indexOf(i)&&t.variables.push(i),tl(i)}},Gv.band={getReturnType:function(t){return Av},toGlsl:function(t,n){Hv(n,1),$v(n,3);var i=n[0];if("number"!=typeof i)throw new Error("Band index must be a number");var r=i-1,s=Math.floor(r/4),o=r%4;if(i===t.bandCount&&1===o&&(o=3),1===n.length)return"color"+s+"["+o+"]";var u=n[1],e=n[2]||0;return qv(u),qv(e),"texture2D("+(wv+s)+", v_textureCoord + vec2("+Wv(t,u)+" / "+_v+", "+Wv(t,e)+" / "+gv+"))["+o+"]"}},Gv.time={getReturnType:function(t){return Av},toGlsl:function(t,n){return Jv(n,0),"u_time"}},Gv.zoom={getReturnType:function(t){return Av},toGlsl:function(t,n){return Jv(n,0),"u_zoom"}},Gv.resolution={getReturnType:function(t){return Av},toGlsl:function(t,n){return Jv(n,0),"u_resolution"}},Gv["*"]={getReturnType:function(t){return Av},toGlsl:function(t,n){return Jv(n,2),Bv(n),"("+Wv(t,n[0])+" * "+Wv(t,n[1])+")"}},Gv["/"]={getReturnType:function(t){return Av},toGlsl:function(t,n){return Jv(n,2),Bv(n),"("+Wv(t,n[0])+" / "+Wv(t,n[1])+")"}},Gv["+"]={getReturnType:function(t){return Av},toGlsl:function(t,n){return Jv(n,2),Bv(n),"("+Wv(t,n[0])+" + "+Wv(t,n[1])+")"}},Gv["-"]={getReturnType:function(t){return Av},toGlsl:function(t,n){return Jv(n,2),Bv(n),"("+Wv(t,n[0])+" - "+Wv(t,n[1])+")"}},Gv.clamp={getReturnType:function(t){return Av},toGlsl:function(t,n){Jv(n,3),Bv(n);var i=Wv(t,n[1]),r=Wv(t,n[2]);return"clamp("+Wv(t,n[0])+", "+i+", "+r+")"}},Gv["%"]={getReturnType:function(t){return Av},toGlsl:function(t,n){return Jv(n,2),Bv(n),"mod("+Wv(t,n[0])+", "+Wv(t,n[1])+")"}},Gv["^"]={getReturnType:function(t){return Av},toGlsl:function(t,n){return Jv(n,2),Bv(n),"pow("+Wv(t,n[0])+", "+Wv(t,n[1])+")"}},Gv.abs={getReturnType:function(t){return Av},toGlsl:function(t,n){return Jv(n,1),Bv(n),"abs("+Wv(t,n[0])+")"}},Gv.sin={getReturnType:function(t){return Av},toGlsl:function(t,n){return Jv(n,1),Bv(n),"sin("+Wv(t,n[0])+")"}},Gv.cos={getReturnType:function(t){return Av},toGlsl:function(t,n){return Jv(n,1),Bv(n),"cos("+Wv(t,n[0])+")"}},Gv.atan={getReturnType:function(t){return Av},toGlsl:function(t,n){return Hv(n,1),$v(n,2),Bv(n),2===n.length?"atan("+Wv(t,n[0])+", "+Wv(t,n[1])+")":"atan("+Wv(t,n[0])+")"}},Gv[">"]={getReturnType:function(t){return kv},toGlsl:function(t,n){return Jv(n,2),Bv(n),"("+Wv(t,n[0])+" > "+Wv(t,n[1])+")"}},Gv[">="]={getReturnType:function(t){return kv},toGlsl:function(t,n){return Jv(n,2),Bv(n),"("+Wv(t,n[0])+" >= "+Wv(t,n[1])+")"}},Gv["<"]={getReturnType:function(t){return kv},toGlsl:function(t,n){return Jv(n,2),Bv(n),"("+Wv(t,n[0])+" < "+Wv(t,n[1])+")"}},Gv["<="]={getReturnType:function(t){return kv},toGlsl:function(t,n){return Jv(n,2),Bv(n),"("+Wv(t,n[0])+" <= "+Wv(t,n[1])+")"}},Gv["=="]=nl("=="),Gv["!="]=nl("!="),Gv["!"]={getReturnType:function(t){return kv},toGlsl:function(t,n){return Jv(n,1),Zv(n[0]),"(!"+Wv(t,n[0])+")"}},Gv.all=il("&&"),Gv.any=il("||"),Gv.between={getReturnType:function(t){return kv},toGlsl:function(t,n){Jv(n,3),Bv(n);var i=Wv(t,n[1]),r=Wv(t,n[2]),s=Wv(t,n[0]);return"("+s+" >= "+i+" && "+s+" <= "+r+")"}},Gv.array={getReturnType:function(t){return Iv},toGlsl:function(t,n){Hv(n,2),$v(n,4),Bv(n);var i=n.map((function(n){return Wv(t,n,Av)}));return"vec"+n.length+"("+i.join(", ")+")"}},Gv.color={getReturnType:function(t){return Nv},toGlsl:function(t,n){Hv(n,3),$v(n,4),Bv(n);var i=n;3===n.length&&i.push(1);var r=n.map((function(n,i){return Wv(t,n,Av)+(i<3?" / 255.0":"")}));return"vec"+n.length+"("+r.join(", ")+")"}},Gv.interpolate={getReturnType:function(t){for(var n=Nv|Av,i=3;i<t.length;i+=2)n&=Lv(t[i]);return n},toGlsl:function(t,n,i){Kv(n),Hv(n,6);var r,s=n[0];switch(s[0]){case"linear":r=1;break;case"exponential":r=s[1];break;default:r=null}if(!r)throw new Error('Invalid interpolation type for "interpolate" operator, received: '+JSON.stringify(s));var o=void 0!==i?i:Pv,u=Gv.interpolate.getReturnType(n)&o;Qv(n,u);for(var e=Wv(t,n[1]),h=Dv(r),f="",a=2;a<n.length-2;a+=2){var c=Wv(t,n[a]),v=f||Wv(t,n[a+1],u),l=Wv(t,n[a+2]);f="mix("+v+", "+Wv(t,n[a+3],u)+", pow(clamp(("+e+" - "+c+") / ("+l+" - "+c+"), 0.0, 1.0), "+h+"))"}return f}},Gv.match={getReturnType:function(t){for(var n=Pv,i=2;i<t.length;i+=2)n&=Lv(t[i]);return n&=Lv(t[t.length-1])},toGlsl:function(t,n,i){Kv(n),Hv(n,4);var r=void 0!==i?i:Pv,s=Gv.match.getReturnType(n)&r;Qv(n,s);for(var o=Wv(t,n[0]),u=Wv(t,n[n.length-1],s),e=null,h=n.length-3;h>=1;h-=2){e="("+o+" == "+Wv(t,n[h])+" ? "+Wv(t,n[h+1],s)+" : "+(e||u)+")"}return e}},Gv.case={getReturnType:function(t){for(var n=Pv,i=1;i<t.length;i+=2)n&=Lv(t[i]);return n&=Lv(t[t.length-1])},toGlsl:function(t,n,i){!function(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got "+t+" instead")}(n),Hv(n,3);var r=void 0!==i?i:Pv,s=Gv.case.getReturnType(n)&r;Qv(n,s);for(var o=0;o<n.length-1;o+=2)Zv(n[o]);var u=Wv(t,n[n.length-1],s),e=null;for(o=n.length-3;o>=0;o-=2){e="("+Wv(t,n[o])+" ? "+Wv(t,n[o+1],s)+" : "+(e||u)+")"}return e}};var rl=function(){function t(t){this.Bu,this.Vu,this.Zu,this.Ju=void 0===t||t,this.Hu=0}return t.prototype.insertItem=function(t){var n={prev:void 0,next:void 0,data:t},i=this.Zu;if(i){var r=i.next;n.prev=i,n.next=r,i.next=n,r&&(r.prev=n),i===this.Vu&&(this.Vu=n)}else this.Bu=n,this.Vu=n,this.Ju&&(n.next=n,n.prev=n);this.Zu=n,this.Hu++},t.prototype.removeItem=function(){var t=this.Zu;if(t){var n=t.next,i=t.prev;n&&(n.prev=i),i&&(i.next=n),this.Zu=n||i,this.Bu===this.Vu?(this.Zu=void 0,this.Bu=void 0,this.Vu=void 0):this.Bu===t?this.Bu=this.Zu:this.Vu===t&&(this.Vu=i?this.Zu.prev:this.Zu),this.Hu--}},t.prototype.firstItem=function(){if(this.Zu=this.Bu,this.Zu)return this.Zu.data},t.prototype.lastItem=function(){if(this.Zu=this.Vu,this.Zu)return this.Zu.data},t.prototype.nextItem=function(){if(this.Zu&&this.Zu.next)return this.Zu=this.Zu.next,this.Zu.data},t.prototype.getNextItem=function(){if(this.Zu&&this.Zu.next)return this.Zu.next.data},t.prototype.prevItem=function(){if(this.Zu&&this.Zu.prev)return this.Zu=this.Zu.prev,this.Zu.data},t.prototype.getPrevItem=function(){if(this.Zu&&this.Zu.prev)return this.Zu.prev.data},t.prototype.getCurrItem=function(){if(this.Zu)return this.Zu.data},t.prototype.setFirstItem=function(){this.Ju&&this.Zu&&(this.Bu=this.Zu,this.Vu=this.Zu.prev)},t.prototype.concat=function(t){if(t.Zu){if(this.Zu){var n=this.Zu.next;this.Zu.next=t.Bu,t.Bu.prev=this.Zu,n.prev=t.Vu,t.Vu.next=n,this.Hu+=t.Hu}else this.Zu=t.Zu,this.Bu=t.Bu,this.Vu=t.Vu,this.Hu=t.Hu;t.Zu=void 0,t.Bu=void 0,t.Vu=void 0,t.Hu=0}},t.prototype.getLength=function(){return this.Hu},t}(),sl=i(72),ol=function(){function t(t){this.$u=new sl(t),this.Ku={}}return t.prototype.insert=function(t,n){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.$u.insert(i),this.Ku[o(n)]=i},t.prototype.load=function(t,n){for(var i=new Array(n.length),r=0,s=n.length;r<s;r++){var u=t[r],e=n[r],h={minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:e};i[r]=h,this.Ku[o(e)]=h}this.$u.load(i)},t.prototype.remove=function(t){var n=o(t),i=this.Ku[n];return delete this.Ku[n],null!==this.$u.remove(i)},t.prototype.update=function(t,n){var i=this.Ku[o(n)];Tn([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(n),this.insert(t,n))},t.prototype.getAll=function(){return this.$u.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.$u.search(n).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.Qu(this.getAll(),t)},t.prototype.forEachInExtent=function(t,n){return this.Qu(this.getInExtent(t),n)},t.prototype.Qu=function(t,n){for(var i,r=0,s=t.length;r<s;r++)if(i=n(t[r]))return i;return i},t.prototype.isEmpty=function(){return A(this.Ku)},t.prototype.clear=function(){this.$u.clear(),this.Ku={}},t.prototype.getExtent=function(t){var n=this.$u.toJSON();return jn(n.minX,n.minY,n.maxX,n.maxY,t)},t.prototype.concat=function(t){for(var n in this.$u.load(t.$u.all()),t.Ku)this.Ku[n]=t.Ku[n]},t}(),ul=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function el(t){return t?Array.isArray(t)?function(n){return t}:"function"==typeof t?t:function(n){return[t]}:null}var hl=function(t){function n(n){var i=t.call(this)||this;i.projection=er(n.projection),i.te=el(n.attributions),i.ne=void 0===n.attributionsCollapsible||n.attributionsCollapsible,i.loading=!1,i.zt=void 0!==n.state?n.state:Qo,i.ie=void 0!==n.wrapX&&n.wrapX,i.viewResolver=null,i.viewRejector=null;var r=i;return i.re=new Promise((function(t,n){r.viewResolver=t,r.viewRejector=n})),i}return ul(n,t),n.prototype.getAttributions=function(){return this.te},n.prototype.getAttributionsCollapsible=function(){return this.ne},n.prototype.getProjection=function(){return this.projection},n.prototype.getResolutions=function(){return r()},n.prototype.getView=function(){return this.re},n.prototype.getState=function(){return this.zt},n.prototype.getWrapX=function(){return this.ie},n.prototype.getContextOptions=function(){},n.prototype.refresh=function(){this.changed()},n.prototype.setAttributions=function(t){this.te=el(t),this.changed()},n.prototype.setState=function(t){this.zt=t,this.changed()},n}(nt),fl="addfeature",al="changefeature",cl="clear",vl="removefeature",ll="featuresloadstart",dl="featuresloadend",wl="featuresloaderror",pl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yl=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.feature=i,s.features=r,s}return pl(n,t),n}(c),bl=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{attributions:r.attributions,projection:void 0,state:Qo,wrapX:void 0===r.wrapX||r.wrapX})||this).on,i.once,i.un,i.S=j,i.se=r.format,i.oe=void 0===r.overlaps||r.overlaps,i.ue=r.url,void 0!==r.loader?i.S=r.loader:void 0!==i.ue&&(mt(i.se,7),i.S=qf(i.ue,i.se)),i.ee=void 0!==r.strategy?r.strategy:Bf;var s,o,u=void 0===r.useSpatialIndex||r.useSpatialIndex;return i.he=u?new ol:null,i.fe=new ol,i.ae=0,i.ce={},i.ve={},i.le={},i.de={},i.we=null,Array.isArray(r.features)?o=r.features:r.features&&(o=(s=r.features).getArray()),u||void 0!==s||(s=new et(o)),void 0!==o&&i.addFeaturesInternal(o),void 0!==s&&i.pe(s),i}return pl(n,t),n.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},n.prototype.addFeatureInternal=function(t){var n=o(t);if(this.ye(n,t)){this.be(n,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.he&&this.he.insert(r,t)}else this.ce[n]=t;this.dispatchEvent(new yl(fl,t))}else this.we&&this.we.remove(t)},n.prototype.be=function(t,n){this.de[t]=[B(n,k,this._e,this),B(n,v,this._e,this)]},n.prototype.ye=function(t,n){var i=!0,r=n.getId();return void 0!==r&&(r.toString()in this.ve?i=!1:this.ve[r.toString()]=n),i&&(mt(!(t in this.le),30),this.le[t]=n),i},n.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},n.prototype.addFeaturesInternal=function(t){for(var n=[],i=[],r=[],s=0,u=t.length;s<u;s++){var e=o(f=t[s]);this.ye(e,f)&&i.push(f)}s=0;for(var h=i.length;s<h;s++){var f;e=o(f=i[s]);this.be(e,f);var a=f.getGeometry();if(a){var c=a.getExtent();n.push(c),r.push(f)}else this.ce[e]=f}this.he&&this.he.load(n,r);s=0;for(var v=i.length;s<v;s++)this.dispatchEvent(new yl(fl,i[s]))},n.prototype.pe=function(t){var n=!1;this.addEventListener(fl,(function(i){n||(n=!0,t.push(i.feature),n=!1)})),this.addEventListener(vl,(function(i){n||(n=!0,t.remove(i.feature),n=!1)})),t.addEventListener(it,function(t){n||(n=!0,this.addFeature(t.element),n=!1)}.bind(this)),t.addEventListener(rt,function(t){n||(n=!0,this.removeFeature(t.element),n=!1)}.bind(this)),this.we=t},n.prototype.clear=function(t){if(t){for(var n in this.de){this.de[n].forEach(Z)}this.we||(this.de={},this.ve={},this.le={})}else if(this.he)for(var i in this.he.forEach(this.removeFeatureInternal.bind(this)),this.ce)this.removeFeatureInternal(this.ce[i]);this.we&&this.we.clear(),this.he&&this.he.clear(),this.ce={};var r=new yl(cl);this.dispatchEvent(r),this.changed()},n.prototype.forEachFeature=function(t){if(this.he)return this.he.forEach(t);this.we&&this.we.forEach(t)},n.prototype.forEachFeatureAtCoordinateDirect=function(t,n){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){return i.getGeometry().intersectsCoordinate(t)?n(i):void 0}))},n.prototype.forEachFeatureInExtent=function(t,n){if(this.he)return this.he.forEachInExtent(t,n);this.we&&this.we.forEach(n)},n.prototype.forEachFeatureIntersectingExtent=function(t,n){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){var r=n(i);if(r)return r}}))},n.prototype.getFeaturesCollection=function(){return this.we},n.prototype.getFeatures=function(){var t;return this.we?t=this.we.getArray().slice(0):this.he&&(t=this.he.getAll(),A(this.ce)||_(t,T(this.ce))),t},n.prototype.getFeaturesAtCoordinate=function(t){var n=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){n.push(t)})),n},n.prototype.getFeaturesInExtent=function(t){return this.he?this.he.getInExtent(t):this.we?this.we.getArray().slice(0):[]},n.prototype.getClosestFeatureToCoordinate=function(t,n){var i=t[0],r=t[1],s=null,o=[NaN,NaN],u=1/0,e=[-1/0,-1/0,1/0,1/0],h=n||O;return this.he.forEachInExtent(e,(function(t){if(h(t)){var n=t.getGeometry(),f=u;if((u=n.closestPointXY(i,r,o,u))<f){s=t;var a=Math.sqrt(u);e[0]=i-a,e[1]=r-a,e[2]=i+a,e[3]=r+a}}})),s},n.prototype.getExtent=function(t){return this.he.getExtent(t)},n.prototype.getFeatureById=function(t){var n=this.ve[t.toString()];return void 0!==n?n:null},n.prototype.getFeatureByUid=function(t){var n=this.le[t];return void 0!==n?n:null},n.prototype.getFormat=function(){return this.se},n.prototype.getOverlaps=function(){return this.oe},n.prototype.getUrl=function(){return this.ue},n.prototype._e=function(t){var n=t.target,i=o(n),r=n.getGeometry();if(r){var s=r.getExtent();i in this.ce?(delete this.ce[i],this.he&&this.he.insert(s,n)):this.he&&this.he.update(s,n)}else i in this.ce||(this.he&&this.he.remove(n),this.ce[i]=n);var u=n.getId();if(void 0!==u){var e=u.toString();this.ve[e]!==n&&(this.ge(n),this.ve[e]=n)}else this.ge(n),this.le[i]=n;this.changed(),this.dispatchEvent(new yl(al,n))},n.prototype.hasFeature=function(t){var n=t.getId();return void 0!==n?n in this.ve:o(t)in this.le},n.prototype.isEmpty=function(){return this.he.isEmpty()&&A(this.ce)},n.prototype.loadFeatures=function(t,n,i){for(var r=this.fe,s=this.ee(t,n,i),o=function(t,o){var e=s[t];r.forEachInExtent(e,(function(t){return gn(t.extent,e)}))||(++u.ae,u.dispatchEvent(new yl(ll)),u.S.call(u,e,n,i,function(t){--this.ae,this.dispatchEvent(new yl(dl,void 0,t))}.bind(u),function(){--this.ae,this.dispatchEvent(new yl(wl))}.bind(u)),r.insert(e,{extent:e.slice()}))},u=this,e=0,h=s.length;e<h;++e)o(e);this.loading=!(this.S.length<4)&&this.ae>0},n.prototype.refresh=function(){this.clear(!0),this.fe.clear(),t.prototype.refresh.call(this)},n.prototype.removeLoadedExtent=function(t){var n,i=this.fe;i.forEachInExtent(t,(function(i){if(Tn(i.extent,t))return n=i,!0})),n&&i.remove(n)},n.prototype.removeFeature=function(t){var n=o(t);n in this.ce?delete this.ce[n]:this.he&&this.he.remove(t),this.removeFeatureInternal(t),this.changed()},n.prototype.removeFeatureInternal=function(t){var n=o(t);this.de[n].forEach(Z),delete this.de[n];var i=t.getId();void 0!==i&&delete this.ve[i.toString()],delete this.le[n],this.dispatchEvent(new yl(vl,t))},n.prototype.ge=function(t){var n=!1;for(var i in this.ve)if(this.ve[i]===t){delete this.ve[i],n=!0;break}return n},n.prototype.setLoader=function(t){this.S=t},n.prototype.setUrl=function(t){mt(this.se,7),this.ue=t,this.setLoader(qf(t,this.se))},n}(hl),_l=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gl=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,wrapX:n.wrapX})||this;return i.resolution=void 0,i.distance=void 0!==n.distance?n.distance:20,i.minDistance=n.minDistance||0,i.interpolationRatio=0,i.features=[],i.geometryFunction=n.geometryFunction||function(t){var n=t.getGeometry();return mt(n.getType()==At.POINT,10),n},i.me=n.createCluster,i.source=null,i.Oe=i.refresh.bind(i),i.updateDistance(i.distance,i.minDistance),i.setSource(n.source||null),i}return _l(n,t),n.prototype.clear=function(n){this.features.length=0,t.prototype.clear.call(this,n)},n.prototype.getDistance=function(){return this.distance},n.prototype.getSource=function(){return this.source},n.prototype.loadFeatures=function(t,n,i){this.source.loadFeatures(t,n,i),n!==this.resolution&&(this.resolution=n,this.refresh())},n.prototype.setDistance=function(t){this.updateDistance(t,this.minDistance)},n.prototype.setMinDistance=function(t){this.updateDistance(this.distance,t)},n.prototype.getMinDistance=function(){return this.minDistance},n.prototype.setSource=function(t){this.source&&this.source.removeEventListener(k,this.Oe),this.source=t,t&&t.addEventListener(k,this.Oe),this.refresh()},n.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},n.prototype.updateDistance=function(t,n){var i=0===t?0:Math.min(n,t)/t,r=t!==this.distance||this.interpolationRatio!==i;this.distance=t,this.minDistance=n,this.interpolationRatio=i,r&&this.refresh()},n.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],n=this.distance*this.resolution,i=this.source.getFeatures(),r={},s=0,u=i.length;s<u;s++){var e=i[s];if(!(o(e)in r)){var h=this.geometryFunction(e);if(h){En(h.getCoordinates(),t),pn(t,n,t);var f=this.source.getFeaturesInExtent(t).filter((function(t){var n=o(t);return!(n in r)&&(r[n]=!0,!0)}));this.features.push(this.createCluster(f,t))}}}},n.prototype.createCluster=function(t,n){for(var i=[0,0],r=t.length-1;r>=0;--r){var s=this.geometryFunction(t[r]);s?Yi(i,s.getCoordinates()):t.splice(r,1)}Hi(i,1/t.length);var o=zn(n),u=this.interpolationRatio,e=new ds([i[0]*(1-u)+o[0]*u,i[1]*(1-u)+o[1]*u]);return this.me?this.me(e,t):new jt({geometry:e,features:t})},n}(bl),ml="tileloadstart",Ol="tileloadend",Ml="tileloaderror",jl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xl=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:n.projection,state:n.state,wrapX:n.wrapX})||this;i.on,i.once,i.un,i.Me=void 0!==n.opaque&&n.opaque,i.je=void 0!==n.tilePixelRatio?n.tilePixelRatio:1,i.tileGrid=void 0!==n.tileGrid?n.tileGrid:null;var r=n.tileGrid;return r&&Ye(r.getTileSize(r.getMinZoom()),[256,256]),i.tileCache=new Nf(n.cacheSize||0),i.tmpSize=[0,0],i.vs=n.key||"",i.tileOptions={transition:n.transition},i.zDirection=n.zDirection?n.zDirection:0,i}return jl(n,t),n.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);i&&i.expireCache(n)},n.prototype.forEachLoadedTile=function(t,n,i,r){var s=this.getTileCacheForProjection(t);if(!s)return!1;for(var o,u,e,h=!0,f=i.minX;f<=i.maxX;++f)for(var a=i.minY;a<=i.maxY;++a)u=xf(n,f,a),e=!1,s.containsKey(u)&&(e=(o=s.get(u)).getState()===at)&&(e=!1!==r(o)),e||(h=!1);return h},n.prototype.getGutterForProjection=function(t){return 0},n.prototype.getKey=function(){return this.vs},n.prototype.setKey=function(t){this.vs!==t&&(this.vs=t,this.changed())},n.prototype.getOpaque=function(t){return this.Me},n.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},n.prototype.getTile=function(t,n,i,s,o){return r()},n.prototype.getTileGrid=function(){return this.tileGrid},n.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Ma(t)},n.prototype.getTileCacheForProjection=function(t){return mt(dr(this.getProjection(),t),68),this.tileCache},n.prototype.getTilePixelRatio=function(t){return this.je},n.prototype.getTilePixelSize=function(t,n,i){var r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(n),o=Ye(r.getTileSize(t),this.tmpSize);return 1==s?o:Xe(o,s,this.tmpSize)},n.prototype.getTileCoordForTileUrlFunction=function(t,n){var i=void 0!==n?n:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=ja(r,t,i)),Af(t,r)?t:null},n.prototype.clear=function(){this.tileCache.clear()},n.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},n.prototype.updateCacheSize=function(t,n){var i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)},n.prototype.useTile=function(t,n,i,r){},n}(hl),El=function(t){function n(n,i){var r=t.call(this,n)||this;return r.tile=i,r}return jl(n,t),n}(c),Sl=xl,Tl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Al=function(t){function n(n){var i=this,r=void 0===n.projection?"EPSG:3857":n.projection,s=n.tileGrid;return void 0===s&&r&&(s=Ea({extent:Aa(r),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize})),(i=t.call(this,{cacheSize:.1,projection:r,tileGrid:s,opaque:n.opaque,state:n.state,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition})||this).xe={},i.S=n.loader,i.Xi=i.Xi.bind(i),i.bandCount=void 0===n.bandCount?4:n.bandCount,i}return Tl(n,t),n.prototype.setLoader=function(t){this.S=t},n.prototype.getTile=function(t,n,i,r,s){var o=xf(t,n,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var u=this.S;var e=new gt(E({tileCoord:[t,n,i],loader:function(){return u(t,n,i)}},this.tileOptions));return e.key=this.getKey(),e.addEventListener(k,this.Xi),this.tileCache.set(o,e),e},n.prototype.Xi=function(t){var n,i=t.target,r=o(i),s=i.getState();s==ft?(this.xe[r]=!0,n=ml):r in this.xe&&(delete this.xe[r],n=s==ct?Ml:s==at?Ol:void 0),n&&this.dispatchEvent(new El(n,i))},n}(Sl),Cl=!0,Nl=function(){function t(t,n,i,r,s,o){this.Ee=t,this.Se=n;var u={},e=pr(this.Se,this.Ee);this.Te=function(t){var n=t[0]+"/"+t[1];return u[n]||(u[n]=e(t)),u[n]},this.Ae=r,this.Ce=s*s,this.Ne=[],this.ke=!1,this.Ie=this.Ee.canWrapX()&&!!r&&!!this.Ee.getExtent()&&Vn(r)==Vn(this.Ee.getExtent()),this.Pe=this.Ee.getExtent()?Vn(this.Ee.getExtent()):null,this.Re=this.Se.getExtent()?Vn(this.Se.getExtent()):null;var h=qn(i),f=Bn(i),a=Dn(i),c=Fn(i),v=this.Te(h),l=this.Te(f),d=this.Te(a),w=this.Te(c),p=10+(o?Math.max(0,Math.ceil(si(Ln(i)/(o*o*256*256)))):0);if(this.Ge(h,f,a,c,v,l,d,w,p),this.ke){var y=1/0;this.Ne.forEach((function(t,n,i){y=Math.min(y,t.source[0][0],t.source[1][0],t.source[2][0])})),this.Ne.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-y>this.Pe/2){var n=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];n[0][0]-y>this.Pe/2&&(n[0][0]-=this.Pe),n[1][0]-y>this.Pe/2&&(n[1][0]-=this.Pe),n[2][0]-y>this.Pe/2&&(n[2][0]-=this.Pe);var i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.Pe/2&&(t.source=n)}}.bind(this))}u={}}return t.prototype.Le=function(t,n,i,r,s,o){this.Ne.push({source:[r,s,o],target:[t,n,i]})},t.prototype.Ge=function(t,n,i,r,s,o,u,e,h){var f=wn([s,o,u,e]),a=this.Pe?Vn(f)/this.Pe:null,c=this.Pe,v=this.Ee.canWrapX()&&a>.5&&a<1,l=!1;if(h>0){if(this.Se.isGlobal()&&this.Re)l=Vn(wn([t,n,i,r]))/this.Re>.25||l;!v&&this.Ee.isGlobal()&&a&&(l=a>.25||l)}if(!(!l&&this.Ae&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3]))||Zn(f,this.Ae)){var d=0;if(!(l||isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(e[0])&&isFinite(e[1])))if(h>0)l=!0;else if(1!=(d=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(u[0])&&isFinite(u[1])?0:2)+(isFinite(e[0])&&isFinite(e[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(h>0){if(!l){var w=[(t[0]+i[0])/2,(t[1]+i[1])/2],p=this.Te(w),y=void 0;if(v)y=(ai(s[0],c)+ai(u[0],c))/2-ai(p[0],c);else y=(s[0]+u[0])/2-p[0];var b=(s[1]+u[1])/2-p[1];l=y*y+b*b>this.Ce}if(l){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var _=[(n[0]+i[0])/2,(n[1]+i[1])/2],g=this.Te(_),m=[(r[0]+t[0])/2,(r[1]+t[1])/2],O=this.Te(m);this.Ge(t,n,_,m,s,o,g,O,h-1),this.Ge(m,_,i,r,O,g,u,e,h-1)}else{var M=[(t[0]+n[0])/2,(t[1]+n[1])/2],j=this.Te(M),x=[(i[0]+r[0])/2,(i[1]+r[1])/2],E=this.Te(x);this.Ge(t,M,x,r,s,j,E,e,h-1),this.Ge(M,n,i,x,j,o,u,E,h-1)}return}}if(v){if(!this.Ie)return;this.ke=!0}0==(11&d)&&this.Le(t,i,r,s,u,e),0==(14&d)&&this.Le(t,i,n,s,u,o),d&&(0==(13&d)&&this.Le(n,r,t,o,e,s),0==(7&d)&&this.Le(n,r,i,o,e,u))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.Ne.forEach((function(n,i,r){var s=n.source;Nn(t,s[0]),Nn(t,s[1]),Nn(t,s[2])})),t},t.prototype.getTriangles=function(){return this.Ne},t}(),kl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Il=function(t){function n(n,i,r,s,o,u,e){var h=this,f=n.getExtent(),a=i.getExtent(),c=a?Wn(r,a):r,v=ba(n,i,zn(c),s),l=new Nl(n,i,c,f,.5*v,s),d=u(l.calculateSourceExtent(),v,o),w=d?no:oo,p=d?d.getPixelRatio():1;return(h=t.call(this,r,s,p,w)||this).Se=i,h.Ae=f,h.Fe=l,h.$n=s,h.De=r,h.ze=d,h.Ue=p,h.Xe=e,h.Et=null,h.Ye=null,h}return kl(n,t),n.prototype.disposeInternal=function(){this.state==io&&this.We(),t.prototype.disposeInternal.call(this)},n.prototype.getImage=function(){return this.Et},n.prototype.getProjection=function(){return this.Se},n.prototype.qe=function(){var t=this.ze.getState();if(t==ro){var n=Vn(this.De)/this.$n,i=Yn(this.De)/this.$n;this.Et=ga(n,i,this.Ue,this.ze.getResolution(),this.Ae,this.$n,this.De,this.Fe,[{extent:this.ze.getExtent(),image:this.ze.getImage()}],0,void 0,this.Xe)}this.state=t,this.changed()},n.prototype.load=function(){if(this.state==no){this.state=io,this.changed();var t=this.ze.getState();t==ro||t==so?this.qe():(this.Ye=B(this.ze,k,(function(t){var n=this.ze.getState();n!=ro&&n!=so||(this.We(),this.qe())}),this),this.ze.load())}},n.prototype.We=function(){Z(this.Ye),this.Ye=null},n}(to),Pl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Rl="imageloadstart",Gl="imageloadend",Ll="imageloaderror",Fl=function(t){function n(n,i){var r=t.call(this,n)||this;return r.image=i,r}return Pl(n,t),n}(c);function Dl(t,n){t.getImage().src=n}var zl=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,projection:n.projection,state:n.state})||this;return i.on,i.once,i.un,i.ei=void 0!==n.resolutions?n.resolutions:null,i.Be=null,i.Ve=0,i.Xe=!1===n.imageSmoothing?wa:void 0,i}return Pl(n,t),n.prototype.getResolutions=function(){return this.ei},n.prototype.getContextOptions=function(){return this.Xe},n.prototype.findNearestResolution=function(t){if(this.ei){var n=y(this.ei,t,0);t=this.ei[n]}return t},n.prototype.getImage=function(t,n,i,r){var s=this.getProjection();if(s&&r&&!dr(s,r)){if(this.Be){if(this.Ve==this.getRevision()&&dr(this.Be.getProjection(),r)&&this.Be.getResolution()==n&&Tn(this.Be.getExtent(),t))return this.Be;this.Be.dispose(),this.Be=null}return this.Be=new Il(s,r,t,n,i,function(t,n,i){return this.getImageInternal(t,n,i,s)}.bind(this),this.Xe),this.Ve=this.getRevision(),this.Be}return s&&(r=s),this.getImageInternal(t,n,i,r)},n.prototype.getImageInternal=function(t,n,i,s){return r()},n.prototype.handleImageChange=function(t){var n=t.target;switch(n.getState()){case io:this.loading=!0,this.dispatchEvent(new Fl(Rl,n));break;case ro:this.loading=!1,this.dispatchEvent(new Fl(Gl,n));break;case so:this.loading=!1,this.dispatchEvent(new Fl(Ll,n))}},n}(hl),Ul=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Xl=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,{attributions:r.attributions,imageSmoothing:r.imageSmoothing,projection:r.projection,resolutions:r.resolutions,state:r.state})||this).Ze=r.canvasFunction,i.Et=null,i.Je=0,i.He=void 0!==r.ratio?r.ratio:1.5,i}return Ul(n,t),n.prototype.getImageInternal=function(t,n,i,r){n=this.findNearestResolution(n);var s=this.Et;if(s&&this.Je==this.getRevision()&&s.getResolution()==n&&s.getPixelRatio()==i&&gn(s.getExtent(),t))return s;$n(t=t.slice(),this.He);var o=[Vn(t)/n*i,Yn(t)/n*i],u=this.Ze.call(this,t,n,i,o,r);return u&&(s=new ao(t,n,i,u)),this.Et=s,this.Je=this.getRevision(),s},n}(zl),Yl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var Wl=function(t){function n(n){var i=t.call(this,{imageSmoothing:n.imageSmoothing,projection:n.projection,resolutions:n.resolutions})||this;return i.Tt=void 0!==n.crossOrigin?n.crossOrigin:null,i.$e=void 0!==n.displayDpi?n.displayDpi:96,i.Ke=n.params||{},i.ue=n.url,i.Ot=void 0!==n.imageLoadFunction?n.imageLoadFunction:Dl,i.Qe=void 0===n.hidpi||n.hidpi,i.K=void 0!==n.metersPerUnit?n.metersPerUnit:1,i.He=void 0!==n.ratio?n.ratio:1,i.th=void 0!==n.useOverlay&&n.useOverlay,i._t=null,i.Je=0,i}return Yl(n,t),n.prototype.getParams=function(){return this.Ke},n.prototype.getImageInternal=function(t,n,i,r){n=this.findNearestResolution(n),i=this.Qe?i:1;var s=this._t;if(s&&this.Je==this.getRevision()&&s.getResolution()==n&&s.getPixelRatio()==i&&gn(s.getExtent(),t))return s;1!=this.He&&$n(t=t.slice(),this.He);var o=[Vn(t)/n*i,Yn(t)/n*i];if(void 0!==this.ue){var u=this.getUrl(this.ue,this.Ke,t,o,r);(s=new ho(t,n,i,u,this.Tt,this.Ot)).addEventListener(k,this.handleImageChange.bind(this))}else s=null;return this._t=s,this.Je=this.getRevision(),s},n.prototype.getImageLoadFunction=function(){return this.Ot},n.prototype.updateParams=function(t){E(this.Ke,t),this.changed()},n.prototype.getUrl=function(t,n,i,r,s){var o=function(t,n,i,r){var s=Vn(t),o=Yn(t),u=n[0],e=n[1],h=.0254/r;return e*s>u*o?s*i/(u*h):o*i/(e*h)}(i,r,this.K,this.$e),u=zn(i),e={OPERATION:this.th?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.$e,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:o,SETVIEWCENTERX:u[0],SETVIEWCENTERY:u[1]};return E(e,n),Pa(t,e)},n.prototype.setImageLoadFunction=function(t){this._t=null,this.Ot=t,this.changed()},n}(zl),ql=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bl=function(t){function n(n){var i=this,r=void 0!==n.crossOrigin?n.crossOrigin:null,s=void 0!==n.imageLoadFunction?n.imageLoadFunction:Dl;return(i=t.call(this,{attributions:n.attributions,imageSmoothing:n.imageSmoothing,projection:er(n.projection)})||this).ue=n.url,i.nh=n.imageExtent,i._t=new ho(i.nh,void 0,1,i.ue,r,s),i.ih=n.imageSize?n.imageSize:null,i._t.addEventListener(k,i.handleImageChange.bind(i)),i}return ql(n,t),n.prototype.getImageExtent=function(){return this.nh},n.prototype.getImageInternal=function(t,n,i,r){return Zn(t,this._t.getExtent())?this._t:null},n.prototype.getUrl=function(){return this.ue},n.prototype.handleImageChange=function(n){if(this._t.getState()==ro){var i=this._t.getExtent(),r=this._t.getImage(),s=void 0,o=void 0;this.ih?(s=this.ih[0],o=this.ih[1]):(s=r.width,o=r.height);var u=Vn(i),e=Yn(i),h=u/s,f=e/o,a=s,c=o;if(h>f?a=Math.round(u/f):c=Math.round(e/h),a!==s||c!==o){var v=co(a,c);E(v,this.getContextOptions());var l=v.canvas;v.drawImage(r,0,0,s,o,0,0,l.width,l.height),this._t.setImage(l)}}t.prototype.handleImageChange.call(this,n)},n}(zl),Vl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Zl=function(t){function n(n,i,r,s,o,u,e,h,f,a,c,v){var l=t.call(this,o,ht)||this;l.rh=void 0!==c&&c,l.Xe=v,l.yt=e,l.sh=h,l.Et=null,l.oh=i,l.uh=s,l.eh=u||o,l.hh=[],l.fh=null,l.ah=0;var d=s.getTileCoordExtent(l.eh),w=l.uh.getExtent(),p=l.oh.getExtent(),y=w?Wn(d,w):d;if(0===Ln(y))return l.state=vt,l;var b=n.getExtent();b&&(p=p?Wn(p,b):b);var _=s.getResolution(l.eh[0]),g=_a(n,r,y,_);if(!isFinite(g)||g<=0)return l.state=vt,l;var m=void 0!==a?a:.5;if(l.Fe=new Nl(n,r,y,p,g*m,_),0===l.Fe.getTriangles().length)return l.state=vt,l;l.ah=i.getZForResolution(g);var O=l.Fe.calculateSourceExtent();if(p&&(n.canWrapX()?(O[1]=ii(O[1],p[1],p[3]),O[3]=ii(O[3],p[1],p[3])):O=Wn(O,p)),Ln(O)){for(var M=i.getTileRangeForExtentAndZ(O,l.ah),j=M.minX;j<=M.maxX;j++)for(var x=M.minY;x<=M.maxY;x++){var E=f(l.ah,j,x,e);E&&l.hh.push(E)}0===l.hh.length&&(l.state=vt)}else l.state=vt;return l}return Vl(n,t),n.prototype.getImage=function(){return this.Et},n.prototype.qe=function(){var t=[];if(this.hh.forEach(function(n,i,r){n&&n.getState()==at&&t.push({extent:this.oh.getTileCoordExtent(n.tileCoord),image:n.getImage()})}.bind(this)),this.hh.length=0,0===t.length)this.state=ct;else{var n=this.eh[0],i=this.uh.getTileSize(n),r="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],o=this.uh.getResolution(n),u=this.oh.getResolution(this.ah),e=this.uh.getTileCoordExtent(this.eh);this.Et=ga(r,s,this.yt,u,this.oh.getExtent(),o,e,this.Fe,t,this.sh,this.rh,this.Xe),this.state=at}this.changed()},n.prototype.load=function(){if(this.state==ht){this.state=ft,this.changed();var t=0;this.fh=[],this.hh.forEach(function(n,i,r){var s=n.getState();if(s==ht||s==ft){t++;var o=B(n,k,(function(i){var r=n.getState();r!=at&&r!=ct&&r!=vt||(Z(o),0===--t&&(this.lh(),this.qe()))}),this);this.fh.push(o)}}.bind(this)),0===t?setTimeout(this.qe.bind(this),0):this.hh.forEach((function(t,n,i){t.getState()==ht&&t.load()}))}},n.prototype.lh=function(){this.fh.forEach(Z),this.fh=null},n}(bt),Jl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Hl=function(t){function n(i){var r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this;return r.dh=r.tileUrlFunction===n.prototype.tileUrlFunction,r.tileLoadFunction=i.tileLoadFunction,i.tileUrlFunction&&(r.tileUrlFunction=i.tileUrlFunction),r.urls=null,i.urls?r.setUrls(i.urls):i.url&&r.setUrl(i.url),r.xe={},r}return Jl(n,t),n.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},n.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},n.prototype.getUrls=function(){return this.urls},n.prototype.handleTileChange=function(t){var n,i=t.target,r=o(i),s=i.getState();s==ft?(this.xe[r]=!0,n=ml):r in this.xe&&(delete this.xe[r],n=s==ct?Ml:s==at?Ol:void 0),null!=n&&this.dispatchEvent(new El(n,i))},n.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},n.prototype.setTileUrlFunction=function(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==n?this.setKey(n):this.changed()},n.prototype.setUrl=function(t){var n=Ia(t);this.urls=n,this.setUrls(n)},n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.dh?this.setTileUrlFunction(Na(t,this.tileGrid),n):this.setKey(n)},n.prototype.tileUrlFunction=function(t,n,i){},n.prototype.useTile=function(t,n,i){var r=xf(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},n}(Sl),$l=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Kl(t,n){t.getImage().src=n}var Ql=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:Kl,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX,transition:n.transition,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this;return i.crossOrigin=void 0!==n.crossOrigin?n.crossOrigin:null,i.tileClass=void 0!==n.tileClass?n.tileClass:go,i.tileCacheForProjection={},i.tileGridForProjection={},i.wh=n.reprojectionErrorThreshold,i.Xe=!1===n.imageSmoothing?wa:void 0,i.ph=!1,i}return $l(n,t),n.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==i?n:{}),this.tileCacheForProjection){var s=this.tileCacheForProjection[r];s.expireCache(s==i?n:{})}},n.prototype.getContextOptions=function(){return this.Xe},n.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!dr(this.getProjection(),t)?0:this.getGutter()},n.prototype.getGutter=function(){return 0},n.prototype.getKey=function(){return t.prototype.getKey.call(this)+(this.Xe?"\n"+JSON.stringify(this.Xe):"")},n.prototype.getOpaque=function(n){return!(this.getProjection()&&n&&!dr(this.getProjection(),n))&&t.prototype.getOpaque.call(this,n)},n.prototype.getTileGridForProjection=function(t){var n=this.getProjection();if(!this.tileGrid||n&&!dr(n,t)){var i=o(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Ma(t)),this.tileGridForProjection[i]}return this.tileGrid},n.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();if(!n||dr(n,t))return this.tileCache;var i=o(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Nf(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},n.prototype.yh=function(t,n,i,r,s,o){var u=[t,n,i],e=this.getTileCoordForTileUrlFunction(u,s),h=e?this.tileUrlFunction(e,r,s):void 0,f=new this.tileClass(u,void 0!==h?ht:vt,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=o,f.addEventListener(k,this.handleTileChange.bind(this)),f},n.prototype.getTile=function(t,n,i,r,s){var o=this.getProjection();if(o&&s&&!dr(o,s)){var u=this.getTileCacheForProjection(s),e=[t,n,i],h=void 0,f=Ef(e);u.containsKey(f)&&(h=u.get(f));var a=this.getKey();if(h&&h.key==a)return h;var c=this.getTileGridForProjection(o),v=this.getTileGridForProjection(s),l=this.getTileCoordForTileUrlFunction(e,s),d=new Zl(o,c,s,v,e,l,this.getTilePixelRatio(r),this.getGutter(),function(t,n,i,r){return this.getTileInternal(t,n,i,r,o)}.bind(this),this.wh,this.ph,this.Xe);return d.key=a,h?(d.interimTile=h,d.refreshInterimChain(),u.replace(f,d)):u.set(f,d),d}return this.getTileInternal(t,n,i,r,o||s)},n.prototype.getTileInternal=function(t,n,i,r,s){var o=null,u=xf(t,n,i),e=this.getKey();if(this.tileCache.containsKey(u)){if((o=this.tileCache.get(u)).key!=e){var h=o;o=this.yh(t,n,i,r,s,e),h.getState()==ht?o.interimTile=h.interimTile:o.interimTile=h,o.refreshInterimChain(),this.tileCache.replace(u,o)}}else o=this.yh(t,n,i,r,s,e),this.tileCache.set(u,o);return o},n.prototype.setRenderReprojectionEdges=function(t){if(this.ph!=t){for(var n in this.ph=t,this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},n.prototype.setTileGridForProjection=function(t,n){var i=er(t);if(i){var r=o(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}},n}(Hl),td=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),nd=function(t){function n(n){var i=n||{},r=void 0!==i.projection?i.projection:"EPSG:3857",s=void 0!==i.tileGrid?i.tileGrid:Ea({extent:Aa(r),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,imageSmoothing:i.imageSmoothing,opaque:i.opaque,projection:r,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:s,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this}return td(n,t),n}(Ql),id=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rd='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',sd=function(t){function n(n){var i,r=n||{};i=void 0!==r.attributions?r.attributions:[rd];var s=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",o=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:i,attributionsCollapsible:!1,cacheSize:r.cacheSize,crossOrigin:s,imageSmoothing:r.imageSmoothing,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,opaque:void 0===r.opaque||r.opaque,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,transition:r.transition,url:o,wrapX:r.wrapX,zDirection:r.zDirection})||this}return id(n,t),n}(nd),od=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ud=function(t){function n(n){var i=n||{};return t.call(this,i)||this}return od(n,t),n}(iu),ed=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hd=function(t){function n(n){var i=t.call(this,n)||this;return i.container=null,i.renderedResolution,i.tempTransform=[1,0,0,1,0,0],i.pixelTransform=[1,0,0,1,0,0],i.inversePixelTransform=[1,0,0,1,0,0],i.context=null,i.containerReused=!1,i}return ed(n,t),n.prototype.useContainer=function(t,n,i){var r,s,o=this.getLayer().getClassName();t&&t.style.opacity===yu(i)&&t.className===o&&((e=t.firstElementChild)instanceof HTMLCanvasElement&&(s=e.getContext("2d")));if(s&&s.canvas.style.transform===n?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(r=document.createElement("div")).className=o;var u=r.style;u.position="absolute",u.width="100%",u.height="100%";var e=(s=co()).canvas;r.appendChild(e),(u=e.style).position="absolute",u.left="0",u.transformOrigin="top left",this.container=r,this.context=s}},n.prototype.clipUnrotated=function(t,n,i){var r=qn(i),s=Bn(i),o=Dn(i),u=Fn(i);Ht(n.coordinateToPixelTransform,r),Ht(n.coordinateToPixelTransform,s),Ht(n.coordinateToPixelTransform,o),Ht(n.coordinateToPixelTransform,u);var e=this.inversePixelTransform;Ht(e,r),Ht(e,s),Ht(e,o),Ht(e,u),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(u[0]),Math.round(u[1])),t.clip()},n.prototype.Ru=function(t,n,i){var r=this.getLayer();if(r.hasListener(t)){var s=new eu(t,this.inversePixelTransform,i,n);r.dispatchEvent(s)}},n.prototype.preRender=function(t,n){this.Ru(Vo,t,n)},n.prototype.postRender=function(t,n){this.Ru(Zo,t,n)},n.prototype.getRenderTransform=function(t,n,i,r,s,o,u){var e=s/2,h=o/2,f=r/n,a=-f,c=-t[0]+u,v=-t[1];return tn(this.tempTransform,e,h,f,a,-i,c,v)},n.prototype.getDataAtPixel=function(t,n,i){var r,s=Ht(this.inversePixelTransform,t.slice()),o=this.context,u=this.getLayer().getExtent();if(u&&!_n(u,Ht(n.pixelToCoordinateTransform,t.slice())))return null;try{var e=Math.round(s[0]),h=Math.round(s[1]),f=document.createElement("canvas"),a=f.getContext("2d");f.width=1,f.height=1,a.clearRect(0,0,1,1),a.drawImage(o.canvas,e,h,1,1,0,0,1,1),r=a.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:r}return 0===r[3]?null:r},n}(Hc),fd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ad=function(t){function n(n){var i=t.call(this,n)||this;return i._t=null,i}return fd(n,t),n.prototype.getImage=function(){return this._t?this._t.getImage():null},n.prototype.prepareFrame=function(t){var n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,r=t.viewState,s=r.resolution,o=this.getLayer().getSource(),u=t.viewHints,e=t.extent;if(void 0!==n.extent&&(e=Wn(e,xr(n.extent,r.projection))),!u[we]&&!u[pe]&&!Jn(e))if(o){var h=r.projection,f=o.getImage(e,s,i,h);f&&this.loadImage(f)&&(this._t=f)}else this._t=null;return!!this._t},n.prototype.renderFrame=function(t,n){var i=this._t,r=i.getExtent(),s=i.getResolution(),o=i.getPixelRatio(),u=t.layerStatesArray[t.layerIndex],e=t.pixelRatio,h=t.viewState,f=h.center,a=h.resolution,c=t.size,v=e*s/(a*o),l=Math.round(c[0]*e),d=Math.round(c[1]*e),w=h.rotation;if(w){var p=Math.round(Math.sqrt(l*l+d*d));l=p,d=p}tn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/e,1/e,w,-l/2,-d/2),nn(this.inversePixelTransform,this.pixelTransform);var y=sn(this.pixelTransform);this.useContainer(n,y,u.opacity);var b=this.context,_=b.canvas;_.width!=l||_.height!=d?(_.width=l,_.height=d):this.containerReused||b.clearRect(0,0,l,d);var g=!1,m=!0;if(u.extent){var O=xr(u.extent,h.projection);(g=(m=Zn(O,t.extent))&&!gn(O,t.extent))&&this.clipUnrotated(b,t,O)}var M=i.getImage(),j=tn(this.tempTransform,l/2,d/2,v,v,0,o*(r[0]-f[0])/s,o*(f[1]-r[3])/s);this.renderedResolution=s*e/o;var x=M.width*j[0],S=M.height*j[3];if(E(b,this.getLayer().getSource().getContextOptions()),this.preRender(b,t),m&&x>=.5&&S>=.5){var T=j[4],A=j[5],C=u.opacity,N=void 0;1!==C&&(N=b.globalAlpha,b.globalAlpha=C),b.drawImage(M,0,0,+M.width,+M.height,Math.round(T),Math.round(A),Math.round(x),Math.round(S)),1!==C&&(b.globalAlpha=N)}return this.postRender(b,t),g&&b.restore(),y!==_.style.transform&&(_.style.transform=y),this.container},n}(hd),cd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vd=function(t){function n(n){return t.call(this,n)||this}return cd(n,t),n.prototype.createRenderer=function(){return new ad(this)},n}(ud),ld="preload",dd="useInterimTilesOnError",wd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pd=function(t){function n(n){var i=this,r=n||{},s=E({},r);return delete s.preload,delete s.useInterimTilesOnError,(i=t.call(this,s)||this).on,i.once,i.un,i.setPreload(void 0!==r.preload?r.preload:0),i.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),i}return wd(n,t),n.prototype.getPreload=function(){return this.get(ld)},n.prototype.setPreload=function(t){this.set(ld,t)},n.prototype.getUseInterimTilesOnError=function(){return this.get(dd)},n.prototype.setUseInterimTilesOnError=function(t){this.set(dd,t)},n}(iu),yd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bd=function(t){function n(n){var i=t.call(this,n)||this;return i.extentChanged=!0,i.bh=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i._h=!1,i.tmpExtent=[1/0,1/0,-1/0,-1/0],i.gh=new Pf(0,0,0,0),i}return yd(n,t),n.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==at||i==vt||i==ct&&!r},n.prototype.getTile=function(t,n,i,r){var s=r.pixelRatio,o=r.viewState.projection,u=this.getLayer(),e=u.getSource().getTile(t,n,i,s,o);return e.getState()==ct&&(u.getUseInterimTilesOnError()?u.getPreload()>0&&(this._h=!0):e.setState(at)),this.isDrawableTile(e)||(e=e.getInterimTile()),e},n.prototype.loadedTileCallback=function(n,i,r){return!!this.isDrawableTile(r)&&t.prototype.loadedTileCallback.call(this,n,i,r)},n.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},n.prototype.renderFrame=function(t,n){var i=t.layerStatesArray[t.layerIndex],r=t.viewState,s=r.projection,u=r.resolution,e=r.center,h=r.rotation,f=t.pixelRatio,a=this.getLayer(),c=a.getSource(),v=c.getRevision(),l=c.getTileGridForProjection(s),d=l.getZForResolution(u,c.zDirection),p=l.getResolution(d),y=t.extent,b=i.extent&&xr(i.extent,s);b&&(y=Wn(y,xr(i.extent,s)));var _=c.getTilePixelRatio(f),g=Math.round(t.size[0]*_),m=Math.round(t.size[1]*_);if(h){var O=Math.round(Math.sqrt(g*g+m*m));g=O,m=O}var M=p*g/2/_,j=p*m/2/_,x=[e[0]-M,e[1]-j,e[0]+M,e[1]+j],S=l.getTileRangeForExtentAndZ(y,d),T={};T[d]={};var A=this.createLoadedTileFinder(c,s,T),C=this.tmpExtent,N=this.gh;this._h=!1;for(var k=S.minX;k<=S.maxX;++k)for(var I=S.minY;I<=S.maxY;++I){var P=this.getTile(d,k,I,t);if(this.isDrawableTile(P)){var R=o(this);if(P.getState()==at){T[d][P.tileCoord.toString()]=P;var G=P.inTransition(R);this._h||!G&&-1!==this.renderedTiles.indexOf(P)||(this._h=!0)}if(1===P.getAlpha(R,t.time))continue}var L=l.getTileCoordChildTileRange(P.tileCoord,N,C),F=!1;L&&(F=A(d+1,L)),F||l.forEachTileCoordParentTileRange(P.tileCoord,A,N,C)}var D=p/u;tn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/_,1/_,h,-g/2,-m/2);var z=sn(this.pixelTransform);this.useContainer(n,z,i.opacity);var U=this.context,X=U.canvas;nn(this.inversePixelTransform,this.pixelTransform),tn(this.tempTransform,g/2,m/2,D,D,0,-g/2,-m/2),X.width!=g||X.height!=m?(X.width=g,X.height=m):this.containerReused||U.clearRect(0,0,g,m),b&&this.clipUnrotated(U,t,b),E(U,c.getContextOptions()),this.preRender(U,t),this.renderedTiles.length=0;var Y,W,q,B=Object.keys(T).map(Number);B.sort(w),1!==i.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(Y=[],W=[]):B=B.reverse();for(var V=B.length-1;V>=0;--V){var Z=B[V],J=c.getTilePixelSize(Z,f,s),H=l.getResolution(Z)/p,$=J[0]*H*D,K=J[1]*H*D,Q=l.getTileCoordForCoordAndZ(qn(x),Z),tt=l.getTileCoordExtent(Q),nt=Ht(this.tempTransform,[_*(tt[0]-x[0])/p,_*(x[3]-tt[3])/p]),it=_*c.getGutterForProjection(s),rt=T[Z];for(var st in rt){var ot=(P=rt[st]).tileCoord,ut=Q[1]-ot[1],et=Math.round(nt[0]-(ut-1)*$),ht=Q[2]-ot[2],ft=Math.round(nt[1]-(ht-1)*K),ct=et-(k=Math.round(nt[0]-ut*$)),vt=ft-(I=Math.round(nt[1]-ht*K)),lt=d===Z;if(!(G=lt&&1!==P.getAlpha(o(this),t.time)))if(Y){U.save(),q=[k,I,k+ct,I,k+ct,I+vt,k,I+vt];for(var dt=0,wt=Y.length;dt<wt;++dt)if(d!==Z&&Z<W[dt]){var pt=Y[dt];U.beginPath(),U.moveTo(q[0],q[1]),U.lineTo(q[2],q[3]),U.lineTo(q[4],q[5]),U.lineTo(q[6],q[7]),U.moveTo(pt[6],pt[7]),U.lineTo(pt[4],pt[5]),U.lineTo(pt[2],pt[3]),U.lineTo(pt[0],pt[1]),U.clip()}Y.push(q),W.push(Z)}else U.clearRect(k,I,ct,vt);this.drawTileImage(P,t,k,I,ct,vt,it,lt),Y&&!G?(U.restore(),this.renderedTiles.unshift(P)):this.renderedTiles.push(P),this.updateUsedTiles(t.usedTiles,c,P)}}this.renderedRevision=v,this.renderedResolution=p,this.extentChanged=!this.bh||!Tn(this.bh,x),this.bh=x,this.renderedPixelRatio=f,this.renderedProjection=s,this.manageTilePyramid(t,c,l,f,s,y,d,a.getPreload()),this.scheduleExpireCache(t,c),this.postRender(U,t),i.extent&&U.restore(),z!==X.style.transform&&(X.style.transform=z);var yt=yu(i.opacity),bt=this.container;return yt!==bt.style.opacity&&(bt.style.opacity=yt),this.container},n.prototype.drawTileImage=function(t,n,i,r,s,u,e,h){var f=this.getTileImage(t);if(f){var a=o(this),c=h?t.getAlpha(a,n.time):1,v=c!==this.context.globalAlpha;v&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(f,e,e,f.width-2*e,f.height-2*e,i,r,s,u),v&&this.context.restore(),1!==c?n.animate=!0:h&&t.endTransition(a)}},n.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},n.prototype.getTileImage=function(t){return t.getImage()},n.prototype.scheduleExpireCache=function(t,n){if(n.canExpireCache()){var i=function(t,n,i){var r=o(t);r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}.bind(null,n);t.postRenderFunctions.push(i)}},n.prototype.updateUsedTiles=function(t,n,i){var r=o(n);r in t||(t[r]={}),t[r][i.getKey()]=!0},n.prototype.manageTilePyramid=function(t,n,i,r,s,u,e,h,f){var a=o(n);a in t.wantedTiles||(t.wantedTiles[a]={});var c,v,l,d,w,p,y=t.wantedTiles[a],b=t.tileQueue,_=0;for(p=i.getMinZoom();p<=e;++p)for(v=i.getTileRangeForExtentAndZ(u,p,v),l=i.getResolution(p),d=v.minX;d<=v.maxX;++d)for(w=v.minY;w<=v.maxY;++w)e-p<=h?(++_,(c=n.getTile(p,d,w,r,s)).getState()==ht&&(y[c.getKey()]=!0,b.isKeyQueued(c.getKey())||b.enqueue([c,a,i.getTileCoordCenter(c.tileCoord),l])),void 0!==f&&f(c)):n.useTile(p,d,w,s);n.updateCacheSize(_,s)},n}(hd);bd.prototype.getLayer;var _d,gd=bd,md=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Od=function(t){function n(n){return t.call(this,n)||this}return md(n,t),n.prototype.createRenderer=function(){return new gd(this)},n}(pd),Md=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jd=!0;try{new ImageData(10,10)}catch(t){jd=!1}function xd(t,n,i){if(jd)return new ImageData(t,n,i);_d||(_d=document.createElement("canvas").getContext("2d"));var r=_d.createImageData(n,i);return r.data.set(t),r}function Ed(t){var n=!0;try{new ImageData(10,10)}catch(t){n=!1}function i(t,i,r){return n?new ImageData(t,i,r):{data:t,width:i,height:r}}return function(n){var r=n.buffers,s=n.meta,o=n.imageOps,u=n.width,e=n.height,h=r.length,f=r[0].byteLength;if(o){for(var a=new Array(h),c=0;c<h;++c)a[c]=i(new Uint8ClampedArray(r[c]),u,e);return t(a,s).data.buffer}var v=new Uint8ClampedArray(f),l=new Array(h),d=new Array(h);for(c=0;c<h;++c)l[c]=new Uint8ClampedArray(r[c]),d[c]=[0,0,0,0];for(var w=0;w<f;w+=4){for(var p=0;p<h;++p){var y=l[p];d[p][0]=y[w],d[p][1]=y[w+1],d[p][2]=y[w+2],d[p][3]=y[w+3]}var b=t(d,s);v[w]=b[0],v[w+1]=b[1],v[w+2]=b[2],v[w+3]=b[3]}return v.buffer}}function Sd(t,n){var i=Object.keys(t.lib||{}).map((function(n){return"var "+n+" = "+t.lib[n].toString()+";"})).concat(["var __minion__ = ("+Ed.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Blob(i,{type:"text/javascript"}),s=URL.createObjectURL(r),o=new Worker(s);return o.addEventListener("message",n),o}var Td=function(t){function n(n){var i,r=t.call(this)||this;r._imageOps=!!n.imageOps,i=0===n.threads?0:r._imageOps?1:n.threads||1;var s=new Array(i);if(i)for(var o=0;o<i;++o)s[o]=Sd(n,r._onWorkerMessage.bind(r,o));else s[0]=function(t,n){var i=Ed(t.operation),r=!1;return{postMessage:function(t){setTimeout((function(){r||n({data:{buffer:i(t),meta:t.meta}})}),0)},terminate:function(){r=!0}}}(n,r._onWorkerMessage.bind(r,0));return r._workers=s,r._queue=[],r._maxQueueLength=n.queue||1/0,r._running=0,r._dataLookup={},r._job=null,r}return Md(n,t),n.prototype.process=function(t,n,i){this._enqueue({inputs:t,meta:n,callback:i}),this._dispatch()},n.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},n.prototype._dispatch=function(){if(!this._running&&0!==this._queue.length){var t=this._queue.shift();this._job=t;var n=t.inputs[0].width,i=t.inputs[0].height,r=t.inputs.map((function(t){return t.data.buffer})),s=this._workers.length;if(this._running=s,1!==s)for(var o=t.inputs[0].data.length,u=4*Math.ceil(o/4/s),e=0;e<s;++e){for(var h=e*u,f=[],a=0,c=r.length;a<c;++a)f.push(r[a].slice(h,h+u));this._workers[e].postMessage({buffers:f,meta:t.meta,imageOps:this._imageOps,width:n,height:i},f)}else this._workers[0].postMessage({buffers:r,meta:t.meta,imageOps:this._imageOps,width:n,height:i},r)}},n.prototype._onWorkerMessage=function(t,n){this.disposed||(this._dataLookup[t]=n.data,--this._running,0===this._running&&this._resolveJob())},n.prototype._resolveJob=function(){var t,n,i=this._job,r=this._workers.length;if(1===r)t=new Uint8ClampedArray(this._dataLookup[0].buffer),n=this._dataLookup[0].meta;else{var s=i.inputs[0].data.length;t=new Uint8ClampedArray(s),n=new Array(r);for(var o=4*Math.ceil(s/4/r),u=0;u<r;++u){var e=this._dataLookup[u].buffer,h=u*o;t.set(new Uint8ClampedArray(e),h),n[u]=this._dataLookup[u].meta}}this._job=null,this._dataLookup={},i.callback(null,xd(t,i.inputs[0].width,i.inputs[0].height),n),this._dispatch()},n.prototype.disposeInternal=function(){for(var t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0},n}(l),Ad="beforeoperations",Cd="afteroperations",Nd="pixel",kd="image",Id=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.extent=i.extent,s.resolution=i.viewState.resolution/i.pixelRatio,s.data=r,s}return Md(n,t),n}(c),Pd=function(t){function n(n){var i=t.call(this,{projection:null})||this;i.on,i.once,i.un,i.mh=null,i.Oh=void 0!==n.operationType?n.operationType:Nd,i.Mh=void 0!==n.threads?n.threads:1,i.jh=function(t){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=Ld(t[r]);return i}(n.sources);for(var r,s=i.changed.bind(i),o=0,u=i.jh.length;o<u;++o)i.jh[o].addEventListener(k,s);return i.Ui=new le((function(){return 1}),i.changed.bind(i)),i.xh,i.Eh=null,i.Je,i.Ei={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(r=i.jh,r.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:i.Ui,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},i.setAttributions((function(t){for(var i=[],r=0,s=n.sources.length;r<s;++r){var o=n.sources[r],u=(o instanceof hl?o:o.getSource()).getAttributions();if("function"==typeof u){var e=u(t);i.push.apply(i,e)}}return 0!==i.length?i:null})),void 0!==n.operation&&i.setOperation(n.operation,n.lib),i}return Md(n,t),n.prototype.setOperation=function(t,n){this.mh&&this.mh.dispose(),this.mh=new Td({operation:t,imageOps:this.Oh===kd,queue:1,lib:n,threads:this.Mh}),this.changed()},n.prototype.Sh=function(t,n,i){var r=E({},this.Ei);r.viewState=E({},r.viewState);var s=zn(t);r.extent=t.slice(),r.size[0]=Math.round(Vn(t)/n),r.size[1]=Math.round(Yn(t)/n),r.time=Date.now();var o=r.viewState;return o.center=s,o.projection=i,o.resolution=n,r},n.prototype.Th=function(){for(var t=!0,n=0,i=this.jh.length;n<i;++n)if(this.jh[n].getSource().getState()!==Qo){t=!1;break}return t},n.prototype.getImage=function(t,n,i,r){if(!this.Th())return null;var s=this.Sh(t,n,r);if(this.xh=s,this.Eh){var o=this.Eh.getResolution(),u=this.Eh.getExtent();n===o&&Tn(t,u)||(this.Eh=null)}return this.Eh&&this.getRevision()===this.Je||this.Ah(),s.tileQueue.loadMoreTiles(16,16),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.Eh},n.prototype.Ah=function(){for(var t=this.xh,n=this.jh.length,i=new Array(n),r=0;r<n;++r){t.layerIndex=r;var s=Gd(this.jh[r],t);if(!s)return;i[r]=s}var o={};this.dispatchEvent(new Id(Ad,t,o)),this.mh.process(i,o,this.Ch.bind(this,t))},n.prototype.Ch=function(t,n,i,r){if(!n&&i){var s=t.extent,o=t.viewState.resolution;if(o===this.xh.viewState.resolution&&Tn(s,this.xh.extent)){var u;if(this.Eh)u=this.Eh.getImage().getContext("2d");else u=co(Math.round(Vn(s)/o),Math.round(Yn(s)/o)),this.Eh=new ao(s,o,1,u.canvas);u.putImageData(i,0,0),this.changed(),this.Je=this.getRevision(),this.dispatchEvent(new Id(Cd,t,r)),t.animate&&requestAnimationFrame(this.changed.bind(this))}}},n.prototype.disposeInternal=function(){this.mh&&this.mh.dispose(),t.prototype.disposeInternal.call(this)},n}(zl);Pd.prototype.dispose;var Rd=null;function Gd(t,n){var i=t.getRenderer();if(!i)throw new Error("Unsupported layer type: "+t);if(!i.prepareFrame(n))return null;var r=n.size[0],s=n.size[1];if(0===r||0===s)return null;var o,u=i.renderFrame(n,null);if(u&&(o=u.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===s)return o.getContext("2d").getImageData(0,0,r,s);if(Rd){var e=Rd.canvas;e.width!==r||e.height!==s?Rd=co(r,s):Rd.clearRect(0,0,r,s)}else Rd=co(r,s);return Rd.drawImage(o,0,0,r,s),Rd.getImageData(0,0,r,s)}function Ld(t){var n;return t instanceof hl?t instanceof Sl?n=new Od({source:t}):t instanceof zl&&(n=new vd({source:t})):n=t,n}var Fd=Pd,Dd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),zd=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection,url:r.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,n){var r=t.getTileCoord()[0],s=Ye(i.tileGrid.getTileSize(r)),o=co(s[0],s[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,s[0]+.5,s[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(n,s[0]/2,s[1]/2,s[0]),o.fillText(n,s[0]/2,s[1]/2,s[0]),t.setImage(o.canvas)}})||this}return Dd(n,t),n}(nd),Ud="carmentaserver",Xd="geoserver",Yd="mapserver",Wd="qgis",qd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bd=function(t){function n(n){var i=this,r=n||{},s=r.params||{},o=!("TRANSPARENT"in s)||s.TRANSPARENT;return(i=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,opaque:!o,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).sh=void 0!==r.gutter?r.gutter:0,i.Ke=s,i.Nh=!0,i.kh=r.serverType,i.Qe=void 0===r.hidpi||r.hidpi,i.oo=[1/0,1/0,-1/0,-1/0],i.Ih(),i.setKey(i.Ph()),i}return qd(n,t),n.prototype.getFeatureInfoUrl=function(t,n,i,r){var s=er(i),o=this.getProjection(),u=this.getTileGrid();u||(u=this.getTileGridForProjection(s));var e=u.getZForResolution(n,this.zDirection),h=u.getTileCoordForCoordAndZ(t,e);if(!(u.getResolutions().length<=h[0])){var f=u.getResolution(h[0]),a=u.getTileCoordExtent(h,this.oo),c=Ye(u.getTileSize(h[0]),this.tmpSize),v=this.sh;0!==v&&(c=ze(c,v,this.tmpSize),a=pn(a,f*v,a)),o&&o!==s&&(f=ba(o,s,t,f),a=br(a,s,o),t=yr(t,s,o));var l={SERVICE:"WMS",VERSION:da,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.Ke.LAYERS};E(l,this.Ke,r);var d=Math.floor((t[0]-a[0])/f),w=Math.floor((a[3]-t[1])/f);return l[this.Nh?"I":"X"]=d,l[this.Nh?"J":"Y"]=w,this.Rh(h,c,a,1,o||s,l)}},n.prototype.getLegendUrl=function(t,n){if(void 0!==this.urls[0]){var i={SERVICE:"WMS",VERSION:da,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var r=this.Ke.LAYERS;if(!(!Array.isArray(r)||1===r.length))return;i.LAYER=r}if(void 0!==t){var s=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*s/28e-5}return E(i,n),Pa(this.urls[0],i)}},n.prototype.getGutter=function(){return this.sh},n.prototype.getParams=function(){return this.Ke},n.prototype.Rh=function(t,n,i,r,s,o){var u=this.urls;if(u){if(o.WIDTH=n[0],o.HEIGHT=n[1],o[this.Nh?"CRS":"SRS"]=s.getCode(),"STYLES"in this.Ke||(o.STYLES=""),1!=r)switch(this.kh){case Xd:var e=90*r+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+e:o.FORMAT_OPTIONS="dpi:"+e;break;case Yd:o.MAP_RESOLUTION=90*r;break;case Ud:case Wd:o.DPI=90*r;break;default:mt(!1,52)}var h,f=s.getAxisOrientation(),a=i;if(this.Nh&&"ne"==f.substr(0,2)){var c=void 0;c=i[0],a[0]=i[1],a[1]=c,c=i[2],a[2]=i[3],a[3]=c}if(o.BBOX=a.join(","),1==u.length)h=u[0];else h=u[ai(Tf(t),u.length)];return Pa(h,o)}},n.prototype.getTilePixelRatio=function(t){return this.Qe&&void 0!==this.kh?t:1},n.prototype.Ph=function(){var t=0,n=[];for(var i in this.Ke)n[t++]=i+"-"+this.Ke[i];return n.join("/")},n.prototype.updateParams=function(t){E(this.Ke,t),this.Ih(),this.setKey(this.Ph())},n.prototype.Ih=function(){var t=this.Ke.VERSION||da;this.Nh=Xi(t,"1.3")>=0},n.prototype.tileUrlFunction=function(t,n,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){1==n||this.Qe&&void 0!==this.kh||(n=1);var s=r.getResolution(t[0]),o=r.getTileCoordExtent(t,this.oo),u=Ye(r.getTileSize(t[0]),this.tmpSize),e=this.sh;0!==e&&(u=ze(u,e,this.tmpSize),o=pn(o,s*e,o)),1!=n&&(u=Xe(u,n,this.tmpSize));var h={SERVICE:"WMS",VERSION:da,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return E(h,this.Ke),this.Rh(t,u,o,n,i,h)}},n}(Ql),Vd={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Zd=[Vd.FILL],Jd=[Vd.STROKE],Hd=[Vd.BEGIN_PATH],$d=[Vd.CLOSE_PATH],Kd=Vd,Qd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tw=function(t){function n(n,i,r,s){var o=t.call(this)||this;return o.tolerance=n,o.maxExtent=i,o.pixelRatio=s,o.maxLineWidth=0,o.resolution=r,o.Gh=null,o.Lh=null,o.Fh=null,o.instructions=[],o.coordinates=[],o.Dh=[],o.hitDetectionInstructions=[],o.state={},o}return Qd(n,t),n.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return 1==n?t:t.map((function(t){return t*n}))},n.prototype.appendFlatPointCoordinates=function(t,n){for(var i=this.getBufferedMaxExtent(),r=this.Dh,s=this.coordinates,o=s.length,u=0,e=t.length;u<e;u+=n)r[0]=t[u],r[1]=t[u+1],_n(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o},n.prototype.appendFlatLineCoordinates=function(t,n,i,r,s,o){var u=this.coordinates,e=u.length,h=this.getBufferedMaxExtent();o&&(n+=r);var f,a,c,v=t[n],l=t[n+1],d=this.Dh,w=!0;for(f=n+r;f<i;f+=r)d[0]=t[f],d[1]=t[f+1],(c=On(h,d))!==a?(w&&(u[e++]=v,u[e++]=l,w=!1),u[e++]=d[0],u[e++]=d[1]):c===an?(u[e++]=d[0],u[e++]=d[1],w=!1):w=!0,v=d[0],l=d[1],a=c;return(s&&w||f===n+r)&&(u[e++]=v,u[e++]=l),e},n.prototype.zh=function(t,n,i,r,s){for(var o=0,u=i.length;o<u;++o){var e=i[o],h=this.appendFlatLineCoordinates(t,n,e,r,!1,!1);s.push(h),n=e}return n},n.prototype.drawCustom=function(t,n,i,r){this.beginGeometry(t,n);var s,o,u,e,h,f=t.getType(),a=t.getStride(),c=this.coordinates.length;switch(f){case At.MULTI_POLYGON:s=t.getOrientedFlatCoordinates(),e=[];var v=t.getEndss();h=0;for(var l=0,d=v.length;l<d;++l){var w=[];h=this.zh(s,h,v[l],a,w),e.push(w)}this.instructions.push([Kd.CUSTOM,c,e,t,i,es]),this.hitDetectionInstructions.push([Kd.CUSTOM,c,e,t,r||i,es]);break;case At.POLYGON:case At.MULTI_LINE_STRING:u=[],s=f==At.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.zh(s,0,t.getEnds(),a,u),this.instructions.push([Kd.CUSTOM,c,u,t,i,us]),this.hitDetectionInstructions.push([Kd.CUSTOM,c,u,t,r||i,us]);break;case At.LINE_STRING:case At.CIRCLE:s=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(s,0,s.length,a,!1,!1),this.instructions.push([Kd.CUSTOM,c,o,t,i,os]),this.hitDetectionInstructions.push([Kd.CUSTOM,c,o,t,r||i,os]);break;case At.MULTI_POINT:s=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(s,a))>c&&(this.instructions.push([Kd.CUSTOM,c,o,t,i,os]),this.hitDetectionInstructions.push([Kd.CUSTOM,c,o,t,r||i,os]));break;case At.POINT:s=t.getFlatCoordinates(),this.coordinates.push(s[0],s[1]),o=this.coordinates.length,this.instructions.push([Kd.CUSTOM,c,o,t,i]),this.hitDetectionInstructions.push([Kd.CUSTOM,c,o,t,r||i])}this.endGeometry(n)},n.prototype.beginGeometry=function(t,n){this.Gh=[Kd.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.Gh),this.Lh=[Kd.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.Lh)},n.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},n.prototype.reverseHitDetectionInstructions=function(){var t,n=this.hitDetectionInstructions;n.reverse();var i,r,s=n.length,o=-1;for(t=0;t<s;++t)(r=(i=n[t])[0])==Kd.END_GEOMETRY?o=t:r==Kd.BEGIN_GEOMETRY&&(i[2]=t,b(this.hitDetectionInstructions,o,t),o=-1)},n.prototype.setFillStrokeStyle=function(t,n){var i=this.state;if(t){var r=t.getColor();i.fillStyle=Ff(r||_u)}else i.fillStyle=void 0;if(n){var s=n.getColor();i.strokeStyle=Ff(s||ju);var o=n.getLineCap();i.lineCap=void 0!==o?o:gu;var u=n.getLineDash();i.lineDash=u?u.slice():mu;var e=n.getLineDashOffset();i.lineDashOffset=e||0;var h=n.getLineJoin();i.lineJoin=void 0!==h?h:Ou;var f=n.getWidth();i.lineWidth=void 0!==f?f:1;var a=n.getMiterLimit();i.miterLimit=void 0!==a?a:Mu,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.Fh=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},n.prototype.createFill=function(t){var n=t.fillStyle,i=[Kd.SET_FILL_STYLE,n];return"string"!=typeof n&&i.push(!0),i},n.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},n.prototype.createStroke=function(t){return[Kd.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},n.prototype.updateFillStyle=function(t,n){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)},n.prototype.updateStrokeStyle=function(t,n){var i=t.strokeStyle,r=t.lineCap,s=t.lineDash,o=t.lineDashOffset,u=t.lineJoin,e=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||s!=t.currentLineDash&&!g(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=u||t.currentLineWidth!=e||t.currentMiterLimit!=h)&&(void 0!==i&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=u,t.currentLineWidth=e,t.currentMiterLimit=h)},n.prototype.endGeometry=function(t){this.Gh[2]=this.instructions.length,this.Gh=null,this.Lh[2]=this.hitDetectionInstructions.length,this.Lh=null;var n=[Kd.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},n.prototype.getBufferedMaxExtent=function(){if(!this.Fh&&(this.Fh=yn(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;pn(this.Fh,t,this.Fh)}return this.Fh},n}($f),nw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),iw=function(t){function n(n,i,r,s){var o=t.call(this,n,i,r,s)||this;return o.To=null,o._t=null,o.Uh=void 0,o.Xh=void 0,o.Yh=void 0,o.Wh=void 0,o.fo=void 0,o.qh=void 0,o.Bh=void 0,o.ao=void 0,o.wr=void 0,o.co=void 0,o.Bo=void 0,o.Vh=void 0,o}return nw(n,t),n.prototype.drawPoint=function(t,n){if(this._t){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Kd.DRAW_IMAGE,s,o,this._t,this.Xh*this.Uh,this.Yh*this.Uh,Math.ceil(this.Wh*this.Uh),this.fo,this.qh,this.Bh,this.ao,this.wr,[this.co[0]*this.pixelRatio/this.Uh,this.co[1]*this.pixelRatio/this.Uh],Math.ceil(this.Bo*this.Uh),this.Vh]),this.hitDetectionInstructions.push([Kd.DRAW_IMAGE,s,o,this.To,this.Xh,this.Yh,this.Wh,this.fo,this.qh,this.Bh,this.ao,this.wr,this.co,this.Bo,this.Vh]),this.endGeometry(n)}},n.prototype.drawMultiPoint=function(t,n){if(this._t){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Kd.DRAW_IMAGE,s,o,this._t,this.Xh*this.Uh,this.Yh*this.Uh,Math.ceil(this.Wh*this.Uh),this.fo,this.qh,this.Bh,this.ao,this.wr,[this.co[0]*this.pixelRatio/this.Uh,this.co[1]*this.pixelRatio/this.Uh],Math.ceil(this.Bo*this.Uh),this.Vh]),this.hitDetectionInstructions.push([Kd.DRAW_IMAGE,s,o,this.To,this.Xh,this.Yh,this.Wh,this.fo,this.qh,this.Bh,this.ao,this.wr,this.co,this.Bo,this.Vh]),this.endGeometry(n)}},n.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.Xh=void 0,this.Yh=void 0,this.To=null,this._t=null,this.Uh=void 0,this.Wh=void 0,this.co=void 0,this.fo=void 0,this.qh=void 0,this.Bh=void 0,this.ao=void 0,this.wr=void 0,this.Bo=void 0,t.prototype.finish.call(this)},n.prototype.setImageStyle=function(t,n){var i=t.getAnchor(),r=t.getSize(),s=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),u=t.getOrigin();this.Uh=t.getPixelRatio(this.pixelRatio),this.Xh=i[0],this.Yh=i[1],this.To=s,this._t=o,this.Wh=r[1],this.fo=t.getOpacity(),this.qh=u[0]*this.Uh,this.Bh=u[1]*this.Uh,this.ao=t.getRotateWithView(),this.wr=t.getRotation(),this.co=t.getScaleArray(),this.Bo=r[0],this.Vh=n},n}(tw),rw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sw=function(t){function n(n,i,r,s){return t.call(this,n,i,r,s)||this}return rw(n,t),n.prototype.Zh=function(t,n,i,r){var s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,r,!1,!1),u=[Kd.MOVE_TO_LINE_TO,s,o];return this.instructions.push(u),this.hitDetectionInstructions.push(u),i},n.prototype.drawLineString=function(t,n){var i=this.state,r=i.strokeStyle,s=i.lineWidth;if(void 0!==r&&void 0!==s){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([Kd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,mu,0],Hd);var o=t.getFlatCoordinates(),u=t.getStride();this.Zh(o,0,o.length,u),this.hitDetectionInstructions.push(Jd),this.endGeometry(n)}},n.prototype.drawMultiLineString=function(t,n){var i=this.state,r=i.strokeStyle,s=i.lineWidth;if(void 0!==r&&void 0!==s){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([Kd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Hd);for(var o=t.getEnds(),u=t.getFlatCoordinates(),e=t.getStride(),h=0,f=0,a=o.length;f<a;++f)h=this.Zh(u,h,o[f],e);this.hitDetectionInstructions.push(Jd),this.endGeometry(n)}},n.prototype.finish=function(){var n=this.state;return null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&this.instructions.push(Jd),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},n.prototype.applyStroke=function(n){null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&(this.instructions.push(Jd),n.lastStroke=this.coordinates.length),n.lastStroke=0,t.prototype.applyStroke.call(this,n),this.instructions.push(Hd)},n}(tw),ow=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),uw=function(t){function n(n,i,r,s){return t.call(this,n,i,r,s)||this}return ow(n,t),n.prototype.Jh=function(t,n,i,r){var s=this.state,o=void 0!==s.fillStyle,u=void 0!==s.strokeStyle,e=i.length;this.instructions.push(Hd),this.hitDetectionInstructions.push(Hd);for(var h=0;h<e;++h){var f=i[h],a=this.coordinates.length,c=this.appendFlatLineCoordinates(t,n,f,r,!0,!u),v=[Kd.MOVE_TO_LINE_TO,a,c];this.instructions.push(v),this.hitDetectionInstructions.push(v),u&&(this.instructions.push($d),this.hitDetectionInstructions.push($d)),n=f}return o&&(this.instructions.push(Zd),this.hitDetectionInstructions.push(Zd)),u&&(this.instructions.push(Jd),this.hitDetectionInstructions.push(Jd)),n},n.prototype.drawCircle=function(t,n){var i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0!==r||void 0!==s){this.Hh(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Kd.SET_FILL_STYLE,_u]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Kd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),u=t.getStride(),e=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,u,!1,!1);var h=[Kd.CIRCLE,e];this.instructions.push(Hd,h),this.hitDetectionInstructions.push(Hd,h),void 0!==i.fillStyle&&(this.instructions.push(Zd),this.hitDetectionInstructions.push(Zd)),void 0!==i.strokeStyle&&(this.instructions.push(Jd),this.hitDetectionInstructions.push(Jd)),this.endGeometry(n)}},n.prototype.drawPolygon=function(t,n){var i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0!==r||void 0!==s){this.Hh(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Kd.SET_FILL_STYLE,_u]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Kd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),u=t.getOrientedFlatCoordinates(),e=t.getStride();this.Jh(u,0,o,e),this.endGeometry(n)}},n.prototype.drawMultiPolygon=function(t,n){var i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0!==r||void 0!==s){this.Hh(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Kd.SET_FILL_STYLE,_u]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Kd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),u=t.getOrientedFlatCoordinates(),e=t.getStride(),h=0,f=0,a=o.length;f<a;++f)h=this.Jh(u,h,o[f],e);this.endGeometry(n)}},n.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var n=this.tolerance;if(0!==n)for(var i=this.coordinates,r=0,s=i.length;r<s;++r)i[r]=ns(i[r],n);return t.prototype.finish.call(this)},n.prototype.Hh=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},n}(tw);function ew(t,n,i,r,s){var o,u,e,h,f,a,c,v,l,d=i,w=i,p=0,y=0,b=i;for(o=i;o<r;o+=s){var _=n[o],g=n[o+1];void 0!==h&&(v=_-h,l=g-f,e=Math.sqrt(v*v+l*l),void 0!==a&&(y+=u,Math.acos((a*v+c*l)/(u*e))>t&&(y>p&&(p=y,d=b,w=o),y=0,b=o-s)),u=e,a=v,c=l),h=_,f=g}return(y+=e)>p?[b,o]:[d,w]}var hw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fw={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},aw=function(t){function n(n,i,r,s){var o=t.call(this,n,i,r,s)||this;return o.$h=null,o.Ps="",o.Rs=0,o.Gs=0,o.Ls=void 0,o.Fs=0,o.zs=null,o.fillStates={},o.Us=null,o.strokeStates={},o.Xs={},o.textStates={},o.Kh="",o.Qh="",o.tf="",o.Vh=void 0,o}return hw(n,t),n.prototype.finish=function(){var n=t.prototype.finish.call(this);return n.textStates=this.textStates,n.fillStates=this.fillStates,n.strokeStates=this.strokeStates,n},n.prototype.drawText=function(t,n){var i=this.zs,r=this.Us,s=this.Xs;if(""!==this.Ps&&s&&(i||r)){var o=this.coordinates,u=o.length,e=t.getType(),h=null,f=t.getStride();if(s.placement!==Pc||e!=At.LINE_STRING&&e!=At.MULTI_LINE_STRING&&e!=At.POLYGON&&e!=At.MULTI_POLYGON){var a=s.overflow?null:[];switch(e){case At.POINT:case At.MULTI_POINT:h=t.getFlatCoordinates();break;case At.LINE_STRING:h=t.getFlatMidpoint();break;case At.CIRCLE:h=t.getCenter();break;case At.MULTI_LINE_STRING:h=t.getFlatMidpoints(),f=2;break;case At.POLYGON:h=t.getFlatInteriorPoint(),s.overflow||a.push(h[2]/this.resolution),f=3;break;case At.MULTI_POLYGON:var c=t.getFlatInteriorPoints();h=[];for(O=0,M=c.length;O<M;O+=3)s.overflow||a.push(c[O+2]/this.resolution),h.push(c[O],c[O+1]);if(0===h.length)return;f=2}if((C=this.appendFlatPointCoordinates(h,f))===u)return;if(a&&(C-u)/2!=h.length/f){var v=u/2;a=a.filter((function(t,n){var i=o[2*(v+n)]===h[n*f]&&o[2*(v+n)+1]===h[n*f+1];return i||--v,i}))}this.nf(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var l=s.padding;if(l!=Su&&(s.scale[0]<0||s.scale[1]<0)){var d=s.padding[0],w=s.padding[1],p=s.padding[2],y=s.padding[3];s.scale[0]<0&&(w=-w,y=-y),s.scale[1]<0&&(d=-d,p=-p),l=[d,w,p,y]}var b=this.pixelRatio;this.instructions.push([Kd.DRAW_IMAGE,u,C,null,NaN,NaN,NaN,1,0,0,this.Ls,this.Fs,[1,1],NaN,this.Vh,l==Su?Su:l.map((function(t){return t*b})),!!s.backgroundFill,!!s.backgroundStroke,this.Ps,this.Kh,this.tf,this.Qh,this.Rs,this.Gs,a]);var _=1/b;this.hitDetectionInstructions.push([Kd.DRAW_IMAGE,u,C,null,NaN,NaN,NaN,1,0,0,this.Ls,this.Fs,[_,_],NaN,this.Vh,l,!!s.backgroundFill,!!s.backgroundStroke,this.Ps,this.Kh,this.tf,this.Qh,this.Rs,this.Gs,a]),this.endGeometry(n)}else{if(!Zn(this.getBufferedMaxExtent(),t.getExtent()))return;var g=void 0;if(h=t.getFlatCoordinates(),e==At.LINE_STRING)g=[h.length];else if(e==At.MULTI_LINE_STRING)g=t.getEnds();else if(e==At.POLYGON)g=t.getEnds().slice(0,1);else if(e==At.MULTI_POLYGON){var m=t.getEndss();g=[];for(var O=0,M=m.length;O<M;++O)g.push(m[O][0])}this.beginGeometry(t,n);for(var j=s.textAlign,x=0,E=void 0,S=0,T=g.length;S<T;++S){if(null==j){var A=ew(s.maxAngle,h,x,g[S],f);x=A[0],E=A[1]}else E=g[S];for(var O=x;O<E;O+=f)o.push(h[O],h[O+1]);var C=o.length;x=g[S],this.if(u,C),u=C}this.endGeometry(n)}}},n.prototype.nf=function(){var t=this.Us,n=this.Xs,i=this.zs,r=this.tf;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var s=this.Kh;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||xu,textBaseline:n.textBaseline||Eu,scale:n.scale});var o=this.Qh;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},n.prototype.if=function(t,n){var i=this.Us,r=this.Xs,s=this.tf,o=this.Kh,u=this.Qh;this.nf();var e=this.pixelRatio,h=fw[r.textBaseline],f=this.Gs*e,a=this.Ps,c=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Kd.DRAW_CHARS,t,n,h,r.overflow,u,r.maxAngle,e,f,s,c*e,a,o,1]),this.hitDetectionInstructions.push([Kd.DRAW_CHARS,t,n,h,r.overflow,u,r.maxAngle,1,f,s,c,a,o,1/e])},n.prototype.setTextStyle=function(t,n){var i,r,s;if(t){var u=t.getFill();u?((r=this.zs)||(r={},this.zs=r),r.fillStyle=Ff(u.getColor()||_u)):(r=null,this.zs=r);var e=t.getStroke();if(e){(s=this.Us)||(s={},this.Us=s);var h=e.getLineDash(),f=e.getLineDashOffset(),a=e.getWidth(),c=e.getMiterLimit();s.lineCap=e.getLineCap()||gu,s.lineDash=h?h.slice():mu,s.lineDashOffset=void 0===f?0:f,s.lineJoin=e.getLineJoin()||Ou,s.lineWidth=void 0===a?1:a,s.miterLimit=void 0===c?Mu:c,s.strokeStyle=Ff(e.getColor()||ju)}else s=null,this.Us=s;i=this.Xs;var v=t.getFont()||bu;Pu(v);var l=t.getScaleArray();i.overflow=t.getOverflow(),i.font=v,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||Eu,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Su,i.scale=void 0===l?[1,1]:l;var d=t.getOffsetX(),w=t.getOffsetY(),p=t.getRotateWithView(),y=t.getRotation();this.Ps=t.getText()||"",this.Rs=void 0===d?0:d,this.Gs=void 0===w?0:w,this.Ls=void 0!==p&&p,this.Fs=void 0===y?0:y,this.tf=s?("string"==typeof s.strokeStyle?s.strokeStyle:o(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.Kh=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.Qh=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+o(r.fillStyle):""}else this.Ps="";this.Vh=n},n}(tw),cw={Circle:uw,Default:tw,Image:iw,LineString:sw,Polygon:uw,Text:aw},vw=function(){function t(t,n,i,r){this.rf=t,this.sf=n,this.yt=r,this.uf=i,this.ef={}}return t.prototype.finish=function(){var t={};for(var n in this.ef){t[n]=t[n]||{};var i=this.ef[n];for(var r in i){var s=i[r].finish();t[n][r]=s}}return t},t.prototype.getBuilder=function(t,n){var i=void 0!==t?t.toString():"0",r=this.ef[i];void 0===r&&(r={},this.ef[i]=r);var s=r[n];void 0===s&&(s=new(0,cw[n])(this.rf,this.sf,this.uf,this.yt),r[n]=s);return s},t}();function lw(t,n,i,r,s,o,u,e,h,f,a,c){var v=t[n],l=t[n+1],d=0,w=0,p=0,y=0;function b(){d=v,w=l,v=t[n+=r],l=t[n+1],y+=p,p=Math.sqrt((v-d)*(v-d)+(l-w)*(l-w))}do{b()}while(n<i-r&&y+p<o);for(var _=0===p?0:(o-y)/p,g=ci(d,v,_),m=ci(w,l,_),O=n-r,M=y,j=o+e*h(f,s,a);n<i-r&&y+p<j;)b();var x,E=ci(d,v,_=0===p?0:(j-y)/p),S=ci(w,l,_);if(c){var T=[g,m,E,S];Nr(T,0,4,2,c,T,T),x=T[0]>T[2]}else x=g>E;var A,C=Math.PI,N=[],k=O+r===n;if(p=0,y=M,v=t[n=O],l=t[n+1],k){b(),A=Math.atan2(l-w,v-d),x&&(A+=A>0?-C:C);var I=(E+g)/2,P=(S+m)/2;return N[0]=[I,P,(j-o)/2,A,s],N}for(var R=0,G=s.length;R<G;){b();var L=Math.atan2(l-w,v-d);if(x&&(L+=L>0?-C:C),void 0!==A){var F=L-A;if(F+=F>C?-2*C:F<-C?2*C:0,Math.abs(F)>u)return null}A=L;for(var D=R,z=0;R<G;++R){var U=e*h(f,s[x?G-R-1:R],a);if(n+r<i&&y+p<o+z+U/2)break;z+=U}if(R!==D){var X=x?s.substring(G-D,G-R):s.substring(D,R);I=ci(d,v,_=0===p?0:(o+z/2-y)/p),P=ci(w,l,_);N.push([I,P,z/2,L,X]),o+=z}}return N}function dw(t,n,i,r){for(var s=t[n],o=t[n+1],u=0,e=n+r;e<i;e+=r){var h=t[e],f=t[e+1];u+=Math.sqrt((h-s)*(h-s)+(f-o)*(f-o)),s=h,o=f}return u}var ww=[1/0,1/0,-1/0,-1/0],pw=[],yw=[],bw=[],_w=[];function gw(t){return t[3].declutterBox}var mw=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Ow(t,n){return"start"!==n&&"end"!==n||mw.test(t)||(n="start"===n?"left":"right"),fw[n]}var Mw=function(){function t(t,n,i,r){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.hf,this.instructions=r.instructions,this.coordinates=r.coordinates,this.ff={},this.af=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.Ys=null,this.ws=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.cf={},this.$h={}}return t.prototype.createLabel=function(t,n,i,r){var s=t+n+i+r;if(this.$h[s])return this.$h[s];var o=r?this.strokeStates[r]:null,u=i?this.fillStates[i]:null,e=this.textStates[n],h=this.pixelRatio,f=[e.scale[0]*h,e.scale[1]*h],a=Ow(t,e.textAlign||xu),c=r&&o.lineWidth?o.lineWidth:0,v=t.split("\n"),l=v.length,d=[],w=Du(e.font,v,d),p=Ru(e.font),y=w+c,b=[],_=(y+2)*f[0],g=(p*l+c)*f[1],m={width:_<0?Math.floor(_):Math.ceil(_),height:g<0?Math.floor(g):Math.ceil(g),contextInstructions:b};(1==f[0]&&1==f[1]||b.push("scale",f),b.push("font",e.font),r)&&(b.push("strokeStyle",o.strokeStyle),b.push("lineWidth",c),b.push("lineCap",o.lineCap),b.push("lineJoin",o.lineJoin),b.push("miterLimit",o.miterLimit),(Ut?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(b.push("setLineDash",[o.lineDash]),b.push("lineDashOffset",o.lineDashOffset)));i&&b.push("fillStyle",u.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");var O,M=.5-a,j=a*y+M*c;if(r)for(O=0;O<l;++O)b.push("strokeText",[v[O],j+M*d[O],.5*(c+p)+O*p]);if(i)for(O=0;O<l;++O)b.push("fillText",[v[O],j+M*d[O],.5*(c+p)+O*p]);return this.$h[s]=m,m},t.prototype.vf=function(t,n,i,r,s,o,u){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,n),o&&(this.hf=o[2],this.wo(t)),u&&(this.lf(t,u),t.stroke())},t.prototype.df=function(t,n,i,r,s,o,u,e,h,f,a,c,v,l,d,w){var p,y=i-(u*=c[0]),b=r-(e*=c[1]),_=s+h>t?t-h:s,g=o+f>n?n-f:o,m=l[3]+_*c[0]+l[1],O=l[0]+g*c[1]+l[2],M=y-l[3],j=b-l[0];return(d||0!==a)&&(pw[0]=M,_w[0]=M,pw[1]=j,yw[1]=j,yw[0]=M+m,bw[0]=yw[0],bw[1]=j+O,_w[1]=bw[1]),0!==a?(Ht(p=tn([1,0,0,1,0,0],i,r,1,1,a,-i,-r),pw),Ht(p,yw),Ht(p,bw),Ht(p,_w),jn(Math.min(pw[0],yw[0],bw[0],_w[0]),Math.min(pw[1],yw[1],bw[1],_w[1]),Math.max(pw[0],yw[0],bw[0],_w[0]),Math.max(pw[1],yw[1],bw[1],_w[1]),ww)):jn(Math.min(M,M+m),Math.min(j,j+O),Math.max(M,M+m),Math.max(j,j+O),ww),v&&(y=Math.round(y),b=Math.round(b)),{drawImageX:y,drawImageY:b,drawImageW:_,drawImageH:g,originX:h,originY:f,declutterBox:{minX:ww[0],minY:ww[1],maxX:ww[2],maxY:ww[3],value:w},canvasTransform:p,scale:c}},t.prototype.wf=function(t,n,i,r,s,o,u){var e=!(!o&&!u),h=r.declutterBox,f=t.canvas,a=u?u[2]*r.scale[0]/2:0;return h.minX-a<=f.width/n&&h.maxX+a>=0&&h.minY-a<=f.height/n&&h.maxY+a>=0&&(e&&this.vf(t,pw,yw,bw,_w,o,u),zu(t,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},t.prototype.wo=function(t){if(this.hf){var n=Ht(this.af,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.ws)}t.fill(),this.hf&&t.restore()},t.prototype.lf=function(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.setLineDash&&(t.lineDashOffset=n[7],t.setLineDash(n[6]))},t.prototype.pf=function(t,n,i,r){var s=this.textStates[n],o=this.createLabel(t,n,r,i),u=this.strokeStates[i],e=this.pixelRatio,h=Ow(t,s.textAlign||xu),f=fw[s.textBaseline||Eu],a=u&&u.lineWidth?u.lineWidth:0;return{label:o,anchorX:h*(o.width/e-2*s.scale[0])+2*(.5-h)*a,anchorY:f*o.height/e+2*(.5-f)*a}},t.prototype.yf=function(t,n,i,r,s,o,u,e){var h;this.Ys&&g(i,this.af)?h=this.Ys:(this.Ys||(this.Ys=[]),h=Cr(this.coordinates,0,this.coordinates.length,2,i,this.Ys),Jt(this.af,i));for(var f,a,c,v,l,d,w,p,y,b,_,m,O,M,j,x,E=0,S=r.length,T=0,A=0,C=0,N=null,k=null,I=this.ff,P=this.ws,R=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,G={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:P},L=this.instructions!=r||this.overlaps?0:200;E<S;){var F=r[E];switch(F[0]){case Kd.BEGIN_GEOMETRY:O=F[1],x=F[3],O.getGeometry()?void 0===u||Zn(u,x.getExtent())?++E:E=F[2]+1:E=F[2];break;case Kd.BEGIN_PATH:A>L&&(this.wo(t),A=0),C>L&&(t.stroke(),C=0),A||C||(t.beginPath(),v=NaN,l=NaN),++E;break;case Kd.CIRCLE:var D=h[T=F[1]],z=h[T+1],U=h[T+2]-D,X=h[T+3]-z,Y=Math.sqrt(U*U+X*X);t.moveTo(D+Y,z),t.arc(D,z,Y,0,2*Math.PI,!0),++E;break;case Kd.CLOSE_PATH:t.closePath(),++E;break;case Kd.CUSTOM:T=F[1],f=F[2];var W=F[3],q=F[4],B=6==F.length?F[5]:void 0;G.geometry=W,G.feature=O,E in I||(I[E]=[]);var V=I[E];B?B(h,T,f,2,V):(V[0]=h[T],V[1]=h[T+1],V.length=2),q(V,G),++E;break;case Kd.DRAW_IMAGE:T=F[1],f=F[2],p=F[3],a=F[4],c=F[5];var Z=F[6],J=F[7],H=F[8],$=F[9],K=F[10],Q=F[11],tt=F[12],nt=F[13],it=F[14];if(!p&&F.length>=19){y=F[18],b=F[19],_=F[20],m=F[21];var rt=this.pf(y,b,_,m);p=rt.label,F[3]=p;var st=F[22];a=(rt.anchorX-st)*this.pixelRatio,F[4]=a;var ot=F[23];c=(rt.anchorY-ot)*this.pixelRatio,F[5]=c,Z=p.height,F[6]=Z,nt=p.width,F[13]=nt}var ut=void 0;F.length>24&&(ut=F[24]);var et=void 0,ht=void 0,ft=void 0;F.length>16?(et=F[15],ht=F[16],ft=F[17]):(et=Su,ht=!1,ft=!1),K&&R?Q+=P:K||R||(Q-=P);for(var at=0;T<f;T+=2)if(!(ut&&ut[at++]<nt/this.pixelRatio)){var ct=[t,n,p,Ft=this.df(p.width,p.height,h[T],h[T+1],nt,Z,a,c,H,$,Q,tt,s,et,ht||ft,O),J,ht?N:null,ft?k:null],vt=void 0,lt=void 0;if(e&&it){var dt=f-T;if(!it[dt]){it[dt]=ct;continue}if(vt=it[dt],delete it[dt],lt=gw(vt),e.collides(lt))continue}e&&e.collides(Ft.declutterBox)||(vt&&(e&&e.insert(lt),this.wf.apply(this,vt)),e&&e.insert(Ft.declutterBox),this.wf.apply(this,ct))}++E;break;case Kd.DRAW_CHARS:var wt=F[1],pt=F[2],yt=F[3],bt=F[4];m=F[5];var _t=F[6],gt=F[7],mt=F[8];_=F[9];var Ot=F[10];y=F[11],b=F[12];var Mt=[F[13],F[13]],jt=this.textStates[b],xt=jt.font,Et=[jt.scale[0]*gt,jt.scale[1]*gt],St=void 0;xt in this.cf?St=this.cf[xt]:(St={},this.cf[xt]=St);var Tt=dw(h,wt,pt,2),At=Math.abs(Et[0])*Fu(xt,y,St);if(bt||At<=Tt){var Ct=this.textStates[b].textAlign,Nt=lw(h,wt,pt,2,y,(Tt-At)*fw[Ct],_t,Math.abs(Et[0]),Fu,xt,St,R?0:this.ws);t:if(Nt){var kt=[],It=void 0,Pt=void 0,Rt=void 0,Gt=void 0,Lt=void 0;if(_)for(It=0,Pt=Nt.length;It<Pt;++It){Rt=(Lt=Nt[It])[4],Gt=this.createLabel(Rt,b,"",_),a=Lt[2]+(Et[0]<0?-Ot:Ot),c=yt*Gt.height+2*(.5-yt)*Ot*Et[1]/Et[0]-mt;var Ft=this.df(Gt.width,Gt.height,Lt[0],Lt[1],Gt.width,Gt.height,a,c,0,0,Lt[3],Mt,!1,Su,!1,O);if(e&&e.collides(Ft.declutterBox))break t;kt.push([t,n,Gt,Ft,1,null,null])}if(m)for(It=0,Pt=Nt.length;It<Pt;++It){Rt=(Lt=Nt[It])[4],Gt=this.createLabel(Rt,b,m,""),a=Lt[2],c=yt*Gt.height-mt;Ft=this.df(Gt.width,Gt.height,Lt[0],Lt[1],Gt.width,Gt.height,a,c,0,0,Lt[3],Mt,!1,Su,!1,O);if(e&&e.collides(Ft.declutterBox))break t;kt.push([t,n,Gt,Ft,1,null,null])}e&&e.load(kt.map(gw));for(var Dt=0,zt=kt.length;Dt<zt;++Dt)this.wf.apply(this,kt[Dt])}}++E;break;case Kd.END_GEOMETRY:if(void 0!==o){var Ut=o(O=F[1],x);if(Ut)return Ut}++E;break;case Kd.FILL:L?A++:this.wo(t),++E;break;case Kd.MOVE_TO_LINE_TO:for(T=F[1],f=F[2],M=h[T],w=(j=h[T+1])+.5|0,(d=M+.5|0)===v&&w===l||(t.moveTo(M,j),v=d,l=w),T+=2;T<f;T+=2)d=(M=h[T])+.5|0,w=(j=h[T+1])+.5|0,T!=f-2&&d===v&&w===l||(t.lineTo(M,j),v=d,l=w);++E;break;case Kd.SET_FILL_STYLE:N=F,this.hf=F[2],A&&(this.wo(t),A=0,C&&(t.stroke(),C=0)),t.fillStyle=F[1],++E;break;case Kd.SET_STROKE_STYLE:k=F,C&&(t.stroke(),C=0),this.lf(t,F),++E;break;case Kd.STROKE:L?C++:t.stroke(),++E;break;default:++E}}A&&this.wo(t),C&&t.stroke()},t.prototype.execute=function(t,n,i,r,s,o){this.ws=r,this.yf(t,n,i,this.instructions,s,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,n,i,r,s){return this.ws=i,this.yf(t,1,n,this.hitDetectionInstructions,!0,r,s)},t}(),jw=[sa,ta,ra,ia,oa,na],xw=function(){function t(t,n,i,r,s,o){this.sf=t,this.oe=r,this.yt=i,this.uf=n,this.bf=o,this._f={},this.gf=null,this.mf=[1,0,0,1,0,0],this.Of(s)}return t.prototype.clip=function(t,n){var i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.Of=function(t){for(var n in t){var i=this._f[n];void 0===i&&(i={},this._f[n]=i);var r=t[n];for(var s in r){var o=r[s];i[s]=new Mw(this.uf,this.yt,this.oe,o)}}},t.prototype.hasExecutors=function(t){for(var n in this._f)for(var i=this._f[n],r=0,s=t.length;r<s;++r)if(t[r]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s,o){var u=2*(r=Math.round(r))+1,e=tn(this.mf,r+.5,r+.5,1/n,-1/n,-i,-t[0],-t[1]),h=!this.gf;h&&(this.gf=co(u,u));var f,a=this.gf;a.canvas.width!==u||a.canvas.height!==u?(a.canvas.width=u,a.canvas.height=u):h||a.clearRect(0,0,u,u),void 0!==this.bf&&(Nn(f=[1/0,1/0,-1/0,-1/0],t),pn(f,n*(this.bf+r),f));var c,v=Sw(r);function l(t,n){for(var i=a.getImageData(0,0,u,u).data,e=0,h=v.length;e<h;e++)if(i[v[e]]>0){if(!o||c!==ia&&c!==oa||-1!==o.indexOf(t)){var f=(v[e]-3)/4,l=r-f%u,d=r-(f/u|0),w=s(t,n,l*l+d*d);if(w)return w}a.clearRect(0,0,u,u);break}}var d,p,y,b,_,g=Object.keys(this._f).map(Number);for(g.sort(w),d=g.length-1;d>=0;--d){var m=g[d].toString();for(y=this._f[m],p=jw.length-1;p>=0;--p)if(void 0!==(b=y[c=jw[p]])&&(_=b.executeHitDetection(a,e,i,l,f)))return _}},t.prototype.getClipCoords=function(t){var n=this.sf;if(!n)return null;var i=n[0],r=n[1],s=n[2],o=n[3],u=[i,r,i,o,s,o,s,r];return Cr(u,0,8,2,t,u),u},t.prototype.isEmpty=function(){return A(this._f)},t.prototype.execute=function(t,n,i,r,s,o,u){var e=Object.keys(this._f).map(Number);e.sort(w),this.sf&&(t.save(),this.clip(t,i));var h,f,a,c,v,l,d=o||jw;for(u&&e.reverse(),h=0,f=e.length;h<f;++h){var p=e[h].toString();for(v=this._f[p],a=0,c=d.length;a<c;++a){void 0!==(l=v[d[a]])&&l.execute(t,n,i,r,s,u)}}this.sf&&t.restore()},t}(),Ew={};function Sw(t){if(void 0!==Ew[t])return Ew[t];for(var n=2*t+1,i=t*t,r=new Array(i+1),s=0;s<=t;++s)for(var o=0;o<=t;++o){var u=s*s+o*o;if(u>i)break;var e=r[u];e||(e=[],r[u]=e),e.push(4*((t+s)*n+(t+o))+3),s>0&&e.push(4*((t-s)*n+(t+o))+3),o>0&&(e.push(4*((t+s)*n+(t-o))+3),s>0&&e.push(4*((t-s)*n+(t-o))+3))}for(var h=[],f=(s=0,r.length);s<f;++s)r[s]&&h.push.apply(h,r[s]);return Ew[t]=h,h}var Tw=xw,Aw=.5;function Cw(t,n,i,r,s,o,u){var e=co(t[0]*Aw,t[1]*Aw);e.imageSmoothingEnabled=!1;for(var h=e.canvas,f=new Qf(e,Aw,s,null,u),a=i.length,c=Math.floor(16777215/a),v={},l=1;l<=a;++l){var d=i[l-1],p=d.getStyleFunction()||r;if(r){var y=p(d,o);if(y){Array.isArray(y)||(y=[y]);for(var b="#"+("000000"+(l*c).toString(16)).slice(-6),_=0,g=y.length;_<g;++_){var m=y[_],O=m.getGeometryFunction()(d);if(O&&Zn(s,O.getExtent())){var M=m.clone(),j=M.getFill();j&&j.setColor(b);var x=M.getStroke();x&&(x.setColor(b),x.setLineDash(null)),M.setText(void 0);var E=m.getImage();if(E&&0!==E.getOpacity()){var S=E.getImageSize();if(!S)continue;var T=co(S[0],S[1],void 0,{alpha:!1}),A=T.canvas;T.fillStyle=b,T.fillRect(0,0,A.width,A.height),M.setImage(new Mc({img:A,imgSize:S,anchor:E.getAnchor(),anchorXUnits:vc,anchorYUnits:vc,offset:E.getOrigin(),opacity:1,size:E.getSize(),scale:E.getScale(),rotation:E.getRotation(),rotateWithView:E.getRotateWithView()}))}var C=M.getZIndex()||0;(I=v[C])||(I={},v[C]=I,I[At.POLYGON]=[],I[At.CIRCLE]=[],I[At.LINE_STRING]=[],I[At.POINT]=[]),I[O.getType().replace("Multi","")].push(O,M)}}}}}for(var N=Object.keys(v).map(Number).sort(w),k=(l=0,N.length);l<k;++l){var I=v[N[l]];for(var P in I){var R=I[P];for(_=0,g=R.length;_<g;_+=2){f.setStyle(R[_+1]);for(var G=0,L=n.length;G<L;++G)f.setTransform(n[G]),f.drawGeometry(R[_])}}}return e.getImageData(0,0,h.width,h.height)}function Nw(t,n,i){var r=[];if(i){var s=Math.floor(Math.round(t[0])*Aw),o=Math.floor(Math.round(t[1])*Aw),u=4*(ii(s,0,i.width-1)+ii(o,0,i.height-1)*i.width),e=i.data[u],h=i.data[u+1],f=i.data[u+2]+256*(h+256*e),a=Math.floor(16777215/n.length);f&&f%a==0&&r.push(n[f/a-1])}return r}var kw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Iw=function(t){function n(n){var i=t.call(this,n)||this;return i.Mf=i.jf.bind(i),i.xf,i.Ef=!1,i.Sf=null,i.Tf=null,i.Je=-1,i.Af=NaN,i.bh=[1/0,1/0,-1/0,-1/0],i.Cf=[1/0,1/0,-1/0,-1/0],i.Nf,i.kf=null,i.If=null,i.Pf=null,i.Rf=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return kw(n,t),n.prototype.useContainer=function(n,i,r){r<1&&(n=null),t.prototype.useContainer.call(this,n,i,r)},n.prototype.renderWorlds=function(t,n,i){var r=n.extent,s=n.viewState,o=s.center,u=s.resolution,e=s.projection,h=s.rotation,f=e.getExtent(),a=this.getLayer().getSource(),c=n.pixelRatio,v=n.viewHints,l=!(v[we]||v[pe]),d=this.context,w=Math.round(n.size[0]*c),p=Math.round(n.size[1]*c),y=a.getWrapX()&&e.canWrapX(),b=y?Vn(f):null,_=y?Math.ceil((r[2]-f[2])/b)+1:1,g=y?Math.floor((r[0]-f[0])/b):0;do{var m=this.getRenderTransform(o,u,h,c,w,p,g*b);t.execute(d,1,m,h,l,void 0,i)}while(++g<_)},n.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},n.prototype.renderFrame=function(t,n){var i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];Qt(this.pixelTransform,1/i,1/i),nn(this.inversePixelTransform,this.pixelTransform);var s=sn(this.pixelTransform);this.useContainer(n,s,r.opacity);var o=this.context,u=o.canvas,e=this.Rf,h=this.declutterExecutorGroup;if((!e||e.isEmpty())&&(!h||h.isEmpty()))return null;var f=Math.round(t.size[0]*i),a=Math.round(t.size[1]*i);u.width!=f||u.height!=a?(u.width=f,u.height=a,u.style.transform!==s&&(u.style.transform=s)):this.containerReused||o.clearRect(0,0,f,a),this.preRender(o,t);var c=t.viewState,v=c.projection,l=!1,d=!0;if(r.extent&&this.clipping){var w=xr(r.extent,v);(l=(d=Zn(w,t.extent))&&!gn(w,t.extent))&&this.clipUnrotated(o,t,w)}d&&this.renderWorlds(e,t),l&&o.restore(),this.postRender(o,t);var p=yu(r.opacity),y=this.container;return p!==y.style.opacity&&(y.style.opacity=p),this.Nf!==c.rotation&&(this.Nf=c.rotation,this.Sf=null),this.container},n.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.Sf&&!this.xf){var i=[this.context.canvas.width,this.context.canvas.height];Ht(this.pixelTransform,i);var r=this.kf,s=this.Af,o=this.Nf,u=this.If,e=this.Cf,h=this.getLayer(),f=[],a=i[0]*Aw,c=i[1]*Aw;f.push(this.getRenderTransform(r,s,o,Aw,a,c,0).slice());var v=h.getSource(),l=u.getExtent();if(v.getWrapX()&&u.canWrapX()&&!gn(l,e)){for(var d=e[0],w=Vn(l),p=0,y=void 0;d<l[0];)y=w*--p,f.push(this.getRenderTransform(r,s,o,Aw,a,c,y).slice()),d+=w;for(p=0,d=e[2];d>l[2];)y=w*++p,f.push(this.getRenderTransform(r,s,o,Aw,a,c,y).slice()),d-=w}this.Sf=Cw(i,f,this.Tf,h.getStyleFunction(),e,s,o)}n(Nw(t,this.Tf,this.Sf))}.bind(this))},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s){var u=this;if(this.Rf){var e,h=n.viewState.resolution,f=n.viewState.rotation,a=this.getLayer(),c={},v=function(t,n,i){var u=o(t),e=c[u];if(e){if(!0!==e&&i<e.distanceSq){if(0===i)return c[u]=!0,s.splice(s.lastIndexOf(e),1),r(t,a,n);e.geometry=n,e.distanceSq=i}}else{if(0===i)return c[u]=!0,r(t,a,n);s.push(c[u]={feature:t,layer:a,geometry:n,distanceSq:i,callback:r})}},l=[this.Rf];return this.declutterExecutorGroup&&l.push(this.declutterExecutorGroup),l.some((function(r){return e=r.forEachFeatureAtCoordinate(t,h,f,i,v,r===u.declutterExecutorGroup?n.declutterTree.all().map((function(t){return t.value})):null)})),e}},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.Rf&&t.changed()},n.prototype.jf=function(t){this.renderIfReadyAndVisible()},n.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource();if(!i)return!1;var r=t.viewHints[we],s=t.viewHints[pe],o=n.getUpdateWhileAnimating(),u=n.getUpdateWhileInteracting();if(!this.Ef&&!o&&r||!u&&s)return this.xf=!0,!0;this.xf=!1;var e=t.extent,h=t.viewState,f=h.projection,a=h.resolution,c=t.pixelRatio,v=n.getRevision(),l=n.getRenderBuffer(),d=n.getRenderOrder();void 0===d&&(d=ea);var w=h.center.slice(),p=pn(e,l*a),y=p.slice(),b=[p.slice()],_=f.getExtent();if(i.getWrapX()&&f.canWrapX()&&!gn(_,t.extent)){var m=Vn(_),O=Math.max(Vn(p)/2,m);p[0]=_[0]-O,p[2]=_[2]+O,nr(w,f);var M=ti(b[0],f);M[0]<_[0]&&M[2]<_[2]?b.push([M[0]+m,M[1],M[2]+m,M[3]]):M[0]>_[0]&&M[2]>_[2]&&b.push([M[0]-m,M[1],M[2]-m,M[3]])}if(!this.Ef&&this.Af==a&&this.Je==v&&this.Pf==d&&gn(this.Cf,p))return g(this.bh,y)||(this.Sf=null,this.bh=y),this.kf=w,this.replayGroupChanged=!1,!0;this.Rf=null,this.Ef=!1;var j,x=new vw(fa(a,c),p,a,c);this.getLayer().getDeclutter()&&(j=new vw(fa(a,c),p,a,c));var E,S=mr();if(S){for(var T=0,A=b.length;T<A;++T){var C=jr(b[T],f);i.loadFeatures(C,Er(a,f),S)}E=wr(S,f)}else for(T=0,A=b.length;T<A;++T)i.loadFeatures(b[T],a,f);var N=ha(a,c),k=function(t){var i,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(i=r(t,a)),i){var s=this.renderFeature(t,N,i,x,E,j);this.Ef=this.Ef||s}}.bind(this),I=jr(p,f),P=i.getFeaturesInExtent(I);d&&P.sort(d);for(T=0,A=P.length;T<A;++T)k(P[T]);this.Tf=P;var R=x.finish(),G=new Tw(p,a,c,i.getOverlaps(),R,n.getRenderBuffer());return j&&(this.declutterExecutorGroup=new Tw(p,a,c,i.getOverlaps(),j.finish(),n.getRenderBuffer())),this.Af=a,this.Je=v,this.Pf=d,this.bh=y,this.Cf=p,this.kf=w,this.If=f,this.Rf=G,this.Sf=null,this.replayGroupChanged=!0,!0},n.prototype.renderFeature=function(t,n,i,r,s,o){if(!i)return!1;var u=!1;if(Array.isArray(i))for(var e=0,h=i.length;e<h;++e)u=aa(r,t,i[e],n,this.Mf,s,o)||u;else u=aa(r,t,i,n,this.Mf,s,o);return u},n}(hd),Pw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Rw=function(t){function n(n){var i=t.call(this,n)||this;return i.Gf=new Iw(n),i.Lf=n.getImageRatio(),i.Ff=[1,0,0,1,0,0],i.Df=null,i}return Pw(n,t),n.prototype.disposeInternal=function(){this.Gf.dispose(),t.prototype.disposeInternal.call(this)},n.prototype.getFeatures=function(t){if(!this.Gf)return new Promise((function(t){return t([])}));var n=Ht(this.Ff,Ht(this.Df,t.slice()));return this.Gf.getFeatures(n)},n.prototype.handleFontsChanged=function(){this.Gf.handleFontsChanged()},n.prototype.prepareFrame=function(t){var n=t.pixelRatio,i=t.viewState,r=i.resolution,s=t.viewHints,o=this.Gf,u=t.extent;1!==this.Lf&&$n(u=u.slice(0),this.Lf);var e=Vn(u)/r,h=Yn(u)/r;if(!s[we]&&!s[pe]&&!Jn(u)){o.useContainer(null,null,1);var f=o.context,a=E({},t,{declutterTree:new sl(9),extent:u,size:[e,h],viewState:E({},t.viewState,{rotation:0})}),c=!0,v=new ao(u,r,n,f.canvas,(function(t){o.prepareFrame(a)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(a,null)&&(o.renderDeclutter(a),c=!1),t())}));v.addEventListener(k,function(){if(v.getState()===ro){this._t=c?null:v;var t=v.getResolution(),r=v.getPixelRatio(),s=t*n/r;this.renderedResolution=s,this.Ff=tn(this.Ff,e/2,h/2,1/s,-1/s,0,-i.center[0],-i.center[1])}}.bind(this)),v.load()}return this._t&&(this.Df=t.pixelToCoordinateTransform.slice()),!!this._t},n.prototype.preRender=function(){},n.prototype.postRender=function(){},n.prototype.renderDeclutter=function(){},n.prototype.forEachFeatureAtCoordinate=function(n,i,r,s,o){return this.Gf?this.Gf.forEachFeatureAtCoordinate(n,i,r,s,o):t.prototype.forEachFeatureAtCoordinate.call(this,n,i,r,s,o)},n}(ad);function Gw(t,n,i,r,s,o,u){var e,h,f=(i-n)/r;if(1===f)e=n;else if(2===f)e=n,h=s;else if(0!==f){for(var a=t[n],c=t[n+1],v=0,l=[0],w=n+r;w<i;w+=r){var p=t[w],y=t[w+1];v+=Math.sqrt((p-a)*(p-a)+(y-c)*(y-c)),l.push(v),a=p,c=y}var b=s*v,_=d(l,b);_<0?(h=(b-l[-_-2])/(l[-_-1]-l[-_-2]),e=n+(-_-2)*r):e=n+_*r}var g=u>1?u:2,m=o||new Array(g);for(w=0;w<g;++w)m[w]=void 0===e?NaN:void 0===h?t[e+w]:ci(t[e+w],t[e+r+w],h);return m}function Lw(t,n,i,r,s,o){if(i==n)return null;var u;if(s<t[n+r-1])return o?((u=t.slice(n,n+r))[r-1]=s,u):null;if(t[i-1]<s)return o?((u=t.slice(i-r,i))[r-1]=s,u):null;if(s==t[n+r-1])return t.slice(n,n+r);for(var e=n/r,h=i/r;e<h;){var f=e+h>>1;s<t[(f+1)*r-1]?h=f:e=f+1}var a=t[e*r-1];if(s==a)return t.slice((e-1)*r,(e-1)*r+r);var c=(s-a)/(t[(e+1)*r-1]-a);u=[];for(var v=0;v<r-1;++v)u.push(ci(t[(e-1)*r+v],t[e*r+v],c));return u.push(s),u}function Fw(t,n,i,r,s,o,u){if(u)return Lw(t,n,i[i.length-1],r,s,o);var e;if(s<t[r-1])return o?((e=t.slice(0,r))[r-1]=s,e):null;if(t[t.length-1]<s)return o?((e=t.slice(t.length-r))[r-1]=s,e):null;for(var h=0,f=i.length;h<f;++h){var a=i[h];if(n!=a){if(s<t[n+r-1])return null;if(s<=t[a-1])return Lw(t,n,a,r,s,!1);n=a}}return null}function Dw(t,n,i,r){for(var s=[],o=[1/0,1/0,-1/0,-1/0],u=0,e=i.length;u<e;++u){var h=i[u];o=Sn(t,n,h[0],r),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),n=h[h.length-1]}return s}var zw=[1,0,0,1,0,0],Uw=function(){function t(t,n,i,r,s){this.U,this.C=s,this.zf=t,this.Uf=n,this.Xf=null,this.Yf=null,this.rt=i,this.Wf=r}return t.prototype.get=function(t){return this.Wf[t]},t.prototype.getExtent=function(){return this.U||(this.U=this.zf===At.POINT?En(this.Uf):Sn(this.Uf,0,this.Uf.length,2)),this.U},t.prototype.getFlatInteriorPoint=function(){if(!this.Xf){var t=zn(this.getExtent());this.Xf=_s(this.Uf,0,this.rt,2,t,0)}return this.Xf},t.prototype.getFlatInteriorPoints=function(){if(!this.Xf){var t=Dw(this.Uf,0,this.rt,2);this.Xf=gs(this.Uf,0,this.rt,2,t)}return this.Xf},t.prototype.getFlatMidpoint=function(){return this.Yf||(this.Yf=Gw(this.Uf,0,this.Uf.length,2,.5)),this.Yf},t.prototype.getFlatMidpoints=function(){if(!this.Yf){this.Yf=[];for(var t=this.Uf,n=0,i=this.rt,r=0,s=i.length;r<s;++r){var o=i[r],u=Gw(t,n,o,2,.5);_(this.Yf,u),n=o}}return this.Yf},t.prototype.getId=function(){return this.C},t.prototype.getOrientedFlatCoordinates=function(){return this.Uf},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,n){return this},t.prototype.getProperties=function(){return this.Wf},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){},t.prototype.getType=function(){return this.zf},t.prototype.transform=function(t){var n=(t=er(t)).getExtent(),i=t.getWorldExtent();if(n&&i){var r=Yn(i)/Yn(n);tn(zw,i[0],i[3],r,-r,0,0,0),Cr(this.Uf,0,this.Uf.length,2,zw,this.Uf)}},t.prototype.getEnds=function(){return this.rt},t}();Uw.prototype.getEndss=Uw.prototype.getEnds,Uw.prototype.getFlatCoordinates=Uw.prototype.getOrientedFlatCoordinates;var Xw=Uw;var Yw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ww="renderOrder",qw=function(t){function n(n){var i=this,r=n||{},s=E({},r);return delete s.style,delete s.renderBuffer,delete s.updateWhileAnimating,delete s.updateWhileInteracting,(i=t.call(this,s)||this).qf=void 0!==r.declutter&&r.declutter,i.bf=void 0!==r.renderBuffer?r.renderBuffer:100,i.k=null,i.P=void 0,i.setStyle(r.style),i.Bf=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,i.Vf=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,i}return Yw(n,t),n.prototype.getDeclutter=function(){return this.qf},n.prototype.getFeatures=function(n){return t.prototype.getFeatures.call(this,n)},n.prototype.getRenderBuffer=function(){return this.bf},n.prototype.getRenderOrder=function(){return this.get(Ww)},n.prototype.getStyle=function(){return this.k},n.prototype.getStyleFunction=function(){return this.P},n.prototype.getUpdateWhileAnimating=function(){return this.Bf},n.prototype.getUpdateWhileInteracting=function(){return this.Vf},n.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new sl(9)),this.getRenderer().renderDeclutter(t)},n.prototype.setRenderOrder=function(t){this.set(Ww,t)},n.prototype.setStyle=function(t){this.k=void 0!==t?t:Ac,this.P=null===t?void 0:Sc(this.k),this.changed()},n}(iu),Bw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Vw=function(t){function n(n,i){var r=t.call(this)||this;return r.Zf=null,r.Jf=-1,r.nt=-1,r.it=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r}return Bw(n,t),n.prototype.appendCoordinate=function(t){this.flatCoordinates?_(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.it!=this.getRevision()&&(this.nt=Math.sqrt(Xr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.it=this.getRevision()),qr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.nt,!1,t,n,i,r))},n.prototype.forEachSegment=function(t){return ms(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinateAtM=function(t,n){if(this.layout!=St&&this.layout!=Tt)return null;var i=void 0!==n&&n;return Lw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},n.prototype.getCoordinates=function(){return os(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinateAt=function(t,n){return Gw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)},n.prototype.getLength=function(){return dw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getFlatMidpoint=function(){return this.Jf!=this.getRevision()&&(this.Zf=this.getCoordinateAt(.5,this.Zf),this.Jf=this.getRevision()),this.Zf},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Kr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,xt)},n.prototype.getType=function(){return At.LINE_STRING},n.prototype.intersectsExtent=function(t){return Os(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jr(this.flatCoordinates,0,t,this.stride),this.changed()},n}(zr),Zw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Jw=function(t){function n(n){return t.call(this,n)||this}return Zw(n,t),n.prototype.createRenderer=function(){return new Iw(this)},n}(qw);function Hw(t,n,i){for(var r,s,o,u,e,h,f=[],a=t(0),c=t(1),v=n(a),l=n(c),d=[c,a],w=[l,v],p=[1,0],y={},b=1e5;--b>0&&p.length>0;)o=p.pop(),a=d.pop(),v=w.pop(),(h=o.toString())in y||(f.push(v[0],v[1]),y[h]=!0),u=p.pop(),c=d.pop(),l=w.pop(),oi((s=n(r=t(e=(o+u)/2)))[0],s[1],v[0],v[1],l[0],l[1])<i?(f.push(l[0],l[1]),y[h=u.toString()]=!0):(p.push(u,e,e,o),w.push(l,s,s,v),d.push(c,r,r,a));return f}function $w(t,n,i,r,s){return Hw((function(r){return[t,n+(i-n)*r]}),pr(er("EPSG:4326"),r),s)}function Kw(t,n,i,r,s){return Hw((function(r){return[n+(i-n)*r,t]}),pr(er("EPSG:4326"),r),s)}var Qw=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tp=new jc({color:"rgba(0,0,0,0.2)"}),np=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],ip=function(t){function n(n){var i=this,r=n||{},s=E({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},r);return delete s.maxLines,delete s.strokeStyle,delete s.targetSize,delete s.showLabels,delete s.lonLabelFormatter,delete s.latLabelFormatter,delete s.lonLabelPosition,delete s.latLabelPosition,delete s.lonLabelStyle,delete s.latLabelStyle,delete s.intervals,(i=t.call(this,s)||this).Zn=null,i.Hf=1/0,i.$f=1/0,i.Kf=-1/0,i.Qf=-1/0,i.ta=1/0,i.na=1/0,i.ia=-1/0,i.ra=-1/0,i.sa=void 0!==r.targetSize?r.targetSize:100,i.oa=void 0!==r.maxLines?r.maxLines:100,i.ua=[],i.ea=[],i.ha=void 0!==r.strokeStyle?r.strokeStyle:tp,i.fa=void 0,i.aa=void 0,i.ca=null,i.va=null,i.la=null,i.da=null,i.wa=null,i.pa=null,i.ya=null,r.showLabels&&(i.ba=null==r.lonLabelFormatter?Bi.bind(i,"EW"):r.lonLabelFormatter,i._a=null==r.latLabelFormatter?Bi.bind(i,"NS"):r.latLabelFormatter,i.ga=null==r.lonLabelPosition?0:r.lonLabelPosition,i.ma=null==r.latLabelPosition?1:r.latLabelPosition,i.Oa=new kc({text:void 0!==r.lonLabelStyle?r.lonLabelStyle.clone():new Rc({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new ac({color:"rgba(0,0,0,1)"}),stroke:new jc({color:"rgba(255,255,255,1)",width:3})})}),i.Ma=function(t){var n=t.get("graticule_label");return this.Oa.getText().setText(n),this.Oa}.bind(i),i.ja=new kc({text:void 0!==r.latLabelStyle?r.latLabelStyle.clone():new Rc({font:"12px Calibri,sans-serif",textAlign:"right",fill:new ac({color:"rgba(0,0,0,1)"}),stroke:new jc({color:"rgba(255,255,255,1)",width:3})})}),i.xa=function(t){var n=t.get("graticule_label");return this.ja.getText().setText(n),this.ja}.bind(i),i.pa=[],i.ya=[],i.addEventListener(Zo,i.Ea.bind(i))),i.Sa=void 0!==r.intervals?r.intervals:np,i.setSource(new bl({loader:i.loaderFunction.bind(i),strategy:i.strategyFunction.bind(i),features:new et,overlaps:!1,useSpatialIndex:!1,wrapX:r.wrapX})),i.Ta=[],i.Aa=new kc({stroke:i.ha}),i.Ca=null,i.bh=null,i.setRenderOrder(null),i}return Qw(n,t),n.prototype.strategyFunction=function(t,n){var i=t.slice();return this.Zn&&this.getSource().getWrapX()&&ti(i,this.Zn),this.Ca&&(An(this.Ca,i,n)?i=this.Ca.slice():this.getSource().removeLoadedExtent(this.Ca)),[i]},n.prototype.loaderFunction=function(t,n,i){this.Ca=t;var r=this.getSource(),s=Wn(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.bh&&Tn(this.bh,s)||(this.bh=s,Jn(s)))){var o=zn(s),u=n*n/4;(!this.Zn||!dr(this.Zn,i))&&this.Na(i),this.ka(s,o,n,u);var e,h=this.ua.length+this.ea.length;for(this.pa&&(h+=this.ua.length),this.ya&&(h+=this.ea.length);h>this.Ta.length;)e=new jt,this.Ta.push(e);var f=r.getFeaturesCollection();f.clear();var a,c,v=0;for(a=0,c=this.ua.length;a<c;++a)(e=this.Ta[v++]).setGeometry(this.ua[a]),e.setStyle(this.Aa),f.push(e);for(a=0,c=this.ea.length;a<c;++a)(e=this.Ta[v++]).setGeometry(this.ea[a]),e.setStyle(this.Aa),f.push(e)}},n.prototype.Ia=function(t,n,i,r,s,o){var u=this.Pa(t,n,i,r,o);if(Zn(u.getExtent(),s)){if(this.pa){var e=this.ba(t);o in this.pa?this.pa[o].text=e:this.pa[o]={geom:new ds([]),text:e}}this.ua[o++]=u}return o},n.prototype.Ra=function(t,n,i,r,s,o){var u=this.Ga(t,n,i,r,o);if(Zn(u.getExtent(),s)){if(this.ya){var e=this._a(t);o in this.ya?this.ya[o].text=e:this.ya[o]={geom:new ds([]),text:e}}this.ea[o++]=u}return o},n.prototype.Ea=function(t){var n=t.frameState.viewState.rotation,i=t.frameState.extent,r=zn(i),s=i;if(n){var o=Vn(i),u=Yn(i),e=Math.abs(Math.cos(n)),h=Math.abs(Math.sin(n)),f=(h*u-e*o)/(h*h-e*e),a=(h*o-e*u)/(h*h-e*e);s=[r[0]-f/2,r[1]-a/2,r[0]+f/2,r[1]+a/2]}var c=0,v=0,l=this.ma<.5,d=this.Zn.getExtent(),w=Vn(d);this.getSource().getWrapX()&&this.Zn.canWrapX()&&!gn(d,i)&&(c=Math.floor((i[0]-d[0])/w),v=Math.ceil((i[2]-d[2])/w),l=l!==Math.abs(n)>Math.PI/2);for(var p=va(t),y=c;y<=v;++y){var b=this.ua.length+this.ea.length,_=void 0,g=void 0,m=void 0,O=void 0;if(this.pa)for(g=0,m=this.pa.length;g<m;++g){var M=this.ua[g];if(n||0!==y)(j=M.clone()).translate(y*w,0),j.rotate(-n,r),(O=this.La(j,s,g)).rotate(n,r);else O=this.La(M,i,g);(_=this.Ta[b++]).setGeometry(O),_.set("graticule_label",this.pa[g].text),p.drawFeature(_,this.Ma(_))}if(this.ya&&(y===c&&l||y===v&&!l))for(g=0,m=this.ea.length;g<m;++g){var j;M=this.ea[g];if(n||0!==y)(j=M.clone()).translate(y*w,0),j.rotate(-n,r),(O=this.Fa(j,s,g)).rotate(n,r);else O=this.Fa(M,i,g);(_=this.Ta[b++]).setGeometry(O),_.set("graticule_label",this.ya[g].text),p.drawFeature(_,this.xa(_))}}},n.prototype.ka=function(t,n,i,r){var s=this.Da(i);if(-1==s)return this.ua.length=0,this.ea.length=0,this.pa&&(this.pa.length=0),void(this.ya&&(this.ya.length=0));var o=!1,u=this.Zn.getExtent(),e=Vn(u);this.getSource().getWrapX()&&this.Zn.canWrapX()&&!gn(u,t)&&(Vn(t)>=e?(t[0]=u[0],t[2]=u[2]):o=!0);var h=[ii(n[0],this.ia,this.ta),ii(n[1],this.ra,this.na)],f=this.aa(h);isNaN(f[1])&&(f[1]=Math.abs(this.Hf)>=Math.abs(this.Kf)?this.Hf:this.Kf);var a,c,v,l,d=ii(f[0],this.Qf,this.$f),w=ii(f[1],this.Kf,this.Hf),p=this.oa,y=t;o||(y=[ii(t[0],this.ia,this.ta),ii(t[1],this.ra,this.na),ii(t[2],this.ia,this.ta),ii(t[3],this.ra,this.na)]);var b=Qn(y,this.aa,void 0,8),_=b[3],g=b[2],m=b[1],O=b[0];if(o||(_n(y,this.va)&&(O=this.Qf,m=this.Kf),_n(y,this.la)&&(g=this.$f,m=this.Kf),_n(y,this.da)&&(O=this.Qf,_=this.Hf),_n(y,this.wa)&&(g=this.$f,_=this.Hf),_=ii(_,w,this.Hf),g=ii(g,d,this.$f),m=ii(m,this.Kf,w),O=ii(O,this.Qf,d)),l=ii(d=Math.floor(d/s)*s,this.Qf,this.$f),c=this.Ia(l,m,_,r,t,0),a=0,o)for(;(l-=s)>=O&&a++<p;)c=this.Ia(l,m,_,r,t,c);else for(;l!=this.Qf&&a++<p;)l=Math.max(l-s,this.Qf),c=this.Ia(l,m,_,r,t,c);if(l=ii(d,this.Qf,this.$f),a=0,o)for(;(l+=s)<=g&&a++<p;)c=this.Ia(l,m,_,r,t,c);else for(;l!=this.$f&&a++<p;)l=Math.min(l+s,this.$f),c=this.Ia(l,m,_,r,t,c);for(this.ua.length=c,this.pa&&(this.pa.length=c),v=ii(w=Math.floor(w/s)*s,this.Kf,this.Hf),c=this.Ra(v,O,g,r,t,0),a=0;v!=this.Kf&&a++<p;)v=Math.max(v-s,this.Kf),c=this.Ra(v,O,g,r,t,c);for(v=ii(w,this.Kf,this.Hf),a=0;v!=this.Hf&&a++<p;)v=Math.min(v+s,this.Hf),c=this.Ra(v,O,g,r,t,c);this.ea.length=c,this.ya&&(this.ya.length=c)},n.prototype.Da=function(t){for(var n=this.ca[0],i=this.ca[1],r=-1,s=Math.pow(this.sa*t,2),o=[],u=[],e=0,h=this.Sa.length;e<h;++e){var f=ii(this.Sa[e]/2,0,90),a=ii(i,-90+f,90-f);if(o[0]=n-f,o[1]=a-f,u[0]=n+f,u[1]=a+f,this.fa(o,o),this.fa(u,u),Math.pow(u[0]-o[0],2)+Math.pow(u[1]-o[1],2)<=s)break;r=this.Sa[e]}return r},n.prototype.Pa=function(t,n,i,r,s){var o=$w(t,n,i,this.Zn,r),u=this.ua[s];return u?(u.setFlatCoordinates(xt,o),u.changed()):(u=new Vw(o,xt),this.ua[s]=u),u},n.prototype.La=function(t,n,i){var r=t.getFlatCoordinates(),s=1,o=r.length-1;r[s]>r[o]&&(s=o,o=1);var u=Math.max(n[1],r[s]),e=Math.min(n[3],r[o]),h=ii(n[1]+Math.abs(n[1]-n[3])*this.ga,u,e),f=[r[s-1]+(r[o-1]-r[s-1])*(h-r[s])/(r[o]-r[s]),h],a=this.pa[i].geom;return a.setCoordinates(f),a},n.prototype.getMeridians=function(){return this.ua},n.prototype.Ga=function(t,n,i,r,s){var o=Kw(t,n,i,this.Zn,r),u=this.ea[s];return u?(u.setFlatCoordinates(xt,o),u.changed()):u=new Vw(o,xt),u},n.prototype.Fa=function(t,n,i){var r=t.getFlatCoordinates(),s=0,o=r.length-2;r[s]>r[o]&&(s=o,o=0);var u=Math.max(n[0],r[s]),e=Math.min(n[2],r[o]),h=ii(n[0]+Math.abs(n[0]-n[2])*this.ma,u,e),f=[h,r[s+1]+(r[o+1]-r[s+1])*(h-r[s])/(r[o]-r[s])],a=this.ya[i].geom;return a.setCoordinates(f),a},n.prototype.getParallels=function(){return this.ea},n.prototype.Na=function(t){var n=er("EPSG:4326"),i=t.getWorldExtent();this.Hf=i[3],this.$f=i[2],this.Kf=i[1],this.Qf=i[0];var r=pr(t,n);if(this.Qf<this.$f)this.aa=r;else{var s=this.Qf+this.$f/2;this.$f+=360,this.aa=function(t,n,i){for(var o=i||2,u=r(t,n,o),e=0,h=u.length;e<h;e+=o)u[e]<s&&(u[e]+=360);return u}}this.fa=pr(n,t);var o=Qn([this.Qf,this.Kf,this.$f,this.Hf],this.fa,void 0,8);this.ia=o[0],this.ta=o[2],this.ra=o[1],this.na=o[3],this.va=this.fa([this.Qf,this.Kf]),this.la=this.fa([this.$f,this.Kf]),this.da=this.fa([this.Qf,this.Hf]),this.wa=this.fa([this.$f,this.Hf]),this.ca=this.aa(zn(t.getExtent())),isNaN(this.ca[1])&&(this.ca[1]=Math.abs(this.Hf)>=Math.abs(this.Kf)?this.Hf:this.Kf),this.Zn=t},n}(Jw),rp=new Uint8Array(4),sp=function(){function t(t,n){this.uu=t;var i=t.getGL();this.za=i.createTexture(),this.Ua=i.createFramebuffer(),this._o=n||[1,1],this.T=new Uint8Array(0),this.Xa=!0,this.Ya()}return t.prototype.setSize=function(t){g(t,this._o)||(this._o[0]=t[0],this._o[1]=t[1],this.Ya())},t.prototype.getSize=function(){return this._o},t.prototype.clearCachedData=function(){this.Xa=!0},t.prototype.readAll=function(){if(this.Xa){var t=this._o,n=this.uu.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.Ua),n.readPixels(0,0,t[0],t[1],n.RGBA,n.UNSIGNED_BYTE,this.T),this.Xa=!1}return this.T},t.prototype.readPixel=function(t,n){if(t<0||n<0||t>this._o[0]||n>=this._o[1])return rp[0]=0,rp[1]=0,rp[2]=0,rp[3]=0,rp;this.readAll();var i=Math.floor(t)+(this._o[1]-Math.floor(n)-1)*this._o[0];return rp[0]=this.T[4*i],rp[1]=this.T[4*i+1],rp[2]=this.T[4*i+2],rp[3]=this.T[4*i+3],rp},t.prototype.getTexture=function(){return this.za},t.prototype.getFramebuffer=function(){return this.Ua},t.prototype.Ya=function(){var t=this._o,n=this.uu.getGL();this.za=this.uu.createTexture(t,null,this.za),n.bindFramebuffer(n.FRAMEBUFFER,this.Ua),n.viewport(0,0,t[0],t[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.za,0),this.T=new Uint8Array(t[0]*t[1]*4)},t}(),op=new Blob(['var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};'],{type:"application/javascript"}),up=URL.createObjectURL(op);var ep=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hp=function(t){function n(n,i){var r=this,s=i.uniforms||{},u=[1,0,0,1,0,0];s[nv]=u,(r=t.call(this,n,{className:i.className,uniforms:s,postProcesses:i.postProcesses})||this).Wa=-1,r.qa=new Wc(Gc,Dc),r.Ba=new Wc(Gc,Dc),r.Va=new Wc(Lc,Dc),r.Uu=r.helper.getProgram(i.fragmentShader,i.vertexShader),r.Za=!(!i.hitFragmentShader||!i.hitVertexShader),r.Ja=r.Za&&r.helper.getProgram(i.hitFragmentShader,i.hitVertexShader);var e=i.attributes?i.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:ev.FLOAT}})):[];r.attributes=[{name:"a_position",size:2,type:ev.FLOAT},{name:"a_index",size:1,type:ev.FLOAT}].concat(e),r.hitDetectionAttributes=[{name:"a_position",size:2,type:ev.FLOAT},{name:"a_index",size:1,type:ev.FLOAT},{name:"a_hitColor",size:4,type:ev.FLOAT},{name:"a_featureUid",size:1,type:ev.FLOAT}].concat(e),r.customAttributes=i.attributes?i.attributes:[],r.Si=[1/0,1/0,-1/0,-1/0],r.Ha=u,r.$a=[1,0,0,1,0,0],r.Ka=[1,0,0,1,0,0],r.Qa=new Float32Array(0),r.tc=new Float32Array(0),r.nc=r.Za&&new sp(r.helper),r.ic=new Worker(up),r.ic.addEventListener("message",function(t){var n=t.data;if(n.type===cv){var i=n.projectionTransform;n.hitDetection?(this.Ba.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.Ba)):(this.qa.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.qa)),this.Va.fromArrayBuffer(n.indexBuffer),this.helper.flushBufferData(this.Va),this.$a=i,nn(this.Ka,this.$a),n.hitDetection?this.tc=new Float32Array(t.data.renderInstructions):this.Qa=new Float32Array(t.data.renderInstructions),this.getLayer().changed()}}.bind(r)),r.rc={},r.sc=0;var h=r.getLayer().getSource();return r.oc=[B(h,fl,r.uc,r),B(h,al,r.ec,r),B(h,vl,r.hc,r),B(h,cl,r.fc,r)],h.forEachFeature(function(t){this.rc[o(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.sc++}.bind(r)),r}return ep(n,t),n.prototype.uc=function(t){var n=t.feature;this.rc[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()},this.sc++},n.prototype.ec=function(t){var n=t.feature;this.rc[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()}},n.prototype.hc=function(t){var n=t.feature;delete this.rc[o(n)],this.sc--},n.prototype.fc=function(){this.rc={},this.sc=0},n.prototype.renderFrame=function(t){this.preRender(t);var n=this.Va.getSize();this.helper.drawElements(0,n),this.helper.finalizeDraw(t);var i=this.helper.getCanvas(),r=t.layerStatesArray[t.layerIndex].opacity;return r!==parseFloat(i.style.opacity)&&(i.style.opacity=String(r)),this.Za&&(this.renderHitDetection(t),this.nc.clearCachedData()),this.postRender(t),i},n.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource(),r=t.viewState,s=!t.viewHints[we]&&!t.viewHints[pe],o=!Tn(this.Si,t.extent),u=this.Wa<i.getRevision();if(u&&(this.Wa=i.getRevision()),s&&(o||u)){var e=r.projection,h=r.resolution,f=n instanceof qw?n.getRenderBuffer():0,a=pn(t.extent,f*h);i.loadFeatures(a,h,e),this.ac(t),this.Si=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.Ha),Vt(this.Ha,this.Ka),this.helper.useProgram(this.Uu),this.helper.prepareDraw(t),this.helper.bindBuffer(this.qa),this.helper.bindBuffer(this.Va),this.helper.enableAttributes(this.attributes),!0},n.prototype.ac=function(t){var n=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,n);var i,r,s=(2+this.customAttributes.length)*this.sc;if(this.Qa&&this.Qa.length===s||(this.Qa=new Float32Array(s)),this.Za){var o=(7+this.customAttributes.length)*this.sc;this.tc&&this.tc.length===o||(this.tc=new Float32Array(o))}var u,e,h,f,a,c=[],v=[],l=0,d=0;for(var w in this.rc)if((r=(i=this.rc[w]).geometry)&&r.getType()===At.POINT){c[0]=r.getFlatCoordinates()[0],c[1]=r.getFlatCoordinates()[1],Ht(n,c),e=d+6,h=void 0,f=void 0,a=void 0,f=256,a=255,(h=v||[])[0]=Math.floor(e/f/f/f)/a,h[1]=Math.floor(e/f/f)%f/a,h[2]=Math.floor(e/f)%f/a,h[3]=e%f/a,u=h,this.Qa[l++]=c[0],this.Qa[l++]=c[1],this.Za&&(this.tc[d++]=c[0],this.tc[d++]=c[1],this.tc[d++]=u[0],this.tc[d++]=u[1],this.tc[d++]=u[2],this.tc[d++]=u[3],this.tc[d++]=Number(w));for(var p=void 0,y=0;y<this.customAttributes.length;y++)p=this.customAttributes[y].callback(i.feature,i.properties),this.Qa[l++]=p,this.Za&&(this.tc[d++]=p)}var b={type:cv,renderInstructions:this.Qa.buffer,customAttributesCount:this.customAttributes.length};if(b.projectionTransform=n,this.ic.postMessage(b,[this.Qa.buffer]),this.Qa=null,this.Za){var _={type:cv,renderInstructions:this.tc.buffer,customAttributesCount:5+this.customAttributes.length};_.projectionTransform=n,_.hitDetection=!0,this.ic.postMessage(_,[this.tc.buffer]),this.tc=null}},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,s){if(mt(this.Za,66),this.tc){var o=Ht(n.coordinateToPixelTransform,t.slice()),u=this.nc.readPixel(o[0]/2,o[1]/2),e=function(t){var n=0,i=256,r=255;return n+=Math.round(t[0]*i*i*i*r),n+=Math.round(t[1]*i*i*r),n+=Math.round(t[2]*i*r),n+Math.round(t[3]*r)}([u[0]/255,u[1]/255,u[2]/255,u[3]/255]),h=this.tc[e],f=Math.floor(h).toString(),a=this.getLayer().getSource().getFeatureByUid(f);return a?r(a,this.getLayer(),null):void 0}},n.prototype.renderHitDetection=function(t){if(this.Ba.getSize()){this.nc.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.Ja),this.helper.prepareDrawToRenderTarget(t,this.nc,!0),this.helper.bindBuffer(this.Ba),this.helper.bindBuffer(this.Va),this.helper.enableAttributes(this.hitDetectionAttributes);var n=this.Va.getSize();this.helper.drawElements(0,n)}},n.prototype.disposeInternal=function(){this.ic.terminate(),this.au=null,this.oc.forEach((function(t){Z(t)})),this.oc=null,t.prototype.disposeInternal.call(this)},n}(lv),fp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ap="blur",cp="gradient",vp="radius",lp=["#00f","#0ff","#0f0","#ff0","#f00"];var dp=function(t){function n(n){var i=this,r=n||{},s=E({},r);delete s.gradient,delete s.radius,delete s.blur,delete s.weight,(i=t.call(this,s)||this).cc=null,i.addChangeListener(cp,i.vc),i.setGradient(r.gradient?r.gradient:lp),i.setBlur(void 0!==r.blur?r.blur:15),i.setRadius(void 0!==r.radius?r.radius:8);var o=r.weight?r.weight:"weight";return i.lc="string"==typeof o?function(t){return t.get(o)}:o,i.setRenderOrder(null),i}return fp(n,t),n.prototype.getBlur=function(){return this.get(ap)},n.prototype.getGradient=function(){return this.get(cp)},n.prototype.getRadius=function(){return this.get(vp)},n.prototype.vc=function(){this.cc=function(t){for(var n=1,i=256,r=co(n,i),s=r.createLinearGradient(0,0,n,i),o=1/(t.length-1),u=0,e=t.length;u<e;++u)s.addColorStop(u*o,t[u]);return r.fillStyle=s,r.fillRect(0,0,n,i),r.canvas}(this.getGradient())},n.prototype.setBlur=function(t){this.set(ap,t)},n.prototype.setGradient=function(t){this.set(cp,t)},n.prototype.setRadius=function(t){this.set(vp,t)},n.prototype.createRenderer=function(){return new hp(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var n=this.lc(t);return void 0!==n?ii(n,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(vp)+this.get(ap))}.bind(this),u_blurSlope:function(){return this.get(vp)/Math.max(1,this.get(ap))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.cc}.bind(this)}}]})},n.prototype.renderDeclutter=function(){},n}(Jw),wp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pp=function(t){function n(n){var i=this,r=n||{},s=E({},r);return delete s.imageRatio,(i=t.call(this,s)||this).dc=void 0!==r.imageRatio?r.imageRatio:1,i}return wp(n,t),n.prototype.getImageRatio=function(){return this.dc},n.prototype.createRenderer=function(){return new Rw(this)},n}(qw),yp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bp="addfeatures",_p=function(t){function n(n,i,r,s){var o=t.call(this,n)||this;return o.features=r,o.file=i,o.projection=s,o}return yp(n,t),n}(c),gp=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{handleEvent:O})||this).on,i.once,i.un,i.wc=!1,i.yc=[];for(var s=r.formatConstructors?r.formatConstructors:[],o=0,u=s.length;o<u;++o){var e=s[o];"function"==typeof e&&(e=new e),i.yc.push(e),i.wc=i.wc||e.getType()===Df}return i.Zn=r.projection?er(r.projection):null,i.bc=null,i._c=r.source||null,i.target=r.target?r.target:null,i}return yp(n,t),n.prototype.gc=function(t,n){var i,r=n.target.result,s=this.getMap(),o=this.Zn;o||(o=s.getView().getProjection());for(var u=this.yc,e=0,h=u.length;e<h;++e){var f=u[e],a=r;this.wc&&f.getType()!==Df&&(void 0===i&&(i=(new TextDecoder).decode(r)),a=i);var c=this.mc(f,a,{featureProjection:o});if(c&&c.length>0){this._c&&(this._c.clear(),this._c.addFeatures(c)),this.dispatchEvent(new _p(bp,t,c,o));break}}},n.prototype.Oc=function(){var t=this.getMap();if(t){var n=this.target?this.target:t.getViewport();this.bc=[B(n,D,this.handleDrop,this),B(n,L,this.handleStop,this),B(n,F,this.handleStop,this),B(n,D,this.handleStop,this)]}},n.prototype.setActive=function(n){!this.getActive()&&n&&this.Oc(),this.getActive()&&!n&&this.Mc(),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.Mc(),t.prototype.setMap.call(this,n),this.getActive()&&this.Oc()},n.prototype.mc=function(t,n,i){try{return t.readFeatures(n,i)}catch(t){return null}},n.prototype.Mc=function(){this.bc&&(this.bc.forEach(Z),this.bc=null)},n.prototype.handleDrop=function(t){for(var n=t.dataTransfer.files,i=0,r=n.length;i<r;++i){var s=n.item(i),o=new FileReader;o.addEventListener(X,this.gc.bind(this,s)),this.wc?o.readAsArrayBuffer(s):o.readAsText(s)}},n.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},n}(oh),mp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Op=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).Er=r.condition?r.condition:mh,i.Tr=void 0,i.jc=void 0,i.os=0,i.lr=void 0!==r.duration?r.duration:400,i}return mp(n,t),n.prototype.handleDragEvent=function(t){if(Mh(t)){var n=t.map,i=n.getSize(),r=t.pixel,s=r[0]-i[0]/2,o=i[1]/2-r[1],u=Math.atan2(o,s),e=Math.sqrt(s*s+o*o),h=n.getView();if(void 0!==this.Tr){var f=this.Tr-u;h.adjustRotationInternal(f)}this.Tr=u,void 0!==this.jc&&h.adjustResolutionInternal(this.jc/e),void 0!==this.jc&&(this.os=this.jc/e),this.jc=e}},n.prototype.handleUpEvent=function(t){if(!Mh(t))return!0;var n=t.map.getView(),i=this.os>1?1:-1;return n.endInteraction(this.lr,i),this.os=0,!1},n.prototype.handleDownEvent=function(t){return!!Mh(t)&&(!!this.Er(t)&&(t.map.getView().beginInteraction(),this.Tr=void 0,this.jc=void 0,!0))},n}(ah),Mp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jp=function(t){function n(n,i,r){var s=t.call(this)||this;if(void 0!==r&&void 0===i)s.setFlatCoordinates(r,n);else{var o=i||0;s.setCenterAndRadius(n,o,r)}return s}return Mp(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){var s=this.flatCoordinates,o=t-s[0],u=n-s[1],e=o*o+u*u;if(e<r){if(0===e)for(var h=0;h<this.stride;++h)i[h]=s[h];else{var f=this.getRadius()/Math.sqrt(e);i[0]=s[0]+f*o,i[1]=s[1]+f*u;for(h=2;h<this.stride;++h)i[h]=s[h]}return i.length=this.stride,e}return r},n.prototype.containsXY=function(t,n){var i=this.flatCoordinates,r=t-i[0],s=n-i[1];return r*r+s*s<=this.xc()},n.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.computeExtent=function(t){var n=this.flatCoordinates,i=n[this.stride]-n[0];return jn(n[0]-i,n[1]-i,n[0]+i,n[1]+i,t)},n.prototype.getRadius=function(){return Math.sqrt(this.xc())},n.prototype.xc=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+n*n},n.prototype.getType=function(){return At.CIRCLE},n.prototype.intersectsExtent=function(t){if(Zn(t,this.getExtent())){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||(t[1]<=n[1]&&t[3]>=n[1]||Gn(t,this.intersectsCoordinate.bind(this)))}return!1},n.prototype.setCenter=function(t){var n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],r=t.slice();r[n]=r[0]+i;for(var s=1;s<n;++s)r[n+s]=t[s];this.setFlatCoordinates(this.layout,r),this.changed()},n.prototype.setCenterAndRadius=function(t,n,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,s=Zr(r,0,t,this.stride);r[s++]=r[0]+n;for(var o=1,u=this.stride;o<u;++o)r[s++]=r[o];r.length=s,this.changed()},n.prototype.getCoordinates=function(){return null},n.prototype.setCoordinates=function(t,n){},n.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},n.prototype.rotate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(Nr(i,0,i.length,r,t,n,i)),this.changed()},n.prototype.translate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(Ir(i,0,i.length,r,t,n,i)),this.changed()},n}(zr);jp.prototype.transform;var xp=jp,Ep=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Sp=function(t){function n(n,i,r){var s=t.call(this)||this;if(s.rt=[],s.nt=-1,s.it=-1,Array.isArray(n[0]))s.setCoordinates(n,i);else if(void 0!==i&&r)s.setFlatCoordinates(i,n),s.rt=r;else{for(var o=s.getLayout(),u=n,e=[],h=[],f=0,a=u.length;f<a;++f){var c=u[f];0===f&&(o=c.getLayout()),_(e,c.getFlatCoordinates()),h.push(e.length)}s.setFlatCoordinates(o,e),s.rt=h}return s}return Ep(n,t),n.prototype.appendLineString=function(t){this.flatCoordinates?_(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.rt.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.rt.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.it!=this.getRevision()&&(this.nt=Math.sqrt(Yr(this.flatCoordinates,0,this.rt,this.stride,0)),this.it=this.getRevision()),Br(this.flatCoordinates,0,this.rt,this.stride,this.nt,!1,t,n,i,r))},n.prototype.getCoordinateAtM=function(t,n,i){if(this.layout!=St&&this.layout!=Tt||0===this.flatCoordinates.length)return null;var r=void 0!==n&&n,s=void 0!==i&&i;return Fw(this.flatCoordinates,0,this.rt,this.stride,t,r,s)},n.prototype.getCoordinates=function(){return us(this.flatCoordinates,0,this.rt,this.stride)},n.prototype.getEnds=function(){return this.rt},n.prototype.getLineString=function(t){return t<0||this.rt.length<=t?null:new Vw(this.flatCoordinates.slice(0===t?0:this.rt[t-1],this.rt[t]),this.layout)},n.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,n=this.rt,i=this.layout,r=[],s=0,o=0,u=n.length;o<u;++o){var e=n[o],h=new Vw(t.slice(s,e),i);r.push(h),s=e}return r},n.prototype.getFlatMidpoints=function(){for(var t=[],n=this.flatCoordinates,i=0,r=this.rt,s=this.stride,o=0,u=r.length;o<u;++o){var e=r[o];_(t,Gw(n,i,e,s,.5)),i=e}return t},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=Qr(this.flatCoordinates,0,this.rt,this.stride,t,i,0,r),new n(i,xt,r)},n.prototype.getType=function(){return At.MULTI_LINE_STRING},n.prototype.intersectsExtent=function(t){return Ms(this.flatCoordinates,0,this.rt,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Hr(this.flatCoordinates,0,t,this.stride,this.rt);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(zr),Tp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ap=function(t){function n(n,i){var r=t.call(this)||this;return i&&!Array.isArray(n[0])?r.setFlatCoordinates(i,n):r.setCoordinates(n,i),r}return Tp(n,t),n.prototype.appendPoint=function(t){this.flatCoordinates?_(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){if(r<bn(this.getExtent(),t,n))return r;for(var s=this.flatCoordinates,o=this.stride,u=0,e=s.length;u<e;u+=o){var h=ui(t,n,s[u],s[u+1]);if(h<r){r=h;for(var f=0;f<o;++f)i[f]=s[u+f];i.length=o}}return r},n.prototype.getCoordinates=function(){return os(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getPoint=function(t){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new ds(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},n.prototype.getPoints=function(){for(var t=this.flatCoordinates,n=this.layout,i=this.stride,r=[],s=0,o=t.length;s<o;s+=i){var u=new ds(t.slice(s,s+i),n);r.push(u)}return r},n.prototype.getType=function(){return At.MULTI_POINT},n.prototype.intersectsExtent=function(t){for(var n=this.flatCoordinates,i=this.stride,r=0,s=n.length;r<s;r+=i){if(mn(t,n[r],n[r+1]))return!0}return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jr(this.flatCoordinates,0,t,this.stride),this.changed()},n}(zr),Cp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Np=function(t){function n(n,i,r){var s=t.call(this)||this;if(s.Ec=[],s.Sc=-1,s.Xf=null,s.nt=-1,s.it=-1,s.ut=-1,s.et=null,!r&&!Array.isArray(n[0])){for(var o=s.getLayout(),u=n,e=[],h=[],f=0,a=u.length;f<a;++f){var c=u[f];0===f&&(o=c.getLayout());for(var v=e.length,l=c.getEnds(),d=0,w=l.length;d<w;++d)l[d]+=v;_(e,c.getFlatCoordinates()),h.push(l)}i=o,n=e,r=h}return void 0!==i&&r?(s.setFlatCoordinates(i,n),s.Ec=r):s.setCoordinates(n,i),s}return Cp(n,t),n.prototype.appendPolygon=function(t){var n;if(this.flatCoordinates){var i=this.flatCoordinates.length;_(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,s=(n=t.getEnds().slice()).length;r<s;++r)n[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.Ec.push();this.Ec.push(n),this.changed()},n.prototype.clone=function(){for(var t=this.Ec.length,i=new Array(t),r=0;r<t;++r)i[r]=this.Ec[r].slice();var s=new n(this.flatCoordinates.slice(),this.layout,i);return s.applyProperties(this),s},n.prototype.closestPointXY=function(t,n,i,r){return r<bn(this.getExtent(),t,n)?r:(this.it!=this.getRevision()&&(this.nt=Math.sqrt(Wr(this.flatCoordinates,0,this.Ec,this.stride,0)),this.it=this.getRevision()),Vr(this.getOrientedFlatCoordinates(),0,this.Ec,this.stride,this.nt,!0,t,n,i,r))},n.prototype.containsXY=function(t,n){return bs(this.getOrientedFlatCoordinates(),0,this.Ec,this.stride,t,n)},n.prototype.getArea=function(){return as(this.getOrientedFlatCoordinates(),0,this.Ec,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?ks(n=this.getOrientedFlatCoordinates().slice(),0,this.Ec,this.stride,t):n=this.flatCoordinates,es(n,0,this.Ec,this.stride)},n.prototype.getEndss=function(){return this.Ec},n.prototype.getFlatInteriorPoints=function(){if(this.Sc!=this.getRevision()){var t=Dw(this.flatCoordinates,0,this.Ec,this.stride);this.Xf=gs(this.getOrientedFlatCoordinates(),0,this.Ec,this.stride,t),this.Sc=this.getRevision()}return this.Xf},n.prototype.getInteriorPoints=function(){return new Ap(this.getFlatInteriorPoints().slice(),St)},n.prototype.getOrientedFlatCoordinates=function(){if(this.ut!=this.getRevision()){var t=this.flatCoordinates;Cs(t,0,this.Ec,this.stride)?this.et=t:(this.et=t.slice(),this.et.length=ks(this.et,0,this.Ec,this.stride)),this.ut=this.getRevision()}return this.et},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=ss(this.flatCoordinates,0,this.Ec,this.stride,Math.sqrt(t),i,0,r),new n(i,xt,r)},n.prototype.getPolygon=function(t){if(t<0||this.Ec.length<=t)return null;var n;if(0===t)n=0;else{var i=this.Ec[t-1];n=i[i.length-1]}var r=this.Ec[t].slice(),s=r[r.length-1];if(0!==n)for(var o=0,u=r.length;o<u;++o)r[o]-=n;return new Rs(this.flatCoordinates.slice(n,s),this.layout,r)},n.prototype.getPolygons=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.Ec,r=[],s=0,o=0,u=i.length;o<u;++o){var e=i[o].slice(),h=e[e.length-1];if(0!==s)for(var f=0,a=e.length;f<a;++f)e[f]-=s;var c=new Rs(n.slice(s,h),t,e);r.push(c),s=h}return r},n.prototype.getType=function(){return At.MULTI_POLYGON},n.prototype.intersectsExtent=function(t){return Es(this.getOrientedFlatCoordinates(),0,this.Ec,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=$r(this.flatCoordinates,0,t,this.stride,this.Ec);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},n}(zr),kp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ip="Point",Pp="LineString",Rp="Polygon",Gp="Circle",Lp="drawstart",Fp="drawend",Dp="drawabort",zp=function(t){function n(n,i){var r=t.call(this,n)||this;return r.feature=i,r}return kp(n,t),n}(c);var Up=function(t){function n(n){var i=this,r=n;r.stopDown||(r.stopDown=M),(i=t.call(this,r)||this).on,i.once,i.un,i.Tc=!1,i.Ac=null,i.Cc,i.Nc,i.kc,i.Ic=!1,i._c=n.source?n.source:null,i.Pc=n.features?n.features:null,i.Rc=n.snapTolerance?n.snapTolerance:12,i.zf=n.type,i.Vr=function(t){switch(t){case At.POINT:case At.MULTI_POINT:return Ip;case At.LINE_STRING:case At.MULTI_LINE_STRING:return Pp;case At.POLYGON:case At.MULTI_POLYGON:return Rp;case At.CIRCLE:return Gp;default:throw new Error("Invalid type: "+t)}}(i.zf),i.Gc=!!n.stopClick,i.Lc=n.minPoints?n.minPoints:i.Vr===Rp?3:2,i.Fc=i.Vr===Gp?2:n.maxPoints?n.maxPoints:1/0,i.Dc=n.finishCondition?n.finishCondition:O;var s,o=n.geometryFunction;if(!o){var u,e=i.Vr;if(e===Gp)o=function(t,n,i){var r=n||new xp([NaN,NaN]),s=Mr(t[0],i),o=$i(s,Mr(t[t.length-1],i));r.setCenterAndRadius(s,Math.sqrt(o));var u=mr();return u&&r.transform(i,u),r};else e===Ip?u=ds:e===Pp?u=Vw:e===Rp&&(u=Rs),o=function(t,n,i){return n?e===Rp?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new u(t),n}}return i.Vo=o,i.zc=void 0!==n.dragVertexDelay?n.dragVertexDelay:500,i.Uc=null,i.Xc=null,i.Yc=null,i.Wc=null,i.qc=null,i.Bc=null,i.Vc=n.clickTolerance?n.clickTolerance*n.clickTolerance:36,i.Zc=new Jw({source:new bl({useSpatialIndex:!1,wrapX:!!n.wrapX&&n.wrapX}),style:n.style?n.style:(s=Cc(),function(t,n){return s[t.getGeometry().getType()]}),updateWhileInteracting:!0}),i.N=n.geometryName,i.Er=n.condition?n.condition:gh,i.Jc,n.freehand?i.Jc=ph:i.Jc=n.freehandCondition?n.freehandCondition:mh,i.addChangeListener(nh,i.Hc),i}return kp(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),this.Hc()},n.prototype.getOverlay=function(){return this.Zc},n.prototype.handleEvent=function(n){n.originalEvent.type===P&&n.originalEvent.preventDefault(),this.Ic=this.Vr!==Ip&&this.Jc(n);var i=n.type===Hu.POINTERMOVE,r=!0;!this.Ic&&this.Nc&&n.type===Hu.POINTERDRAG&&(Date.now()-this.Nc>=this.zc?(this.Ac=n.pixel,this.Tc=!this.Ic,i=!0):this.Nc=void 0,this.Tc&&void 0!==this.Cc&&(clearTimeout(this.Cc),this.Cc=void 0));return this.Ic&&n.type===Hu.POINTERDRAG&&null!==this.Xc?(this.$c(n.coordinate),r=!1):this.Ic&&n.type===Hu.POINTERDOWN?r=!1:i&&this.getPointerCount()<2?(r=n.type===Hu.POINTERMOVE)&&this.Ic?(this.Tn(n),this.Tc&&n.originalEvent.preventDefault()):("mouse"===n.originalEvent.pointerType||n.type===Hu.POINTERDRAG&&void 0===this.Cc)&&this.Tn(n):n.type===Hu.DBLCLICK&&(r=!1),t.prototype.handleEvent.call(this,n)&&r},n.prototype.handleDownEvent=function(t){return this.Tc=!this.Ic,this.Ic?(this.Ac=t.pixel,this.Uc||this.Kc(t.coordinate),!0):this.Er(t)?(this.Nc=Date.now(),this.Cc=setTimeout(function(){this.Tn(new Ju(Hu.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.zc),this.Ac=t.pixel,!0):(this.Nc=void 0,!1)},n.prototype.handleUpEvent=function(t){var n=!0;if(0===this.getPointerCount())if(this.Cc&&(clearTimeout(this.Cc),this.Cc=void 0),this.Tn(t),this.Tc){var i=!this.Uc;i&&this.Kc(t.coordinate),!i&&this.Ic?this.finishDrawing():this.Ic||i&&this.Vr!==Ip||(this.Qc(t.pixel)?this.Dc(t)&&this.finishDrawing():this.$c(t.coordinate)),n=!1}else this.Ic&&this.abortDrawing();return!n&&this.Gc&&t.preventDefault(),n},n.prototype.Tn=function(t){if(this.kc=t.originalEvent.pointerType,this.Ac&&(!this.Ic&&this.Tc||this.Ic&&!this.Tc)){var n=this.Ac,i=t.pixel,r=n[0]-i[0],s=n[1]-i[1],o=r*r+s*s;if(this.Tc=this.Ic?o>this.Vc:o<=this.Vc,!this.Tc)return}this.Uc?this.tv(t.coordinate):this.nv(t.coordinate.slice())},n.prototype.Qc=function(t){var n=!1;if(this.Xc){var i=!1,r=[this.Uc],s=this.Vr;if(s===Ip)n=!0;else if(s===Gp)n=2===this.Wc.length;else if(s===Pp)i=this.Wc.length>this.Lc;else if(s===Rp){var o=this.Wc;i=o[0].length>this.Lc,r=[o[0][0],o[0][o[0].length-2]]}if(i)for(var u=this.getMap(),e=0,h=r.length;e<h;e++){var f=r[e],a=u.getPixelFromCoordinate(f),c=t[0]-a[0],v=t[1]-a[1],l=this.Ic?1:this.Rc;if(n=Math.sqrt(c*c+v*v)<=l){this.Uc=f;break}}}return n},n.prototype.nv=function(t){this.Yc?this.Yc.getGeometry().setCoordinates(t):(this.Yc=new jt(new ds(t)),this.iv())},n.prototype.rv=function(t){this.qc||(this.qc=new jt);var n=t.getLinearRing(0),i=this.qc.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new Vw(n.getFlatCoordinates(),n.getLayout()),this.qc.setGeometry(i))},n.prototype.Kc=function(t){var n=this.getMap().getView().getProjection();this.Uc=t,this.Vr===Ip?this.Wc=t.slice():this.Vr===Rp?(this.Wc=[[t.slice(),t.slice()]],this.Bc=this.Wc[0]):this.Wc=[t.slice(),t.slice()],this.Bc&&(this.qc=new jt(new Vw(this.Bc)));var i=this.Vo(this.Wc,void 0,n);this.Xc=new jt,this.N&&this.Xc.setGeometryName(this.N),this.Xc.setGeometry(i),this.iv(),this.dispatchEvent(new zp(Lp,this.Xc))},n.prototype.tv=function(t){var n,i,r=this.getMap(),s=this.Xc.getGeometry(),o=r.getView().getProjection();(this.Vr===Ip?i=this.Wc:this.Vr===Rp?(i=(n=this.Wc[0])[n.length-1],this.Qc(r.getPixelFromCoordinate(t))&&(t=this.Uc.slice())):i=(n=this.Wc)[n.length-1],i[0]=t[0],i[1]=t[1],this.Vo(this.Wc,s,o),this.Yc)&&this.Yc.getGeometry().setCoordinates(t);if(s.getType()===At.POLYGON&&this.Vr!==Rp)this.rv(s);else if(this.Bc){this.qc.getGeometry().setCoordinates(this.Bc)}this.iv()},n.prototype.$c=function(t){var n,i,r=this.Xc.getGeometry(),s=this.getMap().getView().getProjection(),o=this.Vr;o===Pp||o===Gp?(this.Uc=t.slice(),(i=this.Wc).length>=this.Fc&&(this.Ic?i.pop():n=!0),i.push(t.slice()),this.Vo(i,r,s)):o===Rp&&((i=this.Wc[0]).length>=this.Fc&&(this.Ic?i.pop():n=!0),i.push(t.slice()),n&&(this.Uc=i[0]),this.Vo(this.Wc,r,s)),this.nv(t.slice()),this.iv(),n&&this.finishDrawing()},n.prototype.removeLastPoint=function(){if(this.Xc){var t,n=this.Xc.getGeometry(),i=this.getMap().getView().getProjection(),r=this.Vr;if(r===Pp||r===Gp){if((t=this.Wc).splice(-2,1),t.length>=2){this.Uc=t[t.length-2].slice();var s=this.Uc.slice();t[t.length-1]=s,this.nv(s)}this.Vo(t,n,i),n.getType()===At.POLYGON&&this.qc&&this.rv(n)}else if(r===Rp){(t=this.Wc[0]).splice(-2,1);var o=this.qc.getGeometry();if(t.length>=2){s=t[t.length-2].slice();t[t.length-1]=s,this.nv(s)}o.setCoordinates(t),this.Vo(this.Wc,n,i)}1===t.length&&this.abortDrawing(),this.iv()}},n.prototype.finishDrawing=function(){var t=this.sv();if(t){var n=this.Wc,i=t.getGeometry(),r=this.getMap().getView().getProjection();this.Vr===Pp?(n.pop(),this.Vo(n,i,r)):this.Vr===Rp&&(n[0].pop(),this.Vo(n,i,r),n=i.getCoordinates()),this.zf===At.MULTI_POINT?t.setGeometry(new Ap([n])):this.zf===At.MULTI_LINE_STRING?t.setGeometry(new Sp([n])):this.zf===At.MULTI_POLYGON&&t.setGeometry(new Np([n])),this.dispatchEvent(new zp(Fp,t)),this.Pc&&this.Pc.push(t),this._c&&this._c.addFeature(t)}},n.prototype.sv=function(){this.Uc=null;var t=this.Xc;return this.Xc=null,this.Yc=null,this.qc=null,this.Zc.getSource().clear(!0),t},n.prototype.abortDrawing=function(){var t=this.sv();t&&this.dispatchEvent(new zp(Dp,t))},n.prototype.appendCoordinates=function(t){var n,i=this.Vr,r=!this.Xc;if(r&&this.Kc(t[0]),i===Pp||i===Gp)n=this.Wc;else{if(i!==Rp)return;n=this.Wc&&this.Wc.length?this.Wc[0]:[]}r&&n.shift(),n.pop();for(var s=0;s<t.length;s++)this.$c(t[s]);var o=t[t.length-1];this.$c(o),this.tv(o)},n.prototype.extend=function(t){var n=t.getGeometry();this.Xc=t,this.Wc=n.getCoordinates();var i=this.Wc[this.Wc.length-1];this.Uc=i.slice(),this.Wc.push(i.slice()),this.Yc=new jt(new ds(i)),this.iv(),this.dispatchEvent(new zp(Lp,this.Xc))},n.prototype.iv=function(){var t=[];this.Xc&&t.push(this.Xc),this.qc&&t.push(this.qc),this.Yc&&t.push(this.Yc);var n=this.Zc.getSource();n.clear(!0),n.addFeatures(t)},n.prototype.Hc=function(){var t=this.getMap(),n=this.getActive();t&&n||this.abortDrawing(),this.Zc.setMap(n?t:null)},n}(ah),Xp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yp="extentchanged",Wp=function(t){function n(n){var i=t.call(this,Yp)||this;return i.extent=n,i}return Xp(n,t),n}(c);function qp(){var t=Cc();return function(n,i){return t[At.POINT]}}function Bp(t){return function(n){return wn([t,n])}}function Vp(t,n){return t[0]==n[0]?function(i){return wn([t,[i[0],n[1]]])}:t[1]==n[1]?function(i){return wn([t,[n[0],i[1]]])}:null}var Zp=function(t){function n(n){var i,r=this,s=n||{};return(r=t.call(this,s)||this).on,r.once,r.un,r.Er=s.condition?s.condition:ph,r.U=null,r.ov=null,r.uv=void 0!==s.pixelTolerance?s.pixelTolerance:10,r.ev=!1,r.hv=null,r.fv=null,n||(n={}),r.av=new Jw({source:new bl({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.boxStyle?n.boxStyle:(i=Cc(),function(t,n){return i[At.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.cv=new Jw({source:new bl({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.pointerStyle?n.pointerStyle:qp(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.extent&&r.setExtent(n.extent),r}return Xp(n,t),n.prototype.vv=function(t,n){var i=n.getCoordinateFromPixelInternal(t),r=this.getExtentInternal();if(r){var s=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);s.sort((function(t,n){return Qi(i,t)-Qi(i,n)}));var o=s[0],u=qi(i,o),e=n.getPixelFromCoordinateInternal(u);if(Ki(t,e)<=this.uv){var h=n.getPixelFromCoordinateInternal(o[0]),f=n.getPixelFromCoordinateInternal(o[1]),a=$i(e,h),c=$i(e,f),v=Math.sqrt(Math.min(a,c));return this.ev=v<=this.uv,this.ev&&(u=a>c?o[1]:o[0]),u}}return null},n.prototype.Tn=function(t){var n=t.pixel,i=t.map,r=this.vv(n,i);r||(r=i.getCoordinateFromPixelInternal(n)),this.lv(r)},n.prototype.dv=function(t){var n=this.hv;return n?t?n.setGeometry(Ls(t)):n.setGeometry(void 0):(n=new jt(t?Ls(t):{}),this.hv=n,this.av.getSource().addFeature(n)),n},n.prototype.lv=function(t){var n=this.fv;n?n.getGeometry().setCoordinates(t):(n=new jt(new ds(t)),this.fv=n,this.cv.getSource().addFeature(n));return n},n.prototype.handleEvent=function(n){return!n.originalEvent||!this.Er(n)||(n.type!=Hu.POINTERMOVE||this.handlingDownUpSequence||this.Tn(n),t.prototype.handleEvent.call(this,n),!1)},n.prototype.handleDownEvent=function(t){var n=t.pixel,i=t.map,r=this.getExtentInternal(),s=this.vv(n,i),o=function(t){var n=null,i=null;return t[0]==r[0]?n=r[2]:t[0]==r[2]&&(n=r[0]),t[1]==r[1]?i=r[3]:t[1]==r[3]&&(i=r[1]),null!==n&&null!==i?[n,i]:null};if(s&&r){var u=s[0]==r[0]||s[0]==r[2]?s[0]:null,e=s[1]==r[1]||s[1]==r[3]?s[1]:null;null!==u&&null!==e?this.ov=Bp(o(s)):null!==u?this.ov=Vp(o([u,r[1]]),o([u,r[3]])):null!==e&&(this.ov=Vp(o([r[0],e]),o([r[2],e])))}else s=i.getCoordinateFromPixelInternal(n),this.setExtent([s[0],s[1],s[0],s[1]]),this.ov=Bp(s);return!0},n.prototype.handleDragEvent=function(t){if(this.ov){var n=t.coordinate;this.setExtent(this.ov(n)),this.lv(n)}},n.prototype.handleUpEvent=function(t){this.ov=null;var n=this.getExtentInternal();return n&&0!==Ln(n)||this.setExtent(null),!1},n.prototype.setMap=function(n){this.av.setMap(n),this.cv.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getExtent=function(){return jr(this.getExtentInternal(),this.getMap().getView().getProjection())},n.prototype.getExtentInternal=function(){return this.U},n.prototype.setExtent=function(t){this.U=t||null,this.dv(t),this.dispatchEvent(new Wp(this.U))},n}(ah);function Jp(t){return(Jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Hp=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$p=[0,0,0,0],Kp=[],Qp="modifystart",ty="modifyend",ny=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.features=i,s.mapBrowserEvent=r,s}return Hp(n,t),n}(c);function iy(t,n){return t.index-n.index}function ry(t,n,i){var r=n.geometry;if(r.getType()===At.CIRCLE){var s=r;if(1===n.index){var o=mr();o&&(s=s.clone().transform(o,i));var u=$i(s.getCenter(),Mr(t,i)),e=Math.sqrt(u)-s.getRadius();return e*e}}var h=Mr(t,i);return Kp[0]=Mr(n.segment[0],i),Kp[1]=Mr(n.segment[1],i),Qi(h,Kp)}function sy(t,n,i){var r=n.geometry;if(r.getType()===At.CIRCLE&&1===n.index){var s=r,o=mr();return o&&(s=s.clone().transform(o,i)),Or(s.getClosestPoint(Mr(t,i)),i)}var u=Mr(t,i);return Kp[0]=Mr(n.segment[0],i),Kp[1]=Mr(n.segment[1],i),Or(qi(u,Kp),i)}var oy=function(t){function n(n){var i,r,s=t.call(this,n)||this;if(s.on,s.once,s.un,s.wv=s._e.bind(s),s.Er=n.condition?n.condition:jh,s.pv=function(t){return vh(t)&&_h(t)},s.yv=n.deleteCondition?n.deleteCondition:s.pv,s.bv=n.insertVertexCondition?n.insertVertexCondition:ph,s.fv=null,s._v=null,s.gv=[0,0],s.mv=!1,s.Ov=null,s.Mv=new ol,s.uv=void 0!==n.pixelTolerance?n.pixelTolerance:10,s.ev=!1,s.jv=!1,s.xv=[],s.Zc=new Jw({source:new bl({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.style?n.style:(i=Cc(),function(t,n){return i[At.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),s.Ev={Point:s.Sv.bind(s),LineString:s.Tv.bind(s),LinearRing:s.Tv.bind(s),Polygon:s.Av.bind(s),MultiPoint:s.Cv.bind(s),MultiLineString:s.Nv.bind(s),MultiPolygon:s.kv.bind(s),Circle:s.Iv.bind(s),GeometryCollection:s.Pv.bind(s)},s._c=null,s.Rv=null,n.features?r=n.features:n.source&&(s._c=n.source,r=new et(s._c.getFeatures()),s._c.addEventListener(fl,s.Gv.bind(s)),s._c.addEventListener(vl,s.Lv.bind(s))),!r)throw new Error("The modify interaction requires features, a source or a layer");return n.hitDetection&&(s.Rv=n.hitDetection),s.Pc=r,s.Pc.forEach(s.Fv.bind(s)),s.Pc.addEventListener(it,s.Dv.bind(s)),s.Pc.addEventListener(rt,s.zv.bind(s)),s.Uv=null,s.br=[0,0],s.Xv=void 0===n.snapToPointer?!s.Rv:n.snapToPointer,s}return Hp(n,t),n.prototype.Fv=function(t){var n=t.getGeometry();if(n){var i=this.Ev[n.getType()];i&&i(t,n)}var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.Yv(this.gv,r),t.addEventListener(k,this.wv)},n.prototype.Wv=function(t,n){if(!this.Ov){this.Ov=new et;for(var i=this.Ov.getArray(),r=0,s=n.length;r<s;++r)for(var o=n[r],u=0,e=o.length;u<e;++u){var h=o[u].feature;h&&-1===i.indexOf(h)&&this.Ov.push(h)}0===this.Ov.getLength()?this.Ov=null:this.dispatchEvent(new ny(Qp,this.Ov,t))}},n.prototype.qv=function(t){this.Bv(t),this.fv&&0===this.Pc.getLength()&&(this.Zc.getSource().removeFeature(this.fv),this.fv=null),t.removeEventListener(k,this.wv)},n.prototype.Bv=function(t){var n=this.Mv,i=[];n.forEach((function(n){t===n.feature&&i.push(n)}));for(var r=i.length-1;r>=0;--r){for(var s=i[r],o=this.xv.length-1;o>=0;--o)this.xv[o][0]===s&&this.xv.splice(o,1);n.remove(s)}},n.prototype.setActive=function(n){this.fv&&!n&&(this.Zc.getSource().removeFeature(this.fv),this.fv=null),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.Zc.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getOverlay=function(){return this.Zc},n.prototype.Gv=function(t){t.feature&&this.Pc.push(t.feature)},n.prototype.Lv=function(t){t.feature&&this.Pc.remove(t.feature)},n.prototype.Dv=function(t){this.Fv(t.element)},n.prototype._e=function(t){if(!this.jv){var n=t.target;this.qv(n),this.Fv(n)}},n.prototype.zv=function(t){var n=t.element;this.qv(n)},n.prototype.Sv=function(t,n){var i=n.getCoordinates(),r={feature:t,geometry:n,segment:[i,i]};this.Mv.insert(n.getExtent(),r)},n.prototype.Cv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r){var o=i[r],u={feature:t,geometry:n,depth:[r],index:r,segment:[o,o]};this.Mv.insert(n.getExtent(),u)}},n.prototype.Tv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length-1;r<s;++r){var o=i.slice(r,r+2),u={feature:t,geometry:n,index:r,segment:o};this.Mv.insert(wn(o),u)}},n.prototype.Nv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length-1;u<e;++u){var h=o.slice(u,u+2),f={feature:t,geometry:n,depth:[r],index:u,segment:h};this.Mv.insert(wn(h),f)}},n.prototype.Av=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length-1;u<e;++u){var h=o.slice(u,u+2),f={feature:t,geometry:n,depth:[r],index:u,segment:h};this.Mv.insert(wn(h),f)}},n.prototype.kv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length;u<e;++u)for(var h=o[u],f=0,a=h.length-1;f<a;++f){var c=h.slice(f,f+2),v={feature:t,geometry:n,depth:[u,r],index:f,segment:c};this.Mv.insert(wn(c),v)}},n.prototype.Iv=function(t,n){var i=n.getCenter(),r={feature:t,geometry:n,index:0,segment:[i,i]},s={feature:t,geometry:n,index:1,segment:[i,i]},o=[r,s];r.featureSegments=o,s.featureSegments=o,this.Mv.insert(En(i),r);var u=n,e=mr();if(e&&this.getMap()){var h=this.getMap().getView().getProjection();u=Fs(u=u.clone().transform(e,h)).transform(h,e)}this.Mv.insert(u.getExtent(),s)},n.prototype.Pv=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var s=i[r];(0,this.Ev[s.getType()])(t,s)}},n.prototype.Vv=function(t,n,i){var r=this.fv;r?r.getGeometry().setCoordinates(t):(r=new jt(new ds(t)),this.fv=r,this.Zc.getSource().addFeature(r));return r.set("features",n),r.set("geometries",i),r},n.prototype.handleEvent=function(n){return!n.originalEvent||(this.Uv=n,n.map.getView().getInteracting()||n.type!=Hu.POINTERMOVE||this.handlingDownUpSequence||this.Tn(n),this.fv&&this.yv(n)&&(i=!(n.type!=Hu.SINGLECLICK||!this.mv)||this.removePoint()),n.type==Hu.SINGLECLICK&&(this.mv=!1),t.prototype.handleEvent.call(this,n)&&!i);var i},n.prototype.handleDragEvent=function(t){this.mv=!1,this.Wv(t,this.xv);for(var n=[t.coordinate[0]+this.br[0],t.coordinate[1]+this.br[1]],i=[],r=[],s=0,o=this.xv.length;s<o;++s){var u=this.xv[s],e=u[0],h=e.feature;-1===i.indexOf(h)&&i.push(h);var f=e.geometry;-1===r.indexOf(f)&&r.push(f);for(var a=e.depth,c=void 0,v=e.segment,l=u[1];n.length<f.getStride();)n.push(v[l][n.length]);switch(f.getType()){case At.POINT:c=n,v[0]=n,v[1]=n;break;case At.MULTI_POINT:(c=f.getCoordinates())[e.index]=n,v[0]=n,v[1]=n;break;case At.LINE_STRING:(c=f.getCoordinates())[e.index+l]=n,v[l]=n;break;case At.MULTI_LINE_STRING:case At.POLYGON:(c=f.getCoordinates())[a[0]][e.index+l]=n,v[l]=n;break;case At.MULTI_POLYGON:(c=f.getCoordinates())[a[1]][a[0]][e.index+l]=n,v[l]=n;break;case At.CIRCLE:if(v[0]=n,v[1]=n,0===e.index)this.jv=!0,f.setCenter(n),this.jv=!1;else{this.jv=!0;var d=t.map.getView().getProjection(),w=Ki(Mr(f.getCenter(),d),Mr(n,d)),p=mr();if(p){var y=f.clone().transform(p,d);y.setRadius(w),w=y.transform(d,p).getRadius()}f.setRadius(w),this.jv=!1}}c&&this.Zv(f,c)}this.Vv(n,i,r)},n.prototype.handleDownEvent=function(t){if(!this.Er(t))return!1;var n=t.coordinate;this.Yv(t.pixel,t.map,n),this.xv.length=0,this.Ov=null;var i=this.fv;if(i){var r=t.map.getView().getProjection(),s=[],u=i.getGeometry().getCoordinates(),e=wn([u]),h=this.Mv.getInExtent(e),f={};h.sort(iy);for(var a=0,c=h.length;a<c;++a){var v=h[a],l=v.segment,d=o(v.geometry),w=v.depth;if(w&&(d+="-"+w.join("-")),f[d]||(f[d]=new Array(2)),v.geometry.getType()!==At.CIRCLE||1!==v.index)if(!Zi(l[0],u)||f[d][0])if(!Zi(l[1],u)||f[d][1])o(l)in this._v&&!f[d][0]&&!f[d][1]&&this.bv(t)&&s.push(v);else{if((v.geometry.getType()===At.LINE_STRING||v.geometry.getType()===At.MULTI_LINE_STRING)&&f[d][0]&&0===f[d][0].index)continue;this.xv.push([v,1]),f[d][1]=v}else this.xv.push([v,0]),f[d][0]=v;else Zi(sy(n,v,r),u)&&!f[d][0]&&(this.xv.push([v,0]),f[d][0]=v)}s.length&&this.Wv(t,[s]);for(var p=s.length-1;p>=0;--p)this.Jv(s[p],u)}return!!this.fv},n.prototype.handleUpEvent=function(t){for(var n=this.xv.length-1;n>=0;--n){var i=this.xv[n][0],r=i.geometry;if(r.getType()===At.CIRCLE){var s=r.getCenter(),o=i.featureSegments[0],u=i.featureSegments[1];o.segment[0]=s,o.segment[1]=s,u.segment[0]=s,u.segment[1]=s,this.Mv.update(En(s),o);var e=r,h=mr();if(h){var f=t.map.getView().getProjection();e=Fs(e=e.clone().transform(h,f)).transform(f,h)}this.Mv.update(e.getExtent(),u)}else this.Mv.update(wn(i.segment),i)}return this.Ov&&(this.dispatchEvent(new ny(ty,this.Ov,t)),this.Ov=null),!1},n.prototype.Tn=function(t){this.gv=t.pixel,this.Yv(t.pixel,t.map,t.coordinate)},n.prototype.Yv=function(t,n,i){var r,s,u=this,e=i||n.getCoordinateFromPixel(t),h=n.getView().getProjection();if(this.Rv){var f="object"===Jp(this.Rv)?function(t){return t===u.Rv}:void 0;n.forEachFeatureAtPixel(t,(function(t,n,i){if((i=i||t.getGeometry()).getType()===At.POINT&&p(u.Pc.getArray(),t)){s=i;var o=i.getFlatCoordinates().slice(0,2);r=[{feature:t,geometry:i,segment:[o,o]}]}return!0}),{layerFilter:f})}if(!r){var a=jr(pn(xr(En(e,$p),h),n.getView().getResolution()*this.uv,$p),h);r=this.Mv.getInExtent(a)}if(r&&r.length>0){var c=r.sort((function(t,n){return ry(e,t,h)-ry(e,n,h)}))[0],v=c.segment,l=sy(e,c,h),d=n.getPixelFromCoordinate(l),w=Ki(t,d);if(s||w<=this.uv){var y={};if(y[o(v)]=!0,this.Xv||(this.br[0]=l[0]-e[0],this.br[1]=l[1]-e[1]),c.geometry.getType()===At.CIRCLE&&1===c.index)this.ev=!0,this.Vv(l,[c.feature],[c.geometry]);else{var b=n.getPixelFromCoordinate(v[0]),_=n.getPixelFromCoordinate(v[1]),g=$i(d,b),m=$i(d,_);w=Math.sqrt(Math.min(g,m)),this.ev=w<=this.uv,this.ev&&(l=g>m?v[1]:v[0]),this.Vv(l,[c.feature],[c.geometry]);var O={};O[o(c.geometry)]=!0;for(var M=1,j=r.length;M<j;++M){var x=r[M].segment;if(!(Zi(v[0],x[0])&&Zi(v[1],x[1])||Zi(v[0],x[1])&&Zi(v[1],x[0])))break;var E=o(r[M].geometry);E in O||(O[E]=!0,y[o(x)]=!0)}}return void(this._v=y)}}this.fv&&(this.Zc.getSource().removeFeature(this.fv),this.fv=null)},n.prototype.Jv=function(t,n){for(var i,r=t.segment,s=t.feature,o=t.geometry,u=t.depth,e=t.index;n.length<o.getStride();)n.push(0);switch(o.getType()){case At.MULTI_LINE_STRING:case At.POLYGON:(i=o.getCoordinates())[u[0]].splice(e+1,0,n);break;case At.MULTI_POLYGON:(i=o.getCoordinates())[u[1]][u[0]].splice(e+1,0,n);break;case At.LINE_STRING:(i=o.getCoordinates()).splice(e+1,0,n);break;default:return}this.Zv(o,i);var h=this.Mv;h.remove(t),this.Hv(o,e,u,1);var f={segment:[r[0],n],feature:s,geometry:o,depth:u,index:e};h.insert(wn(f.segment),f),this.xv.push([f,1]);var a={segment:[n,r[1]],feature:s,geometry:o,depth:u,index:e+1};h.insert(wn(a.segment),a),this.xv.push([a,0]),this.mv=!0},n.prototype.removePoint=function(){if(this.Uv&&this.Uv.type!=Hu.POINTERDRAG){var t=this.Uv;this.Wv(t,this.xv);var n=this.$v();return this.dispatchEvent(new ny(ty,this.Ov,t)),this.Ov=null,n}return!1},n.prototype.$v=function(){var t,n,i,r,s,u,e,h,f,a,c,v=this.xv,l={},d=!1;for(s=v.length-1;s>=0;--s)c=o((a=(i=v[s])[0]).feature),a.depth&&(c+="-"+a.depth.join("-")),c in l||(l[c]={}),0===i[1]?(l[c].right=a,l[c].index=a.index):1==i[1]&&(l[c].left=a,l[c].index=a.index+1);for(c in l){switch(f=l[c].right,e=l[c].left,(h=(u=l[c].index)-1)<0&&(h=0),t=n=(r=(a=void 0!==e?e:f).geometry).getCoordinates(),d=!1,r.getType()){case At.MULTI_LINE_STRING:n[a.depth[0]].length>2&&(n[a.depth[0]].splice(u,1),d=!0);break;case At.LINE_STRING:n.length>2&&(n.splice(u,1),d=!0);break;case At.MULTI_POLYGON:t=t[a.depth[1]];case At.POLYGON:(t=t[a.depth[0]]).length>4&&(u==t.length-1&&(u=0),t.splice(u,1),d=!0,0===u&&(t.pop(),t.push(t[0]),h=t.length-1))}if(d){this.Zv(r,n);var w=[];if(void 0!==e&&(this.Mv.remove(e),w.push(e.segment[0])),void 0!==f&&(this.Mv.remove(f),w.push(f.segment[1])),void 0!==e&&void 0!==f){var p={depth:a.depth,feature:a.feature,geometry:a.geometry,index:h,segment:w};this.Mv.insert(wn(p.segment),p)}this.Hv(r,u,a.depth,-1),this.fv&&(this.Zc.getSource().removeFeature(this.fv),this.fv=null),v.length=0}}return d},n.prototype.Zv=function(t,n){this.jv=!0,t.setCoordinates(n),this.jv=!1},n.prototype.Hv=function(t,n,i,r){this.Mv.forEachInExtent(t.getExtent(),(function(s){s.geometry===t&&(void 0===i||void 0===s.depth||g(s.depth,i))&&s.index>n&&(s.index+=r)}))},n}(ah),uy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ey="select",hy=function(t){function n(n,i,r,s){var o=t.call(this,n)||this;return o.selected=i,o.deselected=r,o.mapBrowserEvent=s,o}return uy(n,t),n}(c),fy={};var ay=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r,s,o=n||{};if(i.Kv=i.Fv.bind(i),i.Qv=i.qv.bind(i),i.Er=o.condition?o.condition:_h,i.tl=o.addCondition?o.addCondition:bh,i.nl=o.removeCondition?o.removeCondition:bh,i.il=o.toggleCondition?o.toggleCondition:mh,i.rl=!!o.multi&&o.multi,i.sl=o.filter?o.filter:O,i.ul=o.hitTolerance?o.hitTolerance:0,i.k=void 0!==o.style?o.style:(_((r=Cc())[At.POLYGON],r[At.LINE_STRING]),_(r[At.GEOMETRY_COLLECTION],r[At.LINE_STRING]),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),i.Pc=o.features||new et,o.layers)if("function"==typeof o.layers)s=o.layers;else{var u=o.layers;s=function(t){return p(u,t)}}else s=O;return i.el=s,i.hl={},i}return uy(n,t),n.prototype.fl=function(t,n){this.hl[o(t)]=n},n.prototype.getFeatures=function(){return this.Pc},n.prototype.getHitTolerance=function(){return this.ul},n.prototype.getLayer=function(t){return this.hl[o(t)]},n.prototype.setHitTolerance=function(t){this.ul=t},n.prototype.setMap=function(n){this.getMap()&&this.k&&this.Pc.forEach(this.al.bind(this)),t.prototype.setMap.call(this,n),n?(this.Pc.addEventListener(it,this.Kv),this.Pc.addEventListener(rt,this.Qv),this.k&&this.Pc.forEach(this.cl.bind(this))):(this.Pc.removeEventListener(it,this.Kv),this.Pc.removeEventListener(rt,this.Qv))},n.prototype.Fv=function(t){var n=t.element;this.k&&this.cl(n)},n.prototype.qv=function(t){var n=t.element;this.k&&this.al(n)},n.prototype.getStyle=function(){return this.k},n.prototype.cl=function(t){var n=o(t);n in fy||(fy[n]=t.getStyle()),t.setStyle(this.k)},n.prototype.al=function(t){for(var i=this.getMap().getInteractions().getArray(),r=i.length-1;r>=0;--r){var s=i[r];if(s!==this&&s instanceof n&&s.getStyle()&&-1!==s.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(s.getStyle())}var u=o(t);t.setStyle(fy[u]),delete fy[u]},n.prototype.vl=function(t){delete this.hl[o(t)]},n.prototype.handleEvent=function(t){if(!this.Er(t))return!0;var n=this.tl(t),i=this.nl(t),r=this.il(t),s=!n&&!i&&!r,o=t.map,u=this.getFeatures(),e=[],h=[];if(s){S(this.hl),o.forEachFeatureAtPixel(t.pixel,function(t,n){if(this.sl(t,n))return h.push(t),this.fl(t,n),!this.rl}.bind(this),{layerFilter:this.el,hitTolerance:this.ul});for(var f=u.getLength()-1;f>=0;--f){var a=u.item(f),c=h.indexOf(a);c>-1?h.splice(c,1):(u.remove(a),e.push(a))}0!==h.length&&u.extend(h)}else{o.forEachFeatureAtPixel(t.pixel,function(t,s){if(this.sl(t,s))return!n&&!r||p(u.getArray(),t)?(i||r)&&p(u.getArray(),t)&&(e.push(t),this.vl(t)):(h.push(t),this.fl(t,s)),!this.rl}.bind(this),{layerFilter:this.el,hitTolerance:this.ul});for(var v=e.length-1;v>=0;--v)u.remove(e[v]);u.extend(h)}return(h.length>0||e.length>0)&&this.dispatchEvent(new hy(ey,h,e,t)),!0},n}(oh),cy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function vy(t){return t.feature?t.feature:t.element?t.element:void 0}var ly=[],dy=function(t){function n(n){var i=this,r=n||{},s=r;return s.handleDownEvent||(s.handleDownEvent=O),s.stopDown||(s.stopDown=M),(i=t.call(this,s)||this)._c=r.source?r.source:null,i.ll=void 0===r.vertex||r.vertex,i.dl=void 0===r.edge||r.edge,i.Pc=r.features?r.features:null,i.wl=[],i.pl={},i.yl={},i.bl={},i.uv=void 0!==r.pixelTolerance?r.pixelTolerance:10,i.Mv=new ol,i.Ev={Point:i.Sv.bind(i),LineString:i.Tv.bind(i),LinearRing:i.Tv.bind(i),Polygon:i.Av.bind(i),MultiPoint:i.Cv.bind(i),MultiLineString:i.Nv.bind(i),MultiPolygon:i.kv.bind(i),GeometryCollection:i.Pv.bind(i),Circle:i.Iv.bind(i)},i}return cy(n,t),n.prototype.addFeature=function(t,n){var i=void 0===n||n,r=o(t),s=t.getGeometry();if(s){var u=this.Ev[s.getType()];u&&(this.yl[r]=s.getExtent([1/0,1/0,-1/0,-1/0]),u(t,s))}i&&(this.pl[r]=B(t,k,this._e,this))},n.prototype._l=function(t){this.addFeature(t)},n.prototype.gl=function(t){this.removeFeature(t)},n.prototype.ml=function(){var t;return this.Pc?t=this.Pc:this._c&&(t=this._c.getFeatures()),t},n.prototype.handleEvent=function(n){var i=this.snapTo(n.pixel,n.coordinate,n.map);return i.snapped&&(n.coordinate=i.vertex.slice(0,2),n.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,n)},n.prototype.Dv=function(t){var n=vy(t);this.addFeature(n)},n.prototype.zv=function(t){var n=vy(t);this.removeFeature(n)},n.prototype._e=function(t){var n=t.target;if(this.handlingDownUpSequence){var i=o(n);i in this.bl||(this.bl[i]=n)}else this.Ol(n)},n.prototype.handleUpEvent=function(t){var n=T(this.bl);return n.length&&(n.forEach(this.Ol.bind(this)),this.bl={}),!1},n.prototype.removeFeature=function(t,n){var i=void 0===n||n,r=o(t),s=this.yl[r];if(s){var u=this.Mv,e=[];u.forEachInExtent(s,(function(n){t===n.feature&&e.push(n)}));for(var h=e.length-1;h>=0;--h)u.remove(e[h])}i&&(Z(this.pl[r]),delete this.pl[r])},n.prototype.setMap=function(n){var i=this.getMap(),r=this.wl,s=this.ml();i&&(r.forEach(Z),r.length=0,s.forEach(this.gl.bind(this))),t.prototype.setMap.call(this,n),n&&(this.Pc?r.push(B(this.Pc,it,this.Dv,this),B(this.Pc,rt,this.zv,this)):this._c&&r.push(B(this._c,fl,this.Dv,this),B(this._c,vl,this.zv,this)),s.forEach(this._l.bind(this)))},n.prototype.snapTo=function(t,n,i){var r=wn([i.getCoordinateFromPixel([t[0]-this.uv,t[1]+this.uv]),i.getCoordinateFromPixel([t[0]+this.uv,t[1]-this.uv])]),s=this.Mv.getInExtent(r);this.ll&&!this.dl&&(s=s.filter((function(t){return t.feature.getGeometry().getType()!==At.CIRCLE})));var o=!1,u=null,e=null;if(0===s.length)return{snapped:o,vertex:u,vertexPixel:e};for(var h,f=i.getView().getProjection(),a=Mr(n,f),c=1/0,v=0;v<s.length;++v){var l=s[v];ly[0]=Mr(l.segment[0],f),ly[1]=Mr(l.segment[1],f);var d=Qi(a,ly);d<c&&(h=l,c=d)}var w=h.segment;if(this.ll&&!this.dl){var p=i.getPixelFromCoordinate(w[0]),y=i.getPixelFromCoordinate(w[1]),b=$i(t,p),_=$i(t,y);Math.sqrt(Math.min(b,_))<=this.uv&&(o=!0,u=b>_?w[1]:w[0],e=i.getPixelFromCoordinate(u))}else if(this.dl){var g=h.feature.getGeometry().getType()===At.CIRCLE;if(g){var m=h.feature.getGeometry(),O=mr();O&&(m=m.clone().transform(O,f)),u=Or(Wi(a,m),f)}else ly[0]=Mr(w[0],f),ly[1]=Mr(w[1],f),u=Or(qi(a,ly),f);if(Ki(t,e=i.getPixelFromCoordinate(u))<=this.uv&&(o=!0,this.ll&&!g)){p=i.getPixelFromCoordinate(w[0]),y=i.getPixelFromCoordinate(w[1]),b=$i(e,p),_=$i(e,y);Math.sqrt(Math.min(b,_))<=this.uv&&(u=b>_?w[1]:w[0],e=i.getPixelFromCoordinate(u))}}return o&&(e=[Math.round(e[0]),Math.round(e[1])]),{snapped:o,vertex:u,vertexPixel:e}},n.prototype.Ol=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},n.prototype.Iv=function(t,n){var i=this.getMap().getView().getProjection(),r=n,s=mr();s&&(r=r.clone().transform(s,i));var o=Fs(r);s&&o.transform(i,s);for(var u=o.getCoordinates()[0],e=0,h=u.length-1;e<h;++e){var f=u.slice(e,e+2),a={feature:t,segment:f};this.Mv.insert(wn(f),a)}},n.prototype.Pv=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var s=this.Ev[i[r].getType()];s&&s(t,i[r])}},n.prototype.Tv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length-1;r<s;++r){var o=i.slice(r,r+2),u={feature:t,segment:o};this.Mv.insert(wn(o),u)}},n.prototype.Nv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length-1;u<e;++u){var h=o.slice(u,u+2),f={feature:t,segment:h};this.Mv.insert(wn(h),f)}},n.prototype.Cv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r){var o=i[r],u={feature:t,segment:[o,o]};this.Mv.insert(n.getExtent(),u)}},n.prototype.kv=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length;u<e;++u)for(var h=o[u],f=0,a=h.length-1;f<a;++f){var c=h.slice(f,f+2),v={feature:t,segment:c};this.Mv.insert(wn(c),v)}},n.prototype.Sv=function(t,n){var i=n.getCoordinates(),r={feature:t,segment:[i,i]};this.Mv.insert(n.getExtent(),r)},n.prototype.Av=function(t,n){for(var i=n.getCoordinates(),r=0,s=i.length;r<s;++r)for(var o=i[r],u=0,e=o.length-1;u<e;++u){var h=o.slice(u,u+2),f={feature:t,segment:h};this.Mv.insert(wn(h),f)}},n}(ah),wy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),py="translatestart",yy="translating",by="translateend",_y=function(t){function n(n,i,r,s,o){var u=t.call(this,n)||this;return u.features=i,u.coordinate=r,u.startCoordinate=s,u.mapBrowserEvent=o,u}return wy(n,t),n}(c),gy=function(t){function n(n){var i,r=this,s=n||{};if((r=t.call(this,s)||this).on,r.once,r.un,r.Ml=null,r.jl=null,r.Pc=void 0!==s.features?s.features:null,s.layers&&!r.Pc)if("function"==typeof s.layers)i=s.layers;else{var o=s.layers;i=function(t){return p(o,t)}}else i=O;return r.el=i,r.sl=s.filter&&!r.Pc?s.filter:O,r.ul=s.hitTolerance?s.hitTolerance:0,r.Er=s.condition?s.condition:ph,r.xl=null,r.addChangeListener(nh,r.El),r}return wy(n,t),n.prototype.handleDownEvent=function(t){if(!t.originalEvent||!this.Er(t))return!1;if(this.xl=this.Sl(t.pixel,t.map),!this.Ml&&this.xl){this.jl=t.coordinate,this.Ml=t.coordinate,this.handleMoveEvent(t);var n=this.Pc||new et([this.xl]);return this.dispatchEvent(new _y(py,n,t.coordinate,this.jl,t)),!0}return!1},n.prototype.handleUpEvent=function(t){if(this.Ml){this.Ml=null,this.handleMoveEvent(t);var n=this.Pc||new et([this.xl]);return this.dispatchEvent(new _y(by,n,t.coordinate,this.jl,t)),this.jl=null,!0}return!1},n.prototype.handleDragEvent=function(t){if(this.Ml){var n=t.coordinate,i=n[0]-this.Ml[0],r=n[1]-this.Ml[1],s=this.Pc||new et([this.xl]);s.forEach((function(t){var n=t.getGeometry();n.translate(i,r),t.setGeometry(n)})),this.Ml=n,this.dispatchEvent(new _y(yy,s,n,this.jl,t))}},n.prototype.handleMoveEvent=function(t){var n=t.map.getViewport();this.Sl(t.pixel,t.map)?(n.classList.remove(this.Ml?"ol-grab":"ol-grabbing"),n.classList.add(this.Ml?"ol-grabbing":"ol-grab")):n.classList.remove("ol-grab","ol-grabbing")},n.prototype.Sl=function(t,n){return n.forEachFeatureAtPixel(t,function(t,n){if(this.sl(t,n)&&(!this.Pc||p(this.Pc.getArray(),t)))return t}.bind(this),{layerFilter:this.el,hitTolerance:this.ul})},n.prototype.getHitTolerance=function(){return this.ul},n.prototype.setHitTolerance=function(t){this.ul=t},n.prototype.setMap=function(n){var i=this.getMap();t.prototype.setMap.call(this,n),this.Hc(i)},n.prototype.El=function(){this.Hc(null)},n.prototype.Hc=function(t){var n=this.getMap(),i=this.getActive();n&&i||(n=n||t)&&n.getViewport().classList.remove("ol-grab","ol-grabbing")},n}(ah),my=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Oy(t){for(var n=[],i=0,r=t.length;i<r;++i)n.push(t[i].clone());return n}var My=function(t){function n(n){var i=t.call(this)||this;return i.Tl=n||null,i.Al=[],i.Cl(),i}return my(n,t),n.prototype.Nl=function(){this.Al.forEach(Z),this.Al.length=0},n.prototype.Cl=function(){if(this.Tl)for(var t=0,n=this.Tl.length;t<n;++t)this.Al.push(B(this.Tl[t],k,this.changed,this))},n.prototype.clone=function(){var t=new n(null);return t.setGeometries(this.Tl),t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){if(r<bn(this.getExtent(),t,n))return r;for(var s=this.Tl,o=0,u=s.length;o<u;++o)r=s[o].closestPointXY(t,n,i,r);return r},n.prototype.containsXY=function(t,n){for(var i=this.Tl,r=0,s=i.length;r<s;++r)if(i[r].containsXY(t,n))return!0;return!1},n.prototype.computeExtent=function(t){xn(t);for(var n=this.Tl,i=0,r=n.length;i<r;++i)Cn(t,n[i].getExtent());return t},n.prototype.getGeometries=function(){return Oy(this.Tl)},n.prototype.getGeometriesArray=function(){return this.Tl},n.prototype.getGeometriesArrayRecursive=function(){for(var t=[],n=this.Tl,i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],r=this.Tl,s=!1,o=0,u=r.length;o<u;++o){var e=r[o],h=e.getSimplifiedGeometry(t);i.push(h),h!==e&&(s=!0)}if(s){var f=new n(null);return f.setGeometriesArray(i),f}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},n.prototype.getType=function(){return At.GEOMETRY_COLLECTION},n.prototype.intersectsExtent=function(t){for(var n=this.Tl,i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(t))return!0;return!1},n.prototype.isEmpty=function(){return 0===this.Tl.length},n.prototype.rotate=function(t,n){for(var i=this.Tl,r=0,s=i.length;r<s;++r)i[r].rotate(t,n);this.changed()},n.prototype.scale=function(t,n,i){var r=i;r||(r=zn(this.getExtent()));for(var s=this.Tl,o=0,u=s.length;o<u;++o)s[o].scale(t,n,r);this.changed()},n.prototype.setGeometries=function(t){this.setGeometriesArray(Oy(t))},n.prototype.setGeometriesArray=function(t){this.Nl(),this.Tl=t,this.Cl(),this.changed()},n.prototype.applyTransform=function(t){for(var n=this.Tl,i=0,r=n.length;i<r;++i)n[i].applyTransform(t);this.changed()},n.prototype.translate=function(t,n){for(var i=this.Tl,r=0,s=i.length;r<s;++r)i[r].translate(t,n);this.changed()},n.prototype.disposeInternal=function(){this.Nl(),t.prototype.disposeInternal.call(this)},n}(Gr);function jy(t,n,i,r,s,o){var u,e;void 0!==s?(u=s,e=void 0!==o?o:0):(u=[],e=0);for(var h=n;h<i;){var f=t[h++];u[e++]=t[h++],u[e++]=f;for(var a=2;a<r;++a)u[e++]=t[h++]}return u.length=e,u}var xy=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,n){var i;if(n){var r=n.dataProjection?er(n.dataProjection):this.readProjection(t);n.extent&&r&&r.getUnits()===Pt.TILE_PIXELS&&(r=er(r)).setWorldExtent(n.extent),i={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return E({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return r()},t.prototype.readFeature=function(t,n){return r()},t.prototype.readFeatures=function(t,n){return r()},t.prototype.readGeometry=function(t,n){return r()},t.prototype.readProjection=function(t){return r()},t.prototype.writeFeature=function(t,n){return r()},t.prototype.writeFeatures=function(t,n){return r()},t.prototype.writeGeometry=function(t,n){return r()},t}();function Ey(t,n,i){var r,s=i?er(i.featureProjection):null,o=i?er(i.dataProjection):null;if(r=s&&o&&!dr(s,o)?(n?t.clone():t).transform(n?s:o,n?o:s):t,n&&i&&void 0!==i.decimals){var u=Math.pow(10,i.decimals);r===t&&(r=t.clone()),r.applyTransform((function(t){for(var n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*u)/u;return t}))}return r}var Sy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ty=function(t){function n(){var n=t.call(this)||this;return n.kl=tc(),n}return Sy(n,t),n.prototype.getType=function(){return Xf},n.prototype.readFeature=function(t,n){if(t){if("string"==typeof t){var i=za(t);return this.readFeatureFromDocument(i,n)}return Da(t)?this.readFeatureFromDocument(t,n):this.readFeatureFromNode(t,n)}return null},n.prototype.readFeatureFromDocument=function(t,n){var i=this.readFeaturesFromDocument(t,n);return i.length>0?i[0]:null},n.prototype.readFeatureFromNode=function(t,n){return null},n.prototype.readFeatures=function(t,n){if(t){if("string"==typeof t){var i=za(t);return this.readFeaturesFromDocument(i,n)}return Da(t)?this.readFeaturesFromDocument(t,n):this.readFeaturesFromNode(t,n)}return[]},n.prototype.readFeaturesFromDocument=function(t,n){for(var i=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&_(i,this.readFeaturesFromNode(r,n));return i},n.prototype.readFeaturesFromNode=function(t,n){return r()},n.prototype.readGeometry=function(t,n){if(t){if("string"==typeof t){var i=za(t);return this.readGeometryFromDocument(i,n)}return Da(t)?this.readGeometryFromDocument(t,n):this.readGeometryFromNode(t,n)}return null},n.prototype.readGeometryFromDocument=function(t,n){return null},n.prototype.readGeometryFromNode=function(t,n){return null},n.prototype.readProjection=function(t){if(t){if("string"==typeof t){var n=za(t);return this.readProjectionFromDocument(n)}return Da(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},n.prototype.readProjectionFromDocument=function(t){return this.dataProjection},n.prototype.readProjectionFromNode=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){var i=this.writeFeatureNode(t,n);return this.kl.serializeToString(i)},n.prototype.writeFeatureNode=function(t,n){return null},n.prototype.writeFeatures=function(t,n){var i=this.writeFeaturesNode(t,n);return this.kl.serializeToString(i)},n.prototype.writeFeaturesNode=function(t,n){return null},n.prototype.writeGeometry=function(t,n){var i=this.writeGeometryNode(t,n);return this.kl.serializeToString(i)},n.prototype.writeGeometryNode=function(t,n){return null},n}(xy);function Ay(t){var n=/^\s*(true|1)|(false|0)\s*$/.exec(t);return n?void 0!==n[1]||!1:void 0}function Cy(t){var n=La(t,!1),i=Date.parse(n);return isNaN(i)?void 0:i/1e3}function Ny(t){return ky(La(t,!1))}function ky(t){var n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return n?parseFloat(n[1]):void 0}function Iy(t){return Py(La(t,!1))}function Py(t){var n=/^\s*(\d+)\s*$/.exec(t);return n?parseInt(n[1],10):void 0}function Ry(t){return La(t,!1).trim()}function Gy(t,n){var i=new Date(1e3*n),r=i.getUTCFullYear()+"-"+Ui(i.getUTCMonth()+1,2)+"-"+Ui(i.getUTCDate(),2)+"T"+Ui(i.getUTCHours(),2)+":"+Ui(i.getUTCMinutes(),2)+":"+Ui(i.getUTCSeconds(),2)+"Z";t.appendChild(ic().createTextNode(r))}function Ly(t,n){var i=n.toPrecision();t.appendChild(ic().createTextNode(i))}function Fy(t,n){var i=n.toString();t.appendChild(ic().createTextNode(i))}function Dy(t,n){t.appendChild(ic().createTextNode(n))}var zy=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Uy=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Xy={rte:pb,trk:yb,wpt:bb},Yy=Za(Uy,{rte:Ua(pb),trk:Ua(yb),wpt:Ua(bb)}),Wy=Za(Uy,{text:Xa(Ry,"linkText"),type:Xa(Ry,"linkType")}),qy=Za(Uy,{rte:Ya((function(t,n,i){var r=i[0],s=n.getProperties(),o={node:t};o.properties=s;var u=n.getGeometry();if(u.getType()==At.LINE_STRING){var e=Ey(u,!0,r);o.geometryLayout=e.getLayout(),s.rtept=e.getCoordinates()}var h=i[i.length-1].node,f=nb[h.namespaceURI],a=Va(s,f);Ka(o,ib,Ba,a,i,f)})),trk:Ya((function(t,n,i){var r=i[0],s=n.getProperties(),o={node:t};o.properties=s;var u=n.getGeometry();if(u.getType()==At.MULTI_LINE_STRING){var e=Ey(u,!0,r);s.trkseg=e.getLineStrings()}var h=i[i.length-1].node,f=sb[h.namespaceURI],a=Va(s,f);Ka(o,ob,Ba,a,i,f)})),wpt:Ya((function(t,n,i){var r=i[0],s=i[i.length-1];s.properties=n.getProperties();var o=n.getGeometry();if(o.getType()==At.POINT){var u=Ey(o,!0,r);s.geometryLayout=u.getLayout(),gb(t,u.getCoordinates(),i)}}))}),By=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=er("EPSG:4326"),i.Il=r.readExtensions,i}return zy(n,t),n.prototype.Pl=function(t){t||(t=[]);for(var n=0,i=t.length;n<i;++n){var r=t[n];if(this.Il){var s=r.get("extensionsNode_")||null;this.Il(r,s)}r.set("extensionsNode_",void 0)}},n.prototype.readFeatureFromNode=function(t,n){if(!p(Uy,t.namespaceURI))return null;var i=Xy[t.localName];if(!i)return null;var r=i(t,[this.getReadOptions(t,n)]);return r?(this.Pl([r]),r):null},n.prototype.readFeaturesFromNode=function(t,n){if(!p(Uy,t.namespaceURI))return[];if("gpx"==t.localName){var i=Ha([],Yy,t,[this.getReadOptions(t,n)]);return i?(this.Pl(i),i):[]}return[]},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=Ga("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Ra),i.setAttributeNS(Ra,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),Ka({node:i},qy,cb,t,[n]),i},n}(Ty),Vy=Za(Uy,{name:Xa(Ry),cmt:Xa(Ry),desc:Xa(Ry),src:Xa(Ry),link:db,number:Xa(Iy),extensions:wb,type:Xa(Ry),rtept:function(t,n){var i=Ha({},Zy,t,n);if(i){var r=n[n.length-1],s=r.flatCoordinates,o=r.layoutOptions;vb(s,o,t,i)}}}),Zy=Za(Uy,{ele:Xa(Ny),time:Xa(Cy)}),Jy=Za(Uy,{name:Xa(Ry),cmt:Xa(Ry),desc:Xa(Ry),src:Xa(Ry),link:db,number:Xa(Iy),type:Xa(Ry),extensions:wb,trkseg:function(t,n){var i=n[n.length-1];Ja(Hy,t,n);var r=i.flatCoordinates;i.ends.push(r.length)}}),Hy=Za(Uy,{trkpt:function(t,n){var i=Ha({},$y,t,n);if(i){var r=n[n.length-1],s=r.flatCoordinates,o=r.layoutOptions;vb(s,o,t,i)}}}),$y=Za(Uy,{ele:Xa(Ny),time:Xa(Cy)}),Ky=Za(Uy,{ele:Xa(Ny),time:Xa(Cy),magvar:Xa(Ny),geoidheight:Xa(Ny),name:Xa(Ry),cmt:Xa(Ry),desc:Xa(Ry),src:Xa(Ry),link:db,sym:Xa(Ry),type:Xa(Ry),fix:Xa(Ry),sat:Xa(Iy),hdop:Xa(Ny),vdop:Xa(Ny),pdop:Xa(Ny),ageofdgpsdata:Xa(Ny),dgpsid:Xa(Iy),extensions:wb}),Qy=["text","type"],tb=Za(Uy,{text:Ya(Dy),type:Ya(Dy)}),nb=Za(Uy,["name","cmt","desc","src","link","number","type","rtept"]),ib=Za(Uy,{name:Ya(Dy),cmt:Ya(Dy),desc:Ya(Dy),src:Ya(Dy),link:Ya(_b),number:Ya(Fy),type:Ya(Dy),rtept:Wa(Ya(gb))}),rb=Za(Uy,["ele","time"]),sb=Za(Uy,["name","cmt","desc","src","link","number","type","trkseg"]),ob=Za(Uy,{name:Ya(Dy),cmt:Ya(Dy),desc:Ya(Dy),src:Ya(Dy),link:Ya(_b),number:Ya(Fy),type:Ya(Dy),trkseg:Wa(Ya((function(t,n,i){var r={node:t};r.geometryLayout=n.getLayout(),r.properties={},Ka(r,eb,ub,n.getCoordinates(),i)})))}),ub=qa("trkpt"),eb=Za(Uy,{trkpt:Ya(gb)}),hb=Za(Uy,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),fb=Za(Uy,{ele:Ya(Ly),time:Ya(Gy),magvar:Ya(Ly),geoidheight:Ya(Ly),name:Ya(Dy),cmt:Ya(Dy),desc:Ya(Dy),src:Ya(Dy),link:Ya(_b),sym:Ya(Dy),type:Ya(Dy),fix:Ya(Dy),sat:Ya(Fy),hdop:Ya(Ly),vdop:Ya(Ly),pdop:Ya(Ly),ageofdgpsdata:Ya(Ly),dgpsid:Ya(Fy)}),ab={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function cb(t,n,i){var r=t.getGeometry();if(r){var s=ab[r.getType()];if(s)return Ga(n[n.length-1].node.namespaceURI,s)}}function vb(t,n,i,r){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,n.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,n.hasM=!0):t.push(0),t}function lb(t,n,i){var r=xt,s=2;if(t.hasZ&&t.hasM?(r=Tt,s=4):t.hasZ?(r=Et,s=3):t.hasM&&(r=St,s=3),4!==s){for(var o=0,u=n.length/4;o<u;o++)n[o*s]=n[4*o],n[o*s+1]=n[4*o+1],t.hasZ&&(n[o*s+2]=n[4*o+2]),t.hasM&&(n[o*s+2]=n[4*o+3]);if(n.length=n.length/4*s,i)for(o=0,u=i.length;o<u;o++)i[o]=i[o]/4*s}return r}function db(t,n){var i=n[n.length-1],r=t.getAttribute("href");null!==r&&(i.link=r),Ja(Wy,t,n)}function wb(t,n){n[n.length-1].Rl=t}function pb(t,n){var i=n[0],r=Ha({flatCoordinates:[],layoutOptions:{}},Vy,t,n);if(r){var s=r.flatCoordinates;delete r.flatCoordinates;var o=r.layoutOptions;delete r.layoutOptions;var u=lb(o,s),e=new Vw(s,u);Ey(e,!1,i);var h=new jt(e);return h.setProperties(r,!0),h}}function yb(t,n){var i=n[0],r=Ha({flatCoordinates:[],ends:[],layoutOptions:{}},Jy,t,n);if(r){var s=r.flatCoordinates;delete r.flatCoordinates;var o=r.ends;delete r.ends;var u=r.layoutOptions;delete r.layoutOptions;var e=lb(u,s,o),h=new Sp(s,e,o);Ey(h,!1,i);var f=new jt(h);return f.setProperties(r,!0),f}}function bb(t,n){var i=n[0],r=Ha({},Ky,t,n);if(r){var s={},o=vb([],s,t,r),u=lb(s,o),e=new ds(o,u);Ey(e,!1,i);var h=new jt(e);return h.setProperties(r,!0),h}}function _b(t,n,i){t.setAttribute("href",n);var r=i[i.length-1].properties,s=[r.linkText,r.linkType];Ka({node:t},tb,Ba,s,i,Qy)}function gb(t,n,i){var r=i[i.length-1],s=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(n[1])),t.setAttributeNS(null,"lon",String(n[0])),r.geometryLayout){case Tt:0!==n[3]&&(o.time=n[3]);case Et:0!==n[2]&&(o.ele=n[2]);break;case St:0!==n[2]&&(o.time=n[2])}var u="rtept"==t.nodeName?rb[s]:hb[s],e=Va(o,u);Ka({node:t,properties:o},fb,Ba,e,i,u)}var mb=By,Ob=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Mb(t){if("string"==typeof t){var n=JSON.parse(t);return n||null}return null!==t?t:null}var jb=function(t){function n(){return t.call(this)||this}return Ob(n,t),n.prototype.getType=function(){return zf},n.prototype.readFeature=function(t,n){return this.readFeatureFromObject(Mb(t),this.getReadOptions(t,n))},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromObject(Mb(t),this.getReadOptions(t,n))},n.prototype.readFeatureFromObject=function(t,n){return r()},n.prototype.readFeaturesFromObject=function(t,n){return r()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromObject(Mb(t),this.getReadOptions(t,n))},n.prototype.readGeometryFromObject=function(t,n){return r()},n.prototype.readProjection=function(t){return this.readProjectionFromObject(Mb(t))},n.prototype.readProjectionFromObject=function(t){return r()},n.prototype.writeFeature=function(t,n){return JSON.stringify(this.writeFeatureObject(t,n))},n.prototype.writeFeatureObject=function(t,n){return r()},n.prototype.writeFeatures=function(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))},n.prototype.writeFeaturesObject=function(t,n){return r()},n.prototype.writeGeometry=function(t,n){return JSON.stringify(this.writeGeometryObject(t,n))},n.prototype.writeGeometryObject=function(t,n){return r()},n}(xy),xb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Eb(t,n){if(!t)return null;var i;switch(t.type){case At.POINT:i=function(t){return new ds(t.coordinates)}(t);break;case At.LINE_STRING:i=function(t){return new Vw(t.coordinates)}(t);break;case At.POLYGON:i=function(t){return new Rs(t.coordinates)}(t);break;case At.MULTI_POINT:i=function(t){return new Ap(t.coordinates)}(t);break;case At.MULTI_LINE_STRING:i=function(t){return new Sp(t.coordinates)}(t);break;case At.MULTI_POLYGON:i=function(t){return new Np(t.coordinates)}(t);break;case At.GEOMETRY_COLLECTION:i=function(t,n){var i=t.geometries.map((function(t){return Eb(t,n)}));return new My(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return Ey(i,!1,n)}function Sb(t,n){var i,r=(t=Ey(t,!0,n)).getType();switch(r){case At.POINT:i=function(t,n){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case At.LINE_STRING:i=function(t,n){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case At.POLYGON:i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,n);break;case At.MULTI_POINT:i=function(t,n){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case At.MULTI_LINE_STRING:i=function(t,n){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case At.MULTI_POLYGON:i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,n);break;case At.GEOMETRY_COLLECTION:i=function(t,n){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var i=E({},n);return delete i.featureProjection,Sb(t,i)}))}}(t,n);break;case At.CIRCLE:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return i}var Tb=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this)||this).dataProjection=er(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(i.defaultFeatureProjection=er(r.featureProjection)),i.N=r.geometryName,i.Gl=r.extractGeometryName,i.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],i}return xb(n,t),n.prototype.readFeatureFromObject=function(t,n){var i=null,r=Eb((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,n),s=new jt;return this.N?s.setGeometryName(this.N):this.Gl&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s},n.prototype.readFeaturesFromObject=function(t,n){var i=null;if("FeatureCollection"===t.type){i=[];for(var r=t.features,s=0,o=r.length;s<o;++s)i.push(this.readFeatureFromObject(r[s],n))}else i=[this.readFeatureFromObject(t,n)];return i},n.prototype.readGeometryFromObject=function(t,n){return Eb(t,n)},n.prototype.readProjectionFromObject=function(t){var n,i=t.crs;return i?"name"==i.type?n=er(i.properties.name):"EPSG"===i.type?n=er("EPSG:"+i.properties.code):mt(!1,36):n=this.dataProjection,n},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={type:"Feature",geometry:null,properties:null},r=t.getId();if(void 0!==r&&(i.id=r),!t.hasProperties())return i;var s=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=Sb(o,n),delete s[t.getGeometryName()]),A(s)||(i.properties=s),i},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],r=0,s=t.length;r<s;++r)i.push(this.writeFeatureObject(t[r],n));return{type:"FeatureCollection",features:i}},n.prototype.writeGeometryObject=function(t,n){return Sb(t,this.adaptOptions(n))},n}(jb),Ab=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Cb(t){return"string"==typeof t?t:""}var Nb=function(t){function n(){return t.call(this)||this}return Ab(n,t),n.prototype.getType=function(){return Uf},n.prototype.readFeature=function(t,n){return this.readFeatureFromText(Cb(t),this.adaptOptions(n))},n.prototype.readFeatureFromText=function(t,n){return r()},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromText(Cb(t),this.adaptOptions(n))},n.prototype.readFeaturesFromText=function(t,n){return r()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromText(Cb(t),this.adaptOptions(n))},n.prototype.readGeometryFromText=function(t,n){return r()},n.prototype.readProjection=function(t){return this.readProjectionFromText(Cb(t))},n.prototype.readProjectionFromText=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){return this.writeFeatureText(t,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){return r()},n.prototype.writeFeatures=function(t,n){return this.writeFeaturesText(t,this.adaptOptions(n))},n.prototype.writeFeaturesText=function(t,n){return r()},n.prototype.writeGeometry=function(t,n){return this.writeGeometryText(t,this.adaptOptions(n))},n.prototype.writeGeometryText=function(t,n){return r()},n}(xy),kb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Ib(t,n,i){var r,s=i||1e5,o=new Array(n);for(r=0;r<n;++r)o[r]=0;for(var u=0,e=t.length;u<e;)for(r=0;r<n;++r,++u){var h=t[u],f=h-o[r];o[r]=h,t[u]=f}return Rb(t,s)}function Pb(t,n,i){var r,s=i||1e5,o=new Array(n);for(r=0;r<n;++r)o[r]=0;for(var u=Gb(t,s),e=0,h=u.length;e<h;)for(r=0;r<n;++r,++e)o[r]+=u[e],u[e]=o[r];return u}function Rb(t,n){for(var i=n||1e5,r=0,s=t.length;r<s;++r)t[r]=Math.round(t[r]*i);return Lb(t)}function Gb(t,n){for(var i=n||1e5,r=Fb(t),s=0,o=r.length;s<o;++s)r[s]/=i;return r}function Lb(t){for(var n=0,i=t.length;n<i;++n){var r=t[n];t[n]=r<0?~(r<<1):r<<1}return Db(t)}function Fb(t){for(var n=zb(t),i=0,r=n.length;i<r;++i){var s=n[i];n[i]=1&s?~(s>>1):s>>1}return n}function Db(t){for(var n="",i=0,r=t.length;i<r;++i)n+=Ub(t[i]);return n}function zb(t){for(var n=[],i=0,r=0,s=0,o=t.length;s<o;++s){var u=t.charCodeAt(s)-63;i|=(31&u)<<r,u<32?(n.push(i),i=0,r=0):r+=5}return n}function Ub(t){for(var n,i="";t>=32;)n=63+(32|31&t),i+=String.fromCharCode(n),t>>=5;return n=t+63,i+=String.fromCharCode(n)}var Xb=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=er("EPSG:4326"),i.Ll=r.factor?r.factor:1e5,i.Fl=r.geometryLayout?r.geometryLayout:xt,i}return kb(n,t),n.prototype.readFeatureFromText=function(t,n){var i=this.readGeometryFromText(t,n);return new jt(i)},n.prototype.readFeaturesFromText=function(t,n){return[this.readFeatureFromText(t,n)]},n.prototype.readGeometryFromText=function(t,n){var i=Fr(this.Fl),r=Pb(t,i,this.Ll);jy(r,0,r.length,i,r);var s=os(r,0,r.length,i);return Ey(new Vw(s,this.Fl),!1,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){var i=t.getGeometry();return i?this.writeGeometryText(i,n):(mt(!1,40),"")},n.prototype.writeFeaturesText=function(t,n){return this.writeFeatureText(t[0],n)},n.prototype.writeGeometryText=function(t,n){var i=(t=Ey(t,!0,this.adaptOptions(n))).getFlatCoordinates(),r=t.getStride();return jy(i,0,i.length,r,i),Ib(i,r,this.Ll)},n}(Nb),Yb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Wb=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Dl=r.layerName,i.jh=r.layers?r.layers:null,i.dataProjection=er(r.dataProjection?r.dataProjection:"EPSG:4326"),i}return Yb(n,t),n.prototype.readFeaturesFromObject=function(t,n){if("Topology"==t.type){var i=t,r=void 0,s=null,o=null;i.transform&&(s=(r=i.transform).scale,o=r.translate);var u=i.arcs;r&&function(t,n,i){for(var r=0,s=t.length;r<s;++r)Jb(t[r],n,i)}(u,s,o);var e=[],h=i.objects,f=this.Dl,a=void 0;for(var c in h)this.jh&&-1==this.jh.indexOf(c)||("GeometryCollection"===h[c].type?(a=h[c],e.push.apply(e,Vb(a,u,s,o,f,c,n))):(a=h[c],e.push(Zb(a,u,s,o,f,c,n))));return e}return[]},n.prototype.readProjectionFromObject=function(t){return this.dataProjection},n}(jb),qb={Point:function(t,n,i){var r=t.coordinates;n&&i&&Hb(r,n,i);return new ds(r)},LineString:function(t,n){var i=Bb(t.arcs,n);return new Vw(i)},Polygon:function(t,n){for(var i=[],r=0,s=t.arcs.length;r<s;++r)i[r]=Bb(t.arcs[r],n);return new Rs(i)},MultiPoint:function(t,n,i){var r=t.coordinates;if(n&&i)for(var s=0,o=r.length;s<o;++s)Hb(r[s],n,i);return new Ap(r)},MultiLineString:function(t,n){for(var i=[],r=0,s=t.arcs.length;r<s;++r)i[r]=Bb(t.arcs[r],n);return new Sp(i)},MultiPolygon:function(t,n){for(var i=[],r=0,s=t.arcs.length;r<s;++r){for(var o=t.arcs[r],u=[],e=0,h=o.length;e<h;++e)u[e]=Bb(o[e],n);i[r]=u}return new Np(i)}};function Bb(t,n){for(var i,r,s=[],o=0,u=t.length;o<u;++o)i=t[o],o>0&&s.pop(),r=i>=0?n[i]:n[~i].slice().reverse(),s.push.apply(s,r);for(var e=0,h=s.length;e<h;++e)s[e]=s[e].slice();return s}function Vb(t,n,i,r,s,o,u){for(var e=t.geometries,h=[],f=0,a=e.length;f<a;++f)h[f]=Zb(e[f],n,i,r,s,o,u);return h}function Zb(t,n,i,r,s,o,u){var e=null,h=t.type;if(h){var f=qb[h];e=Ey(e="Point"===h||"MultiPoint"===h?f(t,i,r):f(t,n),!1,u)}var a=new jt({geometry:e});void 0!==t.id&&a.setId(t.id);var c=t.properties;return s&&(c||(c={}),c[s]=o),c&&a.setProperties(c,!0),a}function Jb(t,n,i){for(var r=0,s=0,o=0,u=t.length;o<u;++o){var e=t[o];r+=e[0],s+=e[1],e[0]=r,e[1]=s,Hb(e,n,i)}}function Hb(t,n,i){t[0]=t[0]*n[0]+i[0],t[1]=t[1]*n[1]+i[1]}var $b=Wb,Kb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qb=1,t_=2,n_=3,i_=4,r_=5,s_=6,o_=7,u_=15,e_=16,h_=17,f_=function(){function t(t){this.zl=t,this.Ul=0,this.Xl=!1,this.Yl=!1,this.Wl=!1,this.ql=!1,this.Bl=null,this.Vl=xt}return t.prototype.readUint8=function(){return this.zl.getUint8(this.Ul++)},t.prototype.readUint32=function(t){return this.zl.getUint32((this.Ul+=4)-4,void 0!==t?t:this.Yl)},t.prototype.readDouble=function(t){return this.zl.getFloat64((this.Ul+=8)-8,void 0!==t?t:this.Yl)},t.prototype.readPoint=function(){var t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.Wl&&t.push(this.readDouble()),this.ql&&t.push(this.readDouble()),t},t.prototype.readLineString=function(){for(var t=this.readUint32(),n=[],i=0;i<t;i++)n.push(this.readPoint());return n},t.prototype.readPolygon=function(){for(var t=this.readUint32(),n=[],i=0;i<t;i++)n.push(this.readLineString());return n},t.prototype.readWkbHeader=function(t){var n=this.readUint8()>0,i=this.readUint32(n),r=Math.floor((268435455&i)/1e3),s=Boolean(2147483648&i)||1===r||3===r,o=Boolean(1073741824&i)||2===r||3===r,u=Boolean(536870912&i),e=(268435455&i)%1e3,h=["XY",s?"Z":"",o?"M":""].join(""),f=u?this.readUint32(n):null;if(void 0!==t&&t!==e)throw new Error("Unexpected WKB geometry type "+e);if(this.Xl){if(this.Yl!==n)throw new Error("Inconsistent endian");if(this.Vl!==h)throw new Error("Inconsistent geometry layout");if(f&&this.Bl!==f)throw new Error("Inconsistent coordinate system (SRID)")}else this.Yl=n,this.Wl=s,this.ql=o,this.Vl=h,this.Bl=f,this.Xl=!0;return e},t.prototype.readWkbPayload=function(t){switch(t){case Qb:return this.readPoint();case t_:return this.readLineString();case n_:case h_:return this.readPolygon();case i_:return this.readMultiPoint();case r_:return this.readMultiLineString();case s_:case u_:case e_:return this.readMultiPolygon();case o_:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}},t.prototype.readWkbBlock=function(t){return this.readWkbPayload(this.readWkbHeader(t))},t.prototype.readWkbCollection=function(t,n){for(var i=this.readUint32(),r=[],s=0;s<i;s++){var o=t.call(this,n);o&&r.push(o)}return r},t.prototype.readMultiPoint=function(){return this.readWkbCollection(this.readWkbBlock,Qb)},t.prototype.readMultiLineString=function(){return this.readWkbCollection(this.readWkbBlock,t_)},t.prototype.readMultiPolygon=function(){return this.readWkbCollection(this.readWkbBlock,n_)},t.prototype.readGeometryCollection=function(){return this.readWkbCollection(this.readGeometry)},t.prototype.readGeometry=function(){var t=this.readWkbHeader(),n=this.readWkbPayload(t);switch(t){case Qb:return new ds(n,this.Vl);case t_:return new Vw(n,this.Vl);case n_:case h_:return new Rs(n,this.Vl);case i_:return new Ap(n,this.Vl);case r_:return new Sp(n,this.Vl);case s_:case u_:case e_:return new Np(n,this.Vl);case o_:return new My(n);default:return null}},t.prototype.getSrid=function(){return this.Bl},t}(),a_=function(){function t(t){t=t||{},this.Vl=t.layout,this.Yl=!1!==t.littleEndian,this.Zl=!1!==t.ewkb,this.Jl=[],this.Hl=E({X:0,Y:0,Z:0,M:0},t.nodata)}return t.prototype.writeUint8=function(t){this.Jl.push([1,t])},t.prototype.writeUint32=function(t){this.Jl.push([4,t])},t.prototype.writeDouble=function(t){this.Jl.push([8,t])},t.prototype.writePoint=function(t,n){for(var i=E.apply(null,n.split("").map((function(n,i){var r;return(r={})[n]=t[i],r}))),r=0,s=this.Vl;r<s.length;r++){var o=s[r];this.writeDouble(o in i?i[o]:this.Hl[o])}},t.prototype.writeLineString=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writePoint(t[i],n)},t.prototype.writePolygon=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeLineString(t[i],n)},t.prototype.writeWkbHeader=function(t,n){t%=1e3,this.Vl.indexOf("Z")>=0&&(t+=this.Zl?2147483648:1e3),this.Vl.indexOf("M")>=0&&(t+=this.Zl?1073741824:2e3),this.Zl&&Number.isInteger(n)&&(t|=536870912),this.writeUint8(this.Yl?1:0),this.writeUint32(t),this.Zl&&Number.isInteger(n)&&this.writeUint32(n)},t.prototype.writeMultiPoint=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(1),this.writePoint(t[i],n)},t.prototype.writeMultiLineString=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(2),this.writeLineString(t[i],n)},t.prototype.writeMultiPolygon=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(3),this.writePolygon(t[i],n)},t.prototype.writeGeometryCollection=function(t){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writeGeometry(t[n])},t.prototype.findMinimumLayout=function(t,n){void 0===n&&(n=Tt);var i,r;if(t instanceof zr)return(i=t.getLayout())===(r=n)?i:i===Tt?r:r===Tt?i:xt;if(t instanceof My)for(var s=t.getGeometriesArray(),o=0;o<s.length&&n!==xt;o++)n=this.findMinimumLayout(s[o],n);return n},t.prototype.writeGeometry=function(t,n){var i,r,s=((i={})[At.POINT]=Qb,i[At.LINE_STRING]=t_,i[At.POLYGON]=n_,i[At.MULTI_POINT]=i_,i[At.MULTI_LINE_STRING]=r_,i[At.MULTI_POLYGON]=s_,i[At.GEOMETRY_COLLECTION]=o_,i),o=t.getType(),u=s[o];if(!u)throw new Error("GeometryType "+o+" is not supported");(this.Vl||(this.Vl=this.findMinimumLayout(t)),this.writeWkbHeader(u,n),t instanceof zr)?((r={})[At.POINT]=this.writePoint,r[At.LINE_STRING]=this.writeLineString,r[At.POLYGON]=this.writePolygon,r[At.MULTI_POINT]=this.writeMultiPoint,r[At.MULTI_LINE_STRING]=this.writeMultiLineString,r[At.MULTI_POLYGON]=this.writeMultiPolygon,r)[o].call(this,t.getCoordinates(),t.getLayout()):t instanceof My&&this.writeGeometryCollection(t.getGeometriesArray())},t.prototype.getBuffer=function(){var t=this,n=this.Jl.reduce((function(t,n){return t+n[0]}),0),i=new ArrayBuffer(n),r=new DataView(i),s=0;return this.Jl.forEach((function(n){switch(n[0]){case 1:r.setUint8(s,n[1]);break;case 4:r.setUint32(s,n[1],t.Yl);break;case 8:r.setFloat64(s,n[1],t.Yl)}s+=n[0]})),i},t}();function c_(t){return"string"==typeof t?function(t){for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.substr(2*i,2),16);return new DataView(n.buffer)}(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new DataView(t):null}var v_=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.splitCollection=Boolean(r.splitCollection),i.$l=null,i.Kl=!1!==r.hex,i.Ql=!1!==r.littleEndian,i.td=!1!==r.ewkb,i.Vl=r.geometryLayout,i.nd=r.nodataZ||0,i.rd=r.nodataM||0,i.Bl=r.srid,i}return Kb(n,t),n.prototype.getType=function(){return this.Kl?Uf:Df},n.prototype.readFeature=function(t,n){return new jt({geometry:this.readGeometry(t,n)})},n.prototype.readFeatures=function(t,n){var i=this.readGeometry(t,n);return(this.splitCollection&&i instanceof My?i.getGeometriesArray():[i]).map((function(t){return new jt({geometry:t})}))},n.prototype.readGeometry=function(t,n){var i=c_(t);if(!i)return null;var r=new f_(i).readGeometry();this.$l=i;var s=this.getReadOptions(t,n);return this.$l=null,Ey(r,!1,s)},n.prototype.readProjection=function(t){var n=this.$l||c_(t);if(n){var i=new f_(n);return i.readWkbHeader(),i.getSrid()&&er("EPSG:"+i.getSrid())||void 0}},n.prototype.writeFeature=function(t,n){return this.writeGeometry(t.getGeometry(),n)},n.prototype.writeFeatures=function(t,n){return this.writeGeometry(new My(t.map((function(t){return t.getGeometry()}))),n)},n.prototype.writeGeometry=function(t,n){var i=this.adaptOptions(n),r=new a_({layout:this.Vl,littleEndian:this.Ql,ewkb:this.td,nodata:{Z:this.nd,M:this.rd}}),s=Number.isInteger(this.Bl)?Number(this.Bl):null;if(!1!==this.Bl&&!Number.isInteger(this.Bl)){var o=i.dataProjection&&er(i.dataProjection);if(o){var u=o.getCode();0===u.indexOf("EPSG:")&&(s=Number(u.substring(5)))}}r.writeGeometry(Ey(t,!0,i),s);var e=r.getBuffer();return this.Kl?function(t){var n=new Uint8Array(t);return Array.from(n.values()).map((function(t){return(t<16?"0":"")+Number(t).toString(16).toUpperCase()})).join("")}(e):e},n}(xy),l_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),d_={POINT:ds,LINESTRING:Vw,POLYGON:Rs,MULTIPOINT:Ap,MULTILINESTRING:Sp,MULTIPOLYGON:Np},w_="EMPTY",p_=0,y_=1,b_=2,__=3,g_=4,m_=5,O_=6,M_={};for(var j_ in At)M_[j_]=At[j_].toUpperCase();var x_=function(){function t(t){this.wkt=t,this.sd=-1}return t.prototype.od=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.ud=function(t,n){return t>="0"&&t<="9"||"."==t&&!(void 0!==n&&n)},t.prototype.ed=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.hd=function(){return this.wkt.charAt(++this.sd)},t.prototype.nextToken=function(){var t,n=this.hd(),i=this.sd,r=n;if("("==n)t=b_;else if(","==n)t=m_;else if(")"==n)t=__;else if(this.ud(n)||"-"==n)t=g_,r=this.fd();else if(this.od(n))t=y_,r=this.ad();else{if(this.ed(n))return this.nextToken();if(""!==n)throw new Error("Unexpected character: "+n);t=O_}return{position:i,value:r,type:t}},t.prototype.fd=function(){var t,n=this.sd,i=!1,r=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(r=!0),t=this.hd()}while(this.ud(t,i)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(n,this.sd--))},t.prototype.ad=function(){var t,n=this.sd;do{t=this.hd()}while(this.od(t));return this.wkt.substring(n,this.sd--).toUpperCase()},t}(),E_=function(){function t(t){this.vd=t,this.ld={position:0,type:p_},this.Vl=xt}return t.prototype.dd=function(){this.ld=this.vd.nextToken()},t.prototype.isTokenType=function(t){return this.ld.type==t},t.prototype.match=function(t){var n=this.isTokenType(t);return n&&this.dd(),n},t.prototype.parse=function(){return this.dd(),this.wd()},t.prototype.pd=function(){var t=xt,n=this.ld;if(this.isTokenType(y_)){var i=n.value;"Z"===i?t=Et:"M"===i?t=St:"ZM"===i&&(t=Tt),t!==xt&&this.dd()}return t},t.prototype.yd=function(){if(this.match(b_)){var t=[];do{t.push(this.wd())}while(this.match(m_));if(this.match(__))return t}throw new Error(this.bd())},t.prototype._d=function(){if(this.match(b_)){var t=this.gd();if(this.match(__))return t}throw new Error(this.bd())},t.prototype.md=function(){if(this.match(b_)){var t=this.Od();if(this.match(__))return t}throw new Error(this.bd())},t.prototype.Md=function(){if(this.match(b_)){var t=this.jd();if(this.match(__))return t}throw new Error(this.bd())},t.prototype.xd=function(){if(this.match(b_)){var t=void 0;if(t=this.ld.type==b_?this.Ed():this.Od(),this.match(__))return t}throw new Error(this.bd())},t.prototype.Sd=function(){if(this.match(b_)){var t=this.jd();if(this.match(__))return t}throw new Error(this.bd())},t.prototype.Td=function(){if(this.match(b_)){var t=this.Ad();if(this.match(__))return t}throw new Error(this.bd())},t.prototype.gd=function(){for(var t=[],n=this.Vl.length,i=0;i<n;++i){var r=this.ld;if(!this.match(g_))break;t.push(r.value)}if(t.length==n)return t;throw new Error(this.bd())},t.prototype.Od=function(){for(var t=[this.gd()];this.match(m_);)t.push(this.gd());return t},t.prototype.Ed=function(){for(var t=[this._d()];this.match(m_);)t.push(this._d());return t},t.prototype.jd=function(){for(var t=[this.md()];this.match(m_);)t.push(this.md());return t},t.prototype.Ad=function(){for(var t=[this.Md()];this.match(m_);)t.push(this.Md());return t},t.prototype.Cd=function(){var t=this.isTokenType(y_)&&this.ld.value==w_;return t&&this.dd(),t},t.prototype.bd=function(){return"Unexpected `"+this.ld.value+"` at position "+this.ld.position+" in `"+this.vd.wkt+"`"},t.prototype.wd=function(){var t=this.ld;if(this.match(y_)){var n=t.value;this.Vl=this.pd();var i=this.Cd();if("GEOMETRYCOLLECTION"==n){if(i)return new My([]);var r=this.yd();return new My(r)}var s=d_[n];if(!s)throw new Error("Invalid geometry type: "+n);var o=void 0;if(i)o="POINT"==n?[NaN,NaN]:[];else switch(n){case"POINT":o=this._d();break;case"LINESTRING":o=this.md();break;case"POLYGON":o=this.Md();break;case"MULTIPOINT":o=this.xd();break;case"MULTILINESTRING":o=this.Sd();break;case"MULTIPOLYGON":o=this.Td()}return new s(o,this.Vl)}throw new Error(this.bd())},t}(),S_=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Nd=void 0!==r.splitCollection&&r.splitCollection,i}return l_(n,t),n.prototype.kd=function(t){var n=new x_(t);return new E_(n).parse()},n.prototype.readFeatureFromText=function(t,n){var i=this.readGeometryFromText(t,n),r=new jt;return r.setGeometry(i),r},n.prototype.readFeaturesFromText=function(t,n){for(var i=[],r=this.readGeometryFromText(t,n),s=[],o=0,u=(i=this.Nd&&r.getType()==At.GEOMETRY_COLLECTION?r.getGeometriesArray():[r]).length;o<u;++o){var e=new jt;e.setGeometry(i[o]),s.push(e)}return s},n.prototype.readGeometryFromText=function(t,n){return Ey(this.kd(t),!1,n)},n.prototype.writeFeatureText=function(t,n){var i=t.getGeometry();return i?this.writeGeometryText(i,n):""},n.prototype.writeFeaturesText=function(t,n){if(1==t.length)return this.writeFeatureText(t[0],n);for(var i=[],r=0,s=t.length;r<s;++r)i.push(t[r].getGeometry());var o=new My(i);return this.writeGeometryText(o,n)},n.prototype.writeGeometryText=function(t,n){return k_(Ey(t,!0,n))},n}(Nb);function T_(t){var n=t.getCoordinates();return 0===n.length?"":n.join(" ")}function A_(t){for(var n=t.getCoordinates(),i=[],r=0,s=n.length;r<s;++r)i.push(n[r].join(" "));return i.join(",")}function C_(t){for(var n=[],i=t.getLinearRings(),r=0,s=i.length;r<s;++r)n.push("("+A_(i[r])+")");return n.join(",")}var N_={Point:T_,LineString:A_,Polygon:C_,MultiPoint:function(t){for(var n=[],i=t.getPoints(),r=0,s=i.length;r<s;++r)n.push("("+T_(i[r])+")");return n.join(",")},MultiLineString:function(t){for(var n=[],i=t.getLineStrings(),r=0,s=i.length;r<s;++r)n.push("("+A_(i[r])+")");return n.join(",")},MultiPolygon:function(t){for(var n=[],i=t.getPolygons(),r=0,s=i.length;r<s;++r)n.push("("+C_(i[r])+")");return n.join(",")},GeometryCollection:function(t){for(var n=[],i=t.getGeometries(),r=0,s=i.length;r<s;++r)n.push(k_(i[r]));return n.join(",")}};function k_(t){var n=t.getType(),i=(0,N_[n])(t);if(n=n.toUpperCase(),"function"==typeof t.getFlatCoordinates){var r=function(t){var n=t.getLayout(),i="";return n!==Et&&n!==Tt||(i+="Z"),n!==St&&n!==Tt||(i+="M"),i}(t);r.length>0&&(n+=" "+r)}return 0===i.length?n+" "+w_:n+"("+i+")"}var I_=S_,P_=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var n=za(t);return this.readFromDocument(n)}return Da(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);return null},t.prototype.readFromNode=function(t){},t}(),R_=function(){function t(t){this.Id=t}return t.prototype.getTagName=function(){return this.Id},t}(),G_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),L_=function(t){function n(n,i){var r=t.call(this,n)||this;return r.conditions=i,mt(r.conditions.length>=2,57),r}return G_(n,t),n}(R_),F_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),D_=function(t){function n(n){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return F_(n,t),n}(L_),z_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),U_=function(t){function n(n,i,r){var s=t.call(this,"BBOX")||this;if(s.geometryName=n,s.extent=i,4!==i.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return s.srsName=r,s}return z_(n,t),n}(R_),X_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Y_=function(t){function n(n,i,r,s){var o=t.call(this,n)||this;return o.geometryName=i||"the_geom",o.geometry=r,o.srsName=s,o}return X_(n,t),n}(R_),W_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),q_=function(t){function n(n,i,r){return t.call(this,"Contains",n,i,r)||this}return W_(n,t),n}(Y_),B_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),V_=function(t){function n(n,i,r,s,o){var u=t.call(this,"DWithin",n,i,o)||this;return u.distance=r,u.unit=s,u}return B_(n,t),n}(Y_),Z_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),J_=function(t){function n(n,i,r){return t.call(this,"Disjoint",n,i,r)||this}return Z_(n,t),n}(Y_),H_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$_=function(t){function n(n,i){var r=t.call(this,n)||this;return r.propertyName=i,r}return H_(n,t),n}(R_),K_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Q_=function(t){function n(n,i,r){var s=t.call(this,"During",n)||this;return s.begin=i,s.end=r,s}return K_(n,t),n}($_),tg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ng=function(t){function n(n,i,r,s){var o=t.call(this,n,i)||this;return o.expression=r,o.matchCase=s,o}return tg(n,t),n}($_),ig=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rg=function(t){function n(n,i,r){return t.call(this,"PropertyIsEqualTo",n,i,r)||this}return ig(n,t),n}(ng),sg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),og=function(t){function n(n,i){return t.call(this,"PropertyIsGreaterThan",n,i)||this}return sg(n,t),n}(ng),ug=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),eg=function(t){function n(n,i){return t.call(this,"PropertyIsGreaterThanOrEqualTo",n,i)||this}return ug(n,t),n}(ng),hg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fg=function(t){function n(n,i,r){return t.call(this,"Intersects",n,i,r)||this}return hg(n,t),n}(Y_),ag=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cg=function(t){function n(n,i,r){var s=t.call(this,"PropertyIsBetween",n)||this;return s.lowerBoundary=i,s.upperBoundary=r,s}return ag(n,t),n}($_),vg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),lg=function(t){function n(n,i,r,s,o,u){var e=t.call(this,"PropertyIsLike",n)||this;return e.pattern=i,e.wildCard=void 0!==r?r:"*",e.singleChar=void 0!==s?s:".",e.escapeChar=void 0!==o?o:"!",e.matchCase=u,e}return vg(n,t),n}($_),dg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wg=function(t){function n(n){return t.call(this,"PropertyIsNull",n)||this}return dg(n,t),n}($_),pg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yg=function(t){function n(n,i){return t.call(this,"PropertyIsLessThan",n,i)||this}return pg(n,t),n}(ng),bg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_g=function(t){function n(n,i){return t.call(this,"PropertyIsLessThanOrEqualTo",n,i)||this}return bg(n,t),n}(ng),gg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),mg=function(t){function n(n){var i=t.call(this,"Not")||this;return i.condition=n,i}return gg(n,t),n}(R_),Og=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mg=function(t){function n(n,i,r){return t.call(this,"PropertyIsNotEqualTo",n,i,r)||this}return Og(n,t),n}(ng),jg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xg=function(t){function n(n){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return jg(n,t),n}(L_),Eg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Sg=function(t){function n(n){var i=t.call(this,"ResourceId")||this;return i.rid=n,i}return Eg(n,t),n}(R_),Tg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ag=function(t){function n(n,i,r){return t.call(this,"Within",n,i,r)||this}return Tg(n,t),n}(Y_);var Cg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ng=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],kg="enterfullscreen",Ig="leavefullscreen";function Pg(){var t=document.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function Rg(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function Gg(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var Lg=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).on,i.once,i.un,i.Pd=void 0!==r.className?r.className:"ol-full-screen",i.Rd=void 0!==r.activeClassName?r.activeClassName.split(" "):[i.Pd+"-true"],i.Gd=void 0!==r.inactiveClassName?r.inactiveClassName.split(" "):[i.Pd+"-false"];var s=void 0!==r.label?r.label:"⤢";i.Ld="string"==typeof s?document.createTextNode(s):s;var o=void 0!==r.labelActive?r.labelActive:"×";i.Fd="string"==typeof o?document.createTextNode(o):o,i.Dd=document.createElement("button");var u=r.tipLabel?r.tipLabel:"Toggle full-screen";i.zd(i.Dd,Rg()),i.Dd.setAttribute("type","button"),i.Dd.title=u,i.Dd.appendChild(i.Ld),i.Dd.addEventListener(R,i.ur.bind(i),!1);var e=i.Pd+" "+"ol-unselectable "+"ol-control "+(Pg()?"":cu),h=i.element;return h.className=e,h.appendChild(i.Dd),i.Ud=void 0!==r.keys&&r.keys,i._c=r.source,i}return Cg(n,t),n.prototype.ur=function(t){t.preventDefault(),this.Xd()},n.prototype.Xd=function(){if(Pg()){var t=this.getMap();if(t)if(Rg())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var n=void 0;n=this._c?"string"==typeof this._c?document.getElementById(this._c):this._c:t.getTargetElement(),this.Ud?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():Gg(t)}(n):Gg(n)}}},n.prototype.Yd=function(){var t=this.getMap();Rg()?(this.zd(this.Dd,!0),wo(this.Fd,this.Ld),this.dispatchEvent(kg)):(this.zd(this.Dd,!1),wo(this.Ld,this.Fd),this.dispatchEvent(Ig)),t&&t.updateSize()},n.prototype.zd=function(t,n){var i,r,s,o=this.Rd,u=this.Gd,e=n?o:u;(i=t.classList).remove.apply(i,o),(r=t.classList).remove.apply(r,u),(s=t.classList).add.apply(s,e)},n.prototype.setMap=function(n){if(t.prototype.setMap.call(this,n),n)for(var i=0,r=Ng.length;i<r;++i)this.listenerKeys.push(B(document,Ng[i],this.Yd,this))},n}(Ve),Fg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Dg="projection",zg="coordinateFormat",Ug=function(t){function n(n){var i=this,r=n||{},s=document.createElement("div");s.className=void 0!==r.className?r.className:"ol-mouse-position",(i=t.call(this,{element:s,render:r.render,target:r.target})||this).on,i.once,i.un,i.addChangeListener(Dg,i.vt),r.coordinateFormat&&i.setCoordinateFormat(r.coordinateFormat),r.projection&&i.setProjection(r.projection);var o=!0,u="&#160;";return"undefinedHTML"in r?(void 0!==r.undefinedHTML&&(u=r.undefinedHTML),o=!!u):"placeholder"in r&&(!1===r.placeholder?o=!1:u=String(r.placeholder)),i.Wd=u,i.qd=o,i.Bd=s.innerHTML,i.Vd=null,i.ft=null,i}return Fg(n,t),n.prototype.vt=function(){this.ft=null},n.prototype.getCoordinateFormat=function(){return this.get(zg)},n.prototype.getProjection=function(){return this.get(Dg)},n.prototype.handleMouseMove=function(t){var n=this.getMap();this.Zd(n.getEventPixel(t))},n.prototype.handleMouseOut=function(t){this.Zd(null)},n.prototype.setMap=function(n){if(t.prototype.setMap.call(this,n),n){var i=n.getViewport();this.listenerKeys.push(B(i,$u,this.handleMouseMove,this)),this.qd&&this.listenerKeys.push(B(i,te,this.handleMouseOut,this)),this.Zd(null)}},n.prototype.setCoordinateFormat=function(t){this.set(zg,t)},n.prototype.setProjection=function(t){this.set(Dg,er(t))},n.prototype.Zd=function(t){var n=this.Wd;if(t&&this.Vd){if(!this.ft){var i=this.getProjection();this.ft=i?wr(this.Vd,i):sr}var r=this.getMap().getCoordinateFromPixelInternal(t);if(r){var s=mr();s&&(this.ft=wr(this.Vd,s)),this.ft(r,r);var o=this.getCoordinateFormat();n=o?o(r):r.toString()}}this.Bd&&n===this.Bd||(this.element.innerHTML=n,this.Bd=n)},n.prototype.render=function(t){var n=t.frameState;n?this.Vd!=n.viewState.projection&&(this.Vd=n.viewState.projection,this.ft=null):this.Vd=null},n}(Ve),Xg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yg=.75,Wg=.1,qg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Xg(n,t),n.prototype.createRenderer=function(){return new Xu(this)},n}(qe),Bg=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).Jd=i.Hd.bind(i),i.Ki=void 0===r.collapsed||r.collapsed,i.nr=void 0===r.collapsible||r.collapsible,i.nr||(i.Ki=!1),i.ao=void 0!==r.rotateWithView&&r.rotateWithView,i.$d=void 0;var s=void 0!==r.className?r.className:"ol-overviewmap",o=void 0!==r.tipLabel?r.tipLabel:"Overview map",u=void 0!==r.collapseLabel?r.collapseLabel:"‹";"string"==typeof u?(i.ir=document.createElement("span"),i.ir.textContent=u):i.ir=u;var e=void 0!==r.label?r.label:"›";"string"==typeof e?(i.rr=document.createElement("span"),i.rr.textContent=e):i.rr=e;var h=i.nr&&!i.Ki?i.ir:i.rr,f=document.createElement("button");f.setAttribute("type","button"),f.title=o,f.appendChild(h),f.addEventListener(R,i.ur.bind(i),!1),i.Kd=document.createElement("div"),i.Kd.className="ol-overviewmap-map",i.zl=r.view,i.Qd=new qg({view:r.view});var a=i.Qd;r.layers&&r.layers.forEach((function(t){a.addLayer(t)}));var c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",i.tw=new Of({position:[0,0],positioning:af,element:c}),i.Qd.addOverlay(i.tw);var v=s+" "+"ol-unselectable "+vu+(i.Ki&&i.nr?" ol-collapsed":"")+(i.nr?"":" ol-uncollapsible"),l=i.element;l.className=v,l.appendChild(i.Kd),l.appendChild(f);var d=i,w=i.tw,p=i.tw.getElement(),y=function(t){var n,i={clientX:(n=t).clientX,clientY:n.clientY},r=a.getEventCoordinateInternal(i);w.setPosition(r)},b=function t(n){var i=a.getEventCoordinateInternal(n);d.getMap().getView().setCenterInternal(i),window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",t)};return p.addEventListener("mousedown",(function(){window.addEventListener("mousemove",y),window.addEventListener("mouseup",b)})),i}return Xg(n,t),n.prototype.setMap=function(n){var i=this.getMap();if(n!==i){if(i){var r=i.getView();r&&this.nw(r),this.Qd.setTarget(null)}if(t.prototype.setMap.call(this,n),n){this.Qd.setTarget(this.Kd),this.listenerKeys.push(B(n,v,this.iw,this));var s=n.getView();s&&(this.rw(s),s.isDef()&&(this.Qd.updateSize(),this.sw())),this.Qd.isRendered()||this.ow()}}},n.prototype.iw=function(t){if(t.key===fe){var n=t.oldValue;n&&this.nw(n);var i=this.getMap().getView();this.rw(i)}else this.Qd.isRendered()||t.key!==he&&t.key!==ee||this.Qd.updateSize()},n.prototype.rw=function(t){if(!this.zl){var n=new De({projection:t.getProjection()});this.Qd.setView(n)}t.addChangeListener(_e,this.Jd),this.Hd()},n.prototype.nw=function(t){t.removeChangeListener(_e,this.Jd)},n.prototype.Hd=function(){this.ao&&this.Qd.getView().setRotation(this.getMap().getView().getRotation())},n.prototype.uw=function(){var t=this.getMap(),n=this.Qd;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView().calculateExtentInternal(i);if(!this.$d||!Tn(r,this.$d)){this.$d=r;var s=n.getSize(),o=n.getView().calculateExtentInternal(s),u=n.getPixelFromCoordinateInternal(qn(r)),e=n.getPixelFromCoordinateInternal(Dn(r)),h=Math.abs(u[0]-e[0]),f=Math.abs(u[1]-e[1]),a=s[0],c=s[1];h<a*Wg||f<c*Wg||h>a*Yg||f>c*Yg?this.sw():gn(o,r)||this.ew()}}},n.prototype.sw=function(){var t=this.getMap(),n=this.Qd,i=t.getSize(),r=t.getView().calculateExtentInternal(i),s=n.getView(),o=Math.log(7.5)/Math.LN2;$n(r,1/(Math.pow(2,o/2)*Wg)),s.fitInternal(Ls(r))},n.prototype.ew=function(){var t=this.getMap(),n=this.Qd,i=t.getView();n.getView().setCenterInternal(i.getCenterInternal())},n.prototype.hw=function(){var t=this.getMap(),n=this.Qd;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView(),s=n.getView(),o=this.ao?0:-r.getRotation(),u=this.tw,e=this.tw.getElement(),h=r.getCenterInternal(),f=r.getResolution(),a=s.getResolution(),c=i[0]*f/a,v=i[1]*f/a;if(u.setPosition(h),e){e.style.width=c+"px",e.style.height=v+"px";var l="rotate("+o+"rad)";e.style.transform=l}}},n.prototype.ow=function(){this.fw||(this.fw=V(this.Qd,re,(function(t){delete this.fw,this.hw()}),this))},n.prototype.ur=function(t){t.preventDefault(),this.cr()},n.prototype.cr=function(){this.element.classList.toggle(lu),this.Ki?wo(this.ir,this.rr):wo(this.rr,this.ir),this.Ki=!this.Ki;var t=this.Qd;if(!this.Ki){if(t.isRendered())return this.$d=void 0,void t.render();t.updateSize(),this.sw(),this.ow()}},n.prototype.getCollapsible=function(){return this.nr},n.prototype.setCollapsible=function(t){this.nr!==t&&(this.nr=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.Ki&&this.cr())},n.prototype.setCollapsed=function(t){this.nr&&this.Ki!==t&&this.cr()},n.prototype.getCollapsed=function(){return this.Ki},n.prototype.getRotateWithView=function(){return this.ao},n.prototype.setRotateWithView=function(t){this.ao!==t&&(this.ao=t,0!==this.getMap().getView().getRotation()&&(this.ao?this.Hd():this.Qd.getView().setRotation(0),this.$d=void 0,this.uw(),this.hw()))},n.prototype.getOverviewMap=function(){return this.Qd},n.prototype.render=function(t){this.uw(),this.hw()},n}(Ve),Vg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Zg="units",Jg="degrees",Hg="imperial",$g="nautical",Kg="metric",Qg="us",tm=[1,2,5],nm=25.4/.28,im=function(t){function n(n){var i=this,r=n||{},s=void 0!==r.className?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).on,i.once,i.un,i.aw=document.createElement("div"),i.aw.className=s+"-inner",i.element.className=s+" "+au,i.element.appendChild(i.aw),i.cw=null,i.lw=void 0!==r.minWidth?r.minWidth:64,i.$t=!1,i.dw=void 0,i.Bd="",i.addChangeListener(Zg,i.ww),i.setUnits(r.units||Kg),i.pw=r.bar||!1,i.yw=r.steps||4,i.bw=r.text||!1,i._w=r.dpi||void 0,i}return Vg(n,t),n.prototype.getUnits=function(){return this.get(Zg)},n.prototype.ww=function(){this.ar()},n.prototype.setUnits=function(t){this.set(Zg,t)},n.prototype.setDpi=function(t){this._w=t},n.prototype.ar=function(){var t=this.cw;if(t){var n=t.center,i=t.projection,r=this.getUnits(),s=r==Jg?Pt.DEGREES:Pt.METERS,o=hr(i,t.resolution,n,s),u=this.lw*(this._w||nm)/nm,e=u*o,h="";if(r==Jg){var f=kt[Pt.DEGREES];(e*=f)<f/60?(h="″",o*=3600):e<f?(h="′",o*=60):h="°"}else r==Hg?e<.9144?(h="in",o/=.0254):e<1609.344?(h="ft",o/=.3048):(h="mi",o/=1609.344):r==$g?(o/=1852,h="nm"):r==Kg?e<.001?(h="μm",o*=1e6):e<1?(h="mm",o*=1e3):e<1e3?h="m":(h="km",o/=1e3):r==Qg?e<.9144?(h="in",o*=39.37):e<1609.344?(h="ft",o/=.30480061):(h="mi",o/=1609.3472):mt(!1,33);for(var a,c,v,l,d=3*Math.floor(Math.log(u*o)/Math.log(10));;){v=Math.floor(d/3);var w=Math.pow(10,v);if(a=tm[(d%3+3)%3]*w,c=Math.round(a/o),isNaN(c))return this.element.style.display="none",void(this.$t=!1);if(c>=u)break;++d}l=this.pw?this.createScaleBar(c,a,h):a.toFixed(v<0?-v:0)+" "+h,this.Bd!=l&&(this.aw.innerHTML=l,this.Bd=l),this.dw!=c&&(this.aw.style.width=c+"px",this.dw=c),this.$t||(this.element.style.display="",this.$t=!0)}else this.$t&&(this.element.style.display="none",this.$t=!1)},n.prototype.createScaleBar=function(t,n,i){for(var r="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),s=[],o=t/this.yw,u="#ffffff",e=0;e<this.yw;e++)0===e&&s.push(this.createMarker("absolute",e)),s.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+u+';"></div>'+this.createMarker("relative",e)+(e%2==0||2===this.yw?this.createStepText(e,t,!1,n,i):"")+"</div>"),e===this.yw-1&&s.push(this.createStepText(e+1,t,!0,n,i)),u="#ffffff"===u?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.bw?'<div class="ol-scale-text" style="width: '+t+'px;">'+r+"</div>":"")+s.join("")+"</div>"},n.prototype.createMarker=function(t,n){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},n.prototype.createStepText=function(t,n,i,r,s){var o=(0===t?0:Math.round(r/this.yw*t*100)/100)+(0===t?"":" "+s);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:n/this.yw*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:n/this.yw*2)+"px;left: "+(i?n+"px":"unset")+';">'+o+"</div>"},n.prototype.getScaleForResolution=function(){var t=hr(this.cw.projection,this.cw.resolution,this.cw.center),n=this._w||nm,i=this.cw.projection.getMetersPerUnit();return parseFloat(t.toString())*i*(1e3/25.4)*n},n.prototype.render=function(t){var n=t.frameState;this.cw=n?n.viewState:null,this.ar()},n}(Ve),rm=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sm=0,om=1,um=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render})||this).vn=[],i.gw=void 0,i.mw=sm,i.cn,i.Ow=0,i.Mw=0,i.jw,i.xw,i.Ew=null,i.Sw=!1,i.lr=void 0!==r.duration?r.duration:200;var s=void 0!==r.className?r.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=s+"-thumb "+au;var u=i.element;return u.className=s+" "+"ol-unselectable "+vu,u.appendChild(o),u.addEventListener(Ku,i.Tw.bind(i),!1),u.addEventListener($u,i.Aw.bind(i),!1),u.addEventListener(Qu,i.Cw.bind(i),!1),u.addEventListener(R,i.Nw.bind(i),!1),o.addEventListener(R,a,!1),i}return rm(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),n&&n.render()},n.prototype.kw=function(){var t=this.element,n=t.offsetWidth,i=t.offsetHeight;if(0===n&&0===i)return this.Sw=!1;var r=getComputedStyle(t);n-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);var s=t.firstElementChild,o=getComputedStyle(s),u=s.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),e=s.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.Ew=[u,e],n>i?(this.mw=om,this.Mw=n-u):(this.mw=sm,this.Ow=i-e),this.Sw=!0},n.prototype.Nw=function(t){var n=this.getMap().getView(),i=this.Iw(t.offsetX-this.Ew[0]/2,t.offsetY-this.Ew[1]/2),r=this.Pw(i),s=n.getConstrainedZoom(n.getZoomForResolution(r));n.animateInternal({zoom:s,duration:this.lr,easing:dt})},n.prototype.Tw=function(t){if(!this.cn&&t.target===this.element.firstElementChild){var n=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.jw=t.clientX-parseFloat(n.style.left),this.xw=t.clientY-parseFloat(n.style.top),this.cn=!0,0===this.vn.length){var i=this.Aw,r=this.Cw,s=this.getMap().getOwnerDocument();this.vn.push(B(s,$u,i,this),B(s,Qu,r,this))}}},n.prototype.Aw=function(t){if(this.cn){var n=t.clientX-this.jw,i=t.clientY-this.xw,r=this.Iw(n,i);this.gw=this.Pw(r),this.getMap().getView().setResolution(this.gw)}},n.prototype.Cw=function(t){this.cn&&(this.getMap().getView().endInteraction(),this.cn=!1,this.jw=void 0,this.xw=void 0,this.vn.forEach(Z),this.vn.length=0)},n.prototype.Rw=function(t){var n=this.Gw(t),i=this.element.firstElementChild;this.mw==om?i.style.left=this.Mw*n+"px":i.style.top=this.Ow*n+"px"},n.prototype.Iw=function(t,n){return ii(this.mw===om?t/this.Mw:n/this.Ow,0,1)},n.prototype.Pw=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},n.prototype.Gw=function(t){return ii(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},n.prototype.render=function(t){if(t.frameState&&(this.Sw||this.kw())){var n=t.frameState.viewState.resolution;this.gw=n,this.Rw(n)}},n}(Ve),em=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hm=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).extent=r.extent?r.extent:null;var s=void 0!==r.className?r.className:"ol-zoom-extent",o=void 0!==r.label?r.label:"E",u=void 0!==r.tipLabel?r.tipLabel:"Fit to extent",e=document.createElement("button");e.setAttribute("type","button"),e.title=u,e.appendChild("string"==typeof o?document.createTextNode(o):o),e.addEventListener(R,i.ur.bind(i),!1);var h=s+" "+"ol-unselectable "+vu,f=i.element;return f.className=h,f.appendChild(e),i}return em(n,t),n.prototype.ur=function(t){t.preventDefault(),this.handleZoomToExtent()},n.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),n=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(Ls(n))},n}(Ve),fm={};fm.AssertionError=f,fm.Collection=et,fm.Collection.CollectionEvent=ut,fm.DataTile=gt,fm.Disposable=l,fm.Feature=jt,fm.Feature.createStyleFunction=Mt,fm.Geolocation=Ks,fm.Image=ho,fm.Image.listenImage=eo,fm.ImageBase=to,fm.ImageCanvas=ao,fm.ImageTile=go,fm.Kinetic=mo,fm.Map=of,fm.MapBrowserEvent=Ju,fm.MapBrowserEventHandler=ie,fm.MapEvent=Vu,fm.Object=nt,fm.Object.ObjectEvent=tt,fm.Observable=K,fm.Observable.unByKey=$,fm.Overlay=Of,fm.PluggableMap=qe,fm.Tile=bt,fm.TileCache=Nf,fm.TileQueue=le,fm.TileQueue.getTilePriority=de,fm.TileRange=Pf,fm.TileRange.createOrUpdate=If,fm.VectorRenderTile=Lf,fm.View=De,fm.View.createCenterConstraint=Pe,fm.View.createResolutionConstraint=Re,fm.View.createRotationConstraint=Ge,fm.View.isNoopAnimation=Le,fm.array={},fm.array.binarySearch=d,fm.array.equals=g,fm.array.extend=_,fm.array.find=function(t,n){for(var i,r=t.length>>>0,s=0;s<r;s++)if(n(i=t[s],s,t))return i;return null},fm.array.findIndex=function(t,n){var i;return!t.every((function(r,s){return i=s,!n(r,s,t)}))?i:-1},fm.array.includes=p,fm.array.isSorted=m,fm.array.linearFindNearest=y,fm.array.numberSafeCompareFunction=w,fm.array.remove=function(t,n){var i=t.indexOf(n),r=i>-1;return r&&t.splice(i,1),r},fm.array.reverseSubArray=b,fm.array.stableSort=function(t,n){var i,r=t.length,s=Array(t.length);for(i=0;i<r;i++)s[i]={index:i,value:t[i]};for(s.sort((function(t,i){return n(t.value,i.value)||t.index-i.index})),i=0;i<t.length;i++)t[i]=s[i].value},fm.asserts={},fm.asserts.assert=mt,fm.centerconstraint={},fm.centerconstraint.createExtent=me,fm.centerconstraint.none=Oe,fm.color={},fm.color.asArray=So,fm.color.asString=jo,fm.color.fromString=Eo,fm.color.isStringColor=Co,fm.color.normalize=To,fm.color.toString=Ao,fm.colorlike={},fm.colorlike.asColorLike=Ff,fm.control={},fm.control.Attribution=Je,fm.control.Control=Ve,fm.control.FullScreen=Lg,fm.control.MousePosition=Ug,fm.control.OverviewMap=Bg,fm.control.Rotate=$e,fm.control.ScaleLine=im,fm.control.Zoom=Qe,fm.control.ZoomSlider=um,fm.control.ZoomToExtent=hm,fm.control.defaults=th,fm.coordinate={},fm.coordinate.add=Yi,fm.coordinate.closestOnCircle=Wi,fm.coordinate.closestOnSegment=qi,fm.coordinate.createStringXY=function(t){return function(n){return tr(n,t)}},fm.coordinate.degreesToStringHDMS=Bi,fm.coordinate.distance=Ki,fm.coordinate.equals=Zi,fm.coordinate.format=Vi,fm.coordinate.getWorldsAway=ir,fm.coordinate.rotate=Ji,fm.coordinate.scale=Hi,fm.coordinate.squaredDistance=$i,fm.coordinate.squaredDistanceToSegment=Qi,fm.coordinate.toStringHDMS=function(t,n){return t?Bi("NS",t[1],n)+" "+Bi("EW",t[0],n):""},fm.coordinate.toStringXY=tr,fm.coordinate.wrapX=nr,fm.css={},fm.css.CLASS_COLLAPSED=lu,fm.css.CLASS_CONTROL=vu,fm.css.CLASS_HIDDEN=hu,fm.css.CLASS_SELECTABLE=fu,fm.css.CLASS_UNSELECTABLE=au,fm.css.CLASS_UNSUPPORTED=cu,fm.css.cssOpacity=yu,fm.css.getFontParameters=pu,fm.dom={},fm.dom.createCanvasContext2D=co,fm.dom.outerHeight=lo,fm.dom.outerWidth=vo,fm.dom.removeChildren=yo,fm.dom.removeNode=po,fm.dom.replaceChildren=bo,fm.dom.replaceNode=wo,fm.easing={},fm.easing.easeIn=lt,fm.easing.easeOut=dt,fm.easing.inAndOut=wt,fm.easing.linear=pt,fm.easing.upAndDown=function(t){return t<.5?wt(2*t):1-wt(2*(t-.5))},fm.events={},fm.events.Event=c,fm.events.Event.preventDefault=function(t){t.preventDefault()},fm.events.Event.stopPropagation=a,fm.events.Target=N,fm.events.condition={},fm.events.condition.all=ch,fm.events.condition.altKeyOnly=vh,fm.events.condition.altShiftKeysOnly=lh,fm.events.condition.always=ph,fm.events.condition.click=function(t){return t.type==Hu.CLICK},fm.events.condition.doubleClick=function(t){return t.type==Hu.DBLCLICK},fm.events.condition.focus=dh,fm.events.condition.focusWithTabindex=wh,fm.events.condition.mouseActionButton=yh,fm.events.condition.mouseOnly=Mh,fm.events.condition.never=bh,fm.events.condition.noModifierKeys=gh,fm.events.condition.penOnly=function(t){var n=t.originalEvent;return mt(void 0!==n,56),"pen"===n.pointerType},fm.events.condition.platformModifierKeyOnly=function(t){var n=t.originalEvent;return!n.altKey&&(Dt?n.metaKey:n.ctrlKey)&&!n.shiftKey},fm.events.condition.pointerMove=function(t){return"pointermove"==t.type},fm.events.condition.primaryAction=jh,fm.events.condition.shiftKeyOnly=mh,fm.events.condition.singleClick=_h,fm.events.condition.targetNotEditable=Oh,fm.events.condition.touchOnly=function(t){var n=t.originalEvent;return mt(void 0!==n,56),"touch"===n.pointerType},fm.events.listen=B,fm.events.listenOnce=V,fm.events.unlistenByKey=Z,fm.extent={},fm.extent.applyTransform=Qn,fm.extent.approximatelyEquals=An,fm.extent.boundingExtent=wn,fm.extent.buffer=pn,fm.extent.clone=yn,fm.extent.closestSquaredDistanceXY=bn,fm.extent.containsCoordinate=_n,fm.extent.containsExtent=gn,fm.extent.containsXY=mn,fm.extent.coordinateRelationship=On,fm.extent.createEmpty=Mn,fm.extent.createOrUpdate=jn,fm.extent.createOrUpdateEmpty=xn,fm.extent.createOrUpdateFromCoordinate=En,fm.extent.createOrUpdateFromCoordinates=function(t,n){return kn(xn(n),t)},fm.extent.createOrUpdateFromFlatCoordinates=Sn,fm.extent.createOrUpdateFromRings=function(t,n){return Pn(xn(n),t)},fm.extent.equals=Tn,fm.extent.extend=Cn,fm.extent.extendCoordinate=Nn,fm.extent.extendCoordinates=kn,fm.extent.extendFlatCoordinates=In,fm.extent.extendRings=Pn,fm.extent.extendXY=Rn,fm.extent.forEachCorner=Gn,fm.extent.getArea=Ln,fm.extent.getBottomLeft=Fn,fm.extent.getBottomRight=Dn,fm.extent.getCenter=zn,fm.extent.getCorner=Un,fm.extent.getEnlargedArea=function(t,n){var i=Math.min(t[0],n[0]),r=Math.min(t[1],n[1]);return(Math.max(t[2],n[2])-i)*(Math.max(t[3],n[3])-r)},fm.extent.getForViewAndSize=Xn,fm.extent.getHeight=Yn,fm.extent.getIntersection=Wn,fm.extent.getIntersectionArea=function(t,n){return Ln(Wn(t,n))},fm.extent.getMargin=function(t){return Vn(t)+Yn(t)},fm.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},fm.extent.getTopLeft=qn,fm.extent.getTopRight=Bn,fm.extent.getWidth=Vn,fm.extent.intersects=Zn,fm.extent.intersectsSegment=Kn,fm.extent.isEmpty=Jn,fm.extent.returnOrUpdate=Hn,fm.extent.scaleFromCenter=$n,fm.extent.wrapX=ti,fm.featureloader={},fm.featureloader.loadFeaturesXhr=Wf,fm.featureloader.setWithCredentials=function(t){Yf=t},fm.featureloader.xhr=qf,fm.format={},fm.format.Feature=xy,fm.format.Feature.transformExtentWithOptions=function(t,n){var i=n?er(n.featureProjection):null,r=n?er(n.dataProjection):null;return i&&r&&!dr(i,r)?br(t,r,i):t},fm.format.Feature.transformGeometryWithOptions=Ey,fm.format.GPX=mb,fm.format.GeoJSON=Tb,fm.format.JSONFeature=jb,fm.format.Polyline=Xb,fm.format.Polyline.decodeDeltas=Pb,fm.format.Polyline.decodeFloats=Gb,fm.format.Polyline.decodeSignedIntegers=Fb,fm.format.Polyline.decodeUnsignedIntegers=zb,fm.format.Polyline.encodeDeltas=Ib,fm.format.Polyline.encodeFloats=Rb,fm.format.Polyline.encodeSignedIntegers=Lb,fm.format.Polyline.encodeUnsignedInteger=Ub,fm.format.Polyline.encodeUnsignedIntegers=Db,fm.format.TextFeature=Nb,fm.format.TopoJSON=$b,fm.format.WKB=v_,fm.format.WKT=I_,fm.format.XML=P_,fm.format.XMLFeature=Ty,fm.format.filter={},fm.format.filter.And=D_,fm.format.filter.Bbox=U_,fm.format.filter.Comparison=$_,fm.format.filter.ComparisonBinary=ng,fm.format.filter.Contains=q_,fm.format.filter.DWithin=V_,fm.format.filter.Disjoint=J_,fm.format.filter.During=Q_,fm.format.filter.EqualTo=rg,fm.format.filter.Filter=R_,fm.format.filter.GreaterThan=og,fm.format.filter.GreaterThanOrEqualTo=eg,fm.format.filter.Intersects=fg,fm.format.filter.IsBetween=cg,fm.format.filter.IsLike=lg,fm.format.filter.IsNull=wg,fm.format.filter.LessThan=yg,fm.format.filter.LessThanOrEqualTo=_g,fm.format.filter.LogicalNary=L_,fm.format.filter.Not=mg,fm.format.filter.NotEqualTo=Mg,fm.format.filter.Or=xg,fm.format.filter.ResourceId=Sg,fm.format.filter.Spatial=Y_,fm.format.filter.Within=Ag,fm.format.filter.and=function(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(D_,n))},fm.format.filter.bbox=function(t,n,i){return new U_(t,n,i)},fm.format.filter.between=function(t,n,i){return new cg(t,n,i)},fm.format.filter.contains=function(t,n,i){return new q_(t,n,i)},fm.format.filter.disjoint=function(t,n,i){return new J_(t,n,i)},fm.format.filter.during=function(t,n,i){return new Q_(t,n,i)},fm.format.filter.dwithin=function(t,n,i,r,s){return new V_(t,n,i,r,s)},fm.format.filter.equalTo=function(t,n,i){return new rg(t,n,i)},fm.format.filter.greaterThan=function(t,n){return new og(t,n)},fm.format.filter.greaterThanOrEqualTo=function(t,n){return new eg(t,n)},fm.format.filter.intersects=function(t,n,i){return new fg(t,n,i)},fm.format.filter.isNull=function(t){return new wg(t)},fm.format.filter.lessThan=function(t,n){return new yg(t,n)},fm.format.filter.lessThanOrEqualTo=function(t,n){return new _g(t,n)},fm.format.filter.like=function(t,n,i,r,s,o){return new lg(t,n,i,r,s,o)},fm.format.filter.not=function(t){return new mg(t)},fm.format.filter.notEqualTo=function(t,n,i){return new Mg(t,n,i)},fm.format.filter.or=function(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(xg,n))},fm.format.filter.resourceId=function(t){return new Sg(t)},fm.format.filter.within=function(t,n,i){return new Ag(t,n,i)},fm.format.xlink={},fm.format.xlink.readHref=function(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")},fm.format.xsd={},fm.format.xsd.readBoolean=function(t){return Ay(La(t,!1))},fm.format.xsd.readBooleanString=Ay,fm.format.xsd.readDateTime=Cy,fm.format.xsd.readDecimal=Ny,fm.format.xsd.readDecimalString=ky,fm.format.xsd.readNonNegativeIntegerString=Py,fm.format.xsd.readPositiveInteger=Iy,fm.format.xsd.readString=Ry,fm.format.xsd.writeBooleanTextNode=function(t,n){Dy(t,n?"1":"0")},fm.format.xsd.writeCDATASection=function(t,n){t.appendChild(ic().createCDATASection(n))},fm.format.xsd.writeDateTimeTextNode=Gy,fm.format.xsd.writeDecimalTextNode=Ly,fm.format.xsd.writeNonNegativeIntegerTextNode=Fy,fm.format.xsd.writeStringTextNode=Dy,fm.functions={},fm.functions.FALSE=M,fm.functions.TRUE=O,fm.functions.VOID=j,fm.functions.memoizeOne=x,fm.geom={},fm.geom.Circle=xp,fm.geom.Geometry=Gr,fm.geom.GeometryCollection=My,fm.geom.LineString=Vw,fm.geom.LinearRing=vs,fm.geom.MultiLineString=Sp,fm.geom.MultiPoint=Ap,fm.geom.MultiPolygon=Np,fm.geom.Point=ds,fm.geom.Polygon=Rs,fm.geom.Polygon.circular=Gs,fm.geom.Polygon.fromCircle=Fs,fm.geom.Polygon.fromExtent=Ls,fm.geom.Polygon.makeRegular=Ds,fm.geom.SimpleGeometry=zr,fm.geom.SimpleGeometry.getStrideForLayout=Fr,fm.geom.SimpleGeometry.transformGeom2D=Dr,fm.geom.flat={},fm.geom.flat.area={},fm.geom.flat.area.linearRing=hs,fm.geom.flat.area.linearRings=fs,fm.geom.flat.area.linearRingss=as,fm.geom.flat.center={},fm.geom.flat.center.linearRingss=Dw,fm.geom.flat.closest={},fm.geom.flat.closest.arrayMaxSquaredDelta=Yr,fm.geom.flat.closest.assignClosestArrayPoint=Br,fm.geom.flat.closest.assignClosestMultiArrayPoint=Vr,fm.geom.flat.closest.assignClosestPoint=qr,fm.geom.flat.closest.maxSquaredDelta=Xr,fm.geom.flat.closest.multiArrayMaxSquaredDelta=Wr,fm.geom.flat.contains={},fm.geom.flat.contains.linearRingContainsExtent=ws,fm.geom.flat.contains.linearRingContainsXY=ps,fm.geom.flat.contains.linearRingsContainsXY=ys,fm.geom.flat.contains.linearRingssContainsXY=bs,fm.geom.flat.deflate={},fm.geom.flat.deflate.deflateCoordinate=Zr,fm.geom.flat.deflate.deflateCoordinates=Jr,fm.geom.flat.deflate.deflateCoordinatesArray=Hr,fm.geom.flat.deflate.deflateMultiCoordinatesArray=$r,fm.geom.flat.flip={},fm.geom.flat.flip.flipXY=jy,fm.geom.flat.geodesic={},fm.geom.flat.geodesic.greatCircleArc=function(t,n,i,r,s,o){var u=er("EPSG:4326"),e=Math.cos(fi(n)),h=Math.sin(fi(n)),f=Math.cos(fi(r)),a=Math.sin(fi(r)),c=Math.cos(fi(i-t)),v=Math.sin(fi(i-t)),l=h*a+e*f*c;return Hw((function(n){if(1<=l)return[i,r];var s=n*Math.acos(l),o=Math.cos(s),u=Math.sin(s),d=v*f,w=e*a-h*f*c,p=Math.atan2(d,w),y=Math.asin(h*o+e*u*Math.cos(p));return[hi(fi(t)+Math.atan2(Math.sin(p)*u*e,o-h*Math.sin(y))),hi(y)]}),pr(u,s),o)},fm.geom.flat.geodesic.meridian=$w,fm.geom.flat.geodesic.parallel=Kw,fm.geom.flat.inflate={},fm.geom.flat.inflate.inflateCoordinates=os,fm.geom.flat.inflate.inflateCoordinatesArray=us,fm.geom.flat.inflate.inflateMultiCoordinatesArray=es,fm.geom.flat.interiorpoint={},fm.geom.flat.interiorpoint.getInteriorPointOfArray=_s,fm.geom.flat.interiorpoint.getInteriorPointsOfMultiArray=gs,fm.geom.flat.interpolate={},fm.geom.flat.interpolate.interpolatePoint=Gw,fm.geom.flat.interpolate.lineStringCoordinateAtM=Lw,fm.geom.flat.interpolate.lineStringsCoordinateAtM=Fw,fm.geom.flat.intersectsextent={},fm.geom.flat.intersectsextent.intersectsLineString=Os,fm.geom.flat.intersectsextent.intersectsLineStringArray=Ms,fm.geom.flat.intersectsextent.intersectsLinearRing=js,fm.geom.flat.intersectsextent.intersectsLinearRingArray=xs,fm.geom.flat.intersectsextent.intersectsLinearRingMultiArray=Es,fm.geom.flat.length={},fm.geom.flat.length.lineStringLength=dw,fm.geom.flat.length.linearRingLength=function(t,n,i,r){var s=dw(t,n,i,r),o=t[i-r]-t[n],u=t[i-r+1]-t[n+1];return s+=Math.sqrt(o*o+u*u)},fm.geom.flat.orient={},fm.geom.flat.orient.linearRingIsClockwise=Ts,fm.geom.flat.orient.linearRingsAreOriented=As,fm.geom.flat.orient.linearRingssAreOriented=Cs,fm.geom.flat.orient.orientLinearRings=Ns,fm.geom.flat.orient.orientLinearRingsArray=ks,fm.geom.flat.reverse={},fm.geom.flat.reverse.coordinates=Ss,fm.geom.flat.segments={},fm.geom.flat.segments.forEach=ms,fm.geom.flat.simplify={},fm.geom.flat.simplify.douglasPeucker=Kr,fm.geom.flat.simplify.douglasPeuckerArray=Qr,fm.geom.flat.simplify.douglasPeuckerMultiArray=function(t,n,i,r,s,o,u,e){for(var h=0,f=i.length;h<f;++h){var a=i[h],c=[];u=Qr(t,n,a,r,s,o,u,c),e.push(c),n=a[a.length-1]}return u},fm.geom.flat.simplify.quantize=is,fm.geom.flat.simplify.quantizeArray=rs,fm.geom.flat.simplify.quantizeMultiArray=ss,fm.geom.flat.simplify.radialDistance=ts,fm.geom.flat.simplify.simplifyLineString=function(t,n,i,r,s,o,u){var e=void 0!==u?u:[];return o||(i=ts(t,n,i,r,s,e,0),t=e,n=0,r=2),e.length=Kr(t,n,i,r,s,e,0),e},fm.geom.flat.simplify.snap=ns,fm.geom.flat.straightchunk={},fm.geom.flat.straightchunk.matchingChunk=ew,fm.geom.flat.textpath={},fm.geom.flat.textpath.drawTextOnPath=lw,fm.geom.flat.topology={},fm.geom.flat.topology.lineStringIsClosed=function(t,n,i,r){var s=i-r;return t[n]===t[s]&&t[n+1]===t[s+1]&&(i-n)/r>3&&!!hs(t,n,i,r)},fm.geom.flat.transform={},fm.geom.flat.transform.rotate=Nr,fm.geom.flat.transform.scale=kr,fm.geom.flat.transform.transform2D=Cr,fm.geom.flat.transform.translate=Ir,fm.has={},fm.has.DEVICE_PIXEL_RATIO=zt,fm.has.FIREFOX=Gt,fm.has.IMAGE_DECODE=Xt,fm.has.MAC=Dt,fm.has.PASSIVE_EVENT_LISTENERS=Yt,fm.has.SAFARI=Lt,fm.has.WEBKIT=Ft,fm.has.WORKER_OFFSCREEN_CANVAS=Ut,fm.interaction={},fm.interaction.DoubleClickZoom=eh,fm.interaction.DragAndDrop=gp,fm.interaction.DragAndDrop.DragAndDropEvent=_p,fm.interaction.DragBox=Lh,fm.interaction.DragBox.DragBoxEvent=Gh,fm.interaction.DragPan=Eh,fm.interaction.DragRotate=Th,fm.interaction.DragRotateAndZoom=Op,fm.interaction.DragZoom=Dh,fm.interaction.Draw=Up,fm.interaction.Draw.DrawEvent=zp,fm.interaction.Draw.createBox=function(){return function(t,n,i){var r=wn([t[0],t[t.length-1]].map((function(t){return Mr(t,i)}))),s=[[Fn(r),Dn(r),Bn(r),qn(r),Fn(r)]],o=n;o?o.setCoordinates(s):o=new Rs(s);var u=mr();return u&&o.transform(i,u),o}},fm.interaction.Draw.createRegularPolygon=function(t,n){return function(i,r,s){var o=Mr(i[0],s),u=Mr(i[i.length-1],s),e=Math.sqrt($i(o,u)),h=r||Fs(new xp(o),t),f=n;if(!n&&0!==n){var a=u[0]-o[0],c=u[1]-o[1];f=Math.atan2(c,a)}Ds(h,o,e,f);var v=mr();return v&&h.transform(s,v),h}},fm.interaction.Extent=Zp,fm.interaction.Extent.ExtentEvent=Wp,fm.interaction.Interaction=oh,fm.interaction.Interaction.pan=rh,fm.interaction.Interaction.zoomByDelta=sh,fm.interaction.KeyboardPan=qh,fm.interaction.KeyboardZoom=Vh,fm.interaction.Modify=oy,fm.interaction.Modify.ModifyEvent=ny,fm.interaction.MouseWheelZoom=$h,fm.interaction.PinchRotate=Qh,fm.interaction.PinchZoom=nf,fm.interaction.Pointer=ah,fm.interaction.Pointer.centroid=fh,fm.interaction.Select=ay,fm.interaction.Select.SelectEvent=hy,fm.interaction.Snap=dy,fm.interaction.Translate=gy,fm.interaction.Translate.TranslateEvent=_y,fm.interaction.defaults=rf,fm.layer={},fm.layer.Base=Bo,fm.layer.BaseImage=ud,fm.layer.BaseTile=pd,fm.layer.BaseVector=qw,fm.layer.Graticule=ip,fm.layer.Group=qu,fm.layer.Heatmap=dp,fm.layer.Image=vd,fm.layer.Layer=iu,fm.layer.Layer.inView=nu,fm.layer.Tile=Od,fm.layer.Vector=Jw,fm.layer.VectorImage=pp,fm.loadingstrategy={},fm.loadingstrategy.all=Bf,fm.loadingstrategy.bbox=function(t,n){return[t]},fm.loadingstrategy.tile=function(t){return function(n,i,r){var s=t.getZForResolution(Sr(i,r)),o=t.getTileRangeForExtentAndZ(xr(n,r),s),u=[],e=[s,0,0];for(e[1]=o.minX;e[1]<=o.maxX;++e[1])for(e[2]=o.minY;e[2]<=o.maxY;++e[2])u.push(jr(t.getTileCoordExtent(e),r));return u}},fm.math={},fm.math.clamp=ii,fm.math.cosh=ri,fm.math.lerp=ci,fm.math.log2=si,fm.math.modulo=ai,fm.math.solveLinearSystem=ei,fm.math.squaredDistance=ui,fm.math.squaredSegmentDistance=oi,fm.math.toDegrees=hi,fm.math.toRadians=fi,fm.net={},fm.net.ClientError=Hf,fm.net.ResponseError=Jf,fm.net.getJSON=function(t){return new Promise((function(n,i){var r=new XMLHttpRequest;r.addEventListener("load",(function(t){var r=t.target;if(!r.status||r.status>=200&&r.status<300){var s=void 0;try{s=JSON.parse(r.responseText)}catch(t){var o="Error parsing response text as JSON: "+t.message;return void i(new Error(o))}n(s)}else i(new Jf(r))})),r.addEventListener("error",(function(t){i(new Hf(t.target))})),r.open("GET",t),r.setRequestHeader("Accept","application/json"),r.send()}))},fm.net.jsonp=function(t,n,i,r){var s=document.createElement("script"),u="olc_"+o(n);function e(){delete window[u],s.parentNode.removeChild(s)}s.async=!0,s.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+u;var h=setTimeout((function(){e(),i&&i()}),1e4);window[u]=function(t){clearTimeout(h),e(),n(t)},document.getElementsByTagName("head")[0].appendChild(s)},fm.net.overrideXHR=function(t){"undefined"!=typeof XMLHttpRequest&&(Zf=XMLHttpRequest),global.XMLHttpRequest=t},fm.net.resolveUrl=function(t,n){return n.indexOf("://")>=0?n:new URL(n,t).href},fm.net.restoreXHR=function(){global.XMLHttpRequest=Zf},fm.obj={},fm.obj.assign=E,fm.obj.clear=S,fm.obj.getValues=T,fm.obj.isEmpty=A,fm.proj={},fm.proj.Projection=ni,fm.proj.Units={},fm.proj.Units.METERS_PER_UNIT=kt,fm.proj.Units.fromCode=function(t){return Nt[t]},fm.proj.addCommon=Ar,fm.proj.addCoordinateTransforms=lr,fm.proj.addEquivalentProjections=fr,fm.proj.addEquivalentTransforms=ar,fm.proj.addProjection=or,fm.proj.addProjections=ur,fm.proj.clearAllProjections=function(){Ai(),Ii()},fm.proj.clearUserProjection=function(){_r=null},fm.proj.cloneTransform=rr,fm.proj.createProjection=cr,fm.proj.createSafeCoordinateTransform=Tr,fm.proj.createTransformFromCoordinateTransform=vr,fm.proj.epsg3857={},fm.proj.epsg3857.EXTENT=wi,fm.proj.epsg3857.HALF_SIZE=di,fm.proj.epsg3857.MAX_SAFE_Y=yi,fm.proj.epsg3857.PROJECTIONS=_i,fm.proj.epsg3857.RADIUS=li,fm.proj.epsg3857.WORLD_EXTENT=pi,fm.proj.epsg3857.fromEPSG4326=gi,fm.proj.epsg3857.toEPSG4326=mi,fm.proj.epsg4326={},fm.proj.epsg4326.EXTENT=ji,fm.proj.epsg4326.METERS_PER_UNIT=xi,fm.proj.epsg4326.PROJECTIONS=Si,fm.proj.epsg4326.RADIUS=Mi,fm.proj.equivalent=dr,fm.proj.fromLonLat=function(t,n){return yr(t,"EPSG:4326",void 0!==n?n:"EPSG:3857")},fm.proj.fromUserCoordinate=Mr,fm.proj.fromUserExtent=xr,fm.proj.fromUserResolution=Sr,fm.proj.get=er,fm.proj.getPointResolution=hr,fm.proj.getTransform=pr,fm.proj.getTransformFromProjections=wr,fm.proj.getUserProjection=mr,fm.proj.identityTransform=sr,fm.proj.proj4={},fm.proj.proj4.register=function(t){var n,i,r=Object.keys(t.defs),s=r.length;for(n=0;n<s;++n){var o=r[n];if(!er(o)){var u=t.defs(o),e=u.units;e||"longlat"!==u.projName||(e=Pt.DEGREES),or(new ni({code:o,axisOrientation:u.axis,metersPerUnit:u.to_meter,units:e}))}}for(n=0;n<s;++n){var h=r[n],f=er(h);for(i=0;i<s;++i){var a=r[i],c=er(a);if(!Ri(h,a))if(t.defs[h]===t.defs[a])fr([f,c]);else{var v=t(h,a);lr(f,c,Tr(f,c,v.forward),Tr(c,f,v.inverse))}}}},fm.proj.projections={},fm.proj.projections.add=Ni,fm.proj.projections.clear=Ai,fm.proj.projections.get=Ci,fm.proj.setUserProjection=gr,fm.proj.toLonLat=function(t,n){var i=yr(t,void 0!==n?n:"EPSG:3857","EPSG:4326"),r=i[0];return(r<-180||r>180)&&(i[0]=ai(r+180,360)-180),i},fm.proj.toUserCoordinate=Or,fm.proj.toUserExtent=jr,fm.proj.toUserResolution=Er,fm.proj.transform=yr,fm.proj.transformExtent=br,fm.proj.transformWithProjections=function(t,n,i){return wr(n,i)(t)},fm.proj.transforms={},fm.proj.transforms.add=Pi,fm.proj.transforms.clear=Ii,fm.proj.transforms.get=Ri,fm.proj.transforms.remove=function(t,n){var i=t.getCode(),r=n.getCode(),s=ki[i][r];return delete ki[i][r],A(ki[i])&&delete ki[i],s},fm.proj.useGeographic=function(){gr("EPSG:4326")},fm.render={},fm.render.Box=Ch,fm.render.Event=eu,fm.render.Feature=Xw,fm.render.VectorContext=$f,fm.render.canvas={},fm.render.canvas.Builder=tw,fm.render.canvas.BuilderGroup=vw,fm.render.canvas.Executor=Mw,fm.render.canvas.ExecutorGroup=Tw,fm.render.canvas.ExecutorGroup.getPixelIndexArray=Sw,fm.render.canvas.ImageBuilder=iw,fm.render.canvas.Immediate=Qf,fm.render.canvas.Instruction={},fm.render.canvas.Instruction.beginPathInstruction=Hd,fm.render.canvas.Instruction.closePathInstruction=$d,fm.render.canvas.Instruction.fillInstruction=Zd,fm.render.canvas.Instruction.strokeInstruction=Jd,fm.render.canvas.LineStringBuilder=sw,fm.render.canvas.PolygonBuilder=uw,fm.render.canvas.TextBuilder=aw,fm.render.canvas.checkedFonts=Tu,fm.render.canvas.defaultFillStyle=_u,fm.render.canvas.defaultFont=bu,fm.render.canvas.defaultLineCap=gu,fm.render.canvas.defaultLineDash=mu,fm.render.canvas.defaultLineDashOffset=0,fm.render.canvas.defaultLineJoin=Ou,fm.render.canvas.defaultLineWidth=1,fm.render.canvas.defaultMiterLimit=Mu,fm.render.canvas.defaultPadding=Su,fm.render.canvas.defaultStrokeStyle=ju,fm.render.canvas.defaultTextAlign=xu,fm.render.canvas.defaultTextBaseline=Eu,fm.render.canvas.drawImageOrLabel=zu,fm.render.canvas.hitdetect={},fm.render.canvas.hitdetect.HIT_DETECT_RESOLUTION=Aw,fm.render.canvas.hitdetect.createHitDetectionImageData=Cw,fm.render.canvas.hitdetect.hitDetect=Nw,fm.render.canvas.labelCache=Au,fm.render.canvas.measureAndCacheTextWidth=Fu,fm.render.canvas.measureTextHeight=Ru,fm.render.canvas.measureTextWidth=Lu,fm.render.canvas.measureTextWidths=Du,fm.render.canvas.registerFont=Pu,fm.render.canvas.rotateAtOffset=function(t,n,i,r){0!==n&&(t.translate(i,r),t.rotate(n),t.translate(-i,-r))},fm.render.canvas.textHeights=Iu,fm.render.getRenderPixel=function(t,n){var i=n.slice(0);return Ht(t.inversePixelTransform.slice(),i),i},fm.render.getVectorContext=va,fm.render.toContext=function(t,n){var i=t.canvas,r=n||{},s=r.pixelRatio||zt,o=r.size;o&&(i.width=o[0]*s,i.height=o[1]*s,i.style.width=o[0]+"px",i.style.height=o[1]+"px");var u=[0,0,i.width,i.height],e=Kt([1,0,0,1,0,0],s,s);return new Qf(t,s,u,e,0)},fm.renderer={},fm.renderer.Composite=Xu,fm.renderer.Layer=Hc,fm.renderer.Map=ou,fm.renderer.canvas={},fm.renderer.canvas.ImageLayer=ad,fm.renderer.canvas.Layer=hd,fm.renderer.canvas.TileLayer=gd,fm.renderer.canvas.VectorImageLayer=Rw,fm.renderer.canvas.VectorLayer=Iw,fm.renderer.vector={},fm.renderer.vector.defaultOrder=ea,fm.renderer.vector.getSquaredTolerance=ha,fm.renderer.vector.getTolerance=fa,fm.renderer.vector.renderFeature=aa,fm.reproj={},fm.reproj.Image=Il,fm.reproj.Tile=Zl,fm.reproj.Triangulation=Nl,fm.reproj.calculateSourceExtentResolution=_a,fm.reproj.calculateSourceResolution=ba,fm.reproj.common={},fm.reproj.common.ENABLE_RASTER_REPROJECTION=Cl,fm.reproj.common.ERROR_THRESHOLD=.5,fm.reproj.render=ga,fm.resolutionconstraint={},fm.resolutionconstraint.createMinMaxResolution=Se,fm.resolutionconstraint.createSnapToPower=Ee,fm.resolutionconstraint.createSnapToResolutions=xe,fm.rotationconstraint={},fm.rotationconstraint.createSnapToN=Ce,fm.rotationconstraint.createSnapToZero=Ne,fm.rotationconstraint.disable=Te,fm.rotationconstraint.none=Ae,fm.size={},fm.size.buffer=ze,fm.size.hasArea=Ue,fm.size.scale=Xe,fm.size.toSize=Ye,fm.source={},fm.source.Cluster=gl,fm.source.DataTile=Al,fm.source.Image=zl,fm.source.Image.ImageSourceEvent=Fl,fm.source.Image.defaultImageLoadFunction=Dl,fm.source.ImageCanvas=Xl,fm.source.ImageMapGuide=Wl,fm.source.ImageStatic=Bl,fm.source.OSM=sd,fm.source.OSM.ATTRIBUTION=rd,fm.source.Raster=Fd,fm.source.Raster.Processor=Td,fm.source.Raster.RasterSourceEvent=Id,fm.source.Raster.newImageData=xd,fm.source.Source=hl,fm.source.Tile=Sl,fm.source.Tile.TileSourceEvent=El,fm.source.TileDebug=zd,fm.source.TileImage=Ql,fm.source.TileWMS=Bd,fm.source.UrlTile=Hl,fm.source.Vector=bl,fm.source.Vector.VectorSourceEvent=yl,fm.source.XYZ=nd,fm.source.common={},fm.source.common.IMAGE_SMOOTHING_DISABLED=wa,fm.sphere={},fm.sphere.DEFAULT_RADIUS=Gi,fm.sphere.getArea=function t(n,i){var r=i||{},s=r.radius||Gi,o=r.projection||"EPSG:3857",u=n.getType();u!==At.GEOMETRY_COLLECTION&&(n=n.clone().transform(o,"EPSG:4326"));var e,h,f,a,c,v,l=0;switch(u){case At.POINT:case At.MULTI_POINT:case At.LINE_STRING:case At.MULTI_LINE_STRING:case At.LINEAR_RING:break;case At.POLYGON:for(e=n.getCoordinates(),l=Math.abs(Di(e[0],s)),f=1,a=e.length;f<a;++f)l-=Math.abs(Di(e[f],s));break;case At.MULTI_POLYGON:for(f=0,a=(e=n.getCoordinates()).length;f<a;++f)for(h=e[f],l+=Math.abs(Di(h[0],s)),c=1,v=h.length;c<v;++c)l-=Math.abs(Di(h[c],s));break;case At.GEOMETRY_COLLECTION:var d=n.getGeometries();for(f=0,a=d.length;f<a;++f)l+=t(d[f],i);break;default:throw new Error("Unsupported geometry type: "+u)}return l},fm.sphere.getDistance=Li,fm.sphere.getLength=function t(n,i){var r=i||{},s=r.radius||Gi,o=r.projection||"EPSG:3857",u=n.getType();u!==At.GEOMETRY_COLLECTION&&(n=n.clone().transform(o,"EPSG:4326"));var e,h,f,a,c,v,l=0;switch(u){case At.POINT:case At.MULTI_POINT:break;case At.LINE_STRING:case At.LINEAR_RING:l=Fi(e=n.getCoordinates(),s);break;case At.MULTI_LINE_STRING:case At.POLYGON:for(f=0,a=(e=n.getCoordinates()).length;f<a;++f)l+=Fi(e[f],s);break;case At.MULTI_POLYGON:for(f=0,a=(e=n.getCoordinates()).length;f<a;++f)for(c=0,v=(h=e[f]).length;c<v;++c)l+=Fi(h[c],s);break;case At.GEOMETRY_COLLECTION:var d=n.getGeometries();for(f=0,a=d.length;f<a;++f)l+=t(d[f],i);break;default:throw new Error("Unsupported geometry type: "+u)}return l},fm.sphere.offset=zi,fm.string={},fm.string.compareVersions=Xi,fm.string.padNumber=Ui,fm.structs={},fm.structs.LRUCache=Mf,fm.structs.LinkedList=rl,fm.structs.PriorityQueue=ce,fm.structs.PriorityQueue.DROP=ae,fm.structs.RBush=ol,fm.style={},fm.style.Circle=fc,fm.style.Fill=ac,fm.style.Icon=Mc,fm.style.IconImage=mc,fm.style.IconImage.get=gc,fm.style.IconImageCache=Io,fm.style.IconImageCache.shared=Po,fm.style.Image=oc,fm.style.RegularShape=ec,fm.style.Stroke=jc,fm.style.Style=kc,fm.style.Style.createDefaultStyle=Ac,fm.style.Style.createEditingStyle=Cc,fm.style.Style.toFunction=Sc,fm.style.Text=Rc,fm.style.expressions={},fm.style.expressions.Operators=Gv,fm.style.expressions.arrayToGlsl=zv,fm.style.expressions.colorToGlsl=Uv,fm.style.expressions.expressionToGlsl=Wv,fm.style.expressions.getStringNumberEquivalent=Xv,fm.style.expressions.getValueType=Lv,fm.style.expressions.isTypeUnique=Fv,fm.style.expressions.numberToGlsl=Dv,fm.style.expressions.stringToGlsl=Yv,fm.style.expressions.uniformNameForVariable=tl,fm.tilecoord={},fm.tilecoord.createOrUpdate=jf,fm.tilecoord.fromKey=Sf,fm.tilecoord.getCacheKeyForTileKey=function(t){var n=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return xf(n[0],n[1],n[2])},fm.tilecoord.getKey=Ef,fm.tilecoord.getKeyZXY=xf,fm.tilecoord.hash=Tf,fm.tilecoord.withinExtentAndZ=Af,fm.tilegrid={},fm.tilegrid.TileGrid=Oa,fm.tilegrid.common={},fm.tilegrid.common.DEFAULT_MAX_ZOOM=42,fm.tilegrid.common.DEFAULT_TILE_SIZE=ge,fm.tilegrid.createForExtent=xa,fm.tilegrid.createForProjection=Ta,fm.tilegrid.createXYZ=Ea,fm.tilegrid.extentFromProjection=Aa,fm.tilegrid.getForProjection=Ma,fm.tilegrid.wrapX=ja,fm.tileurlfunction={},fm.tileurlfunction.createFromTemplate=Ca,fm.tileurlfunction.createFromTemplates=Na,fm.tileurlfunction.createFromTileUrlFunctions=ka,fm.tileurlfunction.expandUrl=Ia,fm.tileurlfunction.nullTileUrlFunction=function(t,n,i){},fm.transform={},fm.transform.apply=Ht,fm.transform.compose=tn,fm.transform.composeCssTransform=function(t,n,i,r,s,o,u){return sn(tn([1,0,0,1,0,0],t,n,i,r,s,o,u))},fm.transform.create=qt,fm.transform.determinant=rn,fm.transform.invert=function(t){return nn(t,t)},fm.transform.makeInverse=nn,fm.transform.makeScale=Qt,fm.transform.multiply=Vt,fm.transform.reset=Bt,fm.transform.rotate=$t,fm.transform.scale=Kt,fm.transform.set=Zt,fm.transform.setFromArray=Jt,fm.transform.toString=sn,fm.transform.translate=function(t,n,i){return Vt(t,Zt(Wt,1,0,0,1,n,i))},fm.uri={},fm.uri.appendParams=Pa,fm.util={},fm.util.VERSION=e,fm.util.abstract=r,fm.util.getUid=o,fm.vec={},fm.vec.mat4={},fm.vec.mat4.create=rc,fm.vec.mat4.fromTransform=sc,fm.xml={},fm.xml.OBJECT_PROPERTY_NODE_FACTORY=Ba,fm.xml.XML_SCHEMA_INSTANCE_URI=Ra,fm.xml.createElementNS=Ga,fm.xml.getAllTextContent=La,fm.xml.Lw=Fa,fm.xml.getAttributeNS=function(t,n,i){return t.getAttributeNS(n,i)||""},fm.xml.getDocument=ic,fm.xml.getXMLSerializer=tc,fm.xml.isDocument=Da,fm.xml.makeArrayExtender=function(t,n){return function(i,r){var s=t.call(void 0!==n?n:this,i,r);void 0!==s&&_(r[r.length-1],s)}},fm.xml.makeArrayPusher=Ua,fm.xml.makeArraySerializer=Wa,fm.xml.makeChildAppender=Ya,fm.xml.makeObjectPropertyPusher=function(t,n,i){return function(r,s){var o=t.call(void 0!==i?i:this,r,s);if(void 0!==o){var u=s[s.length-1],e=void 0!==n?n:r.localName,h=void 0;e in u?h=u[e]:(h=[],u[e]=h),h.push(o)}}},fm.xml.makeObjectPropertySetter=Xa,fm.xml.makeReplacer=function(t,n){return function(i,r){var s=t.call(void 0!==n?n:this,i,r);void 0!==s&&(r[r.length-1]=s)}},fm.xml.makeSequence=Va,fm.xml.makeSimpleNodeFactory=qa,fm.xml.makeStructureNS=Za,fm.xml.parse=za,fm.xml.parseNode=Ja,fm.xml.pushParseAndPop=Ha,fm.xml.pushSerializeAndPop=Ka,fm.xml.registerDocument=function(t){nc=t},fm.xml.registerXMLSerializer=function(t){Qa=t},fm.xml.serialize=$a;var am=fm}},n={};function i(r){var s=n[r];if(void 0!==s)return s.exports;var o=n[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.d=function(t,n){for(var r in n)i.o(n,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},i(760);var r=i(661);return r=r.default}()}));